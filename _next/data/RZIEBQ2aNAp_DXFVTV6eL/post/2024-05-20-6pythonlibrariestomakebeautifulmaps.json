{"pageProps":{"post":{"title":"아름다운 지도를 만들기 위한 6가지 파이썬 라이브러리","description":"","date":"2024-05-20 18:32","slug":"2024-05-20-6pythonlibrariestomakebeautifulmaps","content":"\n\n\n![image](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_0.png)\n\n어느 순간 모든 데이터 과학자는 지리 공간 데이터를 분석하거나 모델링할 필요에 직면하게 되며, 결정적인 시각적 부분 없이는 수행할 수 없습니다. 저는 지도를 좋아하는 사람이라서, 여기에서 정보를 제공하게 된 이 6가지 멋진 라이브러리를 공유해 주어 기쁩니다. 여기에서 공유하는 라이브러리들 중 일부는 정적 시각화에 더 적합하고, 다른 것들은 대화식 시각화에 더 적합하기 때문에 해결할 수 있는 문제 범위가 넓습니다.\n\n# 1. Cartopy\n\n![image](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_1.png)\n\n\n<div class=\"content-ad\"></div>\n\nCartopy는 스칼라 또는 폴리곤 데이터를 사용하여 정적 지도를 그리는 데 완벽한 강력한 잘 알려진 라이브러리입니다. 땅, 물 및 행정 국경에 많은 내장된 레이어를 제공합니다. 매우 쉽게 사용할 수 있으며 직관적인 명령어 세트가 있습니다.\n\n예를 들어, MODIS 데이터를 시각화해 보겠습니다. 함께 따라오고 싶다면 코드를 여기에서 찾을 수 있습니다.\n\n패키지를 설치하려면 다음과 같이 pip로 정규 표현식을 사용할 수 있습니다:\n\n```js\n!pip install cartopy\n```\n\n<div class=\"content-ad\"></div>\n\n이제 데이터를 로드해 봅시다:\n\n```js\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nlats = np.load('lats.npy')\nlons = np.load('lons.npy')\ndata = np.load('data.npy')\n```\n\n그 후에 데이터를 바로 플롯할 수 있어요:\n\n```js\nproj = ccrs.PlateCarree() #지도 투영을 설정해 봅시다\n\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj), figsize=(10, 20))#미리 설정한 투영과 크기를 가진 figure를 생성해야 해요\n\nax.set_extent([-160, -105, 40 ,70], crs=ccrs.PlateCarree())#MODIS 제품 지역만 포함하도록 좌표를 제한합시다\n\nplt.contourf(lons, lats, data,\n             transform=ccrs.PlateCarree(), cmap = 'summer') #matplotlib을 사용하여 데이터의 등고선을 추가합시다\n'''좋은 cartopy 기능 추가하기'''\nax.add_feature(cfeature.BORDERS, edgecolor='black', linewidth=1) \nax.add_feature(cfeature.LAKES,  alpha=0.5)\nax.add_feature(cfeature.LAND)\nax.add_feature(cfeature.COASTLINE, edgecolor='black', linewidth=1)\nax.add_feature(cartopy.feature.RIVERS, edgecolor='blue', linewidth=0.5)\nstates_provinces = cfeature.NaturalEarthFeature(\n            category='cultural',  name='admin_1_states_provinces',\n            scale='10m', facecolor='none')\nax.add_feature(states_provinces, edgecolor='black', zorder=10, linestyle = '-', linewidth=0.5)\n\n\nax.gridlines(draw_labels=True)#그리드 형식 지정\n\nlon, lat = -122.8414, 55.1119 \nax.plot(lon,lat,  'bo', markersize=6, color = 'red', transform=ccrs.Geodetic())#지도에 임의의 마커 추가하기\n```\n\n<div class=\"content-ad\"></div>\n\n\n![Image 1](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_2.png)\n\n위 결과에서 알 수 있듯이, cartopy는 맵을 사용자 정의하는 다양한 방법을 제공합니다. 색상, 선 두께, 밀도 및 레이어의 다른 매개변수를 수동으로 설정할 수 있습니다. 게다가 코드 자체가 정말 직관적이고 이해하기 쉽습니다.\n\n이 라이브러리의 또 다른 큰 장점은 사용할 수 있는 다양한 투영법들인데, cartopy를 사용하여 시각화할 수 있는 데이터 범위가 매우 넓습니다!\n\n![Image 2](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_3.png)\n\n\n<div class=\"content-ad\"></div>\n\n\n![Python libraries to make beautiful maps](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_4.png)\n\nCartopy is one of the tools I regularly use in my work, and I hope that you’ll find it extremely helpful as well!\n\n## 2. Folium\n\nThis library is probably the most popular in the industry, since it’s interactive (it has JS under the hood) and highly customizable. And to start plotting (after installation) you can simply call:\n\n\n<div class=\"content-ad\"></div>\n\n```md\nimport folium\nmap = folium.Map(location=(50, 0), zoom_start=8) # 위치 - 맵의 중앙, 확대 수준 - 해상도\nmap\n```\n\n![이미지](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_5.png)\n\n다른 기본 타일 또는 사용자 정의 타일을 사용할 수 있습니다:\n\n```md\nmap = folium.Map(location=(50, 0), zoom_start=8, tiles=\"Cartodb Positron\")\nmap\n```\n\n<div class=\"content-ad\"></div>\n\n\n![image](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_6.png)\n\n이제 세계 국가들을 추가해보겠습니다. 그러려면 기본 geopandas 데이터프레임을 사용할 거에요:\n\n```python\nimport geopandas as gpd\ndf = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\n\nmap = folium.Map(zoom_start=4, tiles=\"Cartodb Positron\")\ngdf_json = df.to_json()\n\nfolium.GeoJson(gdf_json).add_to(map)\nmap\n```\n\n![image](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_7.png)\n\n\n<div class=\"content-ad\"></div>\n\n# 3. Plotly\n\nPlotly는 아름다운 대화형 차트로 유명한 또 다른 라이브러리입니다. 다양한 기능 중에는 px.choropleth, px.choropleth_mapbox, px.scatter_mapbox, px.scatter_geo 등의 지도를 그리는 여러 함수가 있습니다. 더 자세한 내용은 [여기](https://plotly.com/python/)에서 확인할 수 있습니다.\n\n실제로 같은 지리 데이터셋을 사용하여 gdp_md_est 변수를 시각화해 보겠습니다. 다음 코드 몇 줄로 쉽게 수행할 수 있습니다:\n\n```python\nimport plotly.express as px\n\nfig = px.choropleth(df, locations='iso_a3', hover_name='name', \n                    color='gdp_md_est',\n                    projection='natural earth')\nfig.show()\n```\n\n<div class=\"content-ad\"></div>\n\n\n![image](https://miro.medium.com/v2/resize:fit:1400/1*XGb8bY8LL26sKv2Wmkb-AQ.gif)\n\n# 4. ipyleaflet\n\n네 소개할 라이브러리는 'ipyleaflet'입니다. 이것은 상호작용형 지도를 만들기 위한 또 다른 훌륭한 JS 기반 라이브러리입니다. 이 패키지가 좋은 이유 중 하나는 타일의 종류가 많다는 것이에요. 그러니 기본적인 것부터 시작해봅시다:\n\n```js\nfrom ipyleaflet import Map\n\nm = Map(center=(45, 2), zoom=5)\nm\n```\n\n\n<div class=\"content-ad\"></div>\n\n\n![image](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_8.png)\n\n별 거 없죠? 그럼 이제 MODIS Terra 제품을 배경지도로 사용해 봅시다!\n\n```js\nm = Map(basemap=basemap_to_tiles(basemaps.NASAGIBS.ModisTerraTrueColorCR, \"2023-08-08\"),\n    center=(45, 2), zoom=5)\nm\n```\n\n![image](/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_9.png)\n\n\n<div class=\"content-ad\"></div>\n\nVIIRS 데이터를 사용하여 밤에 지구를 시각화할 수도 있어요:\n\n```js\nm = Map(basemap=basemaps.NASAGIBS.ViirsEarthAtNight2012,\n    center=(45, 2), zoom=5)\nm\n```\n\n<img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_10.png\" />\n\n다른 옵션들도 함께 살펴보세요! 옵션이 많이 있답니다.\n\n<div class=\"content-ad\"></div>\n\n이제 실제 데이터를 시각화해 봅시다. 발견한 라이브러리 중 가장 인상적인 기능 중 하나는 속도 시각화입니다. 이를 위해 1° 해상도를 가진 NCEP(WMC) 예측 데이터를 사용할 수 있습니다. 해당 데이터셋은 2016년 4월 30일 06:00에 가져와졌고, ipyleaflet 라이브러리의 문서에서 제공되었습니다. 이를 읽기 위해 netCDF4 파일을 읽는 데 적합한 xarray를 사용할 것입니다.\n\n```js\nfrom ipyleaflet.velocity import Velocity\nimport xarray as xr\nimport os\nimport requests\n\nif not os.path.exists('wind-global.nc'):\n  url = 'https://github.com/benbovy/xvelmap/raw/master/notebooks/wind-global.nc'\n  r = requests.get(url)\n  wind_data = r.content\n  with open('wind-global.nc', 'wb') as f:\n      f.write(wind_data)\n\nm = Map(center=(45, 2), zoom=4, interpolation='nearest', basemap=basemaps.CartoDB.DarkMatter)\n\nds = xr.open_dataset('wind-global.nc')\n\nwind = Velocity(data=ds,\n                zonal_speed='u_wind',\n                meridional_speed='v_wind',\n                latitude_dimension='lat',\n                longitude_dimension='lon',\n                velocity_scale=0.01,\n                max_velocity=20)\nm.add(wind)\n\nm\n```\n\n<img src=\"https://miro.medium.com/v2/resize:fit:1400/1*ImNN4p5UxlISf-p22XbGGQ.gif\" />\n\n보시다시피 결과물은 단순히 상호작용형 지도가 아니라 애니메이션 지도입니다. 그렇기 때문에 데이터의 표현력을 향상시키고 데이터가 말하도록 만들어 줍니다!\n\n<div class=\"content-ad\"></div>\n\n# 5. geemap\n\nGeemap은 Google Earth Engine과 통합된 대화식 맵핑을 위한 패키지입니다. 따라서 Python GEE 패키지인 ee 라이브러리와 함께 사용할 때 매우 편리합니다.\n\n데모로 북유럽 한 섬에서 Dynamic World 제품의 토지 피복 데이터를 수집해 보겠습니다:\n\n```js\nimport ee\n\n반지름 = 1250\n지점 = ee.Geometry.Point([19.9, 60.2])\nroi = 지점.buffer(반지름) # 관심 지점 주변에 원 만들기\n\nDW = ee.ImageCollection(\"GOOGLE/DYNAMICWORLD/V1\")\\\n                  .filterDate(start = '2022-07-08', end='2022-08-30')\\\n                  .filterBounds(roi) # 데이터 가져오기\nDW_list = DW.toList(DW.size()) # 데이터를 GEE 리스트로 변환\n```\n\n<div class=\"content-ad\"></div>\n\n이제 그래픽 플로팅을 할 수 있어요:\n\n```js\nm = geemap.Map(center=[60.2, 19.9], zoom=14)\n\nm.add_basemap('HYBRID') # Sentinel-2 이미지 레이어를 추가하고 있어요\nviz_params = {'bands':'label', 'min':0, 'max':8,\n'palette':['419bdf',\n    '397d49',\n    '88b053',\n    '7a87c6',\n    'e49635',\n    'dfc35a',\n    'c4281b',\n    'a59b8f',\n    'b39fe1']}\nm.add_ee_layer(ee.Image(DW_list.get(9)), viz_params) # 구름 커버리지가 낮은 이미지 №9를 추가하였어요\nm.add_legend(title=\"Dynamic World Land Cover\", builtin_legend='Dynamic_World')\ndisplay(m)\n```\n\n<img src=\"https://miro.medium.com/v2/resize:fit:1400/1*Rj0DI3lXmhlSdmRK7IiRKg.gif\" />\n\ngeemap은 GEE와 함께 사용하기 훌륭한 도구라고 생각해요. 다양한 기능을 제공하여 다양한 작업을 해결할 수 있어요. 주요하고 유일한 단점은 사용자 친화적이지 않다는 점이에요. geemap을 사용하기 전에 ee 라이브러리 문법을 알아야 하고, GEE가 어떻게 작동하는지 일반적으로 이해해야 해요.\n\n<div class=\"content-ad\"></div>\n\n# 6. ridgemap\n\n이 라이브러리는 마지막이자 정말로 제가 가장 좋아하는 라이브러리입니다. 왜냐하면 이 라이브러리를 사용하면 예술작품 같은 독특한 플롯을 만들 수 있기 때문이죠.\n\n그래프를 그리기 전에 두 라이브러리를 설치해보겠습니다:\n\n```js\n!pip install ridge_map mplcyberpunk\n```\n\n<div class=\"content-ad\"></div>\n\n이제 맵을 만들어 봅시다:\n\n```js\nimport matplotlib.pyplot as plt\nfrom ridge_map import FontManager, RidgeMap\nimport ridge_map as rm\nimport mplcyberpunk\nimport matplotlib.font_manager as fm\n\nplt.style.use(\"cyberpunk\")\nplt.rcParams[\"figure.figsize\"] = (16,9)\n\nfm = FontManager('https://github.com/google/fonts/blob/main/ofl/arbutusslab/ArbutusSlab-Regular.ttf?raw=true')\n\nr = RidgeMap(bbox=(-15, 32, 45,90), font=fm.prop) # 맵 생성\n\nvalues = r.get_elevation_data(num_lines=200) # 고도 데이터 가져오기\nvalues = r.preprocess(values=values, # 하이퍼파라미터 설정\n   water_ntile=70,\n   vertical_ratio=40,\n   lake_flatness=3)\n\nr.plot_map(values, label=\"Europe\", label_x=0.4,label_y=-0.05, label_size=60, line_color=plt.get_cmap('inferno'), background_color=\"#212946\")\nmplcyberpunk.add_glow_effects() # 빛나는 효과 추가\n```\n\n<img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_11.png\" />\n\n내 의견으로는 이것이 정말 멋지네요! 이 라이브러리를 확인하고 다른 시각화를 찾아보고 자신만의 시각화를 올려보세요 :)\n\n<div class=\"content-ad\"></div>\n\n나중에 이 라이브러리들이 유용하고 당신의 도구상자에 포함할 가치가 있다고 느끼길 바랍니다.\n\n지도를 만드는 데 사용하는 라이브러리는 무엇인가요? 댓글로 공유해주세요👇\n\n===========================================\n\n부. (지리)데이터 과학, 머신러닝/인공지능, 기후 변화에 열정적입니다. 그래서 어떤 프로젝트에서 함께 일하고 싶다면 여기나 LinkedIn에서 연락주세요.\n\n<div class=\"content-ad\"></div>\n\n더 많은 내용을 보려면 팔로우해주세요! 🚀🌌","ogImage":{"url":"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_0.png"},"coverImage":"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_0.png","tag":["Tech"],"readingTime":10},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_0.png\" alt=\"image\"></p>\n<p>어느 순간 모든 데이터 과학자는 지리 공간 데이터를 분석하거나 모델링할 필요에 직면하게 되며, 결정적인 시각적 부분 없이는 수행할 수 없습니다. 저는 지도를 좋아하는 사람이라서, 여기에서 정보를 제공하게 된 이 6가지 멋진 라이브러리를 공유해 주어 기쁩니다. 여기에서 공유하는 라이브러리들 중 일부는 정적 시각화에 더 적합하고, 다른 것들은 대화식 시각화에 더 적합하기 때문에 해결할 수 있는 문제 범위가 넓습니다.</p>\n<h1>1. Cartopy</h1>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_1.png\" alt=\"image\"></p>\n<p>Cartopy는 스칼라 또는 폴리곤 데이터를 사용하여 정적 지도를 그리는 데 완벽한 강력한 잘 알려진 라이브러리입니다. 땅, 물 및 행정 국경에 많은 내장된 레이어를 제공합니다. 매우 쉽게 사용할 수 있으며 직관적인 명령어 세트가 있습니다.</p>\n<p>예를 들어, MODIS 데이터를 시각화해 보겠습니다. 함께 따라오고 싶다면 코드를 여기에서 찾을 수 있습니다.</p>\n<p>패키지를 설치하려면 다음과 같이 pip로 정규 표현식을 사용할 수 있습니다:</p>\n<pre><code class=\"hljs language-js\">!pip install cartopy\n</code></pre>\n<p>이제 데이터를 로드해 봅시다:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> numpy <span class=\"hljs-keyword\">as</span> np\n<span class=\"hljs-keyword\">import</span> matplotlib.<span class=\"hljs-property\">pyplot</span> <span class=\"hljs-keyword\">as</span> plt\n\nlats = np.<span class=\"hljs-title function_\">load</span>(<span class=\"hljs-string\">'lats.npy'</span>)\nlons = np.<span class=\"hljs-title function_\">load</span>(<span class=\"hljs-string\">'lons.npy'</span>)\ndata = np.<span class=\"hljs-title function_\">load</span>(<span class=\"hljs-string\">'data.npy'</span>)\n</code></pre>\n<p>그 후에 데이터를 바로 플롯할 수 있어요:</p>\n<pre><code class=\"hljs language-js\">proj = ccrs.<span class=\"hljs-title class_\">PlateCarree</span>() #지도 투영을 설정해 봅시다\n\nfig, ax = plt.<span class=\"hljs-title function_\">subplots</span>(subplot_kw=<span class=\"hljs-title function_\">dict</span>(projection=proj), figsize=(<span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">20</span>))#미리 설정한 투영과 크기를 가진 figure를 생성해야 해요\n\nax.<span class=\"hljs-title function_\">set_extent</span>([-<span class=\"hljs-number\">160</span>, -<span class=\"hljs-number\">105</span>, <span class=\"hljs-number\">40</span> ,<span class=\"hljs-number\">70</span>], crs=ccrs.<span class=\"hljs-title class_\">PlateCarree</span>())#<span class=\"hljs-variable constant_\">MODIS</span> 제품 지역만 포함하도록 좌표를 제한합시다\n\nplt.<span class=\"hljs-title function_\">contourf</span>(lons, lats, data,\n             transform=ccrs.<span class=\"hljs-title class_\">PlateCarree</span>(), cmap = <span class=\"hljs-string\">'summer'</span>) #matplotlib을 사용하여 데이터의 등고선을 추가합시다\n<span class=\"hljs-string\">''</span><span class=\"hljs-string\">'좋은 cartopy 기능 추가하기'</span><span class=\"hljs-string\">''</span>\nax.<span class=\"hljs-title function_\">add_feature</span>(cfeature.<span class=\"hljs-property\">BORDERS</span>, edgecolor=<span class=\"hljs-string\">'black'</span>, linewidth=<span class=\"hljs-number\">1</span>) \nax.<span class=\"hljs-title function_\">add_feature</span>(cfeature.<span class=\"hljs-property\">LAKES</span>,  alpha=<span class=\"hljs-number\">0.5</span>)\nax.<span class=\"hljs-title function_\">add_feature</span>(cfeature.<span class=\"hljs-property\">LAND</span>)\nax.<span class=\"hljs-title function_\">add_feature</span>(cfeature.<span class=\"hljs-property\">COASTLINE</span>, edgecolor=<span class=\"hljs-string\">'black'</span>, linewidth=<span class=\"hljs-number\">1</span>)\nax.<span class=\"hljs-title function_\">add_feature</span>(cartopy.<span class=\"hljs-property\">feature</span>.<span class=\"hljs-property\">RIVERS</span>, edgecolor=<span class=\"hljs-string\">'blue'</span>, linewidth=<span class=\"hljs-number\">0.5</span>)\nstates_provinces = cfeature.<span class=\"hljs-title class_\">NaturalEarthFeature</span>(\n            category=<span class=\"hljs-string\">'cultural'</span>,  name=<span class=\"hljs-string\">'admin_1_states_provinces'</span>,\n            scale=<span class=\"hljs-string\">'10m'</span>, facecolor=<span class=\"hljs-string\">'none'</span>)\nax.<span class=\"hljs-title function_\">add_feature</span>(states_provinces, edgecolor=<span class=\"hljs-string\">'black'</span>, zorder=<span class=\"hljs-number\">10</span>, linestyle = <span class=\"hljs-string\">'-'</span>, linewidth=<span class=\"hljs-number\">0.5</span>)\n\n\nax.<span class=\"hljs-title function_\">gridlines</span>(draw_labels=<span class=\"hljs-title class_\">True</span>)#그리드 형식 지정\n\nlon, lat = -<span class=\"hljs-number\">122.8414</span>, <span class=\"hljs-number\">55.1119</span> \nax.<span class=\"hljs-title function_\">plot</span>(lon,lat,  <span class=\"hljs-string\">'bo'</span>, markersize=<span class=\"hljs-number\">6</span>, color = <span class=\"hljs-string\">'red'</span>, transform=ccrs.<span class=\"hljs-title class_\">Geodetic</span>())#지도에 임의의 마커 추가하기\n</code></pre>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_2.png\" alt=\"Image 1\"></p>\n<p>위 결과에서 알 수 있듯이, cartopy는 맵을 사용자 정의하는 다양한 방법을 제공합니다. 색상, 선 두께, 밀도 및 레이어의 다른 매개변수를 수동으로 설정할 수 있습니다. 게다가 코드 자체가 정말 직관적이고 이해하기 쉽습니다.</p>\n<p>이 라이브러리의 또 다른 큰 장점은 사용할 수 있는 다양한 투영법들인데, cartopy를 사용하여 시각화할 수 있는 데이터 범위가 매우 넓습니다!</p>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_3.png\" alt=\"Image 2\"></p>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_4.png\" alt=\"Python libraries to make beautiful maps\"></p>\n<p>Cartopy is one of the tools I regularly use in my work, and I hope that you’ll find it extremely helpful as well!</p>\n<h2>2. Folium</h2>\n<p>This library is probably the most popular in the industry, since it’s interactive (it has JS under the hood) and highly customizable. And to start plotting (after installation) you can simply call:</p>\n<pre><code class=\"hljs language-md\">import folium\nmap = folium.Map(location=(50, 0), zoom<span class=\"hljs-emphasis\">_start=8) # 위치 - 맵의 중앙, 확대 수준 - 해상도\nmap\n</span></code></pre>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_5.png\" alt=\"이미지\"></p>\n<p>다른 기본 타일 또는 사용자 정의 타일을 사용할 수 있습니다:</p>\n<pre><code class=\"hljs language-md\">map = folium.Map(location=(50, 0), zoom<span class=\"hljs-emphasis\">_start=8, tiles=\"Cartodb Positron\")\nmap\n</span></code></pre>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_6.png\" alt=\"image\"></p>\n<p>이제 세계 국가들을 추가해보겠습니다. 그러려면 기본 geopandas 데이터프레임을 사용할 거에요:</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> geopandas <span class=\"hljs-keyword\">as</span> gpd\ndf = gpd.read_file(gpd.datasets.get_path(<span class=\"hljs-string\">'naturalearth_lowres'</span>))\n\n<span class=\"hljs-built_in\">map</span> = folium.Map(zoom_start=<span class=\"hljs-number\">4</span>, tiles=<span class=\"hljs-string\">\"Cartodb Positron\"</span>)\ngdf_json = df.to_json()\n\nfolium.GeoJson(gdf_json).add_to(<span class=\"hljs-built_in\">map</span>)\n<span class=\"hljs-built_in\">map</span>\n</code></pre>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_7.png\" alt=\"image\"></p>\n<h1>3. Plotly</h1>\n<p>Plotly는 아름다운 대화형 차트로 유명한 또 다른 라이브러리입니다. 다양한 기능 중에는 px.choropleth, px.choropleth_mapbox, px.scatter_mapbox, px.scatter_geo 등의 지도를 그리는 여러 함수가 있습니다. 더 자세한 내용은 <a href=\"https://plotly.com/python/\" rel=\"nofollow\" target=\"_blank\">여기</a>에서 확인할 수 있습니다.</p>\n<p>실제로 같은 지리 데이터셋을 사용하여 gdp_md_est 변수를 시각화해 보겠습니다. 다음 코드 몇 줄로 쉽게 수행할 수 있습니다:</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> plotly.express <span class=\"hljs-keyword\">as</span> px\n\nfig = px.choropleth(df, locations=<span class=\"hljs-string\">'iso_a3'</span>, hover_name=<span class=\"hljs-string\">'name'</span>, \n                    color=<span class=\"hljs-string\">'gdp_md_est'</span>,\n                    projection=<span class=\"hljs-string\">'natural earth'</span>)\nfig.show()\n</code></pre>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:1400/1*XGb8bY8LL26sKv2Wmkb-AQ.gif\" alt=\"image\"></p>\n<h1>4. ipyleaflet</h1>\n<p>네 소개할 라이브러리는 'ipyleaflet'입니다. 이것은 상호작용형 지도를 만들기 위한 또 다른 훌륭한 JS 기반 라이브러리입니다. 이 패키지가 좋은 이유 중 하나는 타일의 종류가 많다는 것이에요. 그러니 기본적인 것부터 시작해봅시다:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">from</span> ipyleaflet <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Map</span>\n\nm = <span class=\"hljs-title class_\">Map</span>(center=(<span class=\"hljs-number\">45</span>, <span class=\"hljs-number\">2</span>), zoom=<span class=\"hljs-number\">5</span>)\nm\n</code></pre>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_8.png\" alt=\"image\"></p>\n<p>별 거 없죠? 그럼 이제 MODIS Terra 제품을 배경지도로 사용해 봅시다!</p>\n<pre><code class=\"hljs language-js\">m = <span class=\"hljs-title class_\">Map</span>(basemap=<span class=\"hljs-title function_\">basemap_to_tiles</span>(basemaps.<span class=\"hljs-property\">NASAGIBS</span>.<span class=\"hljs-property\">ModisTerraTrueColorCR</span>, <span class=\"hljs-string\">\"2023-08-08\"</span>),\n    center=(<span class=\"hljs-number\">45</span>, <span class=\"hljs-number\">2</span>), zoom=<span class=\"hljs-number\">5</span>)\nm\n</code></pre>\n<p><img src=\"/assets/img/2024-05-20-6pythonlibrariestomakebeautifulmaps_9.png\" alt=\"image\"></p>\n<p>VIIRS 데이터를 사용하여 밤에 지구를 시각화할 수도 있어요:</p>\n<pre><code class=\"hljs language-js\">m = <span class=\"hljs-title class_\">Map</span>(basemap=basemaps.<span class=\"hljs-property\">NASAGIBS</span>.<span class=\"hljs-property\">ViirsEarthAtNight2012</span>,\n    center=(<span class=\"hljs-number\">45</span>, <span class=\"hljs-number\">2</span>), zoom=<span class=\"hljs-number\">5</span>)\nm\n</code></pre>\n<p>다른 옵션들도 함께 살펴보세요! 옵션이 많이 있답니다.</p>\n<p>이제 실제 데이터를 시각화해 봅시다. 발견한 라이브러리 중 가장 인상적인 기능 중 하나는 속도 시각화입니다. 이를 위해 1° 해상도를 가진 NCEP(WMC) 예측 데이터를 사용할 수 있습니다. 해당 데이터셋은 2016년 4월 30일 06:00에 가져와졌고, ipyleaflet 라이브러리의 문서에서 제공되었습니다. 이를 읽기 위해 netCDF4 파일을 읽는 데 적합한 xarray를 사용할 것입니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">from</span> ipyleaflet.<span class=\"hljs-property\">velocity</span> <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Velocity</span>\n<span class=\"hljs-keyword\">import</span> xarray <span class=\"hljs-keyword\">as</span> xr\n<span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-keyword\">if</span> not os.<span class=\"hljs-property\">path</span>.<span class=\"hljs-title function_\">exists</span>(<span class=\"hljs-string\">'wind-global.nc'</span>):\n  url = <span class=\"hljs-string\">'https://github.com/benbovy/xvelmap/raw/master/notebooks/wind-global.nc'</span>\n  r = requests.<span class=\"hljs-title function_\">get</span>(url)\n  wind_data = r.<span class=\"hljs-property\">content</span>\n  <span class=\"hljs-keyword\">with</span> <span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">'wind-global.nc'</span>, <span class=\"hljs-string\">'wb'</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-attr\">f</span>:\n      f.<span class=\"hljs-title function_\">write</span>(wind_data)\n\nm = <span class=\"hljs-title class_\">Map</span>(center=(<span class=\"hljs-number\">45</span>, <span class=\"hljs-number\">2</span>), zoom=<span class=\"hljs-number\">4</span>, interpolation=<span class=\"hljs-string\">'nearest'</span>, basemap=basemaps.<span class=\"hljs-property\">CartoDB</span>.<span class=\"hljs-property\">DarkMatter</span>)\n\nds = xr.<span class=\"hljs-title function_\">open_dataset</span>(<span class=\"hljs-string\">'wind-global.nc'</span>)\n\nwind = <span class=\"hljs-title class_\">Velocity</span>(data=ds,\n                zonal_speed=<span class=\"hljs-string\">'u_wind'</span>,\n                meridional_speed=<span class=\"hljs-string\">'v_wind'</span>,\n                latitude_dimension=<span class=\"hljs-string\">'lat'</span>,\n                longitude_dimension=<span class=\"hljs-string\">'lon'</span>,\n                velocity_scale=<span class=\"hljs-number\">0.01</span>,\n                max_velocity=<span class=\"hljs-number\">20</span>)\nm.<span class=\"hljs-title function_\">add</span>(wind)\n\nm\n</code></pre>\n<p>보시다시피 결과물은 단순히 상호작용형 지도가 아니라 애니메이션 지도입니다. 그렇기 때문에 데이터의 표현력을 향상시키고 데이터가 말하도록 만들어 줍니다!</p>\n<h1>5. geemap</h1>\n<p>Geemap은 Google Earth Engine과 통합된 대화식 맵핑을 위한 패키지입니다. 따라서 Python GEE 패키지인 ee 라이브러리와 함께 사용할 때 매우 편리합니다.</p>\n<p>데모로 북유럽 한 섬에서 Dynamic World 제품의 토지 피복 데이터를 수집해 보겠습니다:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> ee\n\n반지름 = <span class=\"hljs-number\">1250</span>\n지점 = ee.<span class=\"hljs-property\">Geometry</span>.<span class=\"hljs-title class_\">Point</span>([<span class=\"hljs-number\">19.9</span>, <span class=\"hljs-number\">60.2</span>])\nroi = 지점.<span class=\"hljs-title function_\">buffer</span>(반지름) # 관심 지점 주변에 원 만들기\n\n<span class=\"hljs-variable constant_\">DW</span> = ee.<span class=\"hljs-title class_\">ImageCollection</span>(<span class=\"hljs-string\">\"GOOGLE/DYNAMICWORLD/V1\"</span>)\\\n                  .<span class=\"hljs-title function_\">filterDate</span>(start = <span class=\"hljs-string\">'2022-07-08'</span>, end=<span class=\"hljs-string\">'2022-08-30'</span>)\\\n                  .<span class=\"hljs-title function_\">filterBounds</span>(roi) # 데이터 가져오기\nDW_list = <span class=\"hljs-variable constant_\">DW</span>.<span class=\"hljs-title function_\">toList</span>(<span class=\"hljs-variable constant_\">DW</span>.<span class=\"hljs-title function_\">size</span>()) # 데이터를 <span class=\"hljs-variable constant_\">GEE</span> 리스트로 변환\n</code></pre>\n<p>이제 그래픽 플로팅을 할 수 있어요:</p>\n<pre><code class=\"hljs language-js\">m = geemap.<span class=\"hljs-title class_\">Map</span>(center=[<span class=\"hljs-number\">60.2</span>, <span class=\"hljs-number\">19.9</span>], zoom=<span class=\"hljs-number\">14</span>)\n\nm.<span class=\"hljs-title function_\">add_basemap</span>(<span class=\"hljs-string\">'HYBRID'</span>) # <span class=\"hljs-title class_\">Sentinel</span>-<span class=\"hljs-number\">2</span> 이미지 레이어를 추가하고 있어요\nviz_params = {<span class=\"hljs-string\">'bands'</span>:<span class=\"hljs-string\">'label'</span>, <span class=\"hljs-string\">'min'</span>:<span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">'max'</span>:<span class=\"hljs-number\">8</span>,\n<span class=\"hljs-string\">'palette'</span>:[<span class=\"hljs-string\">'419bdf'</span>,\n    <span class=\"hljs-string\">'397d49'</span>,\n    <span class=\"hljs-string\">'88b053'</span>,\n    <span class=\"hljs-string\">'7a87c6'</span>,\n    <span class=\"hljs-string\">'e49635'</span>,\n    <span class=\"hljs-string\">'dfc35a'</span>,\n    <span class=\"hljs-string\">'c4281b'</span>,\n    <span class=\"hljs-string\">'a59b8f'</span>,\n    <span class=\"hljs-string\">'b39fe1'</span>]}\nm.<span class=\"hljs-title function_\">add_ee_layer</span>(ee.<span class=\"hljs-title class_\">Image</span>(DW_list.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-number\">9</span>)), viz_params) # 구름 커버리지가 낮은 이미지 №<span class=\"hljs-number\">9</span>를 추가하였어요\nm.<span class=\"hljs-title function_\">add_legend</span>(title=<span class=\"hljs-string\">\"Dynamic World Land Cover\"</span>, builtin_legend=<span class=\"hljs-string\">'Dynamic_World'</span>)\n<span class=\"hljs-title function_\">display</span>(m)\n</code></pre>\n<p>geemap은 GEE와 함께 사용하기 훌륭한 도구라고 생각해요. 다양한 기능을 제공하여 다양한 작업을 해결할 수 있어요. 주요하고 유일한 단점은 사용자 친화적이지 않다는 점이에요. geemap을 사용하기 전에 ee 라이브러리 문법을 알아야 하고, GEE가 어떻게 작동하는지 일반적으로 이해해야 해요.</p>\n<h1>6. ridgemap</h1>\n<p>이 라이브러리는 마지막이자 정말로 제가 가장 좋아하는 라이브러리입니다. 왜냐하면 이 라이브러리를 사용하면 예술작품 같은 독특한 플롯을 만들 수 있기 때문이죠.</p>\n<p>그래프를 그리기 전에 두 라이브러리를 설치해보겠습니다:</p>\n<pre><code class=\"hljs language-js\">!pip install ridge_map mplcyberpunk\n</code></pre>\n<p>이제 맵을 만들어 봅시다:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> matplotlib.<span class=\"hljs-property\">pyplot</span> <span class=\"hljs-keyword\">as</span> plt\n<span class=\"hljs-keyword\">from</span> ridge_map <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">FontManager</span>, <span class=\"hljs-title class_\">RidgeMap</span>\n<span class=\"hljs-keyword\">import</span> ridge_map <span class=\"hljs-keyword\">as</span> rm\n<span class=\"hljs-keyword\">import</span> mplcyberpunk\n<span class=\"hljs-keyword\">import</span> matplotlib.<span class=\"hljs-property\">font_manager</span> <span class=\"hljs-keyword\">as</span> fm\n\nplt.<span class=\"hljs-property\">style</span>.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">\"cyberpunk\"</span>)\nplt.<span class=\"hljs-property\">rcParams</span>[<span class=\"hljs-string\">\"figure.figsize\"</span>] = (<span class=\"hljs-number\">16</span>,<span class=\"hljs-number\">9</span>)\n\nfm = <span class=\"hljs-title class_\">FontManager</span>(<span class=\"hljs-string\">'https://github.com/google/fonts/blob/main/ofl/arbutusslab/ArbutusSlab-Regular.ttf?raw=true'</span>)\n\nr = <span class=\"hljs-title class_\">RidgeMap</span>(bbox=(-<span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">32</span>, <span class=\"hljs-number\">45</span>,<span class=\"hljs-number\">90</span>), font=fm.<span class=\"hljs-property\">prop</span>) # 맵 생성\n\nvalues = r.<span class=\"hljs-title function_\">get_elevation_data</span>(num_lines=<span class=\"hljs-number\">200</span>) # 고도 데이터 가져오기\nvalues = r.<span class=\"hljs-title function_\">preprocess</span>(values=values, # 하이퍼파라미터 설정\n   water_ntile=<span class=\"hljs-number\">70</span>,\n   vertical_ratio=<span class=\"hljs-number\">40</span>,\n   lake_flatness=<span class=\"hljs-number\">3</span>)\n\nr.<span class=\"hljs-title function_\">plot_map</span>(values, label=<span class=\"hljs-string\">\"Europe\"</span>, label_x=<span class=\"hljs-number\">0.4</span>,label_y=-<span class=\"hljs-number\">0.05</span>, label_size=<span class=\"hljs-number\">60</span>, line_color=plt.<span class=\"hljs-title function_\">get_cmap</span>(<span class=\"hljs-string\">'inferno'</span>), background_color=<span class=\"hljs-string\">\"#212946\"</span>)\nmplcyberpunk.<span class=\"hljs-title function_\">add_glow_effects</span>() # 빛나는 효과 추가\n</code></pre>\n<p>내 의견으로는 이것이 정말 멋지네요! 이 라이브러리를 확인하고 다른 시각화를 찾아보고 자신만의 시각화를 올려보세요 :)</p>\n<p>나중에 이 라이브러리들이 유용하고 당신의 도구상자에 포함할 가치가 있다고 느끼길 바랍니다.</p>\n<p>지도를 만드는 데 사용하는 라이브러리는 무엇인가요? 댓글로 공유해주세요👇</p>\n<p>===========================================</p>\n<p>부. (지리)데이터 과학, 머신러닝/인공지능, 기후 변화에 열정적입니다. 그래서 어떤 프로젝트에서 함께 일하고 싶다면 여기나 LinkedIn에서 연락주세요.</p>\n<p>더 많은 내용을 보려면 팔로우해주세요! 🚀🌌</p>\n</body>\n</html>\n"},"__N_SSG":true}