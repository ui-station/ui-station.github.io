{"pageProps":{"post":{"title":"SwiftDataë¡œ ì›ê²© APIì—ì„œ ë°ì´í„° ì €ì¥í•˜ëŠ” ë°©ë²•","description":"","date":"2024-06-22 23:10","slug":"2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI","content":"\nì•± ì‚¬ìš©ìì—ê²Œ ì˜¤í”„ë¼ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ì•± ìš´ì˜ ë¹„ìš©ì„ ì¤„ì´ëŠ” ë° ì¤‘ìš”í•œ ë¡œì»¬ ë°ì´í„° ì €ì¥ì€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n[![Image](/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png)](//)\n\nì‹œì‘í•˜ê¸° ì „ì— ëª‡ ì´ˆ ë™ì•ˆ ì œ ê²Œì‹œë¬¼ì„ íŒ”ë¡œìš°í•˜ê³  ğŸ‘ í´ë©(clap)í•˜ì—¬ ë” ë§ì€ ì‚¬ëŒë“¤ì´ ì´ ìœ ìš©í•œ ë‚´ìš©ì„ ë°°ìš¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ì„¸ìš”.\n\n# API í˜¸ì¶œë¡œë¶€í„° SwiftDataë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ë¡œ ë°ì´í„° ì €ì¥í•˜ê¸°\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì½”ë“œë¡œ ë„˜ì–´ê°€ê¸°ë¡œ í•˜ê² ìŠµë‹ˆë‹¤. SwiftDataì— ìµìˆ™í•˜ì§€ ì•Šìœ¼ì‹  ê²½ìš°, ìƒˆë¡œìš´ ë‚´ìš©ì„ ìµíˆì‹œë ¤ë©´ ì´ ê¸°ì‚¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.\n\nìš°ë¦¬ëŠ” êµ¬ì¡°ì²´ì˜ ì´ë¦„ ë’¤ì— ì•½ì–´ DTO(Data Transfer Object)ë¥¼ ì¶”ê°€í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. DTOëŠ” í•œ ì‹œìŠ¤í…œì—ì„œ ë‹¤ë¥¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ìš°ë¦¬ì˜ ì˜ˆì œì—ì„œëŠ” API ì‘ë‹µì˜ ë°ì´í„°ë¥¼ JSONì—ì„œ SwiftData entityë¡œ ì „ì†¡í•˜ë ¤ê³  í•©ë‹ˆë‹¤. DTOëŠ” JSON ì‘ë‹µì„ ì¼ì‹œì ìœ¼ë¡œ ë³´ìœ í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ê³  Swift ê°ì²´ë¡œ ë³€í™˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œ ëª‡ ê°œì˜ ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” í•´ë‹¹ Swift ê°ì²´ë¥¼ SwiftData entityë¡œ ë³€í™˜í•  ê²ƒì…ë‹ˆë‹¤.\n\n```swift\n// PhotoDTO.swift\nimport Foundation\n\nstruct PhotoDTO: Identifiable, Codable {\n    let albumId: Int\n    let id: Int\n    let title: String\n    let url: String\n    let thumbnailUrl: String\n}\n```\n\nSwiftDataë¡œ ì‹œì‘í•˜ëŠ” ê¸°ì‚¬ë¥¼ ì½ìœ¼ì‹  ê²½ìš°, ì´ ë‚´ìš©ì€ ìµìˆ™í•˜ê²Œ ëŠê»´ì§ˆ ê²ƒì…ë‹ˆë‹¤. í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ì½”ë“œ ì¡°ê°ì„ ì¶”ê°€í–ˆëŠ”ë°, ê·¸ê²ƒì€ í¸ì˜ ì´ë‹ˆì…œë¼ì´ì €ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ DTOë¥¼ ì§ì ‘ ì „ë‹¬í•˜ì—¬ SwiftData entityë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```swift\n//  PhotoObject.swift\nimport Foundation\nimport SwiftData\n\n@Model\nclass PhotoObject {\n    var albumId: Int\n    @Attribute(.unique) var id: Int\n    var title: String\n    var url: String\n    var thumbnailUrl: String\n\n    init(albumId: Int, id: Int, title: String, url: String, thumbnailUrl: String) {\n        self.albumId = albumId\n        self.id = id\n        self.title = title\n        self.url = url\n        self.thumbnailUrl = thumbnailUrl\n    }\n\n    convenience init(item: PhotoDTO) {\n        self.init(\n            albumId: item.albumId,\n            id: item.id,\n            title: item.title,\n            url: item.url,\n            thumbnailUrl: item.thumbnailUrl\n        )\n    }\n}\n```\n\nì›¹ ì„œë¹„ìŠ¤ë„ ë§Œì•½ SwiftUIì—ì„œ API í˜¸ì¶œì„ ë§Œë“¤ê³  íŒŒì‹±í•œ ì ì´ ìˆë‹¤ë©´ ìµìˆ™í•  ê²ƒì…ë‹ˆë‹¤. ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì‚´í´ë³´ë©´, ê·¸ ê¸°ì‚¬ì—ì„œ ì‚´ì§ ìˆ˜ì •í•˜ì—¬ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ë³´ìœ í•œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. updateDataInDatabaseë¥¼ ì´ìš©í•´ API í˜¸ì¶œì—ì„œ ë°ì´í„°ë¥¼ íŒŒì‹±í•  ë•Œë§ˆë‹¤ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ìƒˆ ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. updateDataInDatabase í•¨ìˆ˜ëŠ” PhotoDTOë¥¼ SwiftData ì—”í‹°í‹°ë¡œ ë³€í™˜í•˜ê³  ê° ë ˆì½”ë“œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤. ë˜í•œ, IDë¡œ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš° ìƒˆ ë ˆì½”ë“œë¥¼ ìƒì„±í• ì§€ ë˜ëŠ” ê¸°ì¡´ ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í• ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ insert ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```swift\n//  WebService.swift\nimport Foundation\nimport SwiftData\n\nenum NetworkError: Error {\n    case badUrl\n    case invalidRequest\n    case badResponse\n    case badStatus\n    case failedToDecodeResponse\n}\n\nclass WebService {\n    @MainActor\n    func updateDataInDatabase(modelContext: ModelContext) async {\n        do {\n            let itemData: [PhotoDTO] = try await fetchData(fromUrl: \"https://jsonplaceholder.typicode.com/albums/1/photos\")\n            for eachItem in itemData {\n                let itemToStore = PhotoObject(item: eachItem)\n                modelContext.insert(itemToStore)\n            }\n        } catch {\n            print(\"Error fetching data\")\n            print(error.localizedDescription)\n        }\n    }\n\n    private func fetchData<T: Codable>(fromUrl: String) async throws -> [T] {\n        guard let downloadedData: [T] = await WebService().downloadData(fromURL: fromUrl) else { return [] }\n\n        return downloadedData\n    }\n\n    private func downloadData<T: Codable>(fromURL: String) async -> T? {\n        do {\n            guard let url = URL(string: fromURL) else { throw NetworkError.badUrl }\n            let (data, response) = try await URLSession.shared.data(from: url)\n            guard let response = response as? HTTPURLResponse else { throw NetworkError.badResponse }\n            guard response.statusCode >= 200 && response.statusCode < 300 else { throw NetworkError.badStatus }\n            guard let decodedResponse = try? JSONDecoder().decode(T.self, from: data) else { throw NetworkError.failedToDecodeResponse }\n\n            return decodedResponse\n        } catch NetworkError.badUrl {\n            print(\"There was an error creating the URL\")\n        } catch NetworkError.badResponse {\n            print(\"Did not get a valid response\")\n        } catch NetworkError.badStatus {\n            print(\"Did not get a 2xx status code from the response\")\n        } catch NetworkError.failedToDecodeResponse {\n            print(\"Failed to decode response into the given type\")\n        } catch {\n            print(\"An error occured downloading the data\")\n        }\n\n        return nil\n    }\n}\n```\n\në·° ë ˆì´ì–´ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ PhotoObjectsë¥¼ ì½ì–´ì™€ ëª©ë¡ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ ë‚´ì—ì„œëŠ” AsyncImage êµ¬ì„± ìš”ì†Œë¥¼ ì‚¬ìš©í•´ APIì—ì„œ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•˜ê³  í•´ë‹¹ í•­ëª©ì˜ IDë¥¼ ì´ë¯¸ì§€ ì˜†ì— í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ì˜ í•˜ë‹¨ì—ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ë³€í˜•ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. overlay ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆì„ ë•Œ ì§„í–‰ ìŠ¤í”¼ë„ˆë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. task ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆìœ¼ë©´ APIì—ì„œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ, refreshable ë³€í˜•ì„ ì‚¬ìš©í•´ ëª©ë¡ êµ¬ì„± ìš”ì†Œì— pull to refreshë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n\"task\" ë° \"refreshable\" ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì—…ë°ì´íŠ¸ëœ ë°ì´í„°ë¥¼ í™•ì¸í•˜ë ¤ê³  í•  ë•Œë§Œ APIê°€ í˜¸ì¶œë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤(APIë¥¼ ì‹¤í–‰í•˜ëŠ” ë¹„ìš©ì„ ì¤„ì„). ì´ëŠ” ì•±ì„ ëŸ°ì¹­í•  ë•Œë§ˆë‹¤ APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹  ë‘ ë²ˆì§¸ë¡œ ë°ì´í„°ê°€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì™€ì§€ê²Œ í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\në˜í•œ ë¯¸ë¦¬ë³´ê¸°ê°€ ì¼ë°˜ì ì¸ ê²½ìš°ë³´ë‹¤ ì½”ë“œê°€ ë” ë§ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. SwiftDataì—ì„œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ë³´ëŠ” ê²ƒì€ ì¼ë°˜ì ì¸ ë·°ì—ì„œ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒë³´ë‹¤ ì¡°ê¸ˆ ë” ë³µì¡í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸°ì—ì„œëŠ” ë°ì´í„°ê°€ ì„ì‹œë¡œ ì €ì¥ë˜ëŠ” ìƒˆ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³ (ë¯¸ë¦¬ë³´ê¸° ì¥ì¹˜ì— ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ì§€ ì•Šê¸° ìœ„í•¨), ê·¸ëŸ° ë‹¤ìŒ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ê·¸ ì»¨í…Œì´ë„ˆì— ì €ì¥í•©ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸° ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë‹¤ë¥¸ ììŠµì„œë„ ë³¼ ìˆ˜ ìˆì§€ë§Œ ì´ëŠ” ì‘ë™í•˜ë©° ì „í˜€ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ì €ëŠ” ë¯¸ë¦¬ë³´ê¸°ì— ëŒ€í•œ ì½”ë“œë¥¼ ë¯¸ë¦¬ë³´ê¸° ìì²´ì— ê°€ê¹Œì´ ìœ ì§€í•˜ê³  ì‹¶ì–´í•˜ì—¬ ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\n```js\n//  ContentView.swift\nimport SwiftData\nimport SwiftUI\n\nstruct ContentView: View {\n    @Environment(\\.modelContext) var modelContext\n    @Query(sort: \\PhotoObject.id) var photos: [PhotoObject]\n\n    var body: some View {\n        List(photos) { item in\n            HStack {\n                Text(item.id, format: .number)\n                Spacer()\n\n                AsyncImage(url: URL(string: item.url)!) { imagePhase in\n                    switch imagePhase {\n                    case .empty:\n                        Image(systemName: \"ellipsis\")\n                    case .success(let returnedImage):\n                        returnedImage\n                            .resizable()\n                            .scaledToFit()\n                    case .failure:\n                        Image(systemName: \"xmark.circle\")\n                            .font(.headline)\n                            .foregroundColor(.red)\n                    @unknown default:\n                        Image(systemName: \"ellipsis\")\n                    }\n                }\n            }\n        }\n        .overlay {\n            if photos.isEmpty {\n                ProgressView()\n            }\n        }\n        .task {\n            if photos.isEmpty {\n                await WebService().updateDataInDatabase(modelContext: modelContext)\n            }\n        }\n        .refreshable {\n            await WebService().updateDataInDatabase(modelContext: modelContext)\n        }\n    }\n}\n\n#Preview {\n    do {\n        let config = ModelConfiguration(isStoredInMemoryOnly: true)\n        let container = try ModelContainer(for: PhotoObject.self, configurations: config)\n        let sampleObject = PhotoObject(\n            albumId: 1,\n            id: 1,\n            title: \"accusamus beatae ad facilis cum similique qui sunt\",\n            url: \"https://via.placeholder.com/600/92c952\",\n            thumbnailUrl: \"https://via.placeholder.com/150/92c952\"\n        )\n        container.mainContext.insert(sampleObject)\n\n        return ContentView().modelContainer(container)\n    } catch {\n        fatalError(\"Failed to create model container\")\n    }\n}\n```\n\nì´ ê¸€ì´ ìœ ìµí•˜ë‹¤ê³  ëŠë¼ì‹ ë‹¤ë©´, ì œë¥¼ íŒ”ë¡œìš°í•˜ëŠ” ê²ƒ, ì´ ê¸€ì— ğŸ‘ ë°˜ì‘ì„ ë³´ë‚´ëŠ” ê²ƒ, ë˜ëŠ” ê³µìœ í•˜ì—¬ ë‹¤ë¥¸ ì‚¬ëŒì´ ë” ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê²ƒë„ ê³ ë ¤í•´ì£¼ì„¸ìš”.\"\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\ní•´ë‹¹ ì£¼ì œì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ì„ ì•Œê³  ê³„ì‹ ë‹¤ë©´, ì´ ê²Œì‹œë¬¼ì— ë‹µê¸€ì„ ë‹¬ê±°ë‚˜ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ì—¬ ì˜ê²¬ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Native ëª¨ë°”ì¼ ê°œë°œì— ëŒ€í•´ ë” ë°°ìš°ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì‘ì„±í•œ ë‹¤ë¥¸ ê¸°ì‚¬ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: [https://medium.com/@jpmtech](https://medium.com/@jpmtech). Native ëª¨ë°”ì¼ ê°œë°œë¡œ ì œì‘ëœ ì•±ë“¤ì„ ë³´ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì œê°€ ë§Œë“  ì•±ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: [https://jpmtech.io/apps](https://jpmtech.io/apps). ì œ ì‘í’ˆì„ í™•ì¸í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!\n","ogImage":{"url":"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png"},"coverImage":"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png","tag":["Tech"],"readingTime":9},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>ì•± ì‚¬ìš©ìì—ê²Œ ì˜¤í”„ë¼ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ì•± ìš´ì˜ ë¹„ìš©ì„ ì¤„ì´ëŠ” ë° ì¤‘ìš”í•œ ë¡œì»¬ ë°ì´í„° ì €ì¥ì€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.</p>\n<p><a href=\"//\" rel=\"nofollow\" target=\"_blank\"><img src=\"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png\" alt=\"Image\"></a></p>\n<p>ì‹œì‘í•˜ê¸° ì „ì— ëª‡ ì´ˆ ë™ì•ˆ ì œ ê²Œì‹œë¬¼ì„ íŒ”ë¡œìš°í•˜ê³  ğŸ‘ í´ë©(clap)í•˜ì—¬ ë” ë§ì€ ì‚¬ëŒë“¤ì´ ì´ ìœ ìš©í•œ ë‚´ìš©ì„ ë°°ìš¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ì„¸ìš”.</p>\n<h1>API í˜¸ì¶œë¡œë¶€í„° SwiftDataë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ë¡œ ë°ì´í„° ì €ì¥í•˜ê¸°</h1>\n<p></p>\n<p>ì½”ë“œë¡œ ë„˜ì–´ê°€ê¸°ë¡œ í•˜ê² ìŠµë‹ˆë‹¤. SwiftDataì— ìµìˆ™í•˜ì§€ ì•Šìœ¼ì‹  ê²½ìš°, ìƒˆë¡œìš´ ë‚´ìš©ì„ ìµíˆì‹œë ¤ë©´ ì´ ê¸°ì‚¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>\n<p>ìš°ë¦¬ëŠ” êµ¬ì¡°ì²´ì˜ ì´ë¦„ ë’¤ì— ì•½ì–´ DTO(Data Transfer Object)ë¥¼ ì¶”ê°€í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. DTOëŠ” í•œ ì‹œìŠ¤í…œì—ì„œ ë‹¤ë¥¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ìš°ë¦¬ì˜ ì˜ˆì œì—ì„œëŠ” API ì‘ë‹µì˜ ë°ì´í„°ë¥¼ JSONì—ì„œ SwiftData entityë¡œ ì „ì†¡í•˜ë ¤ê³  í•©ë‹ˆë‹¤. DTOëŠ” JSON ì‘ë‹µì„ ì¼ì‹œì ìœ¼ë¡œ ë³´ìœ í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ê³  Swift ê°ì²´ë¡œ ë³€í™˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œ ëª‡ ê°œì˜ ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” í•´ë‹¹ Swift ê°ì²´ë¥¼ SwiftData entityë¡œ ë³€í™˜í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-swift\"><span class=\"hljs-comment\">// PhotoDTO.swift</span>\n<span class=\"hljs-keyword\">import</span> Foundation\n\n<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">PhotoDTO</span>: <span class=\"hljs-title class_\">Identifiable</span>, <span class=\"hljs-title class_\">Codable</span> {\n    <span class=\"hljs-keyword\">let</span> albumId: <span class=\"hljs-type\">Int</span>\n    <span class=\"hljs-keyword\">let</span> id: <span class=\"hljs-type\">Int</span>\n    <span class=\"hljs-keyword\">let</span> title: <span class=\"hljs-type\">String</span>\n    <span class=\"hljs-keyword\">let</span> url: <span class=\"hljs-type\">String</span>\n    <span class=\"hljs-keyword\">let</span> thumbnailUrl: <span class=\"hljs-type\">String</span>\n}\n</code></pre>\n<p>SwiftDataë¡œ ì‹œì‘í•˜ëŠ” ê¸°ì‚¬ë¥¼ ì½ìœ¼ì‹  ê²½ìš°, ì´ ë‚´ìš©ì€ ìµìˆ™í•˜ê²Œ ëŠê»´ì§ˆ ê²ƒì…ë‹ˆë‹¤. í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ì½”ë“œ ì¡°ê°ì„ ì¶”ê°€í–ˆëŠ”ë°, ê·¸ê²ƒì€ í¸ì˜ ì´ë‹ˆì…œë¼ì´ì €ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ DTOë¥¼ ì§ì ‘ ì „ë‹¬í•˜ì—¬ SwiftData entityë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p></p>\n<pre><code class=\"hljs language-swift\"><span class=\"hljs-comment\">//  PhotoObject.swift</span>\n<span class=\"hljs-keyword\">import</span> Foundation\n<span class=\"hljs-keyword\">import</span> SwiftData\n\n<span class=\"hljs-meta\">@Model</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PhotoObject</span> {\n    <span class=\"hljs-keyword\">var</span> albumId: <span class=\"hljs-type\">Int</span>\n    <span class=\"hljs-meta\">@Attribute</span>(.unique) <span class=\"hljs-keyword\">var</span> id: <span class=\"hljs-type\">Int</span>\n    <span class=\"hljs-keyword\">var</span> title: <span class=\"hljs-type\">String</span>\n    <span class=\"hljs-keyword\">var</span> url: <span class=\"hljs-type\">String</span>\n    <span class=\"hljs-keyword\">var</span> thumbnailUrl: <span class=\"hljs-type\">String</span>\n\n    <span class=\"hljs-keyword\">init</span>(<span class=\"hljs-params\">albumId</span>: <span class=\"hljs-type\">Int</span>, <span class=\"hljs-params\">id</span>: <span class=\"hljs-type\">Int</span>, <span class=\"hljs-params\">title</span>: <span class=\"hljs-type\">String</span>, <span class=\"hljs-params\">url</span>: <span class=\"hljs-type\">String</span>, <span class=\"hljs-params\">thumbnailUrl</span>: <span class=\"hljs-type\">String</span>) {\n        <span class=\"hljs-keyword\">self</span>.albumId <span class=\"hljs-operator\">=</span> albumId\n        <span class=\"hljs-keyword\">self</span>.id <span class=\"hljs-operator\">=</span> id\n        <span class=\"hljs-keyword\">self</span>.title <span class=\"hljs-operator\">=</span> title\n        <span class=\"hljs-keyword\">self</span>.url <span class=\"hljs-operator\">=</span> url\n        <span class=\"hljs-keyword\">self</span>.thumbnailUrl <span class=\"hljs-operator\">=</span> thumbnailUrl\n    }\n\n    <span class=\"hljs-keyword\">convenience</span> <span class=\"hljs-keyword\">init</span>(<span class=\"hljs-params\">item</span>: <span class=\"hljs-type\">PhotoDTO</span>) {\n        <span class=\"hljs-keyword\">self</span>.<span class=\"hljs-keyword\">init</span>(\n            albumId: item.albumId,\n            id: item.id,\n            title: item.title,\n            url: item.url,\n            thumbnailUrl: item.thumbnailUrl\n        )\n    }\n}\n</code></pre>\n<p>ì›¹ ì„œë¹„ìŠ¤ë„ ë§Œì•½ SwiftUIì—ì„œ API í˜¸ì¶œì„ ë§Œë“¤ê³  íŒŒì‹±í•œ ì ì´ ìˆë‹¤ë©´ ìµìˆ™í•  ê²ƒì…ë‹ˆë‹¤. ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì‚´í´ë³´ë©´, ê·¸ ê¸°ì‚¬ì—ì„œ ì‚´ì§ ìˆ˜ì •í•˜ì—¬ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ë³´ìœ í•œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. updateDataInDatabaseë¥¼ ì´ìš©í•´ API í˜¸ì¶œì—ì„œ ë°ì´í„°ë¥¼ íŒŒì‹±í•  ë•Œë§ˆë‹¤ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ìƒˆ ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. updateDataInDatabase í•¨ìˆ˜ëŠ” PhotoDTOë¥¼ SwiftData ì—”í‹°í‹°ë¡œ ë³€í™˜í•˜ê³  ê° ë ˆì½”ë“œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤. ë˜í•œ, IDë¡œ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš° ìƒˆ ë ˆì½”ë“œë¥¼ ìƒì„±í• ì§€ ë˜ëŠ” ê¸°ì¡´ ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í• ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ insert ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-swift\"><span class=\"hljs-comment\">//  WebService.swift</span>\n<span class=\"hljs-keyword\">import</span> Foundation\n<span class=\"hljs-keyword\">import</span> SwiftData\n\n<span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title class_\">NetworkError</span>: <span class=\"hljs-title class_\">Error</span> {\n    <span class=\"hljs-keyword\">case</span> badUrl\n    <span class=\"hljs-keyword\">case</span> invalidRequest\n    <span class=\"hljs-keyword\">case</span> badResponse\n    <span class=\"hljs-keyword\">case</span> badStatus\n    <span class=\"hljs-keyword\">case</span> failedToDecodeResponse\n}\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">WebService</span> {\n    <span class=\"hljs-meta\">@MainActor</span>\n    <span class=\"hljs-keyword\">func</span> <span class=\"hljs-title function_\">updateDataInDatabase</span>(<span class=\"hljs-params\">modelContext</span>: <span class=\"hljs-type\">ModelContext</span>) <span class=\"hljs-keyword\">async</span> {\n        <span class=\"hljs-keyword\">do</span> {\n            <span class=\"hljs-keyword\">let</span> itemData: [<span class=\"hljs-type\">PhotoDTO</span>] <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">try</span> <span class=\"hljs-keyword\">await</span> fetchData(fromUrl: <span class=\"hljs-string\">\"https://jsonplaceholder.typicode.com/albums/1/photos\"</span>)\n            <span class=\"hljs-keyword\">for</span> eachItem <span class=\"hljs-keyword\">in</span> itemData {\n                <span class=\"hljs-keyword\">let</span> itemToStore <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">PhotoObject</span>(item: eachItem)\n                modelContext.insert(itemToStore)\n            }\n        } <span class=\"hljs-keyword\">catch</span> {\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"Error fetching data\"</span>)\n            <span class=\"hljs-built_in\">print</span>(error.localizedDescription)\n        }\n    }\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">func</span> <span class=\"hljs-title function_\">fetchData</span>&#x3C;<span class=\"hljs-type\">T</span>: <span class=\"hljs-type\">Codable</span>>(<span class=\"hljs-params\">fromUrl</span>: <span class=\"hljs-type\">String</span>) <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">throws</span> -> [<span class=\"hljs-type\">T</span>] {\n        <span class=\"hljs-keyword\">guard</span> <span class=\"hljs-keyword\">let</span> downloadedData: [<span class=\"hljs-type\">T</span>] <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">await</span> <span class=\"hljs-type\">WebService</span>().downloadData(fromURL: fromUrl) <span class=\"hljs-keyword\">else</span> { <span class=\"hljs-keyword\">return</span> [] }\n\n        <span class=\"hljs-keyword\">return</span> downloadedData\n    }\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">func</span> <span class=\"hljs-title function_\">downloadData</span>&#x3C;<span class=\"hljs-type\">T</span>: <span class=\"hljs-type\">Codable</span>>(<span class=\"hljs-params\">fromURL</span>: <span class=\"hljs-type\">String</span>) <span class=\"hljs-keyword\">async</span> -> <span class=\"hljs-type\">T</span>? {\n        <span class=\"hljs-keyword\">do</span> {\n            <span class=\"hljs-keyword\">guard</span> <span class=\"hljs-keyword\">let</span> url <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">URL</span>(string: fromURL) <span class=\"hljs-keyword\">else</span> { <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-type\">NetworkError</span>.badUrl }\n            <span class=\"hljs-keyword\">let</span> (data, response) <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">try</span> <span class=\"hljs-keyword\">await</span> <span class=\"hljs-type\">URLSession</span>.shared.data(from: url)\n            <span class=\"hljs-keyword\">guard</span> <span class=\"hljs-keyword\">let</span> response <span class=\"hljs-operator\">=</span> response <span class=\"hljs-keyword\">as?</span> <span class=\"hljs-type\">HTTPURLResponse</span> <span class=\"hljs-keyword\">else</span> { <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-type\">NetworkError</span>.badResponse }\n            <span class=\"hljs-keyword\">guard</span> response.statusCode <span class=\"hljs-operator\">>=</span> <span class=\"hljs-number\">200</span> <span class=\"hljs-operator\">&#x26;&#x26;</span> response.statusCode <span class=\"hljs-operator\">&#x3C;</span> <span class=\"hljs-number\">300</span> <span class=\"hljs-keyword\">else</span> { <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-type\">NetworkError</span>.badStatus }\n            <span class=\"hljs-keyword\">guard</span> <span class=\"hljs-keyword\">let</span> decodedResponse <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">try?</span> <span class=\"hljs-type\">JSONDecoder</span>().decode(<span class=\"hljs-type\">T</span>.<span class=\"hljs-keyword\">self</span>, from: data) <span class=\"hljs-keyword\">else</span> { <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-type\">NetworkError</span>.failedToDecodeResponse }\n\n            <span class=\"hljs-keyword\">return</span> decodedResponse\n        } <span class=\"hljs-keyword\">catch</span> <span class=\"hljs-type\">NetworkError</span>.badUrl {\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"There was an error creating the URL\"</span>)\n        } <span class=\"hljs-keyword\">catch</span> <span class=\"hljs-type\">NetworkError</span>.badResponse {\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"Did not get a valid response\"</span>)\n        } <span class=\"hljs-keyword\">catch</span> <span class=\"hljs-type\">NetworkError</span>.badStatus {\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"Did not get a 2xx status code from the response\"</span>)\n        } <span class=\"hljs-keyword\">catch</span> <span class=\"hljs-type\">NetworkError</span>.failedToDecodeResponse {\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"Failed to decode response into the given type\"</span>)\n        } <span class=\"hljs-keyword\">catch</span> {\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"An error occured downloading the data\"</span>)\n        }\n\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span>\n    }\n}\n</code></pre>\n<p>ë·° ë ˆì´ì–´ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ PhotoObjectsë¥¼ ì½ì–´ì™€ ëª©ë¡ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ ë‚´ì—ì„œëŠ” AsyncImage êµ¬ì„± ìš”ì†Œë¥¼ ì‚¬ìš©í•´ APIì—ì„œ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•˜ê³  í•´ë‹¹ í•­ëª©ì˜ IDë¥¼ ì´ë¯¸ì§€ ì˜†ì— í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ì˜ í•˜ë‹¨ì—ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ë³€í˜•ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. overlay ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆì„ ë•Œ ì§„í–‰ ìŠ¤í”¼ë„ˆë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. task ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆìœ¼ë©´ APIì—ì„œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ, refreshable ë³€í˜•ì„ ì‚¬ìš©í•´ ëª©ë¡ êµ¬ì„± ìš”ì†Œì— pull to refreshë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>\n<p></p>\n<p>\"task\" ë° \"refreshable\" ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì—…ë°ì´íŠ¸ëœ ë°ì´í„°ë¥¼ í™•ì¸í•˜ë ¤ê³  í•  ë•Œë§Œ APIê°€ í˜¸ì¶œë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤(APIë¥¼ ì‹¤í–‰í•˜ëŠ” ë¹„ìš©ì„ ì¤„ì„). ì´ëŠ” ì•±ì„ ëŸ°ì¹­í•  ë•Œë§ˆë‹¤ APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹  ë‘ ë²ˆì§¸ë¡œ ë°ì´í„°ê°€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì™€ì§€ê²Œ í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>\n<p>ë˜í•œ ë¯¸ë¦¬ë³´ê¸°ê°€ ì¼ë°˜ì ì¸ ê²½ìš°ë³´ë‹¤ ì½”ë“œê°€ ë” ë§ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. SwiftDataì—ì„œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ë³´ëŠ” ê²ƒì€ ì¼ë°˜ì ì¸ ë·°ì—ì„œ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒë³´ë‹¤ ì¡°ê¸ˆ ë” ë³µì¡í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸°ì—ì„œëŠ” ë°ì´í„°ê°€ ì„ì‹œë¡œ ì €ì¥ë˜ëŠ” ìƒˆ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³ (ë¯¸ë¦¬ë³´ê¸° ì¥ì¹˜ì— ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ì§€ ì•Šê¸° ìœ„í•¨), ê·¸ëŸ° ë‹¤ìŒ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ê·¸ ì»¨í…Œì´ë„ˆì— ì €ì¥í•©ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸° ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë‹¤ë¥¸ ììŠµì„œë„ ë³¼ ìˆ˜ ìˆì§€ë§Œ ì´ëŠ” ì‘ë™í•˜ë©° ì „í˜€ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ì €ëŠ” ë¯¸ë¦¬ë³´ê¸°ì— ëŒ€í•œ ì½”ë“œë¥¼ ë¯¸ë¦¬ë³´ê¸° ìì²´ì— ê°€ê¹Œì´ ìœ ì§€í•˜ê³  ì‹¶ì–´í•˜ì—¬ ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">//  ContentView.swift</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">SwiftData</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">SwiftUI</span>\n\nstruct <span class=\"hljs-title class_\">ContentView</span>: <span class=\"hljs-title class_\">View</span> {\n    @<span class=\"hljs-title class_\">Environment</span>(\\.<span class=\"hljs-property\">modelContext</span>) <span class=\"hljs-keyword\">var</span> modelContext\n    @<span class=\"hljs-title class_\">Query</span>(<span class=\"hljs-attr\">sort</span>: \\<span class=\"hljs-title class_\">PhotoObject</span>.<span class=\"hljs-property\">id</span>) <span class=\"hljs-keyword\">var</span> <span class=\"hljs-attr\">photos</span>: [<span class=\"hljs-title class_\">PhotoObject</span>]\n\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-attr\">body</span>: some <span class=\"hljs-title class_\">View</span> {\n        <span class=\"hljs-title class_\">List</span>(photos) { item <span class=\"hljs-keyword\">in</span>\n            <span class=\"hljs-title class_\">HStack</span> {\n                <span class=\"hljs-title class_\">Text</span>(item.<span class=\"hljs-property\">id</span>, <span class=\"hljs-attr\">format</span>: .<span class=\"hljs-property\">number</span>)\n                <span class=\"hljs-title class_\">Spacer</span>()\n\n                <span class=\"hljs-title class_\">AsyncImage</span>(<span class=\"hljs-attr\">url</span>: <span class=\"hljs-title function_\">URL</span>(<span class=\"hljs-attr\">string</span>: item.<span class=\"hljs-property\">url</span>)!) { imagePhase <span class=\"hljs-keyword\">in</span>\n                    <span class=\"hljs-keyword\">switch</span> imagePhase {\n                    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-property\">empty</span>:\n                        <span class=\"hljs-title class_\">Image</span>(<span class=\"hljs-attr\">systemName</span>: <span class=\"hljs-string\">\"ellipsis\"</span>)\n                    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-title function_\">success</span>(<span class=\"hljs-keyword\">let</span> returnedImage):\n                        returnedImage\n                            .<span class=\"hljs-title function_\">resizable</span>()\n                            .<span class=\"hljs-title function_\">scaledToFit</span>()\n                    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-property\">failure</span>:\n                        <span class=\"hljs-title class_\">Image</span>(<span class=\"hljs-attr\">systemName</span>: <span class=\"hljs-string\">\"xmark.circle\"</span>)\n                            .<span class=\"hljs-title function_\">font</span>(.<span class=\"hljs-property\">headline</span>)\n                            .<span class=\"hljs-title function_\">foregroundColor</span>(.<span class=\"hljs-property\">red</span>)\n                    @unknown <span class=\"hljs-attr\">default</span>:\n                        <span class=\"hljs-title class_\">Image</span>(<span class=\"hljs-attr\">systemName</span>: <span class=\"hljs-string\">\"ellipsis\"</span>)\n                    }\n                }\n            }\n        }\n        .<span class=\"hljs-property\">overlay</span> {\n            <span class=\"hljs-keyword\">if</span> photos.<span class=\"hljs-property\">isEmpty</span> {\n                <span class=\"hljs-title class_\">ProgressView</span>()\n            }\n        }\n        .<span class=\"hljs-property\">task</span> {\n            <span class=\"hljs-keyword\">if</span> photos.<span class=\"hljs-property\">isEmpty</span> {\n                <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">WebService</span>().<span class=\"hljs-title function_\">updateDataInDatabase</span>(<span class=\"hljs-attr\">modelContext</span>: modelContext)\n            }\n        }\n        .<span class=\"hljs-property\">refreshable</span> {\n            <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">WebService</span>().<span class=\"hljs-title function_\">updateDataInDatabase</span>(<span class=\"hljs-attr\">modelContext</span>: modelContext)\n        }\n    }\n}\n\n#<span class=\"hljs-title class_\">Preview</span> {\n    <span class=\"hljs-keyword\">do</span> {\n        <span class=\"hljs-keyword\">let</span> config = <span class=\"hljs-title class_\">ModelConfiguration</span>(<span class=\"hljs-attr\">isStoredInMemoryOnly</span>: <span class=\"hljs-literal\">true</span>)\n        <span class=\"hljs-keyword\">let</span> container = <span class=\"hljs-keyword\">try</span> <span class=\"hljs-title class_\">ModelContainer</span>(<span class=\"hljs-attr\">for</span>: <span class=\"hljs-title class_\">PhotoObject</span>.<span class=\"hljs-property\">self</span>, <span class=\"hljs-attr\">configurations</span>: config)\n        <span class=\"hljs-keyword\">let</span> sampleObject = <span class=\"hljs-title class_\">PhotoObject</span>(\n            <span class=\"hljs-attr\">albumId</span>: <span class=\"hljs-number\">1</span>,\n            <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">1</span>,\n            <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">\"accusamus beatae ad facilis cum similique qui sunt\"</span>,\n            <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">\"https://via.placeholder.com/600/92c952\"</span>,\n            <span class=\"hljs-attr\">thumbnailUrl</span>: <span class=\"hljs-string\">\"https://via.placeholder.com/150/92c952\"</span>\n        )\n        container.<span class=\"hljs-property\">mainContext</span>.<span class=\"hljs-title function_\">insert</span>(sampleObject)\n\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">ContentView</span>().<span class=\"hljs-title function_\">modelContainer</span>(container)\n    } <span class=\"hljs-keyword\">catch</span> {\n        <span class=\"hljs-title function_\">fatalError</span>(<span class=\"hljs-string\">\"Failed to create model container\"</span>)\n    }\n}\n</code></pre>\n<p>ì´ ê¸€ì´ ìœ ìµí•˜ë‹¤ê³  ëŠë¼ì‹ ë‹¤ë©´, ì œë¥¼ íŒ”ë¡œìš°í•˜ëŠ” ê²ƒ, ì´ ê¸€ì— ğŸ‘ ë°˜ì‘ì„ ë³´ë‚´ëŠ” ê²ƒ, ë˜ëŠ” ê³µìœ í•˜ì—¬ ë‹¤ë¥¸ ì‚¬ëŒì´ ë” ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê²ƒë„ ê³ ë ¤í•´ì£¼ì„¸ìš”.\"</p>\n<p></p>\n<p>í•´ë‹¹ ì£¼ì œì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ì„ ì•Œê³  ê³„ì‹ ë‹¤ë©´, ì´ ê²Œì‹œë¬¼ì— ë‹µê¸€ì„ ë‹¬ê±°ë‚˜ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ì—¬ ì˜ê²¬ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Native ëª¨ë°”ì¼ ê°œë°œì— ëŒ€í•´ ë” ë°°ìš°ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì‘ì„±í•œ ë‹¤ë¥¸ ê¸°ì‚¬ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: <a href=\"https://medium.com/@jpmtech\" rel=\"nofollow\" target=\"_blank\">https://medium.com/@jpmtech</a>. Native ëª¨ë°”ì¼ ê°œë°œë¡œ ì œì‘ëœ ì•±ë“¤ì„ ë³´ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì œê°€ ë§Œë“  ì•±ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: <a href=\"https://jpmtech.io/apps\" rel=\"nofollow\" target=\"_blank\">https://jpmtech.io/apps</a>. ì œ ì‘í’ˆì„ í™•ì¸í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!</p>\n</body>\n</html>\n"},"__N_SSG":true}