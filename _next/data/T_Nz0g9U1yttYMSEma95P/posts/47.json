{"pageProps":{"posts":[{"title":"ì•„ë§ˆì¡´ EKS ì—…ê·¸ë ˆì´ë“œ ì—¬ì • 129ì—ì„œ 130ìœ¼ë¡œ - ê·€ì—¬ìš´ ìš°ë² ë¥´ë„¤í‹°ìŠ¤ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”","description":"","date":"2024-05-27 17:41","slug":"2024-05-27-AmazonEKSUpgradeJourneyFrom129to130-sayhellotocuteUwubernetes","content":"\n\"Uwubernetes\" ë¦´ë¦¬ìŠ¤ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤. EKS ì œì–´ í‰ë©´ì„ ë²„ì „ 1.30ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ê³¼ì • ë° ì£¼ì˜ ì‚¬í•­.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-AmazonEKSUpgradeJourneyFrom129to130-sayhellotocuteUwubernetes_0.png)\n\n# ê°œìš”\n\nAWS EKS 1.30ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì´ê²ƒì€ Kubernetes v1.30 ë¦´ë¦¬ìŠ¤ë¡œ, ë‹¹ì‹ ì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ë” ê·€ì—¬ì›Œ ì§€ê²Œ ë§Œë“­ë‹ˆë‹¤!\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nKubernetesëŠ” ì „ ì„¸ê³„ì˜ ìˆ˜ì²œ ëª…ì˜ ì‚¬ëŒë“¤ì´ ë§Œë“¤ê³  ê³µê°œí•˜ëŠ”ë°, ê·¸ë“¤ì€ ëª¨ë“  ì‚¶ì˜ ì˜ì—­ì—ì„œ ì˜¨ ì‚¬ëŒë“¤ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê¸°ì—¬ìë“¤ì€ ì´ë¥¼ ìœ„í•´ ëˆì„ ë°›ì§€ ì•Šì§€ë§Œ, ì¬ë¯¸ë¡œ ë§Œë“¤ê±°ë‚˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê±°ë‚˜, ë¬´ì–¸ê°€ë¥¼ ë°°ìš°ê±°ë‚˜, ì»¤ë®¤ë‹ˆí‹°ë¥¼ ì‚¬ë‘í•˜ê¸° ë•Œë¬¸ì— ë§Œë“­ë‹ˆë‹¤. ìš°ë¦¬ ì¤‘ ë§ì€ ì‚¬ëŒë“¤ì´ ì—¬ê¸°ì„œ ì§‘, ì¹œêµ¬, ê·¸ë¦¬ê³  ì§ì—…ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤. ë¦´ë¦¬ìŠ¤ íŒ€ì€ Kubernetesì˜ ì§€ì†ì ì¸ ì„±ì¥ì— ì°¸ì—¬í•˜ì—¬ ì˜ê´‘ìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤.\n\ní•œë²ˆ ë” ì»¤ë®¤ë‹ˆí‹°ì— ëŒ€í•´ ê°ì‚¬ ì¸ì‚¬ë¥¼ ì „í•˜ê³ ì í•©ë‹ˆë‹¤. ë§ì€ íšŒì‚¬ë“¤ì—ì„œëŠ” ì „ë¬¸ê°€ë“¤ì´ ê°€ì¹˜ë¥¼ ì¸ì •ë°›ì§€ ëª»í•˜ê³  ê°„ê³¼ë˜ëŠ” ê²½ìš°ê°€ ë§ì§€ë§Œ, ì´ëŠ” ì˜³ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë¥¼ ëŒ€ì¤‘ì—ê²Œ ì•Œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤.\n\nKubernetes v1.30: Uwubernetes, ì´ì œê¹Œì§€ ê°€ì¥ ê·€ì—¬ìš´ ë¦´ë¦¬ìŠ¤ì…ë‹ˆë‹¤. ì´ ì´ë¦„ì€ \"kubernetes\"ì™€ \"UwU\"ë¼ëŠ” í–‰ë³µì´ë‚˜ ê·€ì—¬ì›€ì„ ë‚˜íƒ€ë‚´ëŠ” ì´ëª¨í‹°ì½˜ì˜ í•©ì„±ì–´ì…ë‹ˆë‹¤.\n\n# ì´ì „ ì´ì•¼ê¸°ì™€ ì—…ê·¸ë ˆì´ë“œ\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në§Œì•½ ë‹¹ì‹ ì´ ë‹¤ìŒì„ ì°¾ê³  ìˆë‹¤ë©´\n\n- EKSë¥¼ 1.28ì—ì„œ 1.29ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ì´ ì´ì•¼ê¸°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”\n- EKSë¥¼ 1.27ì—ì„œ 1.28ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ì´ ì´ì•¼ê¸°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”\n- EKSë¥¼ 1.26ì—ì„œ 1.27ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ì´ ì´ì•¼ê¸°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”\n- EKSë¥¼ 1.25ì—ì„œ 1.26ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ì´ ì´ì•¼ê¸°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”\n- EKSë¥¼ 1.24ì—ì„œ 1.25ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ì´ ì´ì•¼ê¸°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”\n- EKSë¥¼ 1.23ì—ì„œ 1.24ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ì´ ì´ì•¼ê¸°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”\n\n![ì´ë¯¸ì§€](https://miro.medium.com/v2/resize:fit:836/0*gWRKqyTE1gOT5wiD.gif)\n\n# ì—…ê·¸ë ˆì´ë“œë¥¼ ìœ„í•œ í•„ìˆ˜ ì¡°ê±´\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nAmazon EKSì˜ Kubernetes v1.30ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ê¸° ì „ì— ì™„ë£Œí•´ì•¼ í•  ì¤‘ìš”í•œ ì‘ì—…ì´ ëª‡ ê°€ì§€ ìˆìŠµë‹ˆë‹¤. ì´ ì‘ì—…ë“¤ì€ \"ì—…ê·¸ë ˆì´ë“œ ì¸ì‚¬ì´íŠ¸\"ì—ì„œ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì œ ê²½ìš°ì—ëŠ” í•­ìƒ í´ëŸ¬ìŠ¤í„°ë¥¼ ìµœì‹  ìƒíƒœë¡œ ìœ ì§€í•˜ê³  ìˆì–´ì„œ ì™„ë£Œí•´ì•¼ í•  ì‘ì—…ì´ ì—†ì—ˆìŠµë‹ˆë‹¤.\n\n# Kubernetes 1.30- ì´ ë¦´ë¦¬ìŠ¤ì—ì„œ ë³€ê²½ ì‚¬í•­\n\ní•­ìƒ Kubernetes ë²„ì „ 1.30ì—ì„œì˜ ë³€ê²½ ì‚¬í•­ê³¼ ì—…ë°ì´íŠ¸ì˜ ì™„ì „í•œ ëª©ë¡ì„ ì°¾ìœ¼ë ¤ë©´ Kubernetes ë³€ê²½ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì‹­ì‹œì˜¤. ì•„ë˜ì—ì„œ v1.30 ë¦´ë¦¬ìŠ¤ì— ì¤‘ìš”í•œ ê°œì„  ì‚¬í•­ ëª‡ ê°€ì§€ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ì²´ ëª©ë¡ì€ ì—¬ê¸°ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n## Kubernetes v1.30ì—ì„œ ì•ˆì • ë²„ì „ìœ¼ë¡œ ì¡¸ì—…í•œ ê°œì„  ì‚¬í•­\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- Robust VolumeManager ì¬êµ¬ì„± í›„ kubelet ì¬ì‹œì‘. ì´ê²ƒì€ kubeletì´ ì‹œì‘ë  ë•Œ ê¸°ì¡´ ë³¼ë¥¨ì´ ì–´ë–»ê²Œ ë§ˆìš´íŠ¸ë˜ëŠ”ì§€ì— ëŒ€í•œ ì¶”ê°€ ì •ë³´ë¥¼ ì œê³µí•˜ë„ë¡ ë³¼ë¥¨ ê´€ë¦¬ìë¥¼ ì¬êµ¬ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì‚¬ìš©ìë‚˜ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ìì—ê²ŒëŠ” ì–´ë–¤ ë³€í™”ë„ ê°€ì ¸ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì´ì „ ë™ì‘ìœ¼ë¡œ ë˜ëŒì•„ê°ˆ ìˆ˜ ìˆë„ë¡ feature processì™€ feature gate NewVolumeManagerReconstructionì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n- ë³¼ë¥¨ ë³µì› ì¤‘ ë¬´ë‹¨ìœ¼ë¡œ ë³¼ë¥¨ ëª¨ë“œ ë³€í™˜ ë°©ì§€. ì´ ë¦´ë¦¬ìŠ¤ì—ì„œ, ë³¼ë¥¨ì„ PersistentVolumeë¡œ ë³µì›í•  ë•Œ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì€ í•­ìƒ ë¬´ë‹¨ìœ¼ë¡œ ë³¼ë¥¨ ëª¨ë“œë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ìë¡œì„œ, ë³µì› ì‹œ ê·¸ëŸ¬í•œ ë³€ê²½ì„ í—ˆìš©í•˜ë ¤ë©´ ì ì ˆí•œ ì‹ ì› ì›ì¹™(ServiceAccounts representing a storage integrationê³¼ ê°™ì€)ì— ê¶Œí•œì„ ë¶€ì—¬í•´ì•¼ í•©ë‹ˆë‹¤.\n- Pod ìŠ¤ì¼€ì¤„ë§ ì¤€ë¹„ ìƒíƒœ. ì§€ê¸ˆ ì•ˆì •ì ì¸ ìƒíƒœì¸ ì´ ê¸°ëŠ¥ì€ í´ëŸ¬ìŠ¤í„°ê°€ ì‹¤ì œë¡œ ê·¸ Podë¥¼ ë…¸ë“œì— ë°”ì¸ë”©í•  ìˆ˜ ìˆë„ë¡ í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ê°€ ì•„ì§ ì œê³µë˜ì§€ ì•Šì„ ë•Œ Kubernetesê°€ í•´ë‹¹ Podë¥¼ ìŠ¤ì¼€ì¤„ë§í•˜ë ¤ëŠ” ì‹œë„ë¥¼ í”¼í•˜ë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ Podê°€ ìŠ¤ì¼€ì¤„ë§ë  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ì— ëŒ€í•œ ì‚¬ìš©ì ì •ì˜ ì œì–´ë¥¼ ì œê³µí•˜ê³  í• ë‹¹ëŸ‰ ë©”ì»¤ë‹ˆì¦˜, ë³´ì•ˆ ì œì–´ ë“±ì„ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. k8s v1.30ì—ì„œ .spec.schedulingGatesë¥¼ ì§€ì •í•˜ì—¬ Podê°€ ìŠ¤ì¼€ì¤„ë§ì— ê³ ë ¤ë  ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ì§€ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- PodTopologySpreadì˜ ìµœì†Œ ë„ë©”ì¸. ì´ë²ˆ ë¦´ë¦¬ìŠ¤ì—ì„œ PodTopologySpread ì œì•½ ì¡°ê±´ì˜ minDomains ë§¤ê°œë³€ìˆ˜ê°€ ì•ˆì •ì ìœ¼ë¡œ ì¡¸ì—…í–ˆìœ¼ë©° ìµœì†Œ ë„ë©”ì¸ ìˆ˜ë¥¼ ì •ì˜í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ Cluster Autoscalerì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ Karpenterë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì œ ìƒí™©ì—ì„œ í° ë³€í™”ë¥¼ ê°€ì ¸ë‹¤ì£¼ì§€ëŠ” ì•Šì„ ê²ƒì…ë‹ˆë‹¤.\n\nì—¬ê¸°ì— ì•ˆì •í™”ëœ 17ê°€ì§€ ê°œì„  ì‚¬í•­ì˜ ì „ì²´ ëª©ë¡ì´ ìˆìŠµë‹ˆë‹¤:\n\n- Container Resourceë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” Pod Autoscaling\n- KCCMì˜ ì„œë¹„ìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì¼ì‹œì ì¸ ë…¸ë“œ ì˜ˆì¸¡ ì‚­ì œ\n- k/kë¥¼ ìœ„í•œ Go ì‘ì—… ì˜ì—­\n- Secret ê¸°ë°˜ ì„œë¹„ìŠ¤ ê³„ì • í† í°ì˜ ê°ì†Œ\n- Admission Controlì„ ìœ„í•œ CEL\n- CEL ê¸°ë°˜ì˜ admission webhook match ì¡°ê±´\n- Pod ìŠ¤ì¼€ì¤„ë§ ì¤€ë¹„ ìƒíƒœ\n- PodTopologySpreadì˜ ìµœì†Œ ë„ë©”ì¸\n- ë³¼ë¥¨ ë³µì› ì¤‘ ë¬´ë‹¨ìœ¼ë¡œ ë³¼ë¥¨ ëª¨ë“œ ë³€í™˜ ë°©ì§€\n- API ì„œë²„ ì¶”ì \n- í´ë¼ìš°ë“œ ë“€ì–¼ ìŠ¤íƒ - ë…¸ë“œ IP ì²˜ë¦¬\n- AppArmor ì§€ì›\n- kubelet ì¬ì‹œì‘ í›„ ê°•ë ¥í•œ VolumeManager ì¬êµ¬ì„±\n- kubectl delete: ìƒí˜¸ì‘ìš©(-i) í”Œë˜ê·¸ ì¶”ê°€\n- ë©”íŠ¸ë¦­ ì¹´ë””ë„ë¦¬í‹° ê°•ì œ ì‹¤í–‰\n- Podì— status.hostIPs í•„ë“œ ì¶”ê°€\n- ì§‘í•© ëœ ë°œê²¬\n\n# í…Œë¼í¼ì„ ì‚¬ìš©í•˜ì—¬ EKSë¥¼ ì—…ê·¸ë ˆì´ë“œí•˜ì„¸ìš”\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‚´ ëª¨ë“  ì—…ê·¸ë ˆì´ë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ë‚˜ëŠ” Terraformì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŠ” ë¹ ë¥´ê³  íš¨ìœ¨ì ì´ë©° ë‚´ ì‚¶ì„ ê°„í¸í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ì´ë²ˆ ì—…ê·¸ë ˆì´ë“œì— ì‚¬ìš©í•œ í”„ë¡œë°”ì´ë”ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n![ì´ë¯¸ì§€1](/assets/img/2024-05-27-AmazonEKSUpgradeJourneyFrom129to130-sayhellotocuteUwernetes_1.png)\n\n![ì´ë¯¸ì§€2](/assets/img/2024-05-27-AmazonEKSUpgradeJourneyFrom129to130-sayhellotocuteUwernetes_2.png)\n\nì´ë²ˆì—ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì˜ ì—…ê·¸ë ˆì´ë“œì— ì•½ 8ë¶„ ì •ë„ ì†Œìš”ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì •ë§ ë¹ ë¥´ë‹¤ê³  ìƒê°í•´ìš”. ì—…ê·¸ë ˆì´ë“œ í›„ì—ëŠ” ì–´ë– í•œ ë¬¸ì œë„ ê²½í—˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ì „ ì—…ê·¸ë ˆì´ë“œì—ì„œ ìˆì—ˆë˜ API ì„œë²„ ìì²´ì˜ ì¼ì‹œì ì¸ ì‚¬ìš© ë¶ˆê°€ ìƒí™©ì¡°ì°¨ë„ ì „í˜€ ì¸ì§€í•˜ì§€ ëª»í–ˆì„ ì •ë„ì…ë‹ˆë‹¤. AWSëŠ” EKS ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì—…ê·¸ë ˆì´ë“œì— ì†Œìš”ë˜ëŠ” ì‹œê°„ì„ ì¤„ì´ëŠ” ë° í›Œë¥­í•œ ì¼ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤. EKS 1.29 ì—…ê·¸ë ˆì´ë“œëŠ” 8ë¶„ 24ì´ˆê°€ ê±¸ë ¸ì§€ë§Œ, EKS 1.30ì€ ì°¸ê³ ë¡œ 4ì´ˆ ë” ì†Œìš”ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-AmazonEKSUpgradeJourneyFrom129to130-sayhellotocuteUwubernetes_3.png)\n\nì €ëŠ” ì¦‰ì‹œ ì›Œì»¤ ë…¸ë“œë¥¼ ì—…ê·¸ë ˆì´ë“œí•˜ì—¬ ì—…ê·¸ë ˆì´ë“œëœ EKS í´ëŸ¬ìŠ¤í„°ì— ê°€ì…í•˜ëŠ” ë° ì•½ 14ë¶„ì´ ê±¸ë ¸ì–´ìš”. ì´ ì‹œê°„ì€ ì›Œì»¤ ë…¸ë“œ ìˆ˜ì™€ ì´ì „ ë…¸ë“œì—ì„œ ë°°ì¶œí•´ì•¼ í•˜ëŠ” í¬ë“œ ìˆ˜ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆì–´ìš”.\n\nì¼ë°˜ì ìœ¼ë¡œ ì œì–´ í”Œë ˆì¸ + ì›Œì»¤ ë…¸ë“œì˜ ì „ì²´ ì—…ê·¸ë ˆì´ë“œ ê³¼ì •ì€ ì•½ 22ë¶„ì´ ê±¸ë ¸ì–´ìš”. ì •ë§ ì¢‹ì€ ì‹œê°„ì´ë¼ê³  ë§ì”€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì €ëŠ” ê°œì¸ì ìœ¼ë¡œ Terraformì„ ì‚¬ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•˜ê³  ì—…ê·¸ë ˆì´ë“œí•©ë‹ˆë‹¤. ì—¬ê¸° EKS í´ëŸ¬ìŠ¤í„° ë¦¬ì†ŒìŠ¤ì˜ ì˜ˆì‹œê°€ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nresource \"aws_eks_cluster\" \"cluster\" {\n  enabled_cluster_log_types = [\"audit\"]\n  name                      = local.name_prefix\n  role_arn                  = aws_iam_role.cluster.arn\n  version                   = \"1.30\"\n\n  vpc_config {\n    subnet_ids              = flatten([module.vpc.public_subnets, module.vpc.private_subnets])\n    security_group_ids      = []\n    endpoint_private_access = \"true\"\n    endpoint_public_access  = \"true\"\n  }\n\n  encryption_config {\n    resources = [\"secrets\"]\n    provider {\n      key_arn = module.kms-eks.key_arn\n    }\n  }\n\n  access_config {\n    authentication_mode                         = \"API_AND_CONFIG_MAP\"\n    bootstrap_cluster_creator_admin_permissions = false\n  }\n\n  tags = var.tags\n}\n```\n\nì›Œì»¤ ë…¸ë“œì—ëŠ” AMIë¡œ ê³µì‹ AMIì¸ ì•„ì´ë”” ami-0e6a4f108467d0c54ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ì´ AMIëŠ” ìœ ëŸ½ ëŸ°ë˜ ì§€ì—­ì¸ eu-west-2ì™€ ê´€ë ¨ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ë…¸ë“œë¥¼ íšŒì „í•œ í›„ ë¬¸ì œê°€ ì—†ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. í˜„ì¬ ë…¸ë“œë“¤ì€ ë‹¤ìŒ ë²„ì „ì„ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤: v1.30.0-eks-036c24b.\n\në”°ë¼ì„œ ì´ˆê¸° EKS 1.30 ë²„ì „ ë¦´ë¦¬ìŠ¤ëŠ” ìµœì‹  ë²„ì „ 1.30.1ì´ ì•„ë‹Œ ì²« ë²ˆì§¸ 1.30.0ì„ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤.\n\nì œê°€ Terraformì„ ì‚¬ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿ì€ Github ì €ì¥ì†Œì¸ https://github.com/marcincuber/eksì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ê´€ë¦¬í˜• EKS ì• ë“œì˜¨ ì—…ê·¸ë ˆì´ë“œ\n\nì´ ê²½ìš° ë³€ê²½ ì‚¬í•­ì€ ì‚¬ì†Œí•˜ë©° ì˜ ì‘ë™í•©ë‹ˆë‹¤. ì• ë“œì˜¨ì˜ ë²„ì „ì„ ê°„ë‹¨íˆ ì—…ë°ì´íŠ¸í•˜ë©´ ë©ë‹ˆë‹¤. ì œ ê²½ìš° ì´ë²ˆ ë¦´ë¦¬ìŠ¤ì—ì„œ kube-proxy, coreDNS ë° ebs-csi-driverë¥¼ í™œìš©í–ˆìŠµë‹ˆë‹¤.\n\n# ì• ë“œì˜¨ì„ ìœ„í•œ Terraform ìì›\n\n```js\nresource \"aws_eks_addon\" \"kube_proxy\" {\n  cluster_name      = aws_eks_cluster.cluster[0].name\n  addon_name        = \"kube-proxy\"\n  addon_version     = \"v1.30.0-eksbuild.3\"\n  resolve_conflicts = \"OVERWRITE\"\n}\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\në¦¬ì†ŒìŠ¤ \"aws_eks_addon\" \"core_dns\" {\n  cluster_name      = aws_eks_cluster.cluster[0].name\n  addon_name        = \"coredns\"\n  addon_version     = \"v1.11.1-eksbuild.9\"\n  resolve_conflicts = \"OVERWRITE\"\n}\n```\n\n```js\në¦¬ì†ŒìŠ¤ \"aws_eks_addon\" \"aws_ebs_csi_driver\" {\n  cluster_name      = aws_eks_cluster.cluster[0].name\n  addon_name        = \"aws-ebs-csi-driver\"\n  addon_version     = \"v1.31.1-eksbuild.1\"\n  resolve_conflicts = \"OVERWRITE\"\n}\n```\n\n# EKS ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì—…ê·¸ë ˆì´ë“œ í›„\n\nEKS 1.30ì„ ìœ„í•´ ê¶Œì¥ë˜ëŠ” í•µì‹¬ ë°°í¬ ë° ë°ëª¬ ì„¸íŠ¸ë¥¼ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- CoreDNS â€” v1.11.1-eksbuild.9\n- Kube-proxy â€” 1.30.0-eksbuild.3\n- VPC CNI â€” 1.18.1-eksbuild.3\n- aws-ebs-csi-driver- v1.31.1-eksbuild.1\n\nìœ„ëŠ” AWSì˜ ê¶Œì¥ ì‚¬í•­ì…ë‹ˆë‹¤. ëª¨ë“  êµ¬ì„± ìš”ì†Œë¥¼ 1.30 Kubernetes ë²„ì „ê³¼ ì¼ì¹˜í•˜ë„ë¡ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ì—…ê·¸ë ˆì´ë“œ ëŒ€ìƒì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n- ë¡œë“œ ë°¸ëŸ°ì„œ ì»¨íŠ¸ë¡¤ëŸ¬\n- calico-node\n- í´ëŸ¬ìŠ¤í„° ì˜¤í† ìŠ¤ì¼€ì¼ëŸ¬ ë˜ëŠ” Karpenter\n- External Secrets Operator\n- Kube State Metrics\n- Metrics Server\n- csi-secrets-store\n- calico-typha ë° calico-typha-horizontal-autoscaler\n- Reloader\n- Keda (ì´ë²¤íŠ¸ ê¸°ë°˜ ì˜¤í† ìŠ¤ì¼€ì¼ëŸ¬)\n- nvidia ì¥ì¹˜ í”ŒëŸ¬ê·¸ì¸ (GPU ì‚¬ìš© ì‹œì— ì‚¬ìš©)\n\n## ìµœì¢… ê²°ê³¼\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n> $ kubectl version                                                                                                                                                                                           [Â±d1fbdc7c âœ“(âœ¹)]\nClient Version: v1.30.1\nKustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3\nServer Version: v1.30.0-eks-036c24b\n```\n\nì œ CLIì™€ Kubernetes í´ëŸ¬ìŠ¤í„° ë²„ì „ì„ ì¼ì¹˜ì‹œí‚¤ê¸° ìœ„í•´ kubectlë¥¼ ì—…ê·¸ë ˆì´ë“œí•´ì•¼ í•´ìš”.\n\n# ìš”ì•½ ë° ê²°ë¡ \n\nì´ì „ë³´ë‹¤ ë” ë¹ ë¥´ê²Œ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ì—…ê·¸ë ˆì´ë“œí–ˆì–´ìš”. 8ë¶„ ë§Œì— ì œì–´í”Œë ˆì¸ ì—…ê·¸ë ˆì´ë“œ ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆì–´ìš”. í´ëŸ¬ìŠ¤í„° ë° ë…¸ë“œ ì—…ê·¸ë ˆì´ë“œë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ Terraformì„ ì‚¬ìš©í•˜ê³ , GitHub Actions íŒŒì´í”„ë¼ì¸ì„ í†µí•´ ì‰½ê³  í¸ë¦¬í•˜ê²Œ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\ní•œêµ­ì–´ ë²ˆì—­:\n\ní•œë²ˆ ë” ì¤‘ìš”í•œ ë¬¸ì œê°€ ì—†ì—ˆì–´ìš”. ë‹¹ì‹ ì´ ìˆ˜í–‰í•  ì‘ì—…ë„ ì‰¬ìš¸ ê±°ì—ìš”. ëª¨ë“  ì‘ì—…ì´ ì˜ ì‘ë™í–ˆì–´ìš”. ì •ë§ ì•„ë¬´ê²ƒë„ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ì—ˆì£ .\n\nEKSì— ëŒ€í•œ ì „ì²´ Terraform ì„¤ì •ì— ê´€ì‹¬ì´ ìˆë‹¤ë©´, GitHubì—ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆì–´ìš” - [https://github.com/marcincuber/eks](https://github.com/marcincuber/eks).\n\nì´ ê¸°ì‚¬ê°€ EKSë¥¼ ë²„ì „ 1.30ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ì¤‘ìš”í•œ ì •ë³´ë“¤ì„ ëª¨ë‘ ëª¨ì•„ë†“ì•„ ì˜ ì •ë¦¬ë˜ì—ˆìœ¼ë©´ í•˜ë©°, ì‚¬ëŒë“¤ì´ ìì‹ ì˜ ì‘ì—…ì„ ë¹ ë¥´ê²Œ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ ë„ì›€ì´ ë˜ê¸¸ ë°”ë¼ìš”.\n\nìš”ì•½í•˜ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‹«ì–´í•˜ê±°ë‚˜/ë˜ëŠ” ì‚¬ë‘í•´ë„ ê·¸ë˜ë„ ì—¬ì „íˆ ì‚¬ìš©í•˜ê³  ìˆì–´ìš” ;).\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì•„ë˜ í‘œë¥¼ Markdown í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•´ ì£¼ì‹­ì‹œì˜¤.\n\nEnjoy Kubernetes!!!\n\n# Sponsor Me\n\nì €ì˜ ëª¨ë“  ë…¸íŠ¸ëŠ” ê³µì‹ AWSì™€ Kubernetes ì†ŒìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.\n\nMediumì— ìˆëŠ” ë‹¤ë¥¸ ì´ì•¼ê¸°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ë¬¸ì„œí™”ëœ ì‘ì—…ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì œ ê°œì¸ì ì¸ ì—°êµ¬ì´ë©° ì§ë©´í•œ ë¬¸ì œë“¤ì— ëŒ€í•œ ê²ƒì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nëª¨ë‘ ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. Marcin Cuber\n","ogImage":{"url":"/assets/img/2024-05-27-AmazonEKSUpgradeJourneyFrom129to130-sayhellotocuteUwubernetes_0.png"},"coverImage":"/assets/img/2024-05-27-AmazonEKSUpgradeJourneyFrom129to130-sayhellotocuteUwubernetes_0.png","tag":["Tech"],"readingTime":12},{"title":"ë‚´ IaC AWS ë‹¤ì¤‘ ê³„ì • í”„ë¡œë¹„ì €ë‹ ë¸”ë£¨í”„ë¦°íŠ¸, ìµœê³ ì˜ ê´€í–‰","description":"","date":"2024-05-27 17:37","slug":"2024-05-27-MyIaCAWSMulti-AccountProvisioningBluePrintBestPractices","content":"\n## SSO ì‚¬ìš©ìì™€ í•¨ê»˜ Terraform ì‹¤í–‰ ì—­í• ì„ ê°€ì •í•˜ëŠ” ë°©ë²•.\n\nì´ ê¸°ì‚¬ì—ì„œëŠ” IaC (Terraform) í”„ë¡œì íŠ¸ì˜ êµ¬ì¡°ë¥¼ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ëŠ” ë³´í†µ ì—¬ê¸°ì €ê¸° í©ì–´ì ¸ ìˆëŠ” ê°’ íŒŒì¼ì´ í•„ìš”í•˜ì§€ ì•Šë„ë¡ êµ¬ì„±ë©ë‹ˆë‹¤. ë˜í•œ í•˜ë‚˜ì˜ êµ¬ì„± íŒŒì¼ë§Œìœ¼ë¡œ ëª¨ë“  í™˜ê²½ì„ ì œì–´í•˜ëŠ” ë°©ë²•ê³¼ í”Œë«í¼ê³¼ ì‘ìš©í”„ë¡œê·¸ë¨ ì¸í”„ë¼ ì½”ë“œë¥¼ ì–´ë–»ê²Œ ë¶„ë¦¬í•˜ëŠ”ì§€ë„ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n## ì´ ê¸°ì‚¬ì—ì„œ ë‹¤ë£¨ëŠ” ì£¼ì œë“¤:\n\n- ì—¬ëŸ¬ ê³„ì • ë°°í¬ ë„êµ¬ì˜ ìš°ìŠ¹ìì¸ Terragrunt\n- Terraform ë° Terragruntì˜ í˜‘ë ¥\n- ì‘ìš©í”„ë¡œê·¸ë¨ ì¸í”„ë¼ Terragrunt Main êµ¬ì„± íŒŒì¼ (Locals/Backend S3/AWS Provider)\n- Terraform ì‹¤í–‰ì„ ìœ„í•œ AWS Identity Center (SSO) ê¶Œí•œ ì§‘í•© (AWS í‚¤ì™€ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜êµ¬ì ì´ì§€ ì•ŠëŠ” ì—­í• ìœ¼ë¡œ ê°€ì •)\n- í”Œë«í¼ vs ì‘ìš©í”„ë¡œê·¸ë¨ ì¸í”„ë¼\n- í”Œë«í¼ ì¸í”„ë¼ Terragrunt Main êµ¬ì„± íŒŒì¼ (Locals/Backend S3/AWS Provider)\n- Terraform ì‹¤í–‰ ì—­í•  ìƒì„± (ì‘ìš©í”„ë¡œê·¸ë¨ ì¸í”„ë¼ ë°°í¬ë¥¼ ìœ„í•´) IAM ì•¡ì„¸ìŠ¤ Identity (SSO)ë¡œ í”„ë¡œë¹„ì €ë‹ëœ ì—­í• ì˜ ì‹ ë¢° ì •ì±…\n- ì•ˆì „í•˜ê²Œ SSO AWS ì„ì‹œ ìê²© ì¦ëª… êµ¬ì„±\n- AWS-VAULT\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# í…Œë¼ê·¸ëŸ°íŠ¸\n\në‚´ ì˜ê²¬ìœ¼ë¡œ í…Œë¼ê·¸ëŸ°íŠ¸ëŠ” ì¸í”„ë¼ë¥¼ ìœ„í•œ ë‹¤ì¤‘ ê³„ì • ë°°í¬ êµ¬ì¡°í™”ì— ì‚¬ìš© ê°€ëŠ¥í•œ (ë‚´ê°€ ì•„ëŠ” í•œ) ìµœê³  ë„êµ¬ì…ë‹ˆë‹¤.\n\ní…Œë¼ê·¸ëŸ°íŠ¸ ë¬¸ì„œì— ë”°ë¥´ë©´ ì½”ë“œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì¡°í™”í•˜ëŠ” ê²ƒì„ ì œì•ˆí•©ë‹ˆë‹¤:\n\n![í…Œë¼ê·¸ëŸ°íŠ¸ êµ¬ì¡°](/assets/img/2024-05-27-MyIaCAWSMulti-AccountProvisioningBluePrintBestPractices_0.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nê·¸ëŸ¬ë‚˜ ì£¼ì˜í•´ì•¼ í•  ì ì€ terragruntë¥¼ ìì›ì„ ì¡°ì •í•˜ëŠ” ë° ê³¼ë„í•˜ê²Œ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.\n\nTerraformì€ ì—¬ëŸ¬ ëª¨ë“ˆì„ í•˜ë‚˜ë¡œ ë²ˆë“¤ë§í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì´ë‚˜ í”Œë«í¼ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤.\n\nTerragruntëŠ” ì´ë¯¸ í†µí•©ëœ Terraform ëª¨ë“ˆì„ ì„œë¡œ ë‹¤ë¥¸ í™˜ê²½ì— ë°°í¬í•˜ëŠ” ë°ë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\n# ì‘ìš© í”„ë¡œê·¸ë¨ ëª¨ë“ˆì„ ìƒì„±í•˜ëŠ” ë° Terraformì„ ì‚¬ìš©í•˜ê³ , ë‹¤ë¥¸ í™˜ê²½ì— ë°°í¬í•˜ëŠ” ë° Terragruntë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë“ˆ(ì™¼ìª½)ì„ ë§Œë“¤ ë•Œ Terragruntë¥¼ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆê³  í…Œë¼í¼ ìƒíƒœê°€ ì•± ë‹¨ìœ„ê°€ ì•„ë‹Œ êµ¬ì„± ìš”ì†Œ ë‹¨ìœ„ë¡œ ìƒì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Terragruntë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë°°í¬(ì˜¤ë¥¸ìª½)ì—ë§Œ ì‚¬ìš©í•˜ì„¸ìš”.\n\nê³¼ê±°ì— ì €í¬ê°€ í•œ ì‹¤ìˆ˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ì´ë ‡ê²Œ ë§ì”€ ë“œë¦¬ëŠ”ë°ìš”. ì €ëŠ” Terragrunt ë‚´ë¶€ì˜ ì»´í¬ë„ŒíŠ¸ì— ë„ˆë¬´ ë§ì´ ë‚˜ëˆ  ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸í”„ë¼ë¥¼ ë¶„ë¦¬í•˜ë©´ì„œ ê°œë³„ ë¦¬ì†ŒìŠ¤ë¥¼ ë” ì˜ ê´€ë¦¬í•˜ë ¤ê³  í–ˆì§€ë§Œ ë” ë§ì€ ë¬¸ì œë¥¼ ë°œìƒì‹œì¼°ìŠµë‹ˆë‹¤.\n\n# ì™œ ì´ëŸ° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‚˜ìš”?\n\nì €ì˜ ëª‡ëª‡ í”„ë¡œì íŠ¸ ì¤‘ í•˜ë‚˜ì—ì„œ ì €ëŠ” Terragruntì—ì„œ Terraform ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¡œ ë‹¤ì¤‘ ê³„ì • ë°°í¬ ë°©ë²•ì„ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ë§¡ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì„œë¡œ ë‹¤ë¥¸ AWS í™˜ê²½ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì¡°ì§ì˜ í‘œì¤€ ì ˆì°¨ì— ë§ì¶”ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ í”„ë¡œì„¸ìŠ¤ëŠ” Terragruntê°€ ë‹¨ìˆœíˆ í…Œë¼í¼ ë˜í¼ì¼ ë¿ì´ê¸° ë•Œë¬¸ì— ë§¤ìš° ê°„ë‹¨í•  ìˆ˜ ìˆì—ˆì„ ê²ƒì…ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ ì•±ì„ êµ¬ì„± ìš”ì†Œë¡œ ë¶„í• í•˜ê³  ê·¸ êµ¬ì„± ìš”ì†Œê°€ ëª¨ë“ˆ ë‚´ì— ì¡´ì¬í•˜ë©´ ìƒíƒœ íŒŒì¼ì„ ë³‘í•©í•´ì•¼ í•˜ëŠ” ì•…ëª½ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ë˜ì„œ Terragrunt í’‹í”„ë¦°íŠ¸ë¥¼ ìµœì†Œí™”í•˜ë ¤ë©´...\n\nT\nerraformì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ í”Œë«í¼ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ ì„œë¡œ ë‹¤ë¥¸ ëª¨ë“ˆì„ ë²ˆë“¤ë¡œ ë¬¶ì„ ê²ƒìœ¼ë¡œ ì˜ë„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ì˜ˆì‹œ: ìµœì†Œí•œì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸í”„ë¼ ë¦¬ì†ŒìŠ¤:\n\n```js\ndata \"aws_caller_identity\" \"current\" {}\n\nlocals {\n  aws_account_id = data.aws_caller_identity.current.account_id\n}\n\nmodule \"app_logs\" {\n  source = \"git::https://github.com/terraform-aws-modules/terraform-aws-dynamodb-table.git//\"\n  name         = \"${var.app_name}-logs\"\n  billing_mode = \"PAY_PER_REQUEST\"\n  hash_key     = \"organization\"\n  range_key    = \"job_id\"\n\n  server_side_encryption_enabled = true\n  deletion_protection_enabled    = false\n\n  attributes = [\n    {\n      name = \"organization\"\n      type = \"S\"\n    },\n    {\n      name = \"job_id\"\n      type = \"S\"\n    }\n  ]\n}\n\nmodule \"app_users\" {\n  source = \"git::https://github.com/terraform-aws-modules/terraform-aws-dynamodb-table.git//\"\n  # í•„ìš” ì‹œ ë‹¤ë¥¸ DynamoDB í…Œì´ë¸”ì„ ì—¬ê¸°ì— ì¶”ê°€\n}\n\nmodule \"lambda_execution_role\" {\n  source = \"../lambda-execution-role\"\n  aws_account_id = local.aws_account_id\n  app_name       = var.app_name\n  env            = var.env\n}\n\nmodule \"s3_bucket_files\" {\n  source = \"git::https://github.com/terraform-aws-modules/terraform-aws-s3-bucket.git//?ref=v3.6.1\"\n  bucket                  = var.env == \"production\" ? \"my-company-app-${var.app_name}-files\" : \"my-company-app-${var.app_name}-files-${var.env}\"\n  block_public_acls       = \"true\"\n  block_public_policy     = \"true\"\n  ignore_public_acls      = \"true\"\n  restrict_public_buckets = \"true\"\n}\n\nmodule \"another_s3_bucket_files\" {\n  source = \"git::https://github.com/terraform-aws-modules/terraform-aws-s3-bucket.git//?ref=v3.6.1\"\n  # í•„ìš” ì‹œ ë‹¤ë¥¸ S3 ë²„ì¼“ì„ ì—¬ê¸°ì— ì¶”ê°€\n}\n\n# SSM ParamsëŠ” ì„œë²„ë¦¬ìŠ¤ë‚˜ ë‹¤ë¥¸ ë„êµ¬ì— ê°’ë“¤ì„ ì „ë‹¬í•˜ëŠ” ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤.\nmodule \"ssm_params\" {\n  source = \"../ssm-parameters-store\"\n  parameters = {\n    1 = {\n      name  = \"/app/${var.app_name}/s3_bucket_files\"\n      value = module.s3_bucket_files.s3_bucket_id\n    }\n    2 = {\n      name  = \"/app/${var.app_name}/lambda_role\"\n      value = module.lambda_execution_role.role_arn\n    }\n    3 = {\n      name  = \"/app/${var.app_name}/event_bridge_name\"\n      value = \"${var.app_name}-event-bus\"\n    }\n    4 = {\n      name  = \"/app/${var.app_name}/logs\"\n      value = module.app_logs.dynamodb_table_id\n    }\n  }\n}\n```\n\nì´ ëª¨ë“ˆì—ì„œëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì„ í˜¸ì¶œí•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ ì¢…ë¥˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:\n\n- DynamoDB í…Œì´ë¸”\n- S3 ë²„ì¼“\n- IAM Lambda ì‹¤í–‰ ì—­í• \n- ì´ì „ì— ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ì˜ ARN ë˜ëŠ” IDë¥¼ ë³´ê´€í•˜ëŠ” SSM ë§¤ê°œë³€ìˆ˜\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì—¬ê¸°ì„œ ë¹ ì§„ ê²ƒì€ ë‹¤ë¥¸ ê¸°ì‚¬ì—ì„œ ë³´ì—¬ì¤€ ê²ƒì²˜ëŸ¼ ë°±ì—”ë“œ S3 ë° AWS ì œê³µì êµ¬ì„±ì…ë‹ˆë‹¤... ì—¬ê¸°ì„œ Terragruntê°€ ë“±ì¥í•©ë‹ˆë‹¤...\n\n# í”Œë«í¼ ëŒ€ ì‘ìš© í”„ë¡œê·¸ë¨\n\nì´ëŸ¬í•œ ì—¼ë ¤ ì‚¬í•­ì˜ ë¶„ë¦¬ëŠ” ì„œë¡œ ë‹¤ë¥¸ GIT ì €ì¥ì†Œë¥¼ ê°€ì§€ê±°ë‚˜ ë‹¨ìˆœíˆ ë™ì¼í•œ Repo ë‚´ì—ì„œ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ë¡œ ì·¨ê¸‰í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤... ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ ì‘ìš© í”„ë¡œê·¸ë¨ ì¸í”„ë¼ ì½”ë“œê°€ í”Œë«í¼ ì¸í”„ë¼ ì½”ë“œì— ì§ì ‘ì ì¸ ì¢…ì†ì„±ì„ í¬í•¨í•´ì„œëŠ” ì•ˆëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤... ë”°ë¼ì„œ ì´ê²ƒì€ ì‘ìš© í”„ë¡œê·¸ë¨ ì†ŒìŠ¤ ì½”ë“œ(BE/FE)ì™€ í•¨ê»˜ ì‰½ê²Œ ì¶”ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤...\n\ní•˜ì§€ë§Œ ìš°ë¦¬ëŠ” ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œìš”? ë¬´ì—‡ì„ í”Œë«í¼ ì¸í”„ë¼ì— ìœ„ì¹˜ì‹œí‚¤ê³  ì–´ë–¤ ê²ƒì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸í”„ë¼ì— ìœ„ì¹˜ì‹œì¼œì•¼ í• ì§€ìš”?\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## í”Œë«í¼ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜:\n\ní”Œë«í¼ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ëŠ” ë³´ë‹¤ í¬ê´„ì ì´ë©° ì¡°ì§ ì „ì²´ì—ì„œ ì—¬ëŸ¬ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì§€ì›í•˜ëŠ” ê¸°ë³¸ êµ¬ì„± ìš”ì†Œì™€ ì„œë¹„ìŠ¤ë¥¼ ì§€ì¹­í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒì„ í¬í•¨í•©ë‹ˆë‹¤:\n\n- CI/CDìš© IAM ì—­í• \n- Route53 í˜¸ìŠ¤íŒ… ì˜ì—­\n- ë„¤íŠ¸ì›Œí‚¹: VPC, ë°©í™”ë²½ ë° NATì™€ ê°™ì€ êµ¬ì„± ìš”ì†Œ\n- ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…: Prometheus, Grafana ë˜ëŠ” CloudWatchì™€ ê°™ì€ ìš”ì†Œ\n\n## ì‘ìš© í”„ë¡œê·¸ë¨ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì‘ìš© í”„ë¡œê·¸ë¨ ì¸í”„ë¼ëŠ” íŠ¹ì • ì‘ìš© í”„ë¡œê·¸ë¨ ë˜ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ì„¸íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° í•„ìš”í•œ êµ¬ì„± ìš”ì†Œì™€ ë¦¬ì†ŒìŠ¤ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì´ëŠ” ì¢…ì¢… ë‹¤ìŒì„ í¬í•¨í•©ë‹ˆë‹¤:\n\n- EC2 ì¸ìŠ¤í„´ìŠ¤, ëŒë‹¤ í•¨ìˆ˜\n- íŠ¸ëœì§“ ê²Œì´íŠ¸ì›¨ì´, ë¡œë“œ ë°¸ëŸ°ì„œ\n- ì•± ë°ì´í„°ë² ì´ìŠ¤: MySQL, PostgreSQL ë˜ëŠ” MongoDBì™€ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤\n- ë©”ì‹œì§€ ëŒ€ê¸°ì—´: SQS ë˜ëŠ” Kafkaì™€ ê°™ì€ ë©”ì‹œì§€ ëŒ€ê¸°ì—´\n\n## ì£¼ìš” í¬ì¸íŠ¸ëŠ” ê°œë³„ ì•±ì˜ ìš”êµ¬ ì‚¬í•­ì— ë§ì¶”ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì˜ˆë¥¼ ë“¤ì–´ Serverless Frameworkë‚˜ AWS SAMì´ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì„œë²„ë¦¬ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•´ì„œëŠ” í…Œë¼í¼ê³¼ ì„œë²„ë¦¬ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë©‹ì§„ ê°€ì´ë“œê°€ ìˆì–´ìš”.\n\n## í…Œë¼í¼ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ë•Œ, ì„œë²„ë¦¬ìŠ¤ í”„ë ˆì„ì›Œí¬ë‚˜ SAMê°™ì€:\n\n# ì• í”Œë¦¬ì¼€ì´ì…˜ IaCë¥¼ ìœ„í•œ Terragrunt\n\nâ€˜liveâ€˜ ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ ë°°í¬í•  í™˜ê²½ì„ ì§€ì •í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ live\nâ”‚   â”œâ”€â”€ _env\nâ”‚   â”‚   â””â”€â”€ app.hcl\nâ”‚   â”œâ”€â”€ dev\nâ”‚   â”‚   â””â”€â”€ app\nâ”‚   â”‚       â””â”€â”€ terragrunt.hcl <--- this is not a config file, but an environment resource file\nâ”‚   â”œâ”€â”€ production\nâ”‚   â”‚   â””â”€â”€ app\nâ”‚   â”‚       â””â”€â”€ terragrunt.hcl\nâ”‚   â”œâ”€â”€ terragrunt.hcl         <------ Terragrunt config file (Unique)\nâ”‚   â””â”€â”€ test\nâ”‚       â””â”€â”€ app\nâ”‚           â””â”€â”€ terragrunt.hcl\nâ””â”€â”€ modules\n    â”œâ”€â”€ lambda-execution-role\n    â”‚   â”œâ”€â”€ data.tf\n    â”‚   â”œâ”€â”€ main.tf\n    â”‚   â”œâ”€â”€ output.tf\n    â”‚   â””â”€â”€ variables.tf\n    â”œâ”€â”€ application_1\n    â”‚   â”œâ”€â”€ main.tf\n    â”‚   â””â”€â”€ variables.tf\n    â””â”€â”€ ssm-parameters-store\n        â”œâ”€â”€ main.tf\n        â””â”€â”€ variables.tf\n```\n\n# ìœ ì¼ë¬´ì´í•œ terragrunt.hcl ì„¤ì • íŒŒì¼\n\nì—¬ê¸°ì—ëŠ” í•˜ë‚˜ì˜ terragrunt.hcl êµ¬ì„± íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë©€í‹° ê³„ì • ë°°í¬ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì´ ë‚˜ì™€ ìˆì–´ìš”.\n\ní…Œë¼í¼ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ êµ¬ì„±ê³¼ Terragrunt êµ¬ì„±ì„ ë¹„êµí•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në¡œì»¬ ë³€ìˆ˜ ì •ì˜ëŠ” \"ê±°ì˜\" ê°™ì€ ìƒíƒœë¡œ ìœ ì§€ë˜ê³  ìˆìœ¼ë©°, Terragrunt Live ë””ë ‰í„°ë¦¬ë¥¼ ë‹¤ë¥¸ í™˜ê²½ì˜ ì´ë¦„ìœ¼ë¡œ êµ¬ì¡°í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\nAWS í™˜ê²½ ì´ë¦„ê³¼ ë””ë ‰í„°ë¦¬ ì´ë¦„ì´ ì¼ì¹˜í•˜ë¯€ë¡œ ê°„ë‹¨í•œ ì •ê·œ í‘œí˜„ì‹ìœ¼ë¡œ ì‹¤í–‰ ì‹œê°„ì— í™˜ê²½ ê°’ì„ ì¶”ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## infrastructure/live/terragrunt.hcl\n\nì—¬ê¸°ì— ì™„ì „í•œ terragrunt.hcl íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nbackend.tfì™€ provider.tf ìƒì„±ê¸°ì—ì„œ \"profile\" ë§¤ê°œë³€ìˆ˜ë¥¼ ì£¼ëª©í•´ì£¼ì„¸ìš”. ë‹¤ìŒ ì„¹ì…˜ì—ì„œ ì´ë“¤ì„ ì œê±°í•  ì˜ˆì •ì…ë‹ˆë‹¤.\n\n```js\nlocals {\n  # í™˜ê²½\n  env_regex = \"infrastructure/live/([a-zA-Z0-9-]+)/\"\n  aws_env   = try(regex(local.env_regex, get_original_terragrunt_dir())[0])\n  # ì–´í”Œë¦¬ì¼€ì´ì…˜\n  app_name = \"my-app\"\n  component = \"api\"\n\n  # AWS ì¡°ì§ ê³„ì •\n  account_mapping = {\n    dev             = 22222222222\n    test            = 111111111111\n    production      = 000000000000\n    shared-services = 555555555555\n  }\n  # ê°€ì •í•  IAM ì—­í• \n  account_role_name     = \"apps-terraform-execution-role\" # <--- ê°€ì •í•  ì—­í• \n  # ì§€ì—­ ë° ê°€ìš© ì˜ì—­\n  region = \"us-east-1\"\n}\nremote_state {\n  backend = \"s3\"\n  generate = {\n    path      = \"backend.tf\"\n    if_exists = \"overwrite_terragrunt\"\n  }\n  config = {\n    bucket         = \"terraform-state-shared-services\"\n    key            = \"${local.app_name}/${get_path_from_repo_root()}/terraform.tfstate\"\n    region         = local.region\n    profile        = \"shared-services\" #<----- AWS í”„ë¡œí•„\n    encrypt        = true\n    dynamodb_table = \"shared-services-lock-table\"\n  }\n}\ngenerate \"provider\" {\n  path      = \"provider.tf\"\n  if_exists = \"overwrite_terragrunt\"\n  contents  = <<-EOF\n    provider \"aws\" {\n      region = \"${local.region}\"\n      profile = \"shared-services\" #<----- AWS í”„ë¡œí•„\n      allowed_account_ids = [\n        \"${local.account_mapping[local.aws_env]}\"\n      ]\n      assume_role {\n        role_arn = \"arn:aws:iam::${local.account_mapping[local.aws_env]}:role/${local.account_role_name}\"\n      }\n      default_tags {\n        tags = {\n          Environment = \"${local.aws_env}\"\n          ManagedBy   = \"terraform\"\n          DeployedBy  = \"terragrunt\"\n          Creator     = \"${get_env(\"USER\", \"NOT_SET\")}\"\n          Application = \"${local.app_name}\"\n          Component   = \"${local.component}\"\n        }\n      }\n    }\nEOF\n}\n```\n\nTerragruntê°€ ìƒì„±ê¸°ì— ë³´ê°„ì„ í—ˆìš©í•˜ë¯€ë¡œ ëª¨ë“  ëŒ€ìƒ AWS ê³„ì •ì— ëŒ€í•´ ë§¤ê°œë³€ìˆ˜í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## infrastructure/live/\\_env/app.hcl\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\ní…Œì´ë¸” íƒœê·¸ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•´ì£¼ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## Terraform í”„ë¡œë¹„ì €ë‹ ì¸í”„ë¼ì— í•„ìš”í•œ ì—­í•  ì„¤ì •í•˜ê¸°\n\n```js\naccount_role_name     = \"apps-terraform-execution-role\" # <--- ì „í™˜í•  ì—­í• \n```\n\në˜í•œ ì´ì „ ê²Œì‹œë¬¼ì—ì„œ AWS ê³µìœ  ì„œë¹„ìŠ¤ ê³„ì •ì— terraform-multiaccount-role ë° ê° ì‘ì—… ë¶€í•˜ ê³„ì •(ê°œë°œ, í…ŒìŠ¤íŠ¸, í”„ë¡œë•ì…˜)ì— terraform-roleì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤.\n\nê·¸ëŸ¬ë‚˜ ì´ ì„¤ì •ì€ í•˜ë‚˜ì˜ ì—”í„°í‹°(terraform-multiaccount-role)ê°€ ëª¨ë“  ê³„ì •ì—ì„œ terraform-roleì„ ê°€ì •(Assume)í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤. ì´ëŠ” ê°œë°œíŒ€ì´ ìì²´ ì¸í”„ë¼ë¥¼ ê°œë°œ í™˜ê²½ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤ëŠ” ê²½ìš°ì—ëŠ” í¸ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ê°œë°œ íŒ€ì´ Dev ê³„ì •ì—ì„œë§Œ ì—­í• ì„ ì „í™˜í•  ìˆ˜ ìˆëŠ” ì—”í„°í‹°ì™€ Test ë° Productionì— ëŒ€í•œ ë‹¤ë¥¸ ì—”í„°í‹°ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## AWS Identity Center ìœ„ì„ëœ ê´€ë¦¬ì ê³„ì • ë° ê¶Œí•œ ì§‘í•©\n\nAWS ê³„ì •ì— ê¶Œí•œ ì§‘í•©ì„ ë§Œë“œëŠ” ë°©ë²• ë° ê¶Œí•œ ì§‘í•©ì„ AWS ê³„ì •ì— í• ë‹¹í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ë¬¸ì„œë¥¼ ë”°ë¥´ì„¸ìš”.\n\në‹¤ìŒê³¼ ê°™ì€ ê¶Œí•œ ì§‘í•©ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”: terraform-dev, terraform-test, terraform-production.\n\nê° ê¶Œí•œ ì§‘í•©ì— ëŒ€í•œ ëŒ€ìƒ ê³„ì •ì— ë‹¤ìŒê³¼ ê°™ì€ ë‚´ë¶€ ì •ì±…ì„ ë§Œë“œì„¸ìš”. í—ˆìš©í•˜ëŠ” ê¶Œí•œ ì§‘í•©(Identity ê³„ì •ì— ì„¤ì •ëœ)ì´ ê³µìœ  ì„œë¹„ìŠ¤ ê³„ì •ì— ë°°í¬ë˜ì–´ ë‹¤ìŒ ê³„ì •ì—ì„œ ì—­í• ì„ ê°€ì •í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ë ‡ê²Œ ë³´ì´ëŠ” 3ê°€ì§€ ë‹¤ë¥¸ ê¶Œí•œ ì„¸íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤:\n\n```js\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"sts:AssumeRole\",\n            \"Resource\": \"arn:aws:iam::000000000000:role/apps-terraform-execution-role\"\n        },\n        {\n            \"Sid\": \"Statement1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n              \"s3:GetObject\",\n              \"s3:PutObject\",\n              \"s3:ListBucket\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::terraform-state-shared-services*\",\n                \"arn:aws:s3:::terraform-state-shared-services/*\"\n            ]\n        },\n        {\n            \"Sid\": \"Statement2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n              \"dynamodb:GetItem\",\n              \"dynamodb:PutItem\",\n              \"dynamodb:DeleteItem\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:us-east-1:555555555555:table/shared-services-lock-table\"\n            ]\n        }\n    ]\n}\n```\n\nê° ì›Œí¬ë¡œë“œ ê³„ì •ì— apps-terraform-execution-roleì„ ë§Œë“¤ê³  SSO ì‚¬ìš©ìê°€ ì—­í• ì„ í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤.\n\nì°¸ê³ : \"terraform-production\"ì—ê²Œë„ Testì—ì„œ ì—­í• ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì •ì±…ì„ ì•½ê°„ ì¡°ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# í”Œë«í¼ ì¸í”„ë¼ (IaC)\n\nìµœì†Œí•œì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•´ DNS, ë„¤íŠ¸ì›Œí‚¹ ë° ì‹ë³„ ê´€ë¦¬ ì—­í•  ë° ì •ì±…ê³¼ ê°™ì€ í”Œë«í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.\n\n```js\nâœ  live git:(main) âœ— tree\n.\nâ”œâ”€â”€ _env\nâ”‚   â”œâ”€â”€ route53-zones.hcl\nâ”‚   â””â”€â”€ iam-roles.hcl\nâ”œâ”€â”€ dev\nâ”‚   â”œâ”€â”€ iam-roles\nâ”‚   â”‚   â””â”€â”€ terragrunt.hcl\nâ”‚   â”œâ”€â”€ route53-zones\nâ”‚   â”‚   â””â”€â”€ terragrunt.hcl\nâ”‚   â””â”€â”€ platform\nâ”‚       â””â”€â”€ terragrunt.hcl\nâ”œâ”€â”€ network\nâ”‚   â”œâ”€â”€ dmz\nâ”‚   â”‚   â””â”€â”€ terragrunt.hcl\nâ”‚   â”œâ”€â”€ network-egress\nâ”‚   â”‚   â””â”€â”€ terragrunt.hcl\nâ”‚   â”œâ”€â”€ transitgateway-dmz-vpc-attachment\nâ”‚   â”‚   â””â”€â”€ terragrunt.hcl\nâ”‚   â””â”€â”€ transitgateway-egress-vpc-attachment\nâ”‚       â”œâ”€â”€ mystate.tfstate\nâ”‚       â””â”€â”€ terragrunt.hcl\nâ”œâ”€â”€ production\nâ”‚   â”œâ”€â”€ iam-roles\nâ”‚   â”‚   â””â”€â”€ terragrunt.hcl\nâ”‚   â””â”€â”€ platform\nâ”‚       â””â”€â”€ terragrunt.hcl\nâ”œâ”€â”€ terragrunt.hcl\nâ””â”€â”€ test\n    â”œâ”€â”€ iam-roles\n    â”‚   â””â”€â”€ terragrunt.hcl\n    â”œâ”€â”€ route53-zones\n    â”‚   â””â”€â”€ terragrunt.hcl\n    â””â”€â”€ platform\n        â””â”€â”€ terragrunt.hcl\n```\n\n## ë¡œì»¬ ë³€ìˆ˜\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì—¬ëŸ¬ ê°œì˜ ê³„ì • ê°’ë“¤ì„ í•˜ë‚˜ì˜ ì¥ì†Œì—ì„œ ì¤‘ì•™í™”í•˜ëŠ” ë°©ë²•ì˜ ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n```js\nlocals {\n  # í™˜ê²½ ë³€ìˆ˜\n  env_regex = \"infrastructure/live/([a-zA-Z0-9-]+)/\"\n  aws_env   = try(regex(local.env_regex, get_original_terragrunt_dir())[0])\n  # ì–´í”Œë¦¬ì¼€ì´ì…˜\n  app_name  = \"my-application-platform\"\n  component = \"platform\"\n  platform_apps = [\n    \"application_1\",\n    \"application_2\",\n    \"application_3\"\n  ]\n  # AWS ì¡°ì§ ê³„ì •\n  application_account_mapping = {\n    dev        = 222222222222\n    test       = 111111111111\n    production = 000000000000\n  }\n  platform_account_mapping = {\n    shared-services = 555555555555\n    network         = \"666666666666\"\n    dns             = 888888888888\n  }\n  account_mapping = merge(local.application_account_mapping, local.platform_account_mapping)\n\n  # ê°€ì •í•  IAM ì—­í• \n  account_role_name     = \"terraform-role\"\n  multiaccount_role_arn = \"arn:aws:iam::555555555555:role/terraform-multiaccount-role\" # shared-services\n\n  terraform_execution_role_mapping = {\n    dev = \"arn:aws:iam::555555555555:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_terraform-dev_ab1\"\n    test = \"arn:aws:iam::555555555555:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_terraform-test_ab2\"\n    production = \"arn:aws:iam::555555555555:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_terraform-production_ab3\"\n  }\n\n  # ê¸°íƒ€ í”Œë«í¼ êµ¬ì„± ê°’ë“¤\n  # ===================================\n  # DNS\n  main_public_dns_zone_name     = \"example.com\"\n  env_public_dns_zone_subdomain = \"${local.aws_env}\"\n  environment_hosted_zone_name  = \"${local.env_public_dns_zone_subdomain}.${local.main_public_dns_zone_name}\"\n  acm_subject_alternative_names = [\n    \"${local.environment_hosted_zone_name}\",\n    \"*.${local.environment_hosted_zone_name}\",\n    \"*.api.${local.environment_hosted_zone_name}\",\n    \"*.myapps.${local.environment_hosted_zone_name}\",\n    \"*.apps.${local.environment_hosted_zone_name}\"\n  ]\n  # ì§€ì—­ ë° ê°€ìš© ì˜ì—­\n  region = \"us-east-1\"\n  azs = [\n    \"us-east-1a\",\n    \"us-east-1b\",\n    \"us-east-1c\"\n  ]\n  platform_accounts = {\n    dev = {\n      cidr = \"10.3.0.0/16\"\n      private_subnets = [\n        \"10.3.1.0/24\",\n        \"10.3.2.0/24\",\n        \"10.3.3.0/24\"\n      ]\n    }\n    test = {\n      cidr = \"10.2.0.0/16\"\n      private_subnets = [\n        \"10.2.1.0/24\",\n        \"10.2.2.0/24\",\n        \"10.2.3.0/24\"\n      ]\n    }\n    production = {\n      cidr = \"10.0.0.0/16\"\n      private_subnets = [\n        \"10.0.1.0/24\",\n        \"10.0.2.0/24\",\n        \"10.0.3.0/24\"\n      ]\n    }\n  }\n}\n```\n\n```js\ninclude \"root\" {\n  path = find_in_parent_folders()\n}\n\ninclude \"env\" {\n  path = \"../../_env/iam-roles.hcl\"\n}\n```\n\n```js\nlocals {\n  env_vars = read_terragrunt_config(find_in_parent_folders(\"terragrunt.hcl\"))\n  env      = local.env_vars.locals.aws_env\n}\n\nterraform {\n  source = \"../../../modules//platform/iam-roles\"\n}\n\ninputs = {\n  trusted_role_arns = [\n    local.env_vars.locals.terraform_execution_role_mapping[local.env]\n  ]\n}\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## infrastructure/modules/platform/iam-roles\n\n\"Iam:_\"ì— ëŒ€í•œ ë²”ìœ„ë¥¼ ì¢íˆê³  ìˆìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. ì´ëŠ” Terraformì´ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ìœ„í•´ Role ë° ì •ì±…ì„ ìƒì„±, ì œê±° ë° ì—…ë°ì´íŠ¸í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— í•„ìš”í•œ ê¶Œí•œì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ê²½ìš° \":role/app/_\" ë‚´ì˜ Roles ë° Policiesë¡œ ë²”ìœ„ë¥¼ ì¢í ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```json\ndata \"aws_caller_identity\" \"current\" {}\nmodule \"app_terraform_execution_role\" {\n  source                            = \"../../iam-role\"\n  role_name                         = \"apps-terraform-execution-role\"\n  create_role                       = true\n  role_requires_mfa                 = var.role_requires_mfa\n  path                              = \"/\"\n  description                       = \"Terraform Execution role\"\n  trusted_role_arns                 = var.trusted_role_arns\n  number_of_custom_role_policy_arns = 1\n  policy = jsonencode(\n    {\n      \"Version\" : \"2012-10-17\",\n      \"Statement\" : [\n        {\n          \"Action\" : var.app_allowed_actions,\n          \"Effect\" : \"Allow\",\n          \"Resource\" : \"*\",\n          \"Condition\" : {\n            \"StringEquals\" : {\n              \"aws:RequestedRegion\" : \"us-east-1\"\n            }\n          }\n        },\n        {\n          \"Action\" : [\n            \"iam:*\"\n          ],\n          \"Effect\" : \"Allow\",\n          \"Resource\" : \"arn:aws:iam::${data.aws_caller_identity.current.account_id}:role/app/*\"\n        }\n      ]\n  })\n}\n\nvariable \"app_allowed_actions\" {\n  default = [\n    \"cloudwatch:*\",\n    \"iam:List*\",\n    \"iam:Get*\",\n    \"iam:Describe*\",\n    \"logs:*\",\n    \"logs:ListTagsLogGroup\",\n    \"s3:*\",\n    \"secretsmanager:*\",\n    \"ses:*\",\n    \"sns:*\",\n    \"ssm:*\",\n    \"dynamodb:*\",\n    \"sts:*\",\n    \"route53:*\"\n  ]\n}\n```\n\n```json\nmodule \"iam_policy\" {\n  source      = \"git::https://github.com/terraform-aws-modules/terraform-aws-iam.git//modules/iam-policy\"\n  path        = var.path\n  name        = \"${var.role_name}-policy\"\n  description = var.description\n  policy      = var.policy\n}\n\nmodule \"iam_assumable_role\" {\n  source            = \"git::https://github.com/terraform-aws-modules/terraform-aws-iam.git//modules/iam-assumable-role\"\n  create_role       = var.create_role\n  role_name         = var.role_name\n  role_requires_mfa = var.role_requires_mfa\n  trusted_role_arns = var.trusted_role_arns\n  custom_role_policy_arns = [\n    module.iam_policy.arn\n  ]\n  number_of_custom_role_policy_arns = var.number_of_custom_role_policy_arns\n}\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# AWS ì¸ê°€: SSOë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì´ë¯€ë¡œ ì¥ê¸°ì ìœ¼ë¡œ ìœ íš¨í•œ ìê²© ì¦ëª…ì´ í•„ìš”í•˜ì§€ ì•Šì•„ìš” ğŸ¥³\n\n# ë¡œì»¬ êµ¬ì„± í”„ë¡œíŒŒì¼ êµ¬ì„± (~/.aws/config)\n\n## í”Œë«í¼\n\nìš”ê¸° ëª»ìƒê¸´ ë‹­ê³¼ ê³„ë€ ë¬¸ì œê°€ ìˆëŠ”ë°... ê¹”ë”í•œ AWS ê³„ì •ì´ ìˆê³ , í”Œë«í¼ ì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ì— ê¶Œí•œì„ ë¶€ì—¬í•´ì•¼ í•´ìš”. ì´ê±´ IaCë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ì„œ í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œì—ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nAWS ì½˜ì†”ì´ë‚˜ CLIë¥¼ ì‚¬ìš©í•˜ì—¬ Terraform í”Œë«í¼ì— ëŒ€í•œ IAM ë˜ëŠ” IAM Identity Center ì‚¬ìš©ìë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì„¤ì •ì´ ì™„ë£Œë˜ë©´ IaCë¥¼ í”„ë¡œë¹„ì €ë‹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ ëª¨ë“  ì—­í• ê³¼ ì •ì±…(CICD ì¸¡ë©´ì„ ê³ ë ¤í•œ)ì€ í”Œë«í¼ IaCì—ì„œ ìƒì„±ë©ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì„ ìœ„í•œ ëª¨ë“  ì—­í• ê³¼ ì •ì±…(ì˜ˆ: ëŒë‹¤ ì‹¤í–‰ ì—­í• )ì€ ì‘ìš© í”„ë¡œê·¸ë¨ ì½”ë“œ ë‚´ì—ì„œ ìƒì„±ë©ë‹ˆë‹¤.\n\n```js\n[profile terraform-platform]\nsso_start_url=https://my-organization.awsapps.com/start\nsso_region=us-east-1\nsso_account_id=555555555555\nsso_role_name=PlatformTerraform\nregion=us-east-1\noutput=json\n```\n\n## ì‘ìš© í”„ë¡œê·¸ë¨ ë¦¬ì†ŒìŠ¤ (ê°œë°œìê°€ ì“°ê¸° ì•¡ì„¸ìŠ¤ë¥¼ ì–»ëŠ” ê³³)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/assets/img/2024-05-27-MyIaCAWSMulti-AccountProvisioningBluePrintBestPractices_1.png\" />\n\n```js\n[profile terraform]\nsso_start_url=https://my-organization.awsapps.com/start\nsso_region=us-east-1\nsso_account_id=555555555555\nsso_role_name=terraform-dev\nregion=us-east-1\noutput=json\n\n[profile terraform-test]\nsso_start_url=https://my-organization.awsapps.com/start\nsso_region=us-east-1\nsso_account_id=555555555555\nsso_role_name=terraform-test\nregion=us-east-1\noutput=json\n\n[profile terraform-production]\nsso_start_url=https://my-organization.awsapps.com/start\nsso_region=us-east-1\nsso_account_id=555555555555\nsso_role_name=terraform-production\nregion=us-east-1\noutput=json\n```\n\n# AWS Backend & Provider Config\n\nì–´ë¨¸ë¨¸... íœ´ìŠ¤í„´, ë¬¸ì œ ë°œìƒí–ˆì–´ìš”.... AWS ê³„ì • ë³„ë¡œ ë‹¤ë¥¸ ê¶Œí•œ ì„¸íŠ¸ê°€ ìˆì–´ìš”... ì´ì œ ë” ì´ìƒ `profile = shared-services`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ëë„¤ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\ní˜¹ì‹œ ë§¤í•‘í• ê¹Œìš”? ì•„ë‹ˆë©´ í™˜ê²½ê³¼ ì ‘ë‘ì‚¬ë¥¼ ì¶”ê°€í• ê¹Œìš”?â€¦.\n\n```js\nremote_state {\n  backend = \"s3\"\n .....\n  }\n  config = {\n   ........\n\n    # ì—¬ê¸°ê°€ ë¬¸ì œì…ë‹ˆë‹¤\n    profile        = \"terraform\" # í˜¹ì€ \"terraform-test\" ë˜ëŠ” \"terraform-production\"\n  }\n}\n\ngenerate \"provider\" {\n  path      = \"provider.tf\"\n  if_exists = \"overwrite_terragrunt\"\n  contents  = <<-EOF\n    provider \"aws\" {\n      ...\n      ....\n      profile = \"terraform\" # í˜¹ì€ \"terraform-test\" ë˜ëŠ” \"terraform-production\"\n    }\nEOF\n}\n```\n\n## ì´ê²ƒì„ ì œê±°í•˜ê³  í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•©ì‹œë‹¤\n\n```js\nlocals {\n  # ENV\n  env_regex = \"infrastructure/live/([a-zA-Z0-9-]+)/\"\n  aws_env   = try(regex(local.env_regex, get_original_terragrunt_dir())[0])\n  # Application\n  app_name  = \"my-application-platform\"\n  component = \"platform\"\n  platform_apps = [\n    \"application_1\",\n    \"application_2\",\n    \"application_3\"\n  ]\n  # AWS Organizations Accounts\n  application_account_mapping = {\n    dev        = 222222222222\n    test       = 111111111111\n    production = 000000000000\n  }\n  platform_account_mapping = {\n    shared-services = 555555555555\n    network         = \"666666666666\"\n    dns             = 888888888888\n  }\n  account_mapping = merge(local.application_account_mapping, local.platform_account_mapping)\n\n  # IAM Roles to Assume\n  account_role_name     = \"terraform-role\"\n  multiaccount_role_arn = \"arn:aws:iam::555555555555:role/terraform-multiaccount-role\" # shared-services\n\n  terraform_execution_role_mapping = {\n    dev = \"arn:aws:iam::555555555555:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_terraform-dev_ab1\"\n    test = \"arn:aws:iam::555555555555:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_terraform-test_ab2\"\n    production = \"arn:aws:iam::555555555555:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_terraform-production_ab3\"\n  }\n\n  # Other Platform Config Values Below\n  # ===================================\n  # DNS\n  main_public_dns_zone_name     = \"example.com\"\n  env_public_dns_zone_subdomain = \"${local.aws_env}\"\n  environment_hosted_zone_name  = \"${local.env_public_dns_zone_subdomain}.${local.main_public_dns_zone_name}\"\n  acm_subject_alternative_names = [\n    \"${local.environment_hosted_zone_name}\",\n    \"*.${local.environment_hosted_zone_name}\",\n    \"*.api.${local.environment_hosted_zone_name}\",\n    \"*.myapps.${local.environment_hosted_zone_name}\",\n    \"*.apps.${local.environment_hosted_zone_name}\"\n  ]\n  # Region and Zones\n  region = \"us-east-1\"\n  azs = [\n    \"us-east-1a\",\n    \"us-east-1b\",\n    \"us-east-1c\"\n  ]\n  platform_accounts = {\n    dev = {\n      cidr = \"10.3.0.0/16\"\n      private_subnets = [\n        \"10.3.1.0/24\",\n        \"10.3.2.0/24\",\n        \"10.3.3.0/24\"\n      ]\n    }\n    test = {\n      cidr = \"10.2.0.0/16\"\n      private_subnets = [\n        \"10.2.1.0/24\",\n        \"10.2.2.0/24\",\n        \"10.2.3.0/24\"\n      ]\n    }\n    production = {\n      cidr = \"10.0.0.0/16\"\n      private_subnets = [\n        \"10.0.1.0/24\",\n        \"10.0.2.0/24\",\n        \"10.0.3.0/24\"\n      ]\n    }\n  }\n}\nremote_state {\n  backend = \"s3\"\n  generate = {\n    path      = \"backend.tf\"\n    if_exists = \"overwrite_terragrunt\"\n  }\n  config = {\n    bucket         = \"terraform-state-shared-services\"\n    key            = \"${local.app_name}/${get_path_from_repo_root()}/terraform.tfstate\"\n    region         = local.region\n    encrypt        = true\n    dynamodb_table = \"shared-services-lock-table\"\n  }\n}\n\ngenerate \"provider\" {\n  path      = \"provider.tf\"\n  if_exists = \"overwrite_terragrunt\"\n  contents  = <<-EOF\n    provider \"aws\" {\n      region = \"${local.region}\"\n      allowed_account_ids = [\n        \"${local.account_mapping[local.aws_env]}\"\n      ]\n      assume_role {\n        role_arn = \"arn:aws:iam::${local.account_mapping[local.aws_env]}:role/${local.account_role_name}\"\n      }\n      default_tags {\n        tags = {\n          Environment = \"${local.aws_env}\"\n          ManagedBy   = \"terraform\"\n          DeployedBy  = \"terragrunt\"\n          Creator     = \"${get_env(\"USER\", \"NOT_SET\")}\"\n          Application = \"${local.app_name}\"\n          Component   = \"${local.component}\"\n        }\n      }\n    }\nEOF\n}\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ë°°í¬\n\n## í”Œë«í¼\n\n```js\naws sso login --profile terraform-platform\nexport AWS_PROFILE=terraform-platform\n\n# ê°œë°œ\ncd infrastructure/live/dev/iam-roles\nterragrunt init\nterragrunt plan\nterragrunt apply\n\n# í…ŒìŠ¤íŠ¸\ncd infrastructure/live/test/iam-roles\nterragrunt init\nterragrunt plan\nterragrunt apply\n\n# í”„ë¡œë•ì…˜\ncd infrastructure/live/production/iam-roles\nterragrunt init\nterragrunt plan\nterragrunt apply\n```\n\n## ì–´í”Œë¦¬ì¼€ì´ì…˜\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì—¬ê¸°ì„œëŠ” ë°©ê¸ˆ ë§Œë“  ìƒˆ ì—­í• ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n```js\n# ê°œë°œ\ncd infrastructure/live/dev/app\naws sso login --profile terraform-dev\nexport AWS_PROFILE=terraform-dev\nterragrunt init\nterragrunt plan\nterragrunt apply\n\n# í…ŒìŠ¤íŠ¸\ncd infrastructure/live/test/app\naws sso login --profile terraform-test\nexport AWS_PROFILE=terraform-test\nterragrunt init\nterragrunt plan\nterragrunt apply\n\n# í”„ë¡œë•ì…˜\ncd infrastructure/live/production/app\naws sso login --profile terraform-production\nexport AWS_PROFILE=terraform-production\nterragrunt init\nterragrunt plan\nterragrunt apply\n```\n\n# AWS Vault\n\nAWS Vaultì€ ê°œë°œ í™˜ê²½ì—ì„œ AWS ìê²© ì¦ëª…ì„ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ì•¡ì„¸ìŠ¤í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nAWS Vaultì€ IAM ìê²© ì¦ëª…ì„ ì‚¬ìš©ìì˜ ìš´ì˜ ì²´ì œ ì•ˆì „í•œ í‚¤ ì €ì¥ì†Œì— ì €ì¥í•œ ë‹¤ìŒ í•´ë‹¹ ìê²© ì¦ëª…ì„ ì„ì‹œ ìê²© ì¦ëª…ìœ¼ë¡œ ìƒì„±í•˜ì—¬ ì‰˜ ë° ì‘ìš© í”„ë¡œê·¸ë¨ì— ë…¸ì¶œí•©ë‹ˆë‹¤. ì´ëŠ” AWS CLI ë„êµ¬ì™€ í•¨ê»˜ ë³´ì¡°ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìœ¼ë©° ~/.aws/configì— ìˆëŠ” í”„ë¡œí•„ê³¼ êµ¬ì„±ì„ ì¸ì‹í•©ë‹ˆë‹¤.\n\n```js\nbrew install --cask aws-vault\n```\n\n## ë”°ë¼ì„œ ì´ëŠ” ë°±ì—”ë“œ êµ¬ì„± ë° ê³µê¸‰ìì—ì„œ \"í”„ë¡œí•„\" ë§¤ê°œë³€ìˆ˜ë¥¼ ì œê±°í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\n# AWS-Vaultë¡œ ë°°í¬í•˜ê¸°\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# í”Œë«í¼\n\n```js\n# Dev\ncd infrastructure/live/dev/iam-roles\naws-vault exec terraform-platform terragrunt init\naws-vault exec terraform-platform terragrunt plan\naws-vault exec terraform-platform terragrunt apply\n\n# í…ŒìŠ¤íŠ¸\ncd infrastructure/live/test/iam-roles\naws-vault exec terraform-platform terragrunt init\naws-vault exec terraform-platform terragrunt plan\naws-vault exec terraform-platform terragrunt apply\n\n# í”„ë¡œë•ì…˜\ncd infrastructure/live/production/iam-roles\naws-vault exec terraform-platform terragrunt init\naws-vault exec terraform-platform terragrunt plan\naws-vault exec terraform-platform terragrunt apply\n```\n\n# ì• í”Œë¦¬ì¼€ì´ì…˜\n\n```js\ncd infrastructure/live/dev/app\naws-vault exec terraform-dev terragrunt init\naws-vault exec terraform-dev terragrunt plan\naws-vault exec terraform-dev terragrunt apply\n\ncd infrastructure/live/test/app\naws-vault exec terraform-test terragrunt init\naws-vault exec terraform-test terragrunt plan\naws-vault exec terraform-test terragrunt apply\n\ncd infrastructure/live/production/app\naws-vault exec terraform-production terragrunt init\naws-vault exec terraform-production terragrunt plan\naws-vault exec terraform-production terragrunt apply\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/assets/img/2024-05-27-MyIaCAWSMulti-AccountProvisioningBluePrintBestPractices_2.png\" />\n\n## ê²°ê³¼\n\n```js\n $ aws-vault exec terraform-production terragrunt apply\n\n\n\në°±ì—”ë“œ ì´ˆê¸°í™” ì¤‘...\n\në°±ì—”ë“œ \"s3\"ì´ ì„±ê³µì ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ë°±ì—”ë“œ êµ¬ì„±ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ Terraformì€\nìë™ìœ¼ë¡œì´ ë°±ì—”ë“œë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\nëª¨ë“ˆ ì´ˆê¸°í™” ì¤‘...\njobs_logs(ì„)ë¥¼ ìœ„í•´ git::https://github.com/terraform-aws-modules/terraform-aws-dynamodb-table.gitì„(ë¥¼) ë‹¤ìš´ë¡œë“œ ì¤‘...\n- .terraform/modules/logsì— jobs_logs\n- ../lambda-execution-roleì— lambda_execution_role\ns3_bucket_files(ì„)ë¥¼ ìœ„í•´ git::https://github.com/terraform-aws-modules/terraform-aws-s3-bucket.git?ref=v3.6.1ì„(ë¥¼) ë‹¤ìš´ë¡œë“œ ì¤‘...\n- .terraform/modules/s3_bucket_filesì— s3_bucket_files\n- ../ssm-parameters-storeì— ssm_params\n\nì œê³µì í”ŒëŸ¬ê·¸ì¸ ì´ˆê¸°í™” ì¤‘...\n- ì¢…ì†ì„± ì ê¸ˆ íŒŒì¼ì—ì„œ ì´ì „ ë²„ì „ì˜ hashicorp/aws ì¬ì‚¬ìš©\n- hashicorp/aws v5.23.1 ì„¤ì¹˜ ì¤‘...\n- hashicorp/aws v5.23.1 ì„¤ì¹˜ë¨ (HashiCorpì—ì„œ ì„œëª…ë¨)\n\nTerraformì´ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì´ì œ Terraformì„ ì‚¬ìš©í•˜ì—¬ ì‘ì—…ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \"terraform plan\"ì„ ì‹¤í–‰í•˜ì—¬\nì¸í”„ë¼ì— í•„ìš”í•œ ëª¨ë“  ë³€ê²½ ì‚¬í•­ì„ í™•ì¸í•´ ë³´ì„¸ìš”. ì´ì œ ëª¨ë“  Terraform ëª…ë ¹ì´\nì‘ë™í•´ì•¼ í•©ë‹ˆë‹¤.\n\nTerraformì„ ìœ„í•´ ëª¨ë“ˆì´ë‚˜ ë°±ì—”ë“œ êµ¬ì„±ì„ ì„¤ì • ë˜ëŠ” ë³€ê²½í•œ ê²½ìš°,\nì‘ì—… ë””ë ‰í„°ë¦¬ë¥¼ ë‹¤ì‹œ ì´ˆê¸°í™”í•˜ë ¤ë©´ì´ ëª…ë ¹ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”. ìŠì–´ ë²„ë¦° ê²½ìš°\në‹¤ë¥¸ ëª…ë ¹ì´ í•„ìš”í•œ ê²½ìš°ì´ë¥¼ ê°ì§€í•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•˜ë¼ëŠ” ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.\nìƒíƒœ ì ê¸ˆ íšë“ ì¤‘. ì´ ì‘ì—…ì€ ëª‡ ë¶„ ì •ë„ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤...\nmodule.lambda_execution_role.data.aws_iam_policy_document.lambda_assume_role_policy: ì½ëŠ” ì¤‘...\nmodule.s3_bucket_files.data.aws_caller_identity.current: ì½ëŠ” ì¤‘...\nmodule.s3_bucket_files.data.aws_canonical_user_id.this: ì½ëŠ” ì¤‘...\ndata.aws_caller_identity.current: ì½ëŠ” ì¤‘...\nmodule.s3_bucket_files.aws_s3_bucket.this[0]: ìƒíƒœ ìƒˆë¡œ ê³ ì¹¨ ì¤‘... [id=my-company-myapp-files-dev]\nmodule.jobs_logs.aws_dynamodb_table.this[0]: ìƒíƒœ ìƒˆë¡œ ê³ ì¹¨ ì¤‘... [id=my-company-myapp-logs]\nmodule.lambda_execution_role.data.aws_iam_policy_document.lambda_assume_role_policy: 0ì´ˆ í›„ì— ì½ê¸° ì™„ë£Œ [id=000000000]\ndata.aws_caller_identity.current: 0ì´ˆ í›„ì— ì½ê¸° ì™„ë£Œ [id=000000000]\nmodule.lambda_execution_role.data.aws_iam_policy_document.inline_policy: ì½ëŠ” ì¤‘...\nmodule.s3_bucket_files.data.aws_caller_identity.current: 0ì´ˆ í›„ì— ì½ê¸° ì™„ë£Œ [id=000000000]\nmodule.lambda_execution_role.data.aws_iam_policy_document.inline_policy: 0ì´ˆ í›„ì— ì½ê¸° ì™„ë£Œ [id=000000000]\nmodule.lambda_execution_role.aws_iam_role.lambda_execution_role: ìƒíƒœ ìƒˆë¡œ ê³ ì¹¨ ì¤‘... [id=my-company-myapp-lambda-execution-role]\nmodule.s3_bucket_files.data.aws_canonical_user_id.this: 1ì´ˆ í›„ì— ì½ê¸° ì™„ë£Œ [id=51528157cefbacf17d3cc90bf31e07f8f463cadfbf31739f6b264afac67fb2ce]\nmodule.s3_bucket_files.aws_s3_bucket_public_access_block.this[0]: ìƒíƒœ ìƒˆë¡œ ê³ ì¹¨ ì¤‘... [id=my-company-myapp-files-dev]\nmodule.ssm_params.aws_ssm_parameter.this[\"2\"]: ìƒíƒœ ìƒˆë¡œ ê³ ì¹¨ ì¤‘... [id=/app/myapp/lambda_role]\nmodule.ssm_params.aws_ssm_parameter.this[\"3\"]: ìƒíƒœ ìƒˆë¡œ ê³ ì¹¨ ì¤‘... [id=/app/myapp/event_bridge_name]\nmodule.ssm_params.aws_ssm_parameter.this[\"4\"]: ìƒíƒœ ìƒˆë¡œ ê³ ì¹¨ ì¤‘... [id=/app/myapp/logs]\nmodule.ssm_params.aws_ssm_parameter.this[\"1\"]: ìƒíƒœ ìƒˆë¡œ ê³ ì¹¨ ì¤‘... [id=/app/myapp/s3_bucket_files]\n\në³€ê²½ ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤. ì¸í”„ë¼ê°€ êµ¬ì„±ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤.\n\nTerraformì€ ì‹¤ì œ ì¸í”„ë¼ë¥¼ êµ¬ì„±ê³¼ ë¹„êµí•˜ê³  ì°¨ì´ì ì„ ì°¾ì•˜ìœ¼ë©° ë³€ê²½ ì‚¬í•­ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\nìƒíƒœ ì ê¸ˆ í•´ì œ ì¤‘. ì´ ì‘ì—…ì€ ëª‡ ë¶„ ì •ë„ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤...\n```\n\nì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!\n","ogImage":{"url":"/assets/img/2024-05-27-MyIaCAWSMulti-AccountProvisioningBluePrintBestPractices_0.png"},"coverImage":"/assets/img/2024-05-27-MyIaCAWSMulti-AccountProvisioningBluePrintBestPractices_0.png","tag":["Tech"],"readingTime":35},{"title":"í…Œë¼í¼ìœ¼ë¡œ AWS-VPC í”¼ì–´ë§í•˜ê¸°","description":"","date":"2024-05-27 17:35","slug":"2024-05-27-AWS-VPCPeeringwithTerraform","content":"\n![AWS VPC Peering with Terraform](/assets/img/2024-05-27-AWS-VPCPeeringwithTerraform_0.png)\n\nAWSì—ì„œ VPCëŠ” ë¬´ì—‡ì¸ê°€ìš”?\n\nAWSì—ì„œ VPC í”¼ì–´ë§ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?\n\nTerraformì€ ë¬´ì—‡ì¸ê°€ìš”?\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ ê¸€ì—ì„œëŠ” AWSì—ì„œ Terraformì„ ì‚¬ìš©í•˜ì—¬ VPC í”¼ì–´ë§ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•˜ëŠ” ë‹¨ê³„ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\nAWSì—ì„œ ìƒì„±ëœ ìì› ëª©ë¡\n\n- EC2 (2ëŒ€)\n- VPC (2ê°œ)\n- Internet Gateways (2ê°œ)\n- ë³´ì•ˆ ê·¸ë£¹ (4ê°œ)\n- VPC í”¼ì–´ë§ ì—°ê²° (1ê°œ)\n- ë¼ìš°íŠ¸ í…Œì´ë¸” (2ê°œ)\n\n# í”„ë¡œì íŠ¸ êµ¬ì¡°\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nterraform_project/\nâ”‚\nâ”œâ”€â”€ module/\nâ”‚ â”œâ”€â”€ ec2/\nâ”‚ â”‚ â”œâ”€â”€ main.tf\nâ”‚ â”‚ â”œâ”€â”€ output.tf\nâ”‚ â”‚ â””â”€â”€ variables.tf\nâ”‚ â”œâ”€â”€ vpc/\nâ”‚ â”‚ â”œâ”€â”€ main.tf\nâ”‚ â”‚ â”œâ”€â”€ output.tf\nâ”‚ â”‚ â””â”€â”€ variables.tf\nâ”‚ â””â”€â”€ ...\nâ”‚\nâ”œâ”€â”€ main.tf\nâ”œâ”€â”€ variables.tf\nâ””â”€â”€ variable.tfvars/\nâ”œâ”€â”€ dev-env.tfvars\nâ”œâ”€â”€ stage-env.tfvars\nâ””â”€â”€ prod-env.tfvars\n\n## ë‹¨ê³„ 1: VPCë¥¼ ìœ„í•œ ëª¨ë“ˆ ìƒì„± ë° ê°€ì ¸ì˜¤ê¸°\n\nmodules/vpc-peering/main.tf\n\n```js\nterraform {\n  required_providers {\n    aws = {\n      source                = \"hashicorp/aws\"\n      version               = \"~> 5.0\"\n      configuration_aliases = [aws.us_west]\n    }\n  }\n}\n\nprovider \"aws\" {\n  alias  = \"us_west\"\n  region = \"us-west-1\"\n}\n\nresource \"aws_vpc\" \"main_vpc\" {\n  cidr_block = var.vpc_cidr\n\n  tags = {\n    Name       = var.vpc_name\n    created_by = var.owner_name\n  }\n}\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì§€ê¸ˆ, í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ main.tf íŒŒì¼ì— ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤.\n\n```js\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  region = \"us-east-1\"\n}\n\nprovider \"aws\" {\n  alias  = \"us_west\"\n  region = \"us-west-1\"\n}\n\nmodule \"vpc_A\" {\n  source     = \"./modules/vpc\"\n  vpc_name   = var.vpcs[\"vpc_A\"][\"vpc_name\"]\n  vpc_cidr   = var.vpcs[\"vpc_A\"][\"cidr_block\"]\n  owner_name = var.owner_name\n}\n\nmodule \"vpc_B\" {\n  source     = \"./modules/vpc\"\n  vpc_name   = var.vpcs[\"vpc_B\"][\"vpc_name\"]\n  vpc_cidr   = var.vpcs[\"vpc_B\"][\"cidr_block\"]\n  owner_name = var.owner_name\n  providers = {\n    aws = aws.us_west\n  }\n}\n```\n\n## Step 2: Subnetsìš© ëª¨ë“ˆì„ ë§Œë“¤ì–´ importí•´ë³´ì„¸ìš”.\n\nmodules/subnets/main.tf\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0\"\n      # configuration_aliases = [aws.us_west]\n    }\n  }\n}\n\nprovider \"aws\" {\n  alias  = \"us_west\"\n  region = \"us-west-1\"\n}\n\nresource \"aws_subnet\" \"main_subnet\" {\n  vpc_id            = var.vpc_id\n  cidr_block        = var.subnet_cidr\n  availability_zone = var.availability_zone\n\n  tags = {\n    Name       = var.subnet_name\n    created_by = var.owner_name\n  }\n}\n```\n\nì´ì œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ main.tf íŒŒì¼ì— ëª¨ë“ˆì„ ê°€ì ¸ ì˜¤ê² ìŠµë‹ˆë‹¤.\n\n```js\nmodule \"subnetsForvpc_A\" {\n  for_each          = var.subnetsForvpc_A\n  source            = \"./modules/subnets\"\n  vpc_id            = module.vpc_A.vpc_id\n  subnet_cidr       = var.subnetsForvpc_A[each.key][\"subnet_cidr\"]\n  subnet_name       = var.subnetsForvpc_A[each.key][\"subnet_name\"]\n  availability_zone = var.subnetsForvpc_A[each.key][\"availability_zone\"]\n  owner_name        = var.owner_name\n}\n\nmodule \"subnetsForvpc_B\" {\n  for_each          = var.subnetsForvpc_B\n  source            = \"./modules/subnets\"\n  vpc_id            = module.vpc_B.vpc_id\n  subnet_cidr       = var.subnetsForvpc_B[each.key][\"subnet_cidr\"]\n  subnet_name       = var.subnetsForvpc_B[each.key][\"subnet_name\"]\n  availability_zone = var.subnetsForvpc_B[each.key][\"availability_zone\"]\n  owner_name        = var.owner_name\n  providers = {\n    aws = aws.us_west\n  }\n}\n```\n\n## ë‹¨ê³„ 3: ë³´ì•ˆ ê·¸ë£¹ ëª¨ë“ˆì„ ìƒì„±í•˜ê³  ê°€ì ¸ ì˜¤ê¸°\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nmodules/security-groups/main.tf\n\n```js\nterraform {\n  required_providers {\n    aws = {\n      source                = \"hashicorp/aws\"\n      version               = \"~> 5.0\"\n      configuration_aliases = [aws.us_west]\n    }\n  }\n}\n\nprovider \"aws\" {\n  alias  = \"us_west\"\n  region = \"us-west-1\"\n}\n\nresource \"aws_security_group\" \"allow_ssh\" {\n  name        = var.sg_name\n  description = var.sg_description\n  vpc_id      = var.vpc_id\n\n  ingress {\n    description = var.ingress_description\n    from_port   = var.ingress_from_port\n    to_port     = var.ingress_to_port\n    protocol    = var.ingress_protocol\n    cidr_blocks = var.ingress_cidr_blocks\n  }\n\n  egress {\n    from_port   = \"0\"\n    to_port     = \"0\"\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  tags = {\n    Name       = var.sg_name\n    created_by = var.owner_name\n  }\n}\n```\n\në³´ì•ˆ ê·¸ë£¹ì„ ìœ„í•´, ì €ëŠ” main.tf íŒŒì¼ì—ì„œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¡œ ëª¨ë“ˆì„ ë‘ ë²ˆ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ë³´ì•ˆ ê·¸ë£¹ì€ EC2ë¡œ SSHë¥¼ í—ˆìš©í•˜ê³ , ë‘ ë²ˆì§¸ëŠ” EC2ì—ì„œ ICMP íŒ¨í‚·ì˜ íë¦„ì„ í—ˆìš©í•©ë‹ˆë‹¤.\n\n```js\nmodule \"ssh_sg_vpcA\" {\n  source              = \"./modules/security-groups\"\n  sg_name             = var.sgs[\"ssh_sg\"][\"sg_name\"]\n  sg_description      = var.sgs[\"ssh_sg\"][\"sg_description\"]\n  ingress_description = var.sgs[\"ssh_sg\"][\"ingress_description\"]\n  ingress_from_port   = var.sgs[\"ssh_sg\"][\"ingress_from_port\"]\n  ingress_to_port     = var.sgs[\"ssh_sg\"][\"ingress_to_port\"]\n  ingress_protocol    = var.sgs[\"ssh_sg\"][\"ingress_protocol\"]\n  ingress_cidr_blocks = var.sg_cidr_blocks[\"ssh_sg\"][\"ingress_cidr_blocks\"]\n  owner_name          = var.owner_name\n  vpc_id              = module.vpc_A.vpc_id\n}\n\nmodule \"ssh_sg_vpcB\" {\n  source              = \"./modules/security-groups\"\n  sg_name             = var.sgs[\"ssh_sg\"][\"sg_name\"]\n  sg_description      = var.sgs[\"ssh_sg\"][\"sg_description\"]\n  ingress_description = var.sgs[\"ssh_sg\"][\"ingress_description\"]\n  ingress_from_port   = var.sgs[\"ssh_sg\"][\"ingress_from_port\"]\n  ingress_to_port     = var.sgs[\"ssh_sg\"][\"ingress_to_port\"]\n  ingress_protocol    = var.sgs[\"ssh_sg\"][\"ingress_protocol\"]\n  ingress_cidr_blocks = var.sg_cidr_blocks[\"ssh_sg\"][\"ingress_cidr_blocks\"]\n  owner_name          = var.owner_name\n  vpc_id              = module.vpc_B.vpc_id\n  providers = {\n    aws = aws.us_west\n  }\n}\n\nmodule \"icmp_sg_vpcA\" {\n  source              = \"./modules/security-groups\"\n  sg_name             = var.sgs[\"icmp_sg\"][\"sg_name\"]\n  sg_description      = var.sgs[\"icmp_sg\"][\"sg_description\"]\n  ingress_description = var.sgs[\"icmp_sg\"][\"ingress_description\"]\n  ingress_from_port   = var.sgs[\"icmp_sg\"][\"ingress_from_port\"]\n  ingress_to_port     = var.sgs[\"icmp_sg\"][\"ingress_to_port\"]\n  ingress_protocol    = var.sgs[\"icmp_sg\"][\"ingress_protocol\"]\n  ingress_cidr_blocks = var.sg_cidr_blocks[\"icmp_sg\"][\"ingress_cidr_blocks_for_vpcA\"]\n  owner_name          = var.owner_name\n  vpc_id              = module.vpc_A.vpc_id\n}\n\nmodule \"icmp_sg_vpcB\" {\n  source              = \"./modules/security-groups\"\n  sg_name             = var.sgs[\"icmp_sg\"][\"sg_name\"]\n  sg_description      = var.sgs[\"icmp_sg\"][\"sg_description\"]\n  ingress_description = var.sgs[\"icmp_sg\"][\"ingress_description\"]\n  ingress_from_port   = var.sgs[\"icmp_sg\"][\"ingress_from_port\"]\n  ingress_to_port     = var.sgs[\"icmp_sg\"][\"ingress_to_port\"]\n  ingress_protocol    = var.sgs[\"icmp_sg\"][\"ingress_protocol\"]\n  ingress_cidr_blocks = var.sg_cidr_blocks[\"icmp_sg\"][\"ingress_cidr_blocks_for_vpcB\"]\n  owner_name          = var.owner_name\n  vpc_id              = module.vpc_B.vpc_id\n  providers = {\n    aws = aws.us_west\n  }\n}\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ë‹¨ê³„ 4: EC2ë¥¼ ìœ„í•œ ëª¨ë“ˆ ìƒì„± ë° ê°€ì ¸ì˜¤ê¸°\n\nmodules/ec2/main.tf\n\n```js\nterraform {\n  required_providers {\n    aws = {\n      source                = \"hashicorp/aws\"\n      version               = \"~> 5.0\"\n      configuration_aliases = [aws.us_west]\n    }\n  }\n}\n\nprovider \"aws\" {\n  alias  = \"us_west\"\n  region = \"us-west-1\"\n}\n\nresource \"aws_instance\" \"my_ec2\" {\n\n  ami                         = var.ami_id\n  instance_type               = var.instance_type\n  subnet_id                   = var.subnet_id\n  associate_public_ip_address = true\n  key_name                    = var.key_name\n\n  tags = {\n    Name       = var.ec2_name\n    created_by = var.owner_name\n  }\n}\n\nresource \"aws_network_interface_sg_attachment\" \"ssh_sg_attachment\" {\n  security_group_id    = var.ssh_sg_id\n  network_interface_id = aws_instance.my_ec2.primary_network_interface_id\n}\n\nresource \"aws_network_interface_sg_attachment\" \"icmp_sg_attachment\" {\n  security_group_id    = var.icmp_sg_id\n  network_interface_id = aws_instance.my_ec2.primary_network_interface_id\n}\n```\n\nì´ì œ ëª¨ë“ˆì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ main.tf íŒŒì¼ì— ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nmodule \"ec2_vpcA\" {\nsource = \"./modules/ec2\"\nsubnet_id = module.subnetsForvpc_A[\"subnet1\"].subnet_id\nami_id = var.ec2s[\"ec2_vpcA\"][\"ami_id\"]\ninstance_type = var.ec2s[\"ec2_vpcA\"][\"instance_type\"]\nec2_name = var.ec2s[\"ec2_vpcA\"][\"ec2_name\"]\nkey_name = var.ec2s[\"ec2_vpcA\"][\"key_name\"]\nssh_sg_id = module.ssh_sg_vpcA.sg_id\nicmp_sg_id = module.icmp_sg_vpcA.sg_id\nowner_name = var.owner_name\n}\n\nmodule \"ec2_vpcB\" {\nsource = \"./modules/ec2\"\nsubnet_id = module.subnetsForvpc_B[\"subnet1\"].subnet_id\nami_id = var.ec2s[\"ec2_vpcB\"][\"ami_id\"]\ninstance_type = var.ec2s[\"ec2_vpcB\"][\"instance_type\"]\nec2_name = var.ec2s[\"ec2_vpcB\"][\"ec2_name\"]\nkey_name = var.ec2s[\"ec2_vpcB\"][\"key_name\"]\nssh_sg_id = module.ssh_sg_vpcB.sg_id\nicmp_sg_id = module.icmp_sg_vpcB.sg_id\nowner_name = var.owner_name\nproviders = {\naws = aws.us_west\n}\n}\n\n## Step 5: Create modules for Internet Gateways and importing them\n\nmodules/internet-gateways/main.tf\n\nterraform {\nrequired_providers {\naws = {\nsource = \"hashicorp/aws\"\nversion = \"~> 5.0\"\nconfiguration_aliases = [aws.us_west]\n}\n}\n}\n\nprovider \"aws\" {\nalias = \"us_west\"\nregion = \"us-west-1\"\n}\n\nresource \"aws_internet_gateway\" \"i_gw\" {\nvpc_id = var.vpc_id\n\ntags = {\nName = var.igw_name\ncreated_by = var.owner_name\n}\n}\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ì œ, í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ main.tf íŒŒì¼ì— ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤.\n\n```js\nmodule \"igw_vpcA\" {\n  source     = \"./modules/internet-gateways\"\n  vpc_id     = module.vpc_A.vpc_id\n  igw_name   = var.igws[\"igw_vpcA\"][\"name\"]\n  owner_name = var.owner_name\n}\n\nmodule \"igw_vpcB\" {\n  source     = \"./modules/internet-gateways\"\n  vpc_id     = module.vpc_B.vpc_id\n  igw_name   = var.igws[\"igw_vpcB\"][\"name\"]\n  owner_name = var.owner_name\n  providers = {\n    aws = aws.us_west\n  }\n}\n```\n\n## ë‹¨ê³„ 6: VPC Peering, VPC Peering accepter, VPC Peering configureìš© ëª¨ë“ˆ ìƒì„± ë° ê°€ì ¸ì˜¤ê¸°\n\nëª¨ë“ˆ - VPC Peering (modules/vpc-peering/main.tf)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```kotlin\ní…Œë¼í¼ {\n  í•„ìˆ˜_ì œê³µì {\n    aws = {\n      ì†ŒìŠ¤ = \"hashicorp/aws\"\n      ë²„ì „ = \"~> 5.0\"\n      êµ¬ì„±_ë³„ì¹­ = [aws.us_west]\n    }\n  }\n}\n\nì œê³µì \"aws\" {\n  ë³„ì¹­  = \"us_west\"\n  ì§€ì—­ = \"us-west-1\"\n}\n\në¦¬ì†ŒìŠ¤ \"aws_vpc_peering_connection\" \"vpc_peering\" {\n  peer_vpc_id = var.peer_vpc_id\n  vpc_id      = var.vpc_id\n  peer_region = \"us-west-1\"\n  tags = {\n    ì´ë¦„       = var.vpcpeer_name\n    ìƒì„±ì = var.owner_name\n  }\n}\n```\n\nëª¨ë“ˆ â€” VPC í”¼ì–´ë§ ìˆ˜ë½ì (modules/vpc-peering-accepter/main.tf)\n\n```kotlin\ní…Œë¼í¼ {\n  í•„ìˆ˜_ì œê³µì {\n    aws = {\n      ì†ŒìŠ¤ = \"hashicorp/aws\"\n      ë²„ì „ = \"~> 5.0\"\n      êµ¬ì„±_ë³„ì¹­ = [aws.us_west]\n    }\n  }\n}\n\nì œê³µì \"aws\" {\n  ë³„ì¹­  = \"us_west\"\n  ì§€ì—­ = \"us-west-1\"\n}\n\në¦¬ì†ŒìŠ¤ \"aws_vpc_peering_connection_accepter\" \"peer_vpc_AB\" {\n  provider = aws.us_west\n\n  vpc_peering_connection_id = var.vpc_peering_id\n  auto_accept               = true\n\n  tags = {\n    ìª½       = \"ìˆ˜ë½ì\"\n    ì†Œìœ ì_ì´ë¦„ = var.owner_name\n  }\n}\n```\n\nëª¨ë“ˆ â€” VPC í”¼ì–´ë§ êµ¬ì„± (modules/vpc-peering-configure/main.tf)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nterraform {\n  required_providers {\n    aws = {\n      source                = \"hashicorp/aws\"\n      version               = \"~> 5.0\"\n      configuration_aliases = [aws.us_west]\n    }\n  }\n}\n\nprovider \"aws\" {\n  alias  = \"us_west\"\n  region = \"us-west-1\"\n}\n\nresource \"aws_vpc_peering_connection_options\" \"vpc_peering_configure\" {\n  vpc_peering_connection_id = var.vpc_peering_connection_id\n}\n```\n\nì´ì œ, ìœ„ì˜ ëª¨ë“  ëª¨ë“ˆì„ ë£¨íŠ¸ì˜ main.tf íŒŒì¼ë¡œ ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤.\n\n```js\nmodule \"vpc_peering\" {\n  source       = \"./modules/vpc-peering\"\n  peer_vpc_id  = module.vpc_B.vpc_id\n  vpc_id       = module.vpc_A.vpc_id\n  vpcpeer_name = var.vpcpeer_name\n  owner_name   = var.owner_name\n}\n\nmodule \"vpc_peering_accepter\" {\n  source         = \"./modules/vpc-peering-accepter\"\n  vpc_peering_id = module.vpc_peering.aws_vpc_peering_connection_id\n  owner_name     = var.owner_name\n  providers = {\n    aws = aws.us_west\n  }\n}\n\nmodule \"vpc_peering_configureA\" {\n  source                    = \"./modules/vpc_peer_configure\"\n  vpc_peering_connection_id = module.vpc_peering_accepter.aws_vpc_peering_connection_accepter\n}\n\nmodule \"vpc_peering_configureB\" {\n  source                    = \"./modules/vpc_peer_configure\"\n  vpc_peering_connection_id = module.vpc_peering_accepter.aws_vpc_peering_connection_accepter\n  providers = {\n    aws = aws.us_west\n  }\n}\n```\n\n## ë‹¨ê³„ 7: ë¼ìš°íŠ¸ í…Œì´ë¸”ì„ ìœ„í•œ ëª¨ë“ˆ ë§Œë“¤ê¸° ë° ê°€ì ¸ì˜¤ê¸°\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nmodules/route-tables/main.tf\n\n```js\nterraform {\n  required_providers {\n    aws = {\n      source                = \"hashicorp/aws\"\n      version               = \"~> 5.0\"\n      configuration_aliases = [aws.us_west]\n    }\n  }\n}\n\nprovider \"aws\" {\n  alias  = \"us_west\"\n  region = \"us-west-1\"\n}\n\nresource \"aws_route\" \"route\" {\n  route_table_id            = var.route_table_id\n  destination_cidr_block    = var.destination_cidr_block\n  gateway_id                = var.gateway_id != \"\" ? var.gateway_id : null\n  vpc_peering_connection_id = var.vpc_peering_connection_id != \"\" ? var.vpc_peering_connection_id : null\n}\n```\n\nì´ì œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ main.tf íŒŒì¼ì— ëª¨ë“ˆì„ ê°€ì ¸ì™€ë³´ê² ìŠµë‹ˆë‹¤.\n\n```js\nmodule \"route_table_vpcA_pcgw\" {\n  source                    = \"./modules/route-table\"\n  route_table_id            = module.vpc_A.default_route_table_id\n  destination_cidr_block    = var.destination_cidr_blocks_for_routetable[\"for_route_vpcA\"][\"pcgw_cidr\"]\n  vpc_peering_connection_id = module.vpc_peering.aws_vpc_peering_connection_id\n  gateway_id                = \"\"\n}\n\nmodule \"route_table_vpcB_pcgw\" {\n  source                    = \"./modules/route-table\"\n  route_table_id            = module.vpc_B.default_route_table_id\n  destination_cidr_block    = var.destination_cidr_blocks_for_routetable[\"for_route_vpcB\"][\"pcgw_cidr\"]\n  vpc_peering_connection_id = module.vpc_peering.aws_vpc_peering_connection_id\n  gateway_id                = \"\"\n  providers = {\n    aws = aws.us_west\n  }\n}\n\nmodule \"route_table_vpcA_igw\" {\n  source                    = \"./modules/route-table\"\n  route_table_id            = module.vpc_A.default_route_table_id\n  destination_cidr_block    = var.destination_cidr_blocks_for_routetable[\"for_route_vpcA\"][\"igw_cidr\"]\n  gateway_id                = module.igw_vpcA.igw_id\n  vpc_peering_connection_id = \"\"\n}\n\nmodule \"route_table_vpcB_igw\" {\n  source                    = \"./modules/route-table\"\n  route_table_id            = module.vpc_B.default_route_table_id\n  destination_cidr_block    = var.destination_cidr_blocks_for_routetable[\"for_route_vpcB\"][\"igw_cidr\"]\n  gateway_id                = module.igw_vpcB.igw_id\n  vpc_peering_connection_id = \"\"\n  providers = {\n    aws = aws.us_west\n  }\n}\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ë‹¨ê³„ 8: dev-env.tfvars íŒŒì¼ ì‘ì„±\n\nvariable.tfvars/dev-env.tfvars\n\n```js\nowner_name = \"NIKUNJ\"\n\nvpcs = {\n  \"vpc_A\" = {\n    vpc_name   = \"vpc-us-east1\"\n    cidr_block = \"10.1.0.0/16\"\n  }\n  \"vpc_B\" = {\n    vpc_name   = \"vpc-us-west1\"\n    cidr_block = \"10.2.0.0/16\"\n  }\n}\n\nvpc_Aì— ëŒ€í•œ ì„œë¸Œë„· ëª©ë¡ = {\n  \"subnet1\" = {\n    subnet_cidr       = \"10.1.0.0/20\"\n    subnet_name       = \"subnet-us-east1a\"\n    availability_zone = \"us-east-1a\"\n  }\n  \"subnet2\" = {\n    subnet_cidr       = \"10.1.16.0/20\"\n    subnet_name       = \"subnet-us-east1b\"\n    availability_zone = \"us-east-1b\"\n  }\n  \"subnet3\" = {\n    subnet_cidr       = \"10.1.32.0/20\"\n    subnet_name       = \"subnet-us-east1c\"\n    availability_zone = \"us-east-1c\"\n  }\n}\n\nvpc_Bì— ëŒ€í•œ ì„œë¸Œë„· ëª©ë¡ = {\n  \"subnet1\" = {\n    subnet_cidr       = \"10.2.0.0/20\"\n    subnet_name       = \"subnet-us-west1a\"\n    availability_zone = \"us-west-1a\"\n  }\n  \"subnet2\" = {\n    subnet_cidr       = \"10.2.16.0/20\"\n    subnet_name       = \"subnet-us-west1b\"\n    availability_zone = \"us-west-1b\"\n  }\n}\n\në³´ì•ˆ ê·¸ë£¹ ëª©ë¡ = {\n  \"ssh_sg\" = {\n    sg_name             = \"allow_ssh\"\n    sg_description      = \"ë‚´ IPì—ì„œ SSH í—ˆìš©\"\n    ingress_description = \"ë‚´ IPë¥¼ ìœ„í•œ SSH\"\n    ingress_from_port   = \"22\"\n    ingress_to_port     = \"22\"\n    ingress_protocol    = \"tcp\"\n  }\n  \"icmp_sg\" = {\n    sg_name             = \"allow_ping_traffic\"\n    sg_description      = \"ë‚´ IPì—ì„œ ping í—ˆìš©\"\n    ingress_description = \"ë‚´ IPë¡œë¶€í„°ì˜ ping\"\n    ingress_from_port   = \"8\"\n    ingress_to_port     = \"0\"\n    ingress_protocol    = \"icmp\"\n  }\n}\n\nsg_cidr_blocks = {\n  \"ssh_sg\" = {\n    ingress_cidr_blocks = [\"12.34.56.78/32\"] # ec2ë¡œì˜ SSHê°€ í—ˆìš©ëœ IPë¥¼ ì–¸ê¸‰\n  }\n  \"icmp_sg\" = {\n    ingress_cidr_blocks_for_vpcA = [\"10.2.0.0/16\"]\n    ingress_cidr_blocks_for_vpcB = [\"10.1.0.0/16\"]\n  }\n}\n\nec2 ëª©ë¡ = {\n  \"ec2_vpcA\" = {\n    ami_id        = \"ami-0e8a34246278c21e4\"\n    instance_type = \"t2.micro\"\n    ec2_name      = \"ec2-us-east1\"\n    key_name      = \"us-east-1-demo\"\n  }\n  \"ec2_vpcB\" = {\n    ami_id        = \"ami-09ab9d570789dfdd4\"\n    instance_type = \"t2.micro\"\n    ec2_name      = \"ec2-us-west1\"\n    key_name      = \"us-west-1-demo\"\n  }\n}\n\nì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ ëª©ë¡ = {\n  \"igw_vpcA\" = {\n    name = \"igw_vpcA\"\n  }\n  \"igw_vpcB\" = {\n    name = \"igw_vpcB\"\n  }\n}\n\nVPC í”¼ì–´ë§ ì´ë¦„ = \"vpc_AB_peering\"\n\nroute í…Œì´ë¸”ìš© ëŒ€ìƒ CIDR ë¸”ë¡ = {\n  \"for_route_vpcA\" = {\n    pcgw_cidr = \"10.2.0.0/16\"\n    igw_cidr  = \"0.0.0.0/0\"\n  }\n  \"for_route_vpcB\" = {\n    pcgw_cidr = \"10.1.0.0/16\"\n    igw_cidr  = \"0.0.0.0/0\"\n  }\n}\n```\n\n## ë‹¨ê³„ 9: ì‘ì—… ë””ë ‰í† ë¦¬ ì´ˆê¸°í™”\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ì‘ì—… ë””ë ‰í† ë¦¬ì—ì„œ terraform init ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”. ì´ ëª…ë ¹ì€ í•„ìš”í•œ ëª¨ë“  ê³µê¸‰ì ë° ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ë°±ì—”ë“œë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.\n\n## ë‹¨ê³„ 10: í…Œë¼í¼ ì‹¤í–‰ ê³„íš ìƒì„±\n\n- ì‘ì—… ë””ë ‰í† ë¦¬ì—ì„œ terraform plan ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”. ì‹¤í–‰ ê³„íšì„ ì œê³µí•©ë‹ˆë‹¤.\n\n## ë‹¨ê³„ 11: terraform apply ì‹¤í–‰\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ì‘ì—… ë””ë ‰í† ë¦¬ì—ì„œ terraform apply ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ AWSì— í•„ìš”í•œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ë©ë‹ˆë‹¤.\n\n## ë‹¨ê³„ 12: ì—°ê²° í™•ì¸\n\n- SSHë¥¼ ì‚¬ìš©í•˜ì—¬ EC2 ì¸ìŠ¤í„´ìŠ¤ ì¤‘ í•˜ë‚˜ì— ì—°ê²°í•˜ê³  ë‹¤ë¥¸ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì‚¬ì„¤ IPë¥¼ ì‚¬ìš©í•˜ì—¬ í•‘ì„ ë³´ëƒ…ë‹ˆë‹¤.\n- ëª¨ë“  ê²ƒì´ ì˜ ë˜ì—ˆë‹¤ë©´ ICMP ë°ì´í„° íŒ¨í‚·ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.\n\nì—¬ê¸°ê¹Œì§€ì…ë‹ˆë‹¤. ì´ì œ Terraformì„ ì‚¬ìš©í•˜ì—¬ AWS VPC í”¼ì–´ë§ ì—°ê²°ì„ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ë°°ì› ìŠµë‹ˆë‹¤. ì´ì œ ì—¬ëŸ¬ë¶„ì€ ì´ê²ƒì„ ì‚¬ìš©í•˜ê³  í•„ìš”ì— ë”°ë¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì „ì²´ ì½”ë“œëŠ” ì—¬ê¸°ì—ì„œ ì°¾ì„ ìˆ˜ ìˆì–´ìš”.\n\nì´ ê°€ì´ë“œê°€ ë„ì›€ì´ ë˜ì—ˆë‹¤ë©´ ğŸ‘ ë²„íŠ¼ì„ í´ë¦­í•´ ì£¼ì„¸ìš”. ëŒ“ê¸€ë„ ììœ ë¡­ê²Œ ë‚¨ê²¨ì£¼ì„¸ìš”.\n","ogImage":{"url":"/assets/img/2024-05-27-AWS-VPCPeeringwithTerraform_0.png"},"coverImage":"/assets/img/2024-05-27-AWS-VPCPeeringwithTerraform_0.png","tag":["Tech"],"readingTime":22},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‹œì‘í•  ë•Œ ì•Œì•˜ë”ë¼ë©´ ì¢‹ì•˜ì„ ê²ƒ ê°™ì€ ì ","description":"","date":"2024-05-27 17:33","slug":"2024-05-27-WhatIWishIKnewWhenIGotStartedwithKubernetes","content":"\nKubernetesë¥¼ ì²˜ìŒ ë´¤ì„ ë•ŒëŠ” ë³µì¡í•´ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ì´í•´í•´ì•¼ í•  ìˆ˜ë§ì€ í•µì‹¬ ê°œë…ê³¼ ìš©ì–´ê°€ ìˆìŠµë‹ˆë‹¤. ë”ìš± ì‚¬ì‹¤ì ì¸ ê²ƒì€ Kubernetesì— ëŒ€í•´ ê¹Šì´ íŒŒê³ ë“¤ê¸° ìœ„í•´ì„œëŠ” ë§ì€ ì‹¤ì „ ì‹¤ìŠµì´ í•„ìš”í•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.\n\nê·¸ë˜ì„œ ì´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Kubernetesë¥¼ ì²˜ìŒ ì‹œì‘í•  ë•Œ ì•Œì•˜ìœ¼ë©´ í•˜ëŠ” ë‚´ìš©ì„ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤. í•¨ê»˜ ì‹¤ì „í•™ìŠµì„ ìœ„í•œ ì˜ˆì‹œ ë¡œì»¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•´ë´…ì‹œë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-WhatIWishIKnewWhenIGotStartedwithKubernetes_0.png)\n\n# Kubernetesë¥¼ ë°°ì›Œì•¼ í•˜ëŠ” ì´ìœ ?\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nOpenAIê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬ë˜ì–´ 7,500ê°œì˜ ì›Œì»¤ ë…¸ë“œë¡œ í™•ì¥ë˜ê³  ìˆë‹¤ëŠ” ê±¸ ì•Œê³  ê³„ì…¨ë‚˜ìš”? ê·¸ë¦¬ê³  Appleê³¼ ê°™ì€ ê¸°ìˆ  ê±°ë¬¼ë“¤ì€ 2022ë…„ì— ì•„íŒŒì¹˜ ë©”ì†ŒìŠ¤ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ ì „í™˜í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì£¼ìš” ì»¨í…Œì´ë„ˆí™” í”Œë«í¼ìœ¼ë¡œ ì±„íƒí–ˆì–´ìš”.\n\nì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì— ì–´ë–»ê²Œ ì í•©í•œì§€ ì´ì•¼ê¸°í•  ë•Œ, ëŠìŠ¨í•˜ê²Œ ê²°í•©ëœ ë‹¨ìœ„ì˜ ë‹¨ì¼ ê°œë…ì„ ì»¨í…Œì´ë„ˆì— ë„£ê±°ë‚˜ ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì€ ëª¨ë‘ íƒ€ë‹¹í•œ í•´ê²°ì±…ì…ë‹ˆë‹¤.\n\nì»¨í…Œì´ë„ˆëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ê³¼ í•´ë‹¹ ì¢…ì†ì„±ì„ ì‰½ê²Œ í•œ ì»´í“¨íŒ… í™˜ê²½ì—ì„œ ë‹¤ë¥¸ í™˜ê²½ìœ¼ë¡œ ì‰½ê²Œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ íŒ¨í‚¤ì§€í™”í•˜ê³  ê²©ë¦¬í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ë”ë¶ˆì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¼ê´€ë˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆê²Œ ë°°í¬í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë©°, ì‚¬ìš©ìì˜ ì»´í“¨í„° ì„¤ì •ê³¼ ë¬´ê´€í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.\n\n2024ë…„ì— ì˜¬ë°”ë¥¸ ë°©ë²•ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ë°°ìš°ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ë¯¸ë””ì›€ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í–ˆì–´ìš”. ê·¸ë¦¬ê³  ì´ ë¶„ì•¼ì—ì„œ ê²½ë ¥ì„ ì‹œì‘í•˜ê¸° ìœ„í•´ í•™ìŠµì„ í™•ì¥í•˜ê³  ì‹¶ë‹¤ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ ì¸ì¦ì„ ì·¨ë“í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ê¸¸ì¼ ê±°ì˜ˆìš”. ì•„ë˜ ì±…ì´ ë„ì›€ì´ ë  ê±°ì˜ˆìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ê´€ë¦¬ Kubernetes í”Œë ˆì´ê·¸ë¼ìš´ë“œ í™œìš©í•˜ê¸°\n\nì‹œì‘í•˜ê¸° ì „ì—, ì‹œì¥ì—ëŠ” ë§ì€ ê´€ë¦¬ Kubernetes í”Œë ˆì´ê·¸ë¼ìš´ë“œê°€ ìˆìŒì„ ê°ì•ˆí•´ì•¼ í•©ë‹ˆë‹¤.\n\n- ê´€ë¦¬ Kubernetes í”Œë ˆì´ê·¸ë¼ìš´ë“œëŠ” ì¸í”„ë¼ë¥¼ ì„¤ì •í•˜ê³  ê´€ë¦¬í•˜ëŠ” ìˆ˜ê³ ë¥¼ ë“¤ì´ì§€ ì•Šê³  Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹¤í—˜í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë³´í†µ ë¯¸ë¦¬ êµ¬ì„±ëœ Kubernetes í™˜ê²½ì„ ì œê³µí•˜ì—¬ ì‚¬ìš©ìê°€ ì›¹ ì¸í„°í˜ì´ìŠ¤ë‚˜ ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ì´ëŸ¬í•œ í”Œë«í¼ì€ êµìœ¡ ìë£Œì™€ ëŒ€í™”í˜• íŠœí† ë¦¬ì–¼ë„ ì œê³µí•˜ëŠ”ë°, ìƒˆë¡œìš´ Kubernetes ê¸°ëŠ¥ë“¤ì„ ë²ˆê±°ë¡­ì§€ ì•Šì€ í™˜ê²½ì—ì„œ ì‚¬ìš©í•´ë³´ëŠ” ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤.\n\n## Killercoda í”Œë ˆì´ê·¸ë¼ìš´ë“œ\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nKillercodaëŠ” ë¡œì»¬ ì„¤ì •ì´ë‚˜ ìì› ì†Œëª¨ê°€ ë§ì€ ë¸Œë¼ìš°ì €ì˜ ê·€ì°®ìŒ ì—†ì´ ì™„ì „íˆ ê¸°ëŠ¥ì ì¸ Linux ë˜ëŠ” Kubernetes í™˜ê²½ì— ì¦‰ì‹œ ë¸Œë¼ìš°ì € ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ê°€ìƒ ë†€ì´í„°ì…ë‹ˆë‹¤. ì›ê²© ìœ ì§€ ë³´ìˆ˜ëŠ” ë¡œì»¬ì—ì„œ ì•¡ì„¸ìŠ¤í–ˆì„ ë•Œ ì›í™œí•œ ì‚¬ìš©ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. ìµœì‹  ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ê³„ì†ëœ í—Œì‹ ìœ¼ë¡œ, KillercodaëŠ” ì§€ë‚œë¦´ë¦¬ì¦ˆ í›„ ëª‡ ì£¼ë§Œì— ìµœì‹  Kubeadm Kubernetes ë²„ì „ì„ ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\n\nì´ ê²Œì‹œë¬¼ ì‘ì„± ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ ì‚¬ìš©ìë“¤ì€ ë‘ ê°œì˜ 2GB ë…¸ë“œë¡œ êµ¬ì„±ëœ ì´ˆê¸° ë¹ˆ Kubeadm í´ëŸ¬ìŠ¤í„°ì— ì•¡ì„¸ìŠ¤ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n![Kubernetes Image](/assets/img/2024-05-27-WhatIWishIKnewWhenIGotStartedwithKubernetes_1.png)\n\n## í‚¬ëŸ¬ ì…¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\níŠ¹ì • ì‹œë‚˜ë¦¬ì˜¤ë‚˜ ì‹œí—˜ ì‹œë®¬ë ˆì´ì…˜ì„ ì°¾ê³  ìˆëŠ” ë¶„ë“¤ì€ CKS, CKA, CKAD, LFCS, ê·¸ë¦¬ê³  LFCT ì‹œí—˜ì„ ìœ„í•´ ë””ìì¸ëœ Killer Shellì„ ì‚´í´ë³´ì„¸ìš”. Killer Shellì€ ì‹¤ì œ ì‹œë®¬ë ˆì´í„°ì™€ ì¸í„°ë™í‹°ë¸Œ í•™ìŠµ í™˜ê²½ì„ ì œê³µí•˜ì—¬ ì‚¬ìš©ìê°€ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì² ì €íˆ íƒêµ¬í•˜ê³  í¸ë¦¬í•˜ê²Œ í•™ìŠµí•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤. ìœ„ ì‹œí—˜ ì¤‘ í•˜ë‚˜ë¥¼ íŒ¨ìŠ¤í•˜ê³  ì‹¶ë‹¤ë©´, ê³µì‹ CKA ì‹œí—˜ ì‹œë®¬ë ˆì´í„°ì¸ Killer Shellì—ì„œ ì œê³µë˜ëŠ” ìƒ˜í”Œ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë³´ëŠ” ê²ƒì„ ê°•ë ¥íˆ ì¶”ì²œí•©ë‹ˆë‹¤.\n\në˜í•œ, ì‹¤ì „ ì¤‘ì‹¬ ì‹œí—˜ì—ì„œì˜ ì‹œê°„ ê´€ë¦¬ê°€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì˜ íŠ¹ì • í˜ì´ì§€ë¥¼ ë¶ë§ˆí¬í•´ë‘ëŠ” ê²ƒì€ ë‹¹ì‹ ì˜ ì¤€ë¹„ì— ë§¤ìš° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.\n\në˜í•œ, Kubernetesë¥¼ ë°°ìš°ê¸° ì‹œì‘í•˜ëŠ” í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤. ê´€ì‹¬ì´ ìˆë‹¤ë©´ í™•ì¸í•´ë³´ì„¸ìš”.\n\n## Kubernetes Playgroundì—ì„œ Kubernetesì™€ ë†€ì•„ë³´ì„¸ìš”\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nPlay with KubernetesëŠ” ë„ì»¤ê°€ ì œê³µí•˜ëŠ” ë© ì‚¬ì´íŠ¸ë¡œ, K8s í”Œë ˆì´ê·¸ë¼ìš´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë¹ ë¥´ê²Œ K8s í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•˜ê³  ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ë¬´ë£Œ Alpine Linux VMì„ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Docker-in-Docker (DinD)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ VM/PCë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ì—¬ ì›í™œí•œ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤. ê·¸ë“¤ì˜ ì•ˆë‚´ì— ë”°ë¼ GitHub ì €ì¥ì†Œì—ì„œ ìµœì‹  ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.\n\ní”Œë ˆì´ê·¸ë¼ìš´ë“œë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì€ Kubernetesë¥¼ ë°°ìš°ê³  ë°°ìš´ ë‚´ìš©ì„ ì‹¤í—˜í•˜ë©´ì„œ ì‹œê°„ì„ ì ˆì•½í•˜ëŠ” ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤.\n\n# Kubernetes ë…¸ë“œ ì•„í‚¤í…ì²˜\n\nKubernetesëŠ” ë‹¨ì¼ ë…¸ë“œ ë° ë‹¤ì¤‘ ë…¸ë“œ ì•„í‚¤í…ì²˜ë¥¼ ëª¨ë‘ ì§€ì›í•˜ë©°, ê°ê°ì˜ ì¥ì ê³¼ ì‚¬ìš© ì‚¬ë¡€ê°€ ìˆìŠµë‹ˆë‹¤. Kubernetes í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜ì— ëŒ€í•´ ë” ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´ ì´ í¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì—¬ê¸°ì„œ ê°ê°ì˜ ê²ƒì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤ :\n\n## ë‹¨ì¼ ë…¸ë“œ ì•„í‚¤í…ì²˜\n\në‹¨ì¼ ë…¸ë“œ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ëª¨ë“  Kubernetes êµ¬ì„± ìš”ì†Œê°€ í•œ ëŒ€ì˜ ê¸°ê³„ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ë‹¨ìˆœì„±ì´ í™•ì¥ì„±ê³¼ ê³ ê°€ìš©ì„±ë³´ë‹¤ ìš°ì„ ì´ ë˜ëŠ” ë¡œì»¬ ê°œë°œ í™˜ê²½ì´ë‚˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ì— ì í•©í•©ë‹ˆë‹¤.\n\në‹¨ì¼ ë…¸ë“œ ë°°í¬ë¥¼ ì§€ì›í•˜ëŠ” Kubernetes ë°°í¬ ì¤‘ í•˜ë‚˜ëŠ” Minikubeì…ë‹ˆë‹¤. MinikubeëŠ” ì‚¬ìš©ìì˜ ì›Œí¬ìŠ¤í…Œì´ì…˜ì—ì„œ ë¡œì»¬ë¡œ ì‹¤í–‰ë˜ëŠ” ê°€ë²¼ìš´ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì œê³µí•˜ì—¬ ê°œë°œìê°€ Kubernetes ê¸°ëŠ¥ê³¼ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì‰½ê²Œ ì‹¤í—˜í•  ìˆ˜ ìˆë„ë¡ í•˜ë©° ì™„ì „í•œ ê·œëª¨ì˜ í´ëŸ¬ìŠ¤í„°ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‹¤ë¥¸ ì˜ˆë¡œëŠ” MicroK8sê°€ ìˆìŠµë‹ˆë‹¤. MicroK8sëŠ” ì—£ì§€ ì»´í“¨íŒ… ë° ì‚¬ë¬¼ì¸í„°ë„·(IoT) ë””ë°”ì´ìŠ¤ë¥¼ ìœ„í•œ ìµœì†Œí•œì˜ ë‹¨ì¼ ë…¸ë“œ Kubernetes ë°°í¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ Kubernetes ë°°í¬ëŠ” ë‹¨ì¼ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ì˜ ì„¤ì •ê³¼ ê´€ë¦¬ë¥¼ ê°„ì†Œí™”í•˜ì—¬ ê°œë°œìë“¤ì´ Kubernetes ê°œë°œ ë° í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ê¸° í¸ë¦¬í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.\n\n![Image](/assets/img/2024-05-27-WhatIWishIKnewWhenIGotStartedwithKubernetes_2.png)\n\n## ë‹¤ì¤‘ ë…¸ë“œ ì•„í‚¤í…ì²˜\n\nê·¸ëŸ¬ë‚˜ ëŒ€ë¶€ë¶„ì˜ ì—”í„°í”„ë¼ì´ì¦ˆ í™˜ê²½ì€ ì£¼ë¡œ ê³ ìœ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ë¥¼ ë§Œì¡±ì‹œí‚¤ê¸° ìœ„í•´ ë‹¨ì¼ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ë³´ë‹¤ ë§ì€ ë…¸ë“œë¥¼ í•„ìš”ë¡œ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í™˜ê²½ì€ ì£¼ë¡œ ë‹¤ì¤‘ ë…¸ë“œ ì„¤ì •ì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nKubernetesì—ì„œ ë‹¤ì¤‘ ë…¸ë“œ ì•„í‚¤í…ì²˜ëŠ” Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ ì—¬ëŸ¬ ëŒ€ì˜ ë¨¸ì‹ ì— ë¶„ì‚°í•˜ì—¬ ì¤‘ë³µì„±ê³¼ í™•ì¥ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” ê³ ê°€ìš©ì„± ë° ì˜¤ë¥˜ í—ˆìš©ì„±ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë©°, í”„ë¡œë•ì…˜ í™˜ê²½ ë° ëŒ€ê·œëª¨ ë°°í¬ì— ì´ìƒì ì…ë‹ˆë‹¤.\n\në‹¤ì¤‘ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ë‹¨ì¼ ë…¸ë“œë³´ë‹¤ ë” ë³µì¡í•˜ë©° ìµœì ì˜ ì„±ëŠ¥ê³¼ ìì› í™œìš©ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì‹ ì¤‘í•œ ê³„íšì´ í•„ìš”í•©ë‹ˆë‹¤.\n\nìµœì¢…ì ìœ¼ë¡œ, ë‹¨ì¼ ë…¸ë“œ ë° ë‹¤ì¤‘ ë…¸ë“œ ì•„í‚¤í…ì²˜ ì‚¬ì´ì˜ ì„ íƒì€ Kubernetes ë°°í¬ì˜ êµ¬ì²´ì ì¸ ìš”êµ¬ ì‚¬í•­ê³¼ ëª©í‘œì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ì²« ë²ˆì§¸ ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì„¤ì •í•˜ê¸°\n\nminikubeë¥¼ ì‚¬ìš©í•˜ì—¬ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ë¡œì»¬ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì´ë©° ëª‡ ë¶„ë§Œì— ì™„ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ í•´ì•¼ í•  ì¼ì…ë‹ˆë‹¤:\n\n## minikube ì„¤ì¹˜\n\në¡œì»¬ì´ë‚˜ í´ë¼ìš°ë“œ ê¸°ë°˜ Linux VMì—ì„œ minikube ì´ì§„ íŒŒì¼ì„ ê²€ìƒ‰í•˜ê¸° ìœ„í•´ curl ëª…ë ¹ì„ ì‚¬ìš©í•˜ê³ , ë‹¤ìŒê³¼ ê°™ì´ /usr/local/bin/minikubeì— ì„¤ì¹˜í•˜ì‹­ì‹œì˜¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo install minikube-linux-amd64 /usr/local/bin/minikube\n```\n\në‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— minikube ì´ì§„ íŒŒì¼ì´ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ /usr/local/bin/minikubeë¡œ ì´ë™í•˜ì‹­ì‹œì˜¤. ë˜í•œ í„°ë¯¸ë„ì— ë‹¤ìŒì„ ì…ë ¥í•˜ì—¬ Minikubeë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ :\n\n```js\nminikube â€“-help\n```\n\n## ë‹¨ì¼ ë…¸ë“œ Kubernetes í´ëŸ¬ìŠ¤í„° í”„ë¡œë¹„ì €ë‹\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nMinikubeë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ì¼ ë…¸ë“œ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ë ¤ë©´ ë‹¨ìˆœíˆ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš” :\n\n```js\nminikube start\n```\n\në§Œì•½ minikube í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•  ë•Œ CPU ì½”ì–´ì™€ ë©”ëª¨ë¦¬ë¥¼ ì„¤ì •í•˜ê³  ì‹¶ë‹¤ë©´, ë©”ëª¨ë¦¬ ë° CPU í”Œë˜ê·¸ë¥¼ ì¶”ê°€í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•˜ì„¸ìš” :\n\n```js\nminikube start --memory 8192 --cpus 4\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nëª…ë ¹ì´ ì‹¤í–‰ëœ í›„, ë‹¹ì‹ ì˜ minikube í´ëŸ¬ìŠ¤í„°ëŠ” í”„ë¡œë¹„ì €ë‹ í”„ë¡œì„¸ìŠ¤ì— ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ì—ëŠ” minikube Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ëŠ” ë©”ì‹œì§€ê°€ í‘œì‹œë  ê²ƒì…ë‹ˆë‹¤.\n\n## ì„¤ì¹˜ í™•ì¸\n\nMinikube í´ëŸ¬ìŠ¤í„°ëŠ” ë‹¨ì¼ ë…¸ë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, í†µì œ í‰ë©´ ë° ì›Œì»¤ ë…¸ë“œ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì„ í†µí•´ êµ¬ì„±ëœì§€ í•œ ë’¤ì—ëŠ” ë¡œì»¬ Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì‘ì—… ë¡œë“œë¥¼ ì˜ˆì•½í•˜ê¸° ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë…¸ë“œê°€ ì‚¬ìš© ì¤€ë¹„ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\nKubectl get node\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ ëª…ë ¹ì–´ì˜ ë‹¨ì¶•í‚¤ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”:\n\n```js\nalias k=kubectl\nk get no\n```\n\nì¶œë ¥ ê²°ê³¼ë¥¼ í†µí•´ ë‹¤ìŒ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n- ë…¸ë“œì˜ ìƒíƒœ(ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€)\n- í•´ë‹¹ ë…¸ë“œì˜ ì—­í• \n- Kubernetes ë²„ì „\n- ì´ˆê¸° ë°°í¬ ì´í›„ì˜ ë…¸ë“œ ì—°ë ¹\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## Minikube í´ëŸ¬ìŠ¤í„° êµ¬ì„±\n\në§Œì•½ ìƒˆë¡œìš´ í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ì‹œ ì œê³µí•˜ì§€ ì•Šê³  minikube í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ê³  ì‹¶ë‹¤ë©´, minikube í´ëŸ¬ìŠ¤í„°ë¥¼ ì¤‘ì§€í•´ì•¼ í•©ë‹ˆë‹¤.\n\nBash\n\n```js\nminikube stop\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nminikube config set ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì›í•˜ëŠ” ì„¤ì •ì„ minikube í´ëŸ¬ìŠ¤í„°ì— ì ìš©í•  ìˆ˜ ìˆì–´ìš”.\n\nMinikube í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ë§ˆì¹˜ë©´ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•´ì•¼ í•´ìš”. ê·¸ í›„ì—ëŠ” ìƒˆ êµ¬ì„±ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‘ì—…í•  ê±°ì˜ˆìš”.\n\në” ë§ì€ ë©”ëª¨ë¦¬ì™€ CPUë¥¼ ì‚¬ìš©í•˜ì—¬ minikube í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•´ë³¼ê¹Œìš”:\n\n```js\nminikube stop\n\nminikube config set memory 8192\nminikube config set cpus 4\nminikube start\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ì œ ë¯¸ë‹ˆíë¸Œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ë˜ì—ˆì–´ìš”.\n\n## ë¯¸ë‹ˆíë¸Œ í´ëŸ¬ìŠ¤í„° ì‚­ì œ\n\në¡œì»¬ Kubernetes í´ëŸ¬ìŠ¤í„°ì™€ ëª¨ë“  í”„ë¡œíŒŒì¼ì„ ì‚­ì œí•©ë‹ˆë‹¤ :\n\n```js\nminikube delete --all\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ì‹¤ìŠµì´ ìµœê³ ì…ë‹ˆë‹¤!\n\në‹¤ìŒ ë¹„ë””ì˜¤ì—ì„œ ëª‡ ë¶„ ë§Œì— Minikube í´ëŸ¬ìŠ¤í„°ë¥¼ ì‰½ê²Œ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤. Apple ì‹¤ë¦¬ì½˜ (ARM ê¸°ë°˜)ì¸ M1/M2 ë§¥ë¶ê³¼ ê°™ì€ í™˜ê²½ì„ ì„¤ì •í•©ë‹ˆë‹¤:\n\nì—¬ê¸° ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ì— ê¸°ëŠ¥ì´ íŠ¹ì§•í™”ëœ ìµœì‹  Kubernetes ë¦´ë¦¬ìŠ¤ë¥¼ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì´ ì„¹ì…˜ì—ì„œ ë°°ìš´ ë‚´ìš©ì„ ë³µì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ê¸°ëŒ€ê°€ ë©ë‹ˆë‹¤!\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në¡œì»¬ Kubernetesë¥¼ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ì˜µì…˜ì´ ë§ì´ ìˆë‹¤ëŠ” ê²ƒì„ ê¸°ì˜ê²Œ ìƒê°í•´ìš”. ëŒ€ë¶€ë¶„ì˜ í”Œë ˆì´ê·¸ë¼ìš´ë“œëŠ” ë¬´ë£Œë¡œ ì œê³µë˜ë‹ˆ í˜„ëª…í•œ ì„ íƒì„ í•´ì„œ ë‹¤ì–‘í•œ ë°©ë²•ì„ ì‹œë„í•´ë³´ì„¸ìš”. ì´ ë¸”ë¡œê·¸ê°€ 2024ë…„ Kubernetesë¥¼ ì‹œì‘í•˜ë ¤ëŠ” ë¶„ë“¤ì— ë„ì›€ì´ ë˜ê¸¸ ì§„ì‹¬ìœ¼ë¡œ ë°”ëë‹ˆë‹¤! ë” ì•Œê³  ì‹¶ë‹¤ë©´ ì œ ë¯¸ë””ì—„ íŒ”ë¡œìš°ë‚˜ YouTube ì±„ë„ì„ êµ¬ë…í•´ì£¼ì‹œê³ , ëŒ“ê¸€ë¡œ ì˜ê²¬ì„ ê³µìœ í•´ì£¼ì„¸ìš”.\n\n# ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ìë©´ ğŸš€\n\nIn Plain English ì»¤ë®¤ë‹ˆí‹°ì— í•¨ê»˜í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:\n\n- ê¼¬ì˜¥ ë°•ìˆ˜ë¥¼ ì¹˜ì‹œê³  ì‘ê°€ë¥¼ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš” ï¸ğŸ‘ï¸ï¸\n- íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | Newsletter\n- ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸: Stackademic | CoFeed | Venture | Cubed\n- PlainEnglish.ioì—ì„œ ë” ë§ì€ ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”\n","ogImage":{"url":"/assets/img/2024-05-27-WhatIWishIKnewWhenIGotStartedwithKubernetes_0.png"},"coverImage":"/assets/img/2024-05-27-WhatIWishIKnewWhenIGotStartedwithKubernetes_0.png","tag":["Tech"],"readingTime":11},{"title":"ì§€ë‚œ 18ê°œì›”ê°„ì˜ ë‚´ë¶€ ê°œë°œì í”Œë«í¼ ë¶","description":"","date":"2024-05-27 17:31","slug":"2024-05-27-TheBoomofInternalDeveloperPlatformsintheLast18Months","content":"\nì§€ë‚œ 18ê°œì›” ë™ì•ˆ ë‚´ë¶€ ê°œë°œì í”Œë«í¼(IDP)ì— ëŒ€í•œ ê´€ì‹¬ì´ ê¸‰ì¦í–ˆìŠµë‹ˆë‹¤. ì´ ì¶”ì„¸ëŠ” ê°œë°œì ì¹œí™”ì  ì¸í”„ë¼ ê´€ë¦¬ ì†”ë£¨ì…˜ì— ëŒ€í•œ í•„ìš”ì„±ì´ ì¦ëŒ€ë˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ë°˜ì˜í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ëŸ° í­ì¦ì„ ì´‰ë°œí•˜ëŠ” ê²ƒì€ ë¬´ì—‡ì´ë©°, í˜„ì¬ì˜ ìƒí™©ì€ ì–´ë–»ê²Œ ë³´ì´ë‚˜ìš”?\n\n# ì™œ ì´ë ‡ê²Œ ì„±ì¥í•˜ê³  ìˆëŠ” ê²ƒì¼ê¹Œìš”?\n\n## ê°œë°œì íš¨ìœ¨ì„±\n\nê°œë°œìë“¤ì€ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ë” ë¹ ë¥´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆê²Œ ì œê³µí•´ì•¼ í•˜ëŠ” ì§€ì†ì ì¸ ì••ë°•ì„ ë°›ê³  ìˆìŠµë‹ˆë‹¤. IDPëŠ” ê°œë°œìê°€ ì½”ë”©ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ë°˜ë³µì ì¸ ì‘ì—…ì„ ìë™í™”í•˜ê³  ë³µì¡í•œ ì›Œí¬í”Œë¡œìš°ë¥¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ ìƒì‚°ì„±ì„ í–¥ìƒì‹œí‚´ìœ¼ë¡œì¨ ê°œë°œìì˜ íš¨ìœ¨ì„±ì„ ë†’ì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## í˜„ëŒ€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³µì¡ì„±\n\ní˜„ëŒ€ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì™€ ë‹¤ì–‘í•œ ê¸°ìˆ ë¡œ ë³µì¡í•©ë‹ˆë‹¤. IDPëŠ” ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í†µí•© ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n## ë¹„ìš©ê³¼ ìì› ê´€ë¦¬\n\níš¨ìœ¨ì ì¸ ìì› ì‚¬ìš©ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. IDPëŠ” ì¸í”„ë¼ë¥¼ ìµœì í™”í•˜ê³  ë‚­ë¹„ë¥¼ ì¤„ì´ë©° íŠ¹íˆ ëŒ€ê·œëª¨ ê¸°ì—…ì—ê²Œ ë¹„ìš© íš¨ìœ¨ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ë³´ì•ˆ ë° ê·œì • ì¤€ìˆ˜\n\nì ì  ë” ëŠ˜ì–´ë‚˜ëŠ” ë³´ì•ˆ ìœ„í˜‘ê³¼ ê·œì • ìš”êµ¬ ì‚¬í•­ìœ¼ë¡œ ì¸í•´, í†µì œëœ ë° ì¼ê´€ëœ ë°°í¬ í™˜ê²½ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. IDPëŠ” ëª¨ë“  ê°œë°œ ìˆ˜ëª… ì£¼ê¸° ë‹¨ê³„ì—ì„œ ë³´ì•ˆ ì •ì±…ê³¼ ê·œì • ì¤€ìˆ˜ ê¸°ì¤€ì„ ê°•ì œí•©ë‹ˆë‹¤.\n\n# í˜„ì¬ì˜ ê²½í–¥\n\n![Image](/assets/img/2024-05-27-TheBoomofInternalDeveloperPlatformsintheLast18Months_0.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‚´ë¶€ ê°œë°œì í”Œë«í¼ì˜ í’ê²½ì€ ë‚´ë¶€ ê°œë°œì í¬í„¸ê³¼ ë‚´ë¶€ ê°œë°œì í”Œë«í¼ ë‘ ê°€ì§€ ì£¼ìš” ë²”ì£¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ê°ì˜ íŠ¹ì§•ì€ ë‹¤ë¥´ì§€ë§Œ, ê·¸ë“¤ ì‚¬ì´ì˜ ê²½ê³„ê°€ íë ¤ì§€ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.\n\në‚´ë¶€ ê°œë°œì í¬í„¸ì€ ê°œë°œìë“¤ì´ ë¬¸ì„œ, API ë° ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì¤‘ì•™ ì§‘ì¤‘í˜• ì¥ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë‚´ë¶€ ìì›ì˜ ë°œê²¬ ë° ì ‘ê·¼ì„±ì„ í–¥ìƒì‹œì¼œ ê°œë°œìë“¤ì´ í•„ìš”í•œ ë„êµ¬ë¥¼ ì°¾ê³  ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ ë§Œë“­ë‹ˆë‹¤.\n\në‚´ë¶€ ê°œë°œì í”Œë«í¼ì€ ì½”ë“œë¶€í„° ë°°í¬ê¹Œì§€ ì¸í”„ë¼ ê´€ë¦¬ì— ëŒ€í•œ ì™„ì „í•œ ì†”ë£¨ì…˜ì„ ì œê³µí•¨ìœ¼ë¡œì¨ í•œ ê±¸ìŒ ë” ë‚˜ì•„ê°‘ë‹ˆë‹¤. í™˜ê²½ í”„ë¡œë¹„ì €ë‹, CI/CD íŒŒì´í”„ë¼ì¸, ëª¨ë‹ˆí„°ë§ ë“±ì„ ìë™í™”í•˜ì—¬ ê°œë°œ ìš´ì˜ì„ ìœ„í•œ í¬ê´„ì ì¸ í”Œë«í¼ì„ ì œê³µí•©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì£¼ìš” ì‚°ì—… ê¸°ì—…ì´ ê°œë°œì íš¨ìœ¨ì„±ì˜ ê°€ì¹˜ë¥¼ ì¸ì •í•˜ê³  ìì²´ IDP ì œí’ˆì„ ì ê·¹ì ìœ¼ë¡œ ê°œë°œ ì¤‘ì„ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Atlassianì€ Compassë¥¼ ì†Œê°œí–ˆê³ , Red Hatì€ ìì²´ ì†”ë£¨ì…˜ì„ ê°œë°œ ì¤‘ì´ë©°, HashiCorpëŠ” Waypointì„ ì¶œì‹œí–ˆìŠµë‹ˆë‹¤. ê¸°ìˆ  ì„¸ê³„ëŠ” IDPì— ëŒ€í•´ ì—´ê´‘í•˜ê³  ìˆìŠµë‹ˆë‹¤! IDPì˜ ì¤‘ìš”ì„±ì€ ì ì  ë” ë§ì€ ì‚¬ëŒë“¤ì´ ì°¸ì—¬í•¨ì— ë”°ë¼ ê¸‰ì†í•˜ê²Œ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n# ì†”ë£¨ì…˜ì˜ ìœµí•©\n\ní”Œë«í¼ ì—”ì§€ë‹ˆì–´ë§ íŒ€ì´ ìˆ˜ë ´í•˜ëŠ” ìš”êµ¬ì— ì§ë©´í•¨ì— ë”°ë¼ ë‘ ë²”ì£¼ëŠ” ì„œë¡œì˜ ê¸°ëŠ¥ì„ í†µí•©í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ë‚´ë¶€ ê°œë°œì í¬í„¸ì€ ë” ë§ì€ ìë™í™” ë° í†µí•© ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³ , ë‚´ë¶€ ê°œë°œì í”Œë«í¼ì€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë° ë¦¬ì†ŒìŠ¤ ê²€ìƒ‰ ê¸°ëŠ¥ì„ í–¥ìƒì‹œí‚¤ê³  ìˆìŠµë‹ˆë‹¤. ëª‡ ê°€ì§€ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n- Humanitec: ì›ë˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ë¡œ ìœ ëª…í•œ Humanitecì€ ì´ì œ ì´ˆê¸° ë²”ìœ„ë¥¼ ë„˜ì–´ í™•ì¥ëœ í¬í„¸ì„ ì œê³µí•˜ëŠ” ì‘ì—…ì— ì°©ìˆ˜í–ˆìŠµë‹ˆë‹¤.\n- Qovery: í›Œë¥­í•œ ê°œë°œì ê²½í—˜ì— ì´ˆì ì„ ë§ì¶˜ ë‚´ë¶€ ê°œë°œì í”Œë«í¼ì„ ì œê³µí•˜ëŠ” QoveryëŠ” í¬í„¸ì„ í¬í•¨í•œ ê¸°ëŠ¥ì„ í™•ì¥í–ˆìŠµë‹ˆë‹¤.\n- Port: ì›ë˜ ë‚´ë¶€ ê°œë°œì í¬í„¸ì´ì—ˆë˜ PortëŠ” ì´ì œ ë” ë§ì€ í†µí•© ë° ê¸°ëŠ¥ì„ í†µí•©í•˜ì—¬ í”Œë«í¼ìœ¼ë¡œ ë³€í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤. ìë™í™”ëœ ì¸í”„ë¼ ìƒì„±ì´ í•„ìš”í•œ ë‹¨ëª… í™˜ê²½ê³¼ ê°™ì€ ì‚¬ìš© ì‚¬ë¡€ë¥¼ ì œì•ˆí•˜ëŠ” ë“± ì¢…í•©ì ì¸ ë‚´ë¶€ ê°œë°œì í”Œë«í¼ì˜ ìƒì§•ì ì¸ íŠ¹ì§•ì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![image](/assets/img/2024-05-27-TheBoomofInternalDeveloperPlatformsintheLast18Months_2.png)\n\nì´ í†µí•©ì€ í˜„ëŒ€ ê°œë°œ íŒ€ì˜ ë‹¤ì–‘í•œ ìš”êµ¬ë¥¼ ì¶©ì¡±í•˜ëŠ” í†µí•© ì†”ë£¨ì…˜ì„ ì œê³µí•˜ê¸° ìœ„í•´ ë…¸ë ¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n# ê²°ë¡ \n\në‚´ë¶€ ê°œë°œì í”Œë«í¼ì€ íš¨ìœ¨ì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ìš”êµ¬ë¥¼ ì¶©ì¡±í•˜ê¸° ìœ„í•´ ê¸‰ë¶€ìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë“¤ì€ ë³µì¡ì„±ì— ëŒ€ì²˜í•˜ê³  ë¹„ìš©ì„ ì ˆê°í•˜ë©° ë³´ì•ˆì— ëŒ€í•œ ìµœìƒì˜ ì‹¤ì²œ ë°©ë²•ì„ ê°•í™”í•©ë‹ˆë‹¤. í¬í„¸ê³¼ í”Œë«í¼ ì‚¬ì´ì˜ ê²½ê³„ê°€ íë ¤ì§€ë©´ì„œ ì›í™œí•œ ê°œë°œì ìƒì‚°ì„±ê³¼ ì¸í”„ë¼ ê´€ë¦¬ì˜ ìƒˆë¡œìš´ ì‹œëŒ€ê°€ ì—´ë¦¬ê³  ìˆìŠµë‹ˆë‹¤. ë” ê¸°ëŒ€ë˜ëŠ” ì¼ì´ ì—†ê² ì£ ! ì—¬ëŸ¬ë¶„ì€ ì–´ë– ì‹ ê°€ìš”? :)\n","ogImage":{"url":"/assets/img/2024-05-27-TheBoomofInternalDeveloperPlatformsintheLast18Months_0.png"},"coverImage":"/assets/img/2024-05-27-TheBoomofInternalDeveloperPlatformsintheLast18Months_0.png","tag":["Tech"],"readingTime":4},{"title":"Grafana Alloy OpenTelemetry","description":"","date":"2024-05-27 17:29","slug":"2024-05-27-GrafanaAlloyOpenTelemetry","content":"\n## Alloyì— ì¸ì‚¬ë¥¼ ì „í•´ë³´ì„¸ìš”\n\n## ì†Œê°œ\n\nGrafana ì—ì´ì „íŠ¸ê°€ ìµœê·¼ì— Alloyë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ê²Œì‹œë¬¼ì—ì„œëŠ” ì´ì— ëŒ€í•´ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì˜ˆì‹œëŠ” ì—ì´ì „íŠ¸ì—ì„œ ë²¤ë”ì˜ ë°±ì—”ë“œë¡œ ì§ì ‘ í…”ë ˆë¯¸í„° ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ OpenTelemetryëŠ” Collectorë¼ëŠ” í¥ë¯¸ë¡œìš´ êµ¬ì„± ìš”ì†Œë¥¼ ì†Œê°œí–ˆìŠµë‹ˆë‹¤.\n\nOpenTelemetry Collectorë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìëŠ” ë°ì´í„°ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì œì–´í•˜ì—¬ ë³€í˜•, ë³´ì™„ ë° ë²¤ë” ì¤‘ë¦½ì ì¸ ëŒ€ìƒ ê²°ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì €ë²ˆ í¬ìŠ¤íŠ¸ì¸ \"OpenTelemetry as a Service\"ë¥¼ ì°¸ê³ í•´ë³´ì„¸ìš”. ê·¸ê³³ì—ì„œ ì¤‘ì•™ OpenTelemetry ìˆ˜ì§‘ê¸°(ê²Œì´íŠ¸ì›¨ì´)ë¥¼ ì„¤ì •í•˜ëŠ” ë” ë§ì€ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Grafana Alloyê°€ ë¬´ì—‡ì´ë©°, ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?\n\nGrafana AlloyëŠ” OpenTelemetry (OTEL) ì—ì´ì „íŠ¸ë¡œ ì‘ë™í•˜ì—¬ ë‹¤ì–‘í•œ ì†ŒìŠ¤ì—ì„œ í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œìœ¼ë¡œ ì „ì†¡í•˜ì—¬ ë¶„ì„ ë° ì‹œê°í™”í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\n\nAlloyëŠ” OpenTelemetry ìˆ˜ì§‘ê¸°ë‚˜ Grafana ì—ì´ì „íŠ¸ì™€ ê°™ì€ ë°ì´í„° ìˆ˜ì§‘ êµ¬ì„± ìš”ì†Œë¥¼ ëŒ€ì²´í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ Mimir, Tempo, ë˜ëŠ” Lokiì™€ ê°™ì€ ë„êµ¬ë¥¼ ëŒ€ì²´í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì˜ˆë¥¼ ë“¤ì–´, Grafanaì—ì„œ ë¡œê·¸, ë©”íŠ¸ë¦­ ë° ì¶”ì  ë°ì´í„°ë¥¼ ì†Œí™”í•˜ê³  í‘œì‹œí•˜ë ¤ëŠ” ê²½ìš°, Loki, Mimir ë° Tempoë¥¼ ë°ì´í„° ì›ë³¸ìœ¼ë¡œ ì„¤ì •í•˜ê³  Alloyë¥¼ ë°°í¬í•˜ì—¬ ë°ì´í„°ë¥¼ ìŠ¤í¬ë©í•˜ê³  ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ ë°©ë²•ì„ í†µí•´ í•œ êµ¬ì„± ìš”ì†Œë¡œ ì—¬ëŸ¬ ëª©ì ì„ ìœ„í•œ ì†Œí™”ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ AlloyëŠ” ë‹¤ì–‘í•œ ëª¨ë‹ˆí„°ë§ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•  ìˆ˜ ìˆëŠ” ë‹¤ì¬ë‹¤ëŠ¥í•œ ë„êµ¬ê°€ ë©ë‹ˆë‹¤.\n\n## Grafana Alloyì˜ Walkthrough\n\n## Prerequisites\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì‹œì‘í•˜ê¸° ì „ì— Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•´ ë‘ì„¸ìš”. ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ìƒˆë¡œìš´ ë¡œì»¬ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”: kind create cluster\n\nê·¸ë¦¬ê³  ë¬´ë£Œ Grafana Cloud ê³„ì •ì´ í•„ìš”í•´ìš”. Grafana CloudëŠ” Grafana, Mimir, Loki, Tempoì™€ ê°™ì€ ì˜¤í”ˆ ì†ŒìŠ¤ í”„ë¡œì íŠ¸ë¡œ êµ¬ì¶•ëœ ì™„ì „íˆ ê´€ë¦¬ë˜ëŠ” í´ë¼ìš°ë“œ ê´€ì¸¡ì„± í”Œë«í¼ì´ì—ìš”. ì•„ì§ ê°€ì…í•˜ì§€ ì•Šì•˜ë‹¤ë©´ ë¬´ë£Œ ê³„ì •ìœ¼ë¡œ ê°€ì…í•˜ì„¸ìš”. ì—¬ê¸°ì„œ í•  ì‘ì—…ì— ëŒ€í•´ ì¶©ë¶„íˆ ì œê³µí•´ ì¤„ ê±°ì—ìš”.\n\ní•„ìš”í•œ ì €ì¥ì†Œë¥¼ ì¶”ê°€í•˜ì„¸ìš”:\n\n```js\nhelm repo add grafana https://grafana.github.io/helm-charts\nhelm repo update\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## í™˜ê²½ ì„¤ì • ì„¤ì •\n\nGrafana Alloyë¥¼ Grafana Cloudì—ì„œ Kubernetes í´ëŸ¬ìŠ¤í„°ì— êµ¬ì„±í•˜ëŠ” ë‘ ê°€ì§€ ëŒ€ì•ˆì´ ìˆìŠµë‹ˆë‹¤. ê°„ë‹¨í•œ ë°©ë²•ë¶€í„° ì‹œì‘í•˜ì—¬ ë‘˜ ë‹¤ ìì„¸íˆ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.\n\n## ëŒ€ì•ˆ 1 (ê°€ì¥ ì‰¬ìš´ ë°©ë²•)\n\nGrafana Cloudì—ì„œ Kubernetes í´ëŸ¬ìŠ¤í„°ìš© Grafana Alloyë¥¼ êµ¬ì„±í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ì£¼ì‹­ì‹œì˜¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- Grafana Cloudì—ì„œ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ `Kubernetes` êµ¬ì„±ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.\n- í™œì„±í™”í•˜ë ¤ëŠ” ê¸°ëŠ¥ì„ ì„ íƒí•©ë‹ˆë‹¤.\n\n- ë©”íŠ¸ë¦­: ì´ ì˜µì…˜ì€ Kubernetes í´ëŸ¬ìŠ¤í„° ì¸í”„ë¼ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ì—¬ Grafana Cloud Prometheusë¡œ ì „ì†¡í•©ë‹ˆë‹¤.\n- ë¹„ìš© ë©”íŠ¸ë¦­: ë¹„ìš© ë©”íŠ¸ë¦­ì„ ìŠ¤í¬ë©í•˜ê³  Grafana Cloud Prometheusë¡œ ì „ì†¡í•˜ë ¤ë©´ ì´ ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ì„¸ìš”.\n- í´ëŸ¬ìŠ¤í„° ì´ë²¤íŠ¸: Kubernetes í´ëŸ¬ìŠ¤í„° ì´ë²¤íŠ¸ë¥¼ ìº¡ì²˜í•˜ì—¬ Grafana Cloud Lokië¡œ ì „ì†¡í•©ë‹ˆë‹¤.\n- Pod ë¡œê·¸: Pod ë¡œê·¸ë¥¼ ìº¡ì²˜í•˜ê³  Grafana Cloud Lokië¡œ ì „ì†¡í•©ë‹ˆë‹¤.\n- OTLP ìˆ˜ì‹ ê¸°: Grafana Alloyë¥¼ êµ¬ì„±í•˜ì—¬ OTLP/gRPC ë° OTLP/HTTPë¥¼ í†µí•´ OpenTelemetry ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤.\n\n3. êµ¬ì„± í”„ë¡œì„¸ìŠ¤ë¥¼ ê³„ì†í•©ë‹ˆë‹¤.\n\nê·¸ëŸ¬ë‚˜ ë°ì´í„°ë¥¼ ë³„ë„ì˜ OpenTelemetry Collectorë¡œ ì „ì†¡í•˜ë ¤ë©´ ëŒ€ì²´ 2ë¥¼ ê³„ì†í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ëŒ€ì•ˆ 2 (ê¶Œì¥í•˜ëŠ” ë°©ë²•)\n\nì´ ë°©ë²•ì€ êµ¬ì„± í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ë” ë§ì€ ìœ ì—°ì„±ê³¼ ì œì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n- ë¨¼ì € í—¬ë¦„ ê°’ íŒŒì¼ì„ ì¤€ë¹„í•˜ì„¸ìš”.\n- ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ í—¬ë¦„ ê°’ íŒŒì¼ì„ êµ¬ì„±í•˜ê³ , 'OTLP endpoint', 'your_endpoint', 'my_username', 'my_secret_password'ë¥¼ ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´í•´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ, OTLPë¥¼ HTTPë¥¼ í†µí•´ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì„œë²„ í”„ë¡œí† ì½œì´ otlphttpë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n```js\nhost: <OTLP ì—”ë“œí¬ì¸íŠ¸>\nwriteEndpoint: /<your_endpoint>\nprotocol: otlphttp\nbasicAuth:\n  username: <my_username>\n  password: <my_secret_password>\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n3. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— Helm ì°¨íŠ¸ë¥¼ ë°°í¬í•˜ì„¸ìš”.\n\n```js\nhelm repo add grafana https://grafana.github.io/helm-charts &&\n  helm repo update &&\n  helm upgrade --install --atomic --timeout 300s grafana-k8s-monitoring grafana/k8s-monitoring \\\n    --namespace \"default\" --create-namespace --values - <<EOF\n```\n\n## ë°°í¬ ê²€ì¦\n\nkubectl get all -n defaultì„ ì‚¬ìš©í•˜ì—¬ ë°°í¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì¡ŒëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```yaml\nPODS\n\nNAME                                                        READY   STATUS    RESTARTS   AGE\ngrafana-k8s-monitoring-alloy-0                              2/2     Running   0          7m29s\ngrafana-k8s-monitoring-alloy-events-6fc5d58d6f-k4fz9        2/2     Running   0          7m29s\ngrafana-k8s-monitoring-alloy-logs-x4chm                     2/2     Running   0          7m29s\ngrafana-k8s-monitoring-kube-state-metrics-f995ccbbc-7gdkh   1/1     Running   0          7m29s\ngrafana-k8s-monitoring-opencost-6659b44b6f-dn8ck            1/1     Running   0          7m29s\ngrafana-k8s-monitoring-prometheus-node-exporter-g2ddm       1/1     Running   0          7m29s\n\nDEPLOYMENT\nNAME                                        READY   UP-TO-DATE   AVAILABLE   AGE\ngrafana-k8s-monitoring-alloy-events         1/1     1            1           7m46s\ngrafana-k8s-monitoring-kube-state-metrics   1/1     1            1           7m46s\ngrafana-k8s-monitoring-opencost             1/1     1            1           7m46s\n\nSERVICES\nNAME                                              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                                                                               AGE\ngrafana-k8s-monitoring-alloy                      ClusterIP   10.96.55.19     <none>        12345/TCP,4317/TCP,4318/TCP,9999/TCP,14250/TCP,6832/TCP,6831/TCP,14268/TCP,9411/TCP   8m7s\ngrafana-k8s-monitoring-alloy-cluster              ClusterIP   None            <none>        12345/TCP,4317/TCP,4318/TCP,9999/TCP,14250/TCP,6832/TCP,6831/TCP,14268/TCP,9411/TCP   8m7s\ngrafana-k8s-monitoring-alloy-events               ClusterIP   10.96.222.205   <none>        12345/TCP                                                                             8m7s\ngrafana-k8s-monitoring-alloy-logs                 ClusterIP   10.96.68.158    <none>        12345/TCP                                                                             8m7s\ngrafana-k8s-monitoring-grafana-agent              ClusterIP   10.96.207.204   <none>        12345/TCP,4317/TCP,4318/TCP,9999/TCP,14250/TCP,6832/TCP,6831/TCP,14268/TCP,9411/TCP   8m7s\ngrafana-k8s-monitoring-kube-state-metrics         ClusterIP   10.96.168.190   <none>        8080/TCP                                                                              8m7s\ngrafana-k8s-monitoring-opencost                   ClusterIP   10.96.55.101    <none>        9003/TCP                                                                              8m7s\ngrafana-k8s-monitoring-prometheus-node-exporter   ClusterIP   10.96.162.70    <none>        9100/TCP\n\nDAEMONSET\nNAME                                              DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE\ngrafana-k8s-monitoring-alloy-logs                 1         1         1       1            1           kubernetes.io/os=linux   8m52s\ngrafana-k8s-monitoring-prometheus-node-exporter   1         1         1       1            1           kubernetes.io/os=linux   8m52s\n\nCONFIGMAPS\nNAME                                  DATA   AGE\ngrafana-k8s-monitoring-alloy          1      9m4s\ngrafana-k8s-monitoring-alloy-events   1      9m4s\ngrafana-k8s-monitoring-alloy-logs     1      9m4s\nkube-root-ca.crt                      1      121m\nkubernetes-monitoring-telemetry       1      9m4s\n```\n\n## Inspecting Grafana Alloy\n\nTo inspect the Grafana Alloy configuration, run:\n\n```yaml\nkubectl get cm grafana-k8s-monitoring-alloy -o yaml\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì—¬ê¸°ì—ì„œ OpenTelemetry Collector ë‚´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ìˆ˜ì‹ ê¸°, í”„ë¡œì„¸ì„œ, ì»¤ë„¥í„° ë° ìµìŠ¤í¬í„° êµ¬ì„± ì„¸ë¶€ ì •ë³´ë¥¼ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ë°œê²¬\n\nGrafana Alloyê°€ ë¨¼ì € ë‹¤ì–‘í•œ Kubernetes ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ Kubernetes ë°œê²¬ ì„¤ì •ì„ ì„¤ì •í•©ë‹ˆë‹¤. ë…¸ë“œ, ì„œë¹„ìŠ¤, ì—”ë“œí¬ì¸íŠ¸ ë° íŒŒë“œì™€ ê°™ì€ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ì‹œê°í™”, ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„ì— í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\n     discovery.kubernetes \"nodes\" {\n       role = \"node\"\n     }\n\n     discovery.kubernetes \"services\" {\n       role = \"service\"\n     }\n\n     discovery.kubernetes \"endpoints\" {\n       role = \"endpoints\"\n     }\n\n     discovery.kubernetes \"pods\" {\n       role = \"pod\"\n     }\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## OTLP ìˆ˜ì‹ ê¸°\n\nìˆ˜ì‹ ê¸°ëŠ” gRPC ë° HTTPë¥¼ í†µí•´ OpenTelemetry í”„ë¡œí† ì½œ (OTLP)ì„ ì‚¬ìš©í•˜ì—¬ í…”ë ˆë¯¸í„° ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ë„ë¡ ì„¤ì •ë©ë‹ˆë‹¤.\n\n```js\n     // OTLP Receivers\n     otelcol.receiver.otlp \"receiver\" {\n       debug_metrics {\n         disable_high_cardinality_metrics = true\n       }\n\n       grpc {\n         endpoint = \"0.0.0.0:4317\"\n       }\n\n       http {\n         endpoint = \"0.0.0.0:4318\"\n       }\n       output {\n         metrics = [otelcol.processor.resourcedetection.default.input]\n         logs = [otelcol.processor.resourcedetection.default.input]\n         traces = [otelcol.processor.resourcedetection.default.input]\n       }\n     }\n```\n\noutput ë¸”ë¡ì€ ë©”íŠ¸ë¦­, ë¡œê·¸ ë° ì¶”ì ì´ otelcol.processor.resourcedetection.default.inputì´ë¼ëŠ” í”„ë¡œì„¸ì„œë¡œ ì „ì†¡ë˜ì–´ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ì²˜ë¦¬ê¸°\n\nì²˜ë¦¬ê¸°ëŠ” í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ê³  í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ëª¨ë‹ˆí„°ë§ ì¸í”„ë¼ì˜ ê°€ì‹œì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì²˜ë¦¬ê¸°ëŠ” OpenTelemetry Collector ë‚´ì—ì„œ í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ ë³€í™˜, ê°ì§€, ì¶”ì¶œ ë° í•„í„°ë§í•˜ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.\n\nì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ë˜ê³  ìˆëŠ” ì²˜ë¦¬ê¸°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n```js\notelcol.processor.transform         # ì†ì„±ì„ ì¶”ê°€í•˜ì—¬ ë©”íŠ¸ë¦­ ë°ì´í„°ë¥¼ ë³€í™˜í•©ë‹ˆë‹¤.\notelcol.processor.resourcedetection # í™˜ê²½ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ê°ì§€í•©ë‹ˆë‹¤.\notelcol.processor.k8sattributes     # Kubernetes ê´€ë ¨ ë©”íƒ€ë°ì´í„°ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.\notelcol.connector.host_info         # í˜¸ìŠ¤íŠ¸ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.\notelcol.processor.batch             # ë°ì´í„° ì²˜ë¦¬ë¥¼ ì¼ê´„ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\notelcol.processor.filter            # ë°ì´í„°ë¥¼ í•„í„°ë§í•©ë‹ˆë‹¤.\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## Exporters\n\nìˆ˜ì¶œê¸°ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œìœ¼ë¡œ í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ ë‚´ë³´ë‚´ê¸° ìœ„í•´ ì •ì˜ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë©”íŠ¸ë¦­ì„ í”„ë¡œë©”í…Œìš°ìŠ¤ë¡œ ë‚´ë³´ë‚´ê¸°, ë¡œê·¸ë¥¼ ë¡œí‚¤ë¡œ ë‚´ë³´ë‚´ê¸°, ê·¸ë¦¬ê³  Tempoë¡œ ì¶”ì ì„ ë‚´ë³´ë‚´ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n## ì£¼ì„ ìë™ íƒì§€\n\nì£¼ì„ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì ìœ¼ë¡œ í¬ë“œ ë° ì„œë¹„ìŠ¤ì—ì„œ ë©”íŠ¸ë¦­ì„ ë°œê²¬í•˜ê³  ìŠ¤í¬ë©í•˜ê¸° ìœ„í•´ ê·œì¹™ì´ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ìŠ¤í¬ë˜í•‘ êµ¬ì„±\n\nêµ¬ì„±ì€ Kubernetes, cAdvisor, Kubelet ë° Node Exporterì™€ ê°™ì€ ë‹¤ì–‘í•œ êµ¬ì„± ìš”ì†Œì—ì„œ ë©”íŠ¸ë¦­ì„ ìŠ¤í¬ë©í•˜ëŠ” ë° ì„¤ì •ë©ë‹ˆë‹¤.\n\n## ë¼ë²¨ ì¬ì„¤ì •\n\nê·œì¹™ì€ ë©”íŠ¸ë¦­ ë° ë¡œê·¸ì— ë¶€ì°©ëœ ë ˆì´ë¸”ì„ ìˆ˜ì •í•˜ê¸° ìœ„í•´ ì •ì˜ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë ˆì´ë¸” ì´ë¦„ ë°”ê¾¸ê¸°, ë¶ˆí•„ìš”í•œ ë ˆì´ë¸” ì‚­ì œ ë° íŠ¹ì • ë©”íŠ¸ë¦­ í•„í„°ë§ ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ì¸ì¦\n\nê¸°ë³¸ ì¸ì¦ì€ ìˆ˜ì¶œ ì—…ì²´ ë° í•„ìš”í•œ ë‹¤ë¥¸ êµ¬ì„± ìš”ì†Œì— êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\nêµ¬ì„± íŒŒì¼ì„ ì´í•´í•˜ê¸° ìœ„í•´ êµ¬ì„± ë§µì„ í™•ì¸í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ëŠ” ì™„ì „í•œ ì„¸ë¶€ ì •ë³´ì™€ êµ¬ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.\n\nìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ Grafana Alloy ì„¤ì •ì„ ê²€í† í•˜ê³  êµ¬ì„±í•œ í›„ UIë¡œ ëŒì•„ê°€ì„œ ëª¨ë“  ê²ƒì´ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_0.png\" />\n\n## ëª¨ë‹ˆí„°ë§ ì»´í¬ë„ŒíŠ¸ íƒìƒ‰\n\n## í´ëŸ¬ìŠ¤í„° íƒìƒ‰\n\nGrafanaì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ í´ëŸ¬ìŠ¤í„° íƒìƒ‰ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ Kubernetes í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ìœ ìš©í•œ í†µì°°ì„ ì–»ì–´ë³´ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![GrafanaAlloyOpenTelemetry_1](/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_1.png)\n![GrafanaAlloyOpenTelemetry_2](/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_2.png)\n![GrafanaAlloyOpenTelemetry_3](/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_3.png)\n![GrafanaAlloyOpenTelemetry_4](/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_4.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ë¹„ìš© ëª¨ë‹ˆí„°ë§\n\nGrafanaì˜ ë¹„ìš© ê°œìš” í˜ì´ì§€ë¥¼ í™œìš©í•˜ì—¬ í´ë¼ìš°ë“œ ë¹„ìš©ì„ ëª¨ë‹ˆí„°ë§í•˜ì„¸ìš”. íš¨ìœ¨ì ì¸ ìì› ê´€ë¦¬ì— ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n## ì•Œë¦¼\n\nì¤‘ìš”í•œ ì´ë²¤íŠ¸ì— ëŒ€í•œ ì˜ˆë°©ì ì¸ ëª¨ë‹ˆí„°ë§ê³¼ ì¦‰ê°ì ì¸ ëŒ€ì‘ì„ ìœ„í•´ ê²½ë³´ ê·œì¹™ ë° ê¸°ë¡ ê·œì¹™ì„ ì„¤ì •í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## Cardinality\n\nì´ ê²Œì‹œë¬¼ì€ ì¹´ë””ë„ë¦¬í‹°ì— ì§‘ì¤‘í•œ ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ì¤‘ìš”í•œ ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì— ì–¸ê¸‰í•´ì•¼ í•©ë‹ˆë‹¤. ì¹´ë””ë„ë¦¬í‹°ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ë©´ ë°ì´í„°ì˜ ê³ ìœ ì„±ì„ ì´í•´í•  ìˆ˜ ìˆì–´ ì„±ëŠ¥ ë° ìì› ì´ìš©ì„ ìµœì í™”í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. ê³ ì¹´ë””ë„ë¦¬í‹°ëŠ” ë§ì€ ê³ ìœ ê°’ì„ ê°€ì§„ ë°ì´í„° ì„¸íŠ¸ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤.\n\nGrafana Cloudì˜ ì ì‘í˜• ë©”íŠ¸ë¦­ì„ ì‚¬ìš©í•˜ì—¬ ì¦ê°€í•œ ì¹´ë””ë„ë¦¬í‹° ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_5.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ê¸° ì„¤ì •\n\nì´ì œ ìš°ë¦¬ëŠ” ìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì—ê²Œ Grafana Alloyë¡œ í…”ë ˆë¯¸í„° ë°ì´í„°ë¥¼ ë³´ë‚´ë„ë¡ ì§€ì‹œí•´ì•¼ í•©ë‹ˆë‹¤. http://grafana-k8s-monitoring-grafana-agent.default.svc.cluster.local:4318\n\në§ì•„ìš”, ì´ ë¡œì»¬ OpenTelemetry ì—ì´ì „íŠ¸ëŠ” í´ëŸ¬ìŠ¤í„°ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œë¶€í„° ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ì¤‘ê°œì ì—­í• ì„ í•©ë‹ˆë‹¤.\n\n## ë©”íŠ¸ë¦­ê³¼ ë¡œê·¸\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ì œ ìš°ë¦¬ì˜ ë©”íŠ¸ë¦­ê³¼ ë¡œê·¸ê°€ Kubernetes í´ëŸ¬ìŠ¤í„°ì—ì„œ Grafana Alloyë¡œ í˜ëŸ¬ë“¤ì–´ê°€ê³ , ì¤‘ì•™ OpenTelemetry Collectorë¥¼ ê±°ì³ Grafana Cloudì—ì„œ ì‹œê°í™”ë©ë‹ˆë‹¤.\n\nì´ ë°ì´í„°ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ê²ƒì€ ì‰½ìŠµë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ë‚´ë¹„ê²Œì´ì…˜ì„ í†µí•´ ì´ë™í•˜ê±°ë‚˜ Explore ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì œ ê°œì¸ì ìœ¼ë¡œëŠ” ë‹¤ì–‘í•œ ì†ŒìŠ¤ì—ì„œ í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆëŠ” Explore ë„êµ¬ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤. ì´ ê°•ë ¥í•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê³  í•„í„° ë° ë³€í™˜ì„ ì ìš©í•˜ë©° ê°€ì¹˜ ìˆëŠ” í†µì°°ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ì¶”ì \n\nê·¸ë ‡ë‹¤ë©´ ì¶”ì ì€ ì–´ë–¨ê¹Œìš”? ì¶”ì ì€ ì‚¬ìš©ì ìš”ì²­ì´ ì‘ìš© í”„ë¡œê·¸ë¨ì„ í†µí•´ ì´ë™í•˜ëŠ” ê³¼ì •ì— ëŒ€í•œ ì¤‘ìš”í•œ í†µì°°ì„ ì œê³µí•©ë‹ˆë‹¤. ì¶”ì ì„ í™œìš©í•˜ë ¤ë©´ ë°ì´í„°ë¥¼ Grafana Alloyë¡œ ë³´ë‚´ë„ë¡ ì„¤ì •ëœ ê³„ê¸°ê°€ ì„¤ì¹˜ëœ ì‘ìš© í”„ë¡œê·¸ë¨ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì‘ìš© í”„ë¡œê·¸ë¨ì´ ë‹¤ìŒ ì£¼ì†Œ ì¤‘ í•˜ë‚˜ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ë„ë¡ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- OTLP/gRPC ì—”ë“œí¬ì¸íŠ¸: http://grafana-k8s-monitoring-grafana-agent.default.svc.cluster.local:4317\n- OTLP/HTTP ì—”ë“œí¬ì¸íŠ¸: http://grafana-k8s-monitoring-grafana-agent.default.svc.cluster.local:4318\n\nSpring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë‹¤ìŒ ì£¼ì†Œë¥¼ OTEL_EXPORTER_OTLP_ENDPOINT í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\n- name: OTEL_EXPORTER_OTLP_ENDPOINT\n  value: http://grafana-k8s-monitoring-grafana-agent.default.svc.cluster.local:4317\n```\n\në˜í•œ springboot-serviceì— OTEL_SERVICE_NAME ë³€ìˆ˜ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```yaml\n- name: OTEL_SERVICE_NAME\n  value: springboot-service\n```\n\nì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°°í¬ë˜ê³  ë°ì´í„°ë¥¼ ìƒì„±í•˜ë©´ Explore ë„êµ¬ì—ì„œ ì¶”ì ì„ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Tempoì—ì„œ ì¶”ì  íƒìƒ‰\n\nTempoë¡œ ì¶”ì ì„ íƒìƒ‰í•´ ë´…ì‹œë‹¤. TempoëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ë¶„ì‚° ì¶”ì  ì‹œìŠ¤í…œìœ¼ë¡œ, ë¶„ì‚° ì‹œìŠ¤í…œ ê°„ ìš”ì²­ íë¦„ì— ëŒ€í•œ ê°€ì‹œì„±ì„ ì œê³µí•©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ì¶”ì (trace)ì€ ë‹¨ì¼ ì‚¬ìš©ì ìš”ì²­ì´ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ ê±°ì³ ì´ë™í•˜ëŠ” ì—¬ì •ì„ ë‚˜íƒ€ë‚´ëŠ” ë°ì´í„° ì§‘í•©ì…ë‹ˆë‹¤. ì´ ì—¬ì •ì˜ ê° ë‹¨ê³„ë¥¼ ìŠ¤íŒ¬(span)ì´ë¼ê³  í•˜ë©°, ì„œë¹„ìŠ¤ ì´ë¦„, ìˆ˜í–‰ëœ ì‘ì—…, ì†Œìš”ëœ ì‹œê°„ ë“±ì˜ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤. ì¶”ì  ë° ìŠ¤íŒ¬ì„ í†µí•´ ê°œë°œìëŠ” ë³µì¡í•˜ê³  ì—°ê²°ëœ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ ë° ë™ì‘ì„ ì´í•´í•˜ëŠ” ë° ë„ì›€ì„ ë°›ìŠµë‹ˆë‹¤.\n\nExplore ë„êµ¬ì—ì„œ grafanacloud-`name`-traces ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì´ë¦„ ë“œë¡­ë‹¤ìš´ ëª©ë¡ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì„ íƒí•˜ê³ (ì˜ˆ: springboot-service), ì¶”ì ì„ ì°¾ì•„ë´…ë‹ˆë‹¤. ìì„¸í•œ í†µì°°ì„ ì–»ìœ¼ë ¤ë©´ ì–´ë–¤ ì¶”ì ì´ë“  í´ë¦­í•˜ì„¸ìš”.\n\n<img src=\"/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_6.png\" />\n\nìì„¸í•œ í†µì°°ì„ ì–»ìœ¼ë ¤ë©´ ì–´ë–¤ ì¶”ì ì´ë“  í´ë¦­í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_7.png)\n\nì €í¬ëŠ” ì„œë¹„ìŠ¤, ì‘ìš© í”„ë¡œê·¸ë¨ ë° ì¸í”„ë¼ì— ëŒ€í•œ íƒì›”í•œ ê´€ì¸¡ì„±ì„ ìœ„í•´ ìŠ¤ìŠ¤ë¡œë¥¼ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë” ë§ì€ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤! ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ ëª¨ë“  ê´€ì¸¡ì„± ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¤ëŠ” ë˜ ë‹¤ë¥¸ Grafana ì œí’ˆì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ì¸¡ì„±ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ê³„ì† ì£¼ì‹œí•´ ì£¼ì„¸ìš”! ğŸ˜Š\n\n## ê²°ë¡ \n\nì´ ë‹¨ê³„ë¥¼ ë”°ë¥´ë©´ ì˜¤í”ˆí…”ë ˆë¯¸íŠ¸ë¦¬ì˜ ê°•ë ¥í•¨ì„ í™œìš©í•˜ì—¬ Kubernetes í´ëŸ¬ìŠ¤í„°ì— Grafana Alloyë¥¼ ì„±ê³µì ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në§Œì•½ ì´ ë‚´ìš©ì´ ë„ì›€ì´ ë˜ì—ˆë‹¤ë©´ ğŸ‘ ë²„íŠ¼ì„ í´ë¦­í•˜ì‹œê³  ì œ í”„ë¡œí•„ì„ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”. ë” ë§ì€ ê¸°ì‚¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!\n","ogImage":{"url":"/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_0.png"},"coverImage":"/assets/img/2024-05-27-GrafanaAlloyOpenTelemetry_0.png","tag":["Tech"],"readingTime":19},{"title":"ëœë”© ì¡´ ë””ìì¸í•˜ê¸°  ë””ìì¸ ê³ ë ¤ ì‚¬í•­ íŒŒíŠ¸ 2  ì¿ ë²„ë„¤í‹°ìŠ¤ì™€ GKE Google Cloud ì±„íƒ ì‹œë¦¬ì¦ˆ","description":"","date":"2024-05-27 17:25","slug":"2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries","content":"\në§ˆìŒì— ë“œì‹œëŠ” markdown í˜•ì‹ì˜ í‘œë¥¼ ì•„ë˜ì— ì°¸ì¡°í•´ë³´ì„¸ìš”:\n\n| êµ¬ë¶„                      | ì„¤ëª…                                                                         |\n| ------------------------- | ---------------------------------------------------------------------------- |\n| ì°©ë¥™ ì§€ì—­ì´ë€?            | ì°©ë¥™ ì§€ì—­ì˜ ì •ì˜ ë° í•„ìš”ì„±ì— ëŒ€í•´ ë‹¤ë£¸                                       |\n| ë””ìì¸ í”„ë¡œì„¸ìŠ¤ ê°œìš”      | ì°©ë¥™ ì§€ì—­ ë””ìì¸ í”„ë¡œì„¸ìŠ¤ ê°œìš” ì†Œê°œ                                          |\n| ë””ìì¸ ê³ ë ¤ ì‚¬í•­ ì¹´í…Œê³ ë¦¬ | ì°©ë¥™ ì§€ì—­ ë””ìì¸ ì‹œ ê³ ë ¤í•´ì•¼ í•  7ê°€ì§€ ì¹´í…Œê³ ë¦¬ ë° ì£¼ìš” ë””ìì¸ ê²°ì • ì‚¬í•­ ì†Œê°œ |\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# 8. Google Kubernetes Engine (GKE)\n\nì•ì„œ ì´ ì‹œë¦¬ì¦ˆì—ì„œ ë§ì”€ë“œë ¸ë“¯ì´, ì»¨í…Œì´ë„ˆëŠ” í›Œë¥­í•´ìš”! ê°€ë²¼ìš°ë©° ë¹ ë¥´ê³  íœ´ëŒ€ì„±ì´ ì¢‹ìœ¼ë©° ì‰½ê²Œ í™•ì¥í•  ìˆ˜ ìˆì–´ìš”. ì´ê²ƒë“¤ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì— ì˜ ì–´ìš¸ë ¤ìš”.\n\nGoogle CloudëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ë°©ë²•ì„ ì œê³µí•˜ê³  ìˆì–´ìš”. ê·¸ëŸ¬ë‚˜ í´ë¼ìš°ë“œì—ì„œ í˜„ëŒ€ì ì¸ ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ì‘ì—…ì„ ì‹¤í–‰í•œë‹¤ë©´ Kubernetesê°€ í•„ìš”í•˜ê² ì£ . ê·¸ë¦¬ê³  Google Cloudì—ì„œ Kubernetesë¥¼ ì‹¤í–‰í•œë‹¤ë©´ Google Kubernetes Engineì„ ì‚¬ìš©í•´ì•¼ í•´ìš”.\n\nGKEì€ Googleì˜ ê´€ë¦¬í˜• Kubernetes í”Œë«í¼ì´ì—ìš”. ì´ë¥¼ í†µí•´ Google Cloudì—ì„œ Kubernetesë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì§€ë§Œ ìì²´ ê´€ë¦¬í˜• Kubernetesë³´ë‹¤ ì—¬ëŸ¬ê°€ì§€ ì´ì ì„ ì œê³µí•´ìš”:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- GKEëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•˜ê³  ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ë©° ë…¸ë“œë¥¼ ë“±ë¡í•˜ëŠ” ê²ƒì„ ì²˜ë¦¬í•´ì¤ë‹ˆë‹¤. ìƒˆë¡œìš´ í´ëŸ¬ìŠ¤í„°ëŠ” ëª‡ ë¶„ ì•ˆì— ë°°í¬í•  ìˆ˜ ìˆì–´ìš”!\n- ì¿ ë²„ë„¤í‹°ìŠ¤ ì œì–´ í”Œë ˆì¸ ë…¸ë“œëŠ” ì™„ì „ ê´€ë¦¬ë˜ë©° ì†Œë¹„ìë¡œë¶€í„° ì™„ì „íˆ ì¶”ìƒí™”ë˜ì–´ ìˆì–´ìš”.\n- í˜¸ìŠ¤íŠ¸ëŠ” êµ¬ê¸€ì´ íˆ¬ëª…í•˜ê²Œ ê´€ë¦¬í•˜ê³  íŒ¨ì¹˜í•˜ëŠ” ê²¬ê³ í•˜ê³  ë¯¸ë¦¬ êµ¬ì„±ëœ ì»¨í…Œì´ë„ˆ ìš©ë„ OSì—ì„œ ì‹¤í–‰ë¼ìš”.\n- êµ¬ê¸€ì€ ë¦´ë¦¬ìŠ¤ ì±„ë„ì„ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ ì—…ê·¸ë ˆì´ë“œë¥¼ íˆ¬ëª…í•˜ê²Œ ê´€ë¦¬í•´ì¤˜ìš”.\n- í´ëŸ¬ìŠ¤í„°ëŠ” ì›Œí¬ë¡œë“œ ìˆ˜ìš”ë¥¼ ì¶©ì¡±í•˜ê¸° ìœ„í•´ íƒ„íƒ„í•˜ê²Œ ìë™ìœ¼ë¡œ íƒ„ë ¥ì ìœ¼ë¡œ í™•ì¥ë¼ìš”. (ê´€ë¦¬ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ ë° ì˜¤í† ìŠ¤ì¼€ì¼ëŸ¬ì™€ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ ë§Œë“¤ í•„ìš” ì—†ì´!)\n- ë¹„íŒŒê´´ì ìœ¼ë¡œ ìë™ ìˆ˜ë¦¬ ë° ë¶ˆê±´ì „í•œ í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ êµì²´ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•´ì¤˜ìš”.\n- ê¸°ë³¸ ì œê³µ ì§€ì—­ ê³ ê°€ìš©ì„±.\n- GKEëŠ” Google Cloud Operationsì— ë„¤ì´í‹°ë¸Œë¡œ í†µí•©ë¼ ìˆì–´ì„œ ëª¨ë‹ˆí„°ë§, ë¡œê¹… ë° ë©”íŠ¸ë¦­ìŠ¤ì— ì‰½ê²Œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ìš”.\n- GKE Autopilotìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ëŠ” ê¸°ë³¸ ì œê³µëœ ëª¨ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ë¡œ ì‚¬ì „êµ¬ì„±ë¼ìš”.\n- GKE Autopilotìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì¸ ì›Œí¬ë¡œë“œì— ë¹„ìš©ì„ ì§€ê¸‰í•˜ê²Œ ë©ë‹ˆë‹¤. (PODë³„ ì²­êµ¬ë¼ê³ ë„ í•¨) í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•˜ëŠ” ë° ë¹„ìš©ì„ ë‚´ì•¼ í•˜ëŠ” ëŒ€ì‹ ì…ë‹ˆë‹¤. ì´ê²ƒì€ ê²Œì„ ì²´ì¸ì €ì—ìš”!\n- GKE ë…¸ë“œ í’€ ë° Autopilotì—ì„œ ê³„ì‚° í´ë˜ìŠ¤ë¡œ ì‘ì—… ë¶€í•˜ì— í•„ìš”í•œ íŠ¹ì • ê¸°ê³„ ìœ í˜•ì„ í• ë‹¹í•  ìˆ˜ ìˆì–´ìš”. ë˜í•œ AI/ML í•™ìŠµê³¼ ê°™ì´ í•„ìš”ë¡œ í•˜ëŠ” ì›Œí¬ë¡œë“œì— GPUë¥¼ í• ë‹¹í•  ìˆ˜ ìˆì–´ìš”.\n- ì™„ë²½í•œ Google Anthos ì„œë¹„ìŠ¤ ë©”ì‹œì™€ì˜ ì›í™œí•œ í†µí•©, ìŠ¤ìŠ¤ë¡œ ì™„ì „ ê´€ë¦¬ ì„œë¹„ìŠ¤ë¡œ ì œê³µí•  ìˆ˜ ìˆì–´ìš”.\n\n(ì°¸ê³ ë¡œ, ì—¬ê¸°ì—ì„œ êµ¬ê¸€ ì»´í“¨íŠ¸ ì—”ì§„ì—ì„œ ìì²´ ê´€ë¦¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ ì‹¤í–‰í•˜ë ¤ëŠ” ê²ƒì´ ì™œ ì¢‹ì§€ ì•Šì€ ì•„ì´ë””ì–´ì¸ì§€ ë‹¤ì–‘í•œ ì´ìœ ì— ëŒ€í•´ ë‹¤ë¤˜ì—ˆì–´ìš”.)\n\nì¡°ê¸ˆ ê³ ë ¤í•´ì•¼ í•  ì„¤ê³„ ê²°ì •ê³¼ ìµœìƒì˜ ëª¨ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ê°€ ìˆì–´ìš”. ì´ ì£¼ì œì— ëŒ€í•œ ì‹œë¦¬ì¦ˆë¥¼ ì§„í–‰í•  ìˆ˜ë„ ìˆê² ì§€ë§Œ ê°„ëµí•˜ê²Œ ì—¬ê¸°ì„œ ê³ ë ¤ ì‚¬í•­ì„ ìš”ì•½í•´ë“œë¦´ê²Œìš”.\n\n## GKE Autopilot ë˜ëŠ” GKE í‘œì¤€?\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![AutoPilot](/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_0.png)\n\nì•ˆë…•í•˜ì„¸ìš”! Autopilotì€ ê¸°ë³¸ í´ëŸ¬ìŠ¤í„° ë°°í¬ ëª¨ë“œë¡œ ì´ë¯¸ ì¥ê¸°ê°„ ì‚¬ìš©ë˜ì–´ ì™”ì–´ìš”. ì´ ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ì€ ëª‡ ê°€ì§€ ëª¨ë²” ì‚¬ë¡€ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤:\n\n- ë¦´ë¦¬ìŠ¤ ì±„ë„ë¡œì˜ ì˜ë¬´ì  ë“±ë¡. ì´ê²ƒì€ í´ëŸ¬ìŠ¤í„°ê°€ ìë™ìœ¼ë¡œ íŒ¨ì¹˜ë˜ê³  ìœ ì§€ë˜ë©°, ì˜¤ë˜ëœ ë³´ì•ˆ ì·¨ì•½í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ì„ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n- í´ëŸ¬ìŠ¤í„°ëŠ” regionalë¡œ, í´ëŸ¬ìŠ¤í„°ì˜ ê³ ê°€ìš©ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.\n- í´ëŸ¬ìŠ¤í„° ìë™ ìŠ¤ì¼€ì¼ë§ - GKEê°€ ê¸°ë³¸ìœ¼ë¡œ ë…¸ë“œ ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ì¡°ì •í•´ ì¤ë‹ˆë‹¤.\n- ë…¸ë“œ ìë™ ë³µêµ¬ê°€ ê¸°ë³¸ìœ¼ë¡œ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n- ë³´ì•ˆ ë¶€íŒ…ì´ ìˆëŠ” shielded ì¸ìŠ¤í„´ìŠ¤ë¡œ ë…¸ë“œê°€ êµ¬ì¶•ë©ë‹ˆë‹¤.\n- Workload identityê°€ ì‚¬ì „ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ ê³„ì •ì´ êµ¬ê¸€ í´ë¼ìš°ë“œ IAM ì„œë¹„ìŠ¤ ê³„ì •ì²˜ëŸ¼ ì‘ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, GKE ì„œë¹„ìŠ¤ì—ì„œ êµ¬ê¸€ í´ë¼ìš°ë“œ APIë¡œì˜ ì„¸ë¶„í™”ëœ ì•¡ì„¸ìŠ¤ ì»¨íŠ¸ë¡¤ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ë¦¬ê³  ì´ì „ì— ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼, ì‹¤ì œë¡œ ë°°í¬ë˜ê³  ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œì— ëŒ€í•´ ë¹„ìš©ì„ ì§€ë¶ˆí•˜ë¯€ë¡œ, GKE í´ëŸ¬ìŠ¤í„°ë¥¼ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” êµ­ë©´ì—ì„œ ì§€ì¶œì„ ë‚­ë¹„í•˜ëŠ” ì¼ì„ í”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (GKE Standardë¥¼ ì‹¤í–‰í•  ë•Œ í”íˆ ë°œìƒí•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nëŒ€ë¶€ë¶„ì˜ ê²½ìš° Autopilotì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì¼ë¶€ íŠ¹ì •í•œ ê²½ìš°ì—ëŠ” Standardë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:\n\n- TPUì™€ í•¨ê»˜ ë…¸ë“œë¥¼ ë°°í¬í•˜ê³  ì‹¶ì„ ë•Œ.\n- íŠ¹ì • ë²„ì „ì˜ Kubernetesë¥¼ ì‹¤í–‰í•˜ê³  ìë™ ì—…ê·¸ë ˆì´ë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë ¤ëŠ” ê²½ìš°. (ì¼ë°˜ì ìœ¼ë¡œ ì´ëŠ” ì¢‹ì§€ ì•Šì€ ì•„ì´ë””ì–´ì´ë©°, ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ë„ë¥¼ ìƒì‡„ì‹œí‚¤ëŠ” ê²ƒê³¼ë„ ê°™ìŠµë‹ˆë‹¤.)\n- êµ¬ê¸€ Autopilot í—ˆìš© ëª©ë¡ì— ì—†ëŠ” íŠ¹ê¶ŒìˆëŠ” íŒŸ (ì¦‰, ìƒìŠ¹ëœ ê¶Œí•œì´ í•„ìš”í•œ ì‘ì—… ë¶€í•˜)ì„ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ.\n- ì‹¤í—˜ì ì¸ ì‘ì—… ë¶€í•˜ë¥¼ ë‹¨ì¼ ì¡´ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•˜ê³  ê°€ìš©ì„±ì„ ë³´ì¥í•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš°.\n\n## Multitenant ëŒ€ Single Tenant í´ëŸ¬ìŠ¤í„°?\n\nì´ê²ƒì€ ì´ì „ë³´ë‹¤ëŠ” ëœ ê²€ì •ìƒ‰ê³¼ í°ìƒ‰ì˜ ë¬¸ì œì…ë‹ˆë‹¤. Autopilot ì´ì „ì—ëŠ” ë‹µì´ ëª…í™•í–ˆìŠµë‹ˆë‹¤: ê°€ëŠ¥í•œ í•œ ë§ì€ Multitenant í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤. ì•„ì´ë””ì–´ëŠ” ë§¤ìš° ì ì€ í´ëŸ¬ìŠ¤í„°ë¥¼ ê°€ì§€ê³  ê° í´ëŸ¬ìŠ¤í„°ê°€ ì¡°ì§ ë‚´ ë‹¤ì¤‘ í…Œë„ŒíŠ¸ë¡œë¶€í„° ì‘ì—… ë¶€í•˜ë¥¼ í˜¸ìŠ¤íŒ…í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ í…Œë„ŒíŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì¡°ì§ ë‚´ì—ì„œ ë‹¤ë¥¸ íŒ€ë“¤ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê° í…Œë„ŒíŠ¸ëŠ” í•˜ë‚˜ ì´ìƒì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì†Œìœ í•˜ê²Œ ë©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në©€í‹°í…Œë„ŒíŠ¸ GKE í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ë©´:\n\n- ê´€ë¦¬í•´ì•¼ í•  í´ëŸ¬ìŠ¤í„°ê°€ í•˜ë‚˜ë¿ì´ê¸° ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ ë¶€ë‹´ì´ ë¹„êµì  ì ìŠµë‹ˆë‹¤.\n- ê°œë³„ í…Œë„ŒíŠ¸/ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í´ëŸ¬ìŠ¤í„°ë¥¼ í”„ë¡œë¹„ì €ë‹í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ê¸°ì¡´ í´ëŸ¬ìŠ¤í„°ì— ì‘ì—…ëŸ‰ì„ ë°°í¬í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.\n- í´ëŸ¬ìŠ¤í„° ìì²´ì˜ ê´€ë¦¬ ì±…ì„ì„ í´ë¼ìš°ë“œ í”Œë«í¼ íŒ€ì— ìœ„ì„í•  ìˆ˜ ìˆì–´, ì• í”Œë¦¬ì¼€ì´ì…˜ íŒ€ì€ GKE ê´€ë¦¬ ì±…ì„ì„ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\n- í…Œë„ŒíŠ¸ ê°„ì˜ ê²©ë¦¬ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚¬ìš©ì„ í†µí•´ ë‹¬ì„±í•©ë‹ˆë‹¤. í…Œë„ŒíŠ¸ëŠ” ìì‹ ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë°°í¬í•©ë‹ˆë‹¤.\n\ní•œí¸, ë§ì€ ìˆ˜ì˜ ì†Œê·œëª¨ ë‹¨ì¼ í…Œë„ŒíŠ¸ GKE(í‘œì¤€) í´ëŸ¬ìŠ¤í„°ê°€ ìˆëŠ” ê²½ìš° â€” ì¦‰, ê° í´ëŸ¬ìŠ¤í„°ê°€ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ë¥¼ í˜¸ìŠ¤íŒ…í•˜ëŠ” ê²½ìš° â€” ì´ëŠ” ë¹„ìš©ì´ ë§ì´ ì†Œìš”ë©ë‹ˆë‹¤:\n\n- ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìì²´ í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ê° íŒ€ì— ìƒë‹¹í•œ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ ë¶€ë‹´ì´ ë°œìƒí•©ë‹ˆë‹¤.\n- ë”ë¶ˆì–´ ë†’ì€ ê°€ìš©ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê° í´ëŸ¬ìŠ¤í„°ëŠ” ì§€ì—­ ì „ì²´ì— ìµœì†Œ ìˆ˜ì˜ ë…¸ë“œë¥¼ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¨ì¼ í…Œë„ŒíŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš°, ì´ëŠ” ìì£¼ ì‘ìš©í”„ë¡œê·¸ë¨ì˜ ìš”êµ¬ ì‚¬í•­ë³´ë‹¤ í›¨ì”¬ í° ìµœì†Œ í´ëŸ¬ìŠ¤í„° í¬ê¸°ì— ì´ë¥´ê²Œ ë©ë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, ëŒ€ê·œëª¨ë¡œ ê³¼ì‰ í”„ë¡œë¹„ì €ë‹ë˜ê³  ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í´ëŸ¬ìŠ¤í„°ê°€ ë§ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. GKE í‘œì¤€ ì œí’ˆì„ ì‚¬ìš©í•˜ë©´ ìš´ì˜ ì¤‘ì¸ íŒŸì´ ì•„ë‹Œ ë°°í¬í•œ í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ë¹„ìš©ì„ ì§€ë¶ˆí•˜ë¯€ë¡œ ë§ì€ í˜„ê¸ˆì„ ë‚­ë¹„í•˜ê²Œ ë©ë‹ˆë‹¤!\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"https://miro.medium.com/v2/resize:fit:440/0*sXXDeW5_LtHqMzi4.gif\" />\n\nAutopilotì„ ì‚¬ìš©í•˜ë©´ ë‹¨ì¼ í…Œë„ŒíŠ¸ í´ëŸ¬ìŠ¤í„°ê°€ ë§ì€ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤:\n\n- ì‹¤í–‰ ì¤‘ì¸ íŒŸë§Œ ì§€ë¶ˆí•˜ê²Œ ë˜ë¯€ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ ëŒ€ê±° ë°°í¬í•˜ì—¬ ìê¸ˆì„ ë‚­ë¹„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n- ë°•ìŠ¤ì—ì„œ ì‚¬ì „ êµ¬ì„±ëœ ë§ì€ ëª¨ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ë¡œ ì¸í•´ í…Œë„ŒíŠ¸ ë‹¹ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ ë¶€ë‹´ì´ ë¹„êµì  ì ìŠµë‹ˆë‹¤.\n\në§ˆë¬´ë¦¬ë¡œ ë§ì”€ë“œë¦¬ë©´, ê°€ëŠ¥í•œ ê²½ìš°ì—ëŠ” ë©€í‹°í…Œë„ŒíŠ¸ GKE Autopilot í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. íŠ¹ë³„í•œ ê²½ìš°ì—ë§Œ ë‹¨ì¼ í…Œë„ŒíŠ¸ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì¡°ì§ì—ì„œ í¸ì•ˆí•œ ìˆ˜ì¤€ìœ¼ë¡œ ë°°í¬ëœ ëª‡ ê°œì˜ ë‹¤ì¤‘ í…Œë„ŒíŠ¸ í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê° ì‚¬ì—… ë¼ì¸ì— ë§ì¶° ë‹¤ì¤‘ í…Œë„ŒíŠ¸ í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ì „ ë¶€ë¶„ì—ì„œ ë…¼ì˜í•œ ëŒ€ë¡œ ê³µìœ  VPC ë””ìì¸ì„ ì¤‘ì‹¬ìœ¼ë¡œ ëœë”© ì¡´ì„ êµ¬ì¶•í–ˆë‹¤ë©´, ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ì¤‘ í…Œë„ŒíŠ¸ GKE í´ëŸ¬ìŠ¤í„°ë¥¼ ê³µìœ  VPC ë‚´ì— ë°°í¬í•˜ê³  ì‹¶ì„ ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n- \"í—ˆë¸Œ\" VPCì— í”¼ì–´ë§ëœ ë‹¤ì¤‘ í…Œë„ŒíŠ¸ GKEê°€ í˜¸ìŠ¤íŒ…ë˜ëŠ” ê³µìœ  VPC\n- ë‹¤ë¥¸ ê³µìœ  ì„œë¹„ìŠ¤ê°€ í˜¸ìŠ¤íŒ…ë˜ëŠ” ê°™ì€ ê³µìœ  VPC\n\nì–´ì¨Œë“ , í”Œë«í¼ íŒ€ì´ ê³µìœ  VPCê°€ ìˆëŠ” í˜¸ìŠ¤íŠ¸ í”„ë¡œì íŠ¸ì™€ ë‹¤ì¤‘ í…Œë„ŒíŠ¸ GKE í´ëŸ¬ìŠ¤í„°ê°€ ìˆëŠ” í˜¸ìŠ¤íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì†Œìœ í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. í…Œë„ŒíŠ¸ëŠ” ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ë¥¼ ì†Œìœ í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë“¤ì€ ë‹¤ì¤‘ í…Œë„ŒíŠ¸ í´ëŸ¬ìŠ¤í„°(ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´)ì— ì§ì ‘ ì›Œí¬ë¡œë“œë¥¼ ë°°í¬í•  ìˆ˜ ìˆìœ¼ë©°, ë¹„-GKE ë¦¬ì†ŒìŠ¤ë¥¼ ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ë¡œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nGoogle Cloud ë¬¸ì„œëŠ” ì´ ë°©ë²•ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•©ë‹ˆë‹¤:\n\n![Google Cloud](/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_1.png)\n\n## VPC-Native ë˜ëŠ” ë¼ìš°íŠ¸ ê¸°ë°˜ í´ëŸ¬ìŠ¤í„°?\n\në¼ìš°íŠ¸ ê¸°ë°˜ í´ëŸ¬ìŠ¤í„°ëŠ” pod ê°„ íŠ¸ë˜í”½ì— ëŒ€í•œ VPC ì‚¬ìš©ì ì •ì˜ ë¼ìš°íŠ¸ì— ì˜ì¡´í•˜ëŠ” í´ëŸ¬ìŠ¤í„°ì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nVPC-native í´ëŸ¬ìŠ¤í„°ëŠ” í¬ë“œ ì£¼ì†Œ ì§€ì •ì„ ìœ„í•´ ë³„ì¹­ IP ì£¼ì†Œ ë²”ìœ„ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ëŸ¬ìŠ¤í„°ì…ë‹ˆë‹¤. ì´ëŠ” í¬ë“œê°€ í´ëŸ¬ìŠ¤í„°ì˜ VPC ë„¤íŠ¸ì›Œí¬ ë° ì—°ê²°ëœ VPC ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œ ë„¤ì´í‹°ë¸Œë¡œ ë¼ìš°íŒ…ë  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í¬ë“œ ì£¼ì†Œë¥¼ ìœ„í•´ ì‚¬ìš©ì ì •ì˜ ì •ì  ê²½ë¡œì˜ êµ¬ì„±ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ ë¶€ë‹´ì€ ë¹„êµì  ë‚®ìŠµë‹ˆë‹¤.\n\nVPC-native í´ëŸ¬ìŠ¤í„°ëŠ” RFC 1918 IP ë²”ìœ„ ë°–ì˜ IP ì£¼ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë§ì€ í¬ë“œ IP ì£¼ì†Œê°€ í•„ìš”í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë  ë•Œ ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, GKEëŠ” 240.0.0.0/4 CIDR ë²”ìœ„ë¥¼ ë…¸ë“œ, í¬ë“œ ë° ì„œë¹„ìŠ¤ì— ì‚¬ìš©í•  ìˆ˜ ìˆì–´ ì¶”ê°€ë¡œ 2ì–µ 6800ë§Œ ê°œì˜ IP ì£¼ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤!\n\nGoogleì€ VPC-native í´ëŸ¬ìŠ¤í„°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ê²ƒì€ GKE Autopilotì˜ ê¸°ë³¸ ì„¤ì •ì´ë©°, 2021ë…„ì— ì¶œì‹œëœ ë²„ì „ 1.21.0-gke.1500ë¶€í„° GKE í‘œì¤€ì˜ ê¸°ë³¸ ì„¤ì •ì´ì—ˆìŠµë‹ˆë‹¤.\n\nìš”ì•½í•˜ìë©´: VPC-native í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”!\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ê°œì¸ í´ëŸ¬ìŠ¤í„°?\n\nê¸°ë³¸ì ìœ¼ë¡œ GKE í´ëŸ¬ìŠ¤í„°ëŠ” ê³µê°œì ì…ë‹ˆë‹¤. ì´ëŠ” ì œì–´ í‰ë©´ê³¼ ì›Œì»¤ ë…¸ë“œê°€ ê³µê°œ IP ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¡°ì§ì´ ê°œì¸ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ëª¨ë²• ì‚¬ë¡€ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í´ëŸ¬ìŠ¤í„°ë¥¼ ì¸í„°ë„·ì—ì„œ ê²©ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê°œì¸ í´ëŸ¬ìŠ¤í„°ì—ì„œëŠ”:\n\n- ì›Œì»¤ ë° ì œì–´ í‰ë©´ ë…¸ë“œëŠ” ë¹„ê³µê°œ IP ì£¼ì†Œë§Œ ê°€ì§€ê³  ìˆìœ¼ë©° ì¸í„°ë„·ì— ë…¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ NodePort ìœ í˜•ì˜ ì„œë¹„ìŠ¤ëŠ” ë…¸ë“œê°€ ì¸í„°ë„· ë¼ìš°íŒ… ê°€ëŠ¥í•œ ê³µê°œ IP ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì¸í„°ë„·ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n- ë…¸ë“œëŠ” Google API ë° ì„œë¹„ìŠ¤ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ Private Google Accessë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n- ì¸í„°ë„·ìœ¼ë¡œì˜ ì™¸ë¶€ ì•¡ì„¸ìŠ¤ëŠ” Cloud NAT ë˜ëŠ” Anthos Service Mesh ì´ê·¸ë ˆìŠ¤ ê²Œì´íŠ¸ì›¨ì´ì™€ ê°™ì´ êµ¬í˜„í•œ íŠ¹ì • ì œì–´ë¥¼ í†µí•´ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ì™¸ë¶€ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ë“¤ì–´ì˜¤ëŠ” ì—°ê²°ì€ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ì„œë§Œ í—ˆìš©ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒì„ ì‚¬ìš©í•©ë‹ˆë‹¤: ì™¸ë¶€ Ingressë¥¼ ê°€ì§„ LoadBalancer ì„œë¹„ìŠ¤ ë˜ëŠ” Anthos Service Mesh ê³µê°œ ì¸ê·¸ë ˆìŠ¤ ê²Œì´íŠ¸ì›¨ì´.\n- ì›Œì»¤ ë…¸ë“œì™€ GKE ì œì–´ í‰ë©´ ì‚¬ì´ì˜ í†µì‹ ì€ ì œì–´ í‰ë©´ì˜ ë¹„ê³µê°œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ë©°, ì œì–´ í‰ë©´ì— ì•¡ì„¸ìŠ¤í•´ì•¼ í•˜ëŠ” ì¶”ê°€ ë„¤íŠ¸ì›Œí¬ëŠ” ìŠ¹ì¸ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_2.png\" />\n\n## í´ëŸ¬ìŠ¤í„°ê°„ IP ì£¼ì†Œ ë²”ìœ„ ê³µìœ \n\nVPC ë„¤ì´í‹°ë¸Œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ë•Œ, ë…¸ë“œ, íŒŒë“œ ë° ì„œë¹„ìŠ¤ì— ëŒ€í•œ IP ì£¼ì†Œë¥¼ í• ë‹¹í•´ì•¼ í•©ë‹ˆë‹¤.\n\n- ë…¸ë“œ IP ì£¼ì†Œ: í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œì¸ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì— ì‚¬ìš©ë˜ëŠ” ì£¼ì†Œì…ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ëŠ” ë…¸ë“œì— IP ì£¼ì†Œë¥¼ í• ë‹¹í•˜ê¸° ìœ„í•´ ì„œë¸Œë„·ì˜ ê¸°ë³¸ IPv4 ë²”ìœ„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë…¸ë“œì˜ í¬ê¸°ë¥¼ ì˜ˆìƒí•˜ëŠ”ë° ìˆì–´, ê°€ì¥ í° í¬ê¸°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„œë¸Œë„·ì˜ í¬ê¸°ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n- íŒŒë“œ IP ì£¼ì†Œ: í´ëŸ¬ìŠ¤í„°ëŠ” íŒŒë“œì— IP ì£¼ì†Œë¥¼ í• ë‹¹í•  ë•Œ ë³´ì¡° IPv4 ì£¼ì†Œ ë²”ìœ„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. GKEì—ì„œ ê°€ì¥ í° IP ì£¼ì†Œ ìš”êµ¬ì‚¬í•­ì´ë©°, ê° ë…¸ë“œëŠ” ë§ì€ ìˆ˜ì˜ íŒŒë“œë¥¼ í˜¸ìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ GKE Autopilotì€ ë…¸ë“œ ë‹¹ ìµœëŒ€ íŒŒë“œ ìˆ˜ë¥¼ 32ê°œë¡œ ì„¤ì •í•˜ê³ , ê° ë…¸ë“œ ë‹¹ 64ê°œì˜ IP ì£¼ì†Œë¥¼ í—ˆìš©í•˜ì—¬ íŒŒë“œ êµì²´ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤. KubernetesëŠ” ê° ë…¸ë“œì— ë³´ì¡° IP ì£¼ì†Œ ë²”ìœ„ë¥¼ í• ë‹¹í•˜ì—¬ ê° íŒŒë“œì— ê³ ìœ í•œ IP ì£¼ì†Œë¥¼ í• ë‹¹í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ GKE Autopilotì€ /17 ë³´ì¡° ì„œë¸Œë„· ë²”ìœ„ë¥¼ í• ë‹¹í•˜ë¯€ë¡œ 32766ê°œì˜ ì‚¬ìš© ê°€ëŠ¥í•œ íŒŒë“œê°€ í—ˆìš©ë©ë‹ˆë‹¤. (ì´ëŠ” ì•½ 1000ê°œê°€ ë„˜ëŠ” ë…¸ë“œë¥¼ ê°€ì§„ í´ëŸ¬ìŠ¤í„°ì™€ ë™ë“±í•©ë‹ˆë‹¤.)\n- ì„œë¹„ìŠ¤(ClusterIP) IP ì£¼ì†Œ: í´ëŸ¬ìŠ¤í„°ëŠ” ë‚´ë¶€ ì„œë¹„ìŠ¤ ì£¼ì†Œë¥¼ ìœ„í•´ ë³„ë„ì˜ ë³´ì¡° IP ì£¼ì†Œ ë²”ìœ„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ IPëŠ” ClusterIP ì„œë¹„ìŠ¤ì— í• ë‹¹ë©ë‹ˆë‹¤; ì´ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ê°€ìƒ IP ì£¼ì†Œì…ë‹ˆë‹¤. GKE Autopilotì—ì„œëŠ” ë²„ì „ 1.27ë¶€í„° ë””í´íŠ¸ë¡œ Google ê´€ë¦¬ ë„¤íŠ¸ì›Œí¬ì—ì„œ IP ì£¼ì†Œë¥¼ í• ë‹¹í•˜ë©° ë²”ìœ„ëŠ” 34.118.224.0/20ì…ë‹ˆë‹¤. ë™ì¼í•œ ë²”ìœ„ê°€ ê° í´ëŸ¬ìŠ¤í„°ì— í• ë‹¹ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ê° í´ëŸ¬ìŠ¤í„°ë§ˆë‹¤ 4ì²œ ê°œ ì´ìƒì˜ ì„œë¹„ìŠ¤ ì£¼ì†Œê°€ ì œê³µë˜ë©°, ê¸°ê´€ì€ GKE ë‚´ì˜ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ IP ì£¼ì†Œë¥¼ í• ë‹¹í•˜ê±°ë‚˜ ì˜ˆì•½í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_3.png\" />\n\në™ì¼í•œ ê³µìœ  VPCì—ì„œ ëª‡ ê°œì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹¤í–‰í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—…ë¬´ë³„ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì •ì˜í•˜ê³  ì‹¶ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. (ì´ë¯¸ ì–¸ê¸‰í–ˆë“¯ì´, ë§ì€ ì‘ì€ ë‹¨ë… ì‚¬ìš©ì í´ëŸ¬ìŠ¤í„°ë¥¼ ê°–ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šì€ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤.) ì´ ê²½ìš°, ê°™ì€ ì„œë¸Œë„·ì— í˜¸ìŠ¤íŒ…ëœ í´ëŸ¬ìŠ¤í„° ê°„ì— ê¸°ë³¸ ë° ë³´ì¡° IP ì£¼ì†Œ ë²”ìœ„ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ì¼ì…ë‹ˆë‹¤:\n\n- í´ëŸ¬ìŠ¤í„°ë‹¹ ì„œë¸Œë„·ì„ í• ë‹¹í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\n- í´ëŸ¬ìŠ¤í„°ë‹¹ ì„œë¸Œë„· í¬ê¸°ë¥¼ ê³ ë ¤í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\n- ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- IP ì£¼ì†Œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì ˆì•½í•˜ê³  IP ì£¼ì†Œ ê³ ê°ˆ ìœ„í—˜ì„ ì¤„ì…ë‹ˆë‹¤.\n\nVPCì—ì„œ í´ëŸ¬ìŠ¤í„° ê°„ì— ë²”ìœ„ë¥¼ ê³µìœ í•˜ê¸°ë¡œ ê²°ì •í•œë‹¤ë©´, ì´ ì ì„ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ë¯¸ë¦¬ ëª…ëª…ëœ ì„œë¸Œë„·ì„ ì •ì˜í•˜ì„¸ìš”.\n- 100.64.0.0/10(ì•½ 4.2 ë°±ë§Œ ê°œì˜ íŒŒë“œ ì‚¬ìš© ê°€ëŠ¥) ë° 240.0.0.0/4(ì•½ 2ì–µ 6ì²œ 8ë°±ë§Œ ê°œì˜ íŒŒë“œ ì‚¬ìš© ê°€ëŠ¥)ì™€ ê°™ì€ RFC 1918 í”„ë¼ì´ë¹— CIDR ë²”ìœ„ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”.\n\n## ë¦´ë¦¬ìŠ¤ ì±„ë„\n\nì—¬ê¸°ì—ì„œëŠ” GKE í´ëŸ¬ìŠ¤í„°ê°€ ì—…ê·¸ë ˆì´ë“œë˜ê³  ìœ ì§€ë³´ìˆ˜ë˜ë©° íŒ¨ì¹˜ë˜ëŠ” ì „ëµì„ ê²°ì •í•©ë‹ˆë‹¤.\n\nì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ì€ x.y.z í˜•ì‹ìœ¼ë¡œ í‘œì‹œë˜ë©°, ì—¬ê¸°ì„œ xëŠ” ì£¼ìš” ë²„ì „, yëŠ” ë¶€ ë²„ì „, zëŠ” íŒ¨ì¹˜ ë²„ì „ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë§¤ë…„ ì„¸ ë²ˆì—ì„œ ë„¤ ë²ˆì˜ ì¤‘ìš” (ì£¼ìš” ë˜ëŠ” ë¶€) ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦´ë¦¬ìŠ¤ê°€ ìˆìœ¼ë©°, íŒ¨ì¹˜ ë¦´ë¦¬ìŠ¤ëŠ” ì¼ì£¼ì¼ì— í•œ ë²ˆì”© ë°œìƒí•©ë‹ˆë‹¤. ì£¼ìš” ë° ë¶€ ë¦´ë¦¬ìŠ¤ëŠ” ìƒˆë¡œìš´ ê¸°ëŠ¥ê³¼ ë³´ì•ˆ íŒ¨ì¹˜ë¥¼ ëª¨ë‘ í¬í•¨í•©ë‹ˆë‹¤. íŠ¹ì • ë¶€ ë¦´ë¦¬ìŠ¤ëŠ” ëŒ€ëµ 1ë…„ê°„ ì§€ì›ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì–¸ì œë“ ì§€ ì¼ë°˜ì ìœ¼ë¡œ ì§€ì›ë˜ëŠ” ë¶€ ë¦´ë¦¬ìŠ¤ê°€ ì•½ ì„¸ ê°œ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![image](/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_4.png)\n\në‚´ ì¶”ì²œ (ê·¸ë¦¬ê³  êµ¬ê¸€ì˜ ì¶”ì²œ)ì€ í•­ìƒ í´ëŸ¬ìŠ¤í„°ë¥¼ ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ë“±ë¡í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë¦´ë¦¬ìŠ¤ ì±„ë„ì„ ì‚¬ìš©í•˜ë©´ êµ¬ê¸€ì´ í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œë¥¼ ê´€ë¦¬í•´ì¤ë‹ˆë‹¤. ì›Œì»¤ ë…¸ë“œëŠ” ë¡¤ë§ ì„œì§€ ì—…ê·¸ë ˆì´ë“œ ì „ëµì„ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œë˜ì–´ ì›Œí¬ë¡œë“œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤. ë”°ë¼ì„œ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ìëŠ” í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œì— ì‹œê°„ì´ë‚˜ ë…¸ë ¥ì„ ë“¤ì¼ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\n\nGKE Standardë¥¼ ì‚¬ìš©í•˜ë©´ ë¦´ë¦¬ìŠ¤ ì±„ë„ì„ ì‚¬ìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë ¤ë©´ í´ëŸ¬ìŠ¤í„°ë¥¼ íŠ¹ì • ë²„ì „ì˜ Kubernetesë¡œ ìœ ì§€í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì œ ê²½í—˜ìƒ, ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ì„ íƒì ìœ¼ë¡œ ê°€ì…í•˜ì§€ ì•ŠëŠ” ê¸°ê´€ì€ ê³§ ìì‹ ë“¤ì˜ ì·¨ì•½í•œ í´ëŸ¬ìŠ¤í„°ê°€ ê°€ë“í•œ ì‹œìŠ¤í…œì„ ìš´ì˜í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¬í•œ ê¸°ê´€ë“¤ì€ í° íŒ¨ì¹˜ ë¬¸ì œë¥¼ ì•ˆê²Œ ë  ê²ƒì…ë‹ˆë‹¤!\n\n![image](/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_5.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nGKE Autopilotì„ ì‚¬ìš©í•˜ë©´ ë¦´ë¦¬ìŠ¤ ì±„ë„ì„ ì„ íƒí•´ ì‚¬ìš©í•˜ì§€ ì•Šì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì •ë§ ì¢‹ì€ ì ì´ì—ìš”!)\n\n(ì°¸ê³ ë¡œ: GKE ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œëŠ” í•­ìƒ Googleì— ì˜í•´ ì—…ê·¸ë ˆì´ë“œë˜ë©°, ì´ í”„ë¡œì„¸ìŠ¤ë¥¼ ê±°ë¶€í•  ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ë¦´ë¦¬ìŠ¤ ì±„ë„ ë“±ë¡ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ í•´ë‹¹ë©ë‹ˆë‹¤.)\n\nì„ íƒí•  ìˆ˜ ìˆëŠ” ì„¸ ê°€ì§€ ë¦´ë¦¬ìŠ¤ ì±„ë„ì´ ìˆìŠµë‹ˆë‹¤:\n\n- ë¹ ë¥¸(Rapid) â€” ì˜¤í”ˆ ì†ŒìŠ¤ ë¦´ë¦¬ìŠ¤ê°€ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ í›„ ëª‡ ì£¼ í›„ì— Kubernetes í´ëŸ¬ìŠ¤í„°ê°€ ì—…ê·¸ë ˆì´ë“œë©ë‹ˆë‹¤. ì´ ì±„ë„ì€ ê°€ì¥ ìµœì‹  ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ë§Œ ê°€ì¥ ì•ˆì •ì„±ì´ ë‚®ìŠµë‹ˆë‹¤. ë˜í•œ, ì´ ë¦´ë¦¬ìŠ¤ ì±„ë„ì˜ í´ëŸ¬ìŠ¤í„°ëŠ” GKE SLAì—ì„œ ì§€ì›ë˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.\n- ë³´í†µ(Regular) â€” Kubernetesê°€ ë¦´ë¦¬ìŠ¤ í›„ 2~3ê°œì›” í›„ì— Rapidì—ì„œ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë¦´ë¦¬ìŠ¤ ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œë©ë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸°ëŠ¥ê³¼ ì•ˆì •ì„± ì‚¬ì´ì˜ ê· í˜•ì„ ì œê³µí•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ GKE Autopilotì€ ë…¸ë“œë¥¼ ì´ ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ë“±ë¡í•©ë‹ˆë‹¤.\n- ì•ˆì •(Stable) â€” Kubernetesê°€ Regularì—ì„œ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë¦´ë¦¬ìŠ¤ ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œë©ë‹ˆë‹¤. ì´ ë¦´ë¦¬ìŠ¤ëŠ” ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì•½ 5~6ê°œì›”ë™ì•ˆ ì‚¬ìš© ê°€ëŠ¥í•œ í›„ í´ëŸ¬ìŠ¤í„° ë…¸ë“œì— ì ìš©ë©ë‹ˆë‹¤. ì´ ì±„ë„ì€ ê°€ì¥ ê²€ì¦ë˜ì—ˆê³  ê°€ì¥ ì•ˆì •ì ì¼ ê²ƒì´ì§€ë§Œ ìµœê·¼ Kubernetes ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nìƒˆë¡œìš´ GKE ë²„ì „ì´ ë¦´ë¦¬ìŠ¤ ì±„ë„ì—ì„œ ê¸°ë³¸ ë²„ì „ì´ ë˜ë©´ í•´ë‹¹ í´ëŸ¬ìŠ¤í„°ëŠ” ì¼ë°˜ì ìœ¼ë¡œ 10ì¼ ì´ë‚´ì— ì—…ê·¸ë ˆì´ë“œë©ë‹ˆë‹¤.\n\në‹¤ìŒì€ ë¦´ë¦¬ìŠ¤ ì±„ë„ ì±„ìš©ì— ëŒ€í•œ ì¼ë°˜ì ì¸ ê¶Œì¥ ì‚¬í•­ì…ë‹ˆë‹¤:\n\n- ìƒì‚° ì›Œí¬ë¡œë“œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ì¤‘ìš”ì„± ë° ìœ„í—˜ ìˆ˜ìš© ëŠ¥ë ¥ì— ë”°ë¼ Stable ë˜ëŠ” Regularì— ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ì¤‘ìš”í•œ ì›Œí¬ë¡œë“œëŠ” Stableì— ë“±ë¡í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.\n- ìµœì¢… ë¹„ìƒì‚° í™˜ê²½(ì¼ë°˜ì ìœ¼ë¡œ ìŠ¤í…Œì´ì§•, Pre-Prod ë˜ëŠ” UAT í™˜ê²½)ì€ ìƒì‚° í™˜ê²½ê³¼ ë™ì¼í•œ ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ë“±ë¡ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ìƒˆë¡œ ì‹œë„í•´ë³´ì§€ ì•Šì€ Kubernetes ë²„ì „ì—ì„œ ì›Œí¬ë¡œë“œê°€ ìƒì‚° í™˜ê²½ì— ë°°ì¹˜ë˜ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n- ìƒìœ„ ë¹„ìƒì‚° í™˜ê²½(ì˜ˆ: Dev ë˜ëŠ” QA)ì€ ì´ì›ƒí•œ ìƒìœ„ ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ë°°í¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\n- ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì‹¤í—˜í•˜ë ¤ëŠ” ê°œë°œ í™˜ê²½ì—ì„œë§Œ ë¹ ë¥¸ ë¦´ë¦¬ìŠ¤ ì±„ë„ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸°ëŠ¥ì€ ì•ˆì •ì ì¸ ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ëª‡ ë‹¬ ë‚´ì— ë‚˜íƒ€ë‚  ê²ƒì„ ê¸°ì–µí•´ì£¼ì„¸ìš”.\n\nì˜ˆì‹œ:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_6.png)\n\në¦´ë¦¬ìŠ¤ ì±„ë„ì˜ í•œ ê°€ì§€ ë¬¸ì œëŠ” í´ëŸ¬ìŠ¤í„°ê°€ ì–¸ì œ ì—…ê·¸ë ˆì´ë“œë ì§€ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ìµœì¢… ë¹„ í”„ë¡œë“œ í™˜ê²½ ë° í”„ë¡œë“œ í™˜ê²½ì„ ë™ì¼í•œ ë¦´ë¦¬ìŠ¤ ì±„ë„(êµ¬ê¸€ì—ì„œ ê¶Œì¥í•˜ëŠ” ìµœìƒì˜ ë°©ë²•)ì— ë“±ë¡í•˜ë©´ ë¹„ í”„ë¡œë“œ í™˜ê²½ì´ í”„ë¡œë“œ í™˜ê²½ë³´ë‹¤ ë¨¼ì € ì—…ê·¸ë ˆì´ë“œë˜ë„ë¡ ë³´í˜¸ë§‰ì„ êµ¬í˜„í•˜ê³  ì‹¶ì„ ê²ƒì…ë‹ˆë‹¤. GKE fleets ë° scopesë¥¼ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në‹¤ìŒì€ ì´ëŸ¬í•œ ë°°í¬ ìˆœì„œì˜ ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_7.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ ì˜ˆì—ì„œ:\n\n- Staging í™˜ê²½ì˜ GKE í´ëŸ¬ìŠ¤í„°ëŠ” Staging í”Œë¦¬íŠ¸ì— ì†í•©ë‹ˆë‹¤.\n- Productionì— ìˆëŠ” í´ëŸ¬ìŠ¤í„°ëŠ” Production í”Œë¦¬íŠ¸ì— ì†í•©ë‹ˆë‹¤.\n- Staging ë° Productionì— ìˆëŠ” ëª¨ë“  í´ëŸ¬ìŠ¤í„°ëŠ” Stable ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n- Production í”Œë¦¬íŠ¸ëŠ” Staging í”Œë¦¬íŠ¸ê°€ 7ì¼ê°„ ì‹¤í–‰ëœ í›„ì—ë§Œ ì—…ê·¸ë ˆì´ë“œë©ë‹ˆë‹¤.\n\n## Workload Identity Federation\n\nì›Œí¬ë¡œë“œ ID í˜ë”ë ˆì´ì…˜ì€ Kubernetes ì„œë¹„ìŠ¤ ê³„ì •ì´ IAM ì„œë¹„ìŠ¤ ê³„ì •ìœ¼ë¡œ ì‘ë™í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. êµ¬ì„±ëœ Kubernetes ì„œë¹„ìŠ¤ ê³„ì •ì„ ì‚¬ìš©í•˜ëŠ” íŒŒë“œëŠ” Google Cloud APIì— ì•¡ì„¸ìŠ¤í•  ë•Œ ìë™ìœ¼ë¡œ IAM ì„œë¹„ìŠ¤ ê³„ì •ìœ¼ë¡œ ì¸ì¦í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ GKE ì• í”Œë¦¬ì¼€ì´ì…˜ ì›Œí¬ë¡œë“œê°€ ì¸ì¦ë˜ê³  í—ˆê°€ë˜ì–´ Google Cloud ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì˜¤í† íŒŒì¼ëŸ¿ í´ëŸ¬ìŠ¤í„°ëŠ” GKEì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì›Œí¬ë¡œë“œ ID ì—°í•©ì„ ì§€ì›í•©ë‹ˆë‹¤.\n\n## ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì „ëµ\n\nì˜¤í† ìŠ¤ì¼€ì¼ë§ì€ í´ëŸ¬ìŠ¤í„°ê°€ ì‹¤í–‰ ì¤‘ì¸ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ìˆ˜ìš”ë¥¼ ì¶©ì¡±í•˜ê¸° ìœ„í•´ ì¡°ì •í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ê°€ë¦¬í‚µë‹ˆë‹¤.\n\nGKEì—ëŠ” ë„¤ ê°€ì§€ ìŠ¤ì¼€ì¼ë§ ì°¨ì›ì´ ìˆìŠµë‹ˆë‹¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ì›Œí¬ë¡œë“œëŠ” ìˆ˜ìš”ì— ë”°ë¼ ê°€ë¡œ ë°©í–¥ìœ¼ë¡œ í™•ì¥ë©ë‹ˆë‹¤. Podë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•¨ìœ¼ë¡œì¨ ê´€ë¦¬ë©ë‹ˆë‹¤. ì´ëŠ” ê°€ë¡œ ë°©í–¥ íŒŸ ì˜¤í† ìŠ¤ì¼€ì¼ëŸ¬(HPA)ì— ì˜í•´ ê´€ë¦¬ë˜ë©°, ìˆ˜ìš”ì— ë”°ë¼ ë¹ ë¥´ê²Œ í™•ì¥ë©ë‹ˆë‹¤. HPAëŠ” CPU ì‚¬ìš©ë¥ ê³¼ ê°™ì€ í‘œì¤€ ë©”íŠ¸ë¦­ ë˜ëŠ” ì´ˆë‹¹ ìš”ì²­ê³¼ ê°™ì€ ì‚¬ìš©ì ì •ì˜ ë©”íŠ¸ë¦­ì— ì‘ë‹µí•©ë‹ˆë‹¤.\n- ì¸í”„ë¼ëŠ” í´ëŸ¬ìŠ¤í„° ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•¨ìœ¼ë¡œì¨ ê°€ë¡œ ë°©í–¥ìœ¼ë¡œ í™•ì¥ë©ë‹ˆë‹¤. ì´ëŠ” ì˜ˆì•½ëœ íŒŸì„ ìˆ˜ìš©í•˜ê¸° ìœ„í•´ í´ëŸ¬ìŠ¤í„° ìë™ìŠ¤ì¼€ì¼ëŸ¬(CA)ì— ì˜í•´ ì˜ˆì¸¡ì ìœ¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìƒˆë¡œ ìƒì„±ëœ íŒŸì„ ì˜ˆì•½í•  ë…¸ë“œê°€ ì—†ëŠ” ê²½ìš°, í´ëŸ¬ìŠ¤í„° ìë™ìŠ¤ì¼€ì¼ëŸ¬ê°€ ìƒˆ ë…¸ë“œë¥¼ ë§Œë“­ë‹ˆë‹¤.\n- ì›Œí¬ë¡œë“œëŠ” íŒŸ í¬ê¸°ë¥¼ ì¡°ì ˆí•¨ìœ¼ë¡œì¨ ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ í™•ì¥ë©ë‹ˆë‹¤. ì´ëŠ” ì„¸ë¡œ ë°©í–¥ íŒŸ ì˜¤í† ìŠ¤ì¼€ì¼ëŸ¬(VPA)ì— ì˜í•´ ê´€ë¦¬ë©ë‹ˆë‹¤. VPAëŠ” ì‹œê°„ì´ ê²½ê³¼í•¨ì— ë”°ë¼ íŒŸì˜ CPU ë° ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ì´ì— ë”°ë¼ íŒŸ í¬ê¸°ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤. ì´ë¡œì¨ ë³´ë‹¤ ìµœì í™”ë˜ê³  ë¹„ìš© íš¨ìœ¨ì ì¸ íŒŸ í¬ê¸°ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ì¸í”„ë¼ëŠ” ê°€ì¥ íš¨ìœ¨ì ì¸ íŒŸì˜ ë°”ì´ë„ˆë¦¬ íŒ¨í‚¹ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ìµœì í™”ëœ ë…¸ë“œ(VM) ì‚¬ì´ì¦ˆë¡œ ë…¸ë“œ í’€ì„ ë°°í¬í•˜ê±°ë‚˜ ì‚­ì œí•¨ìœ¼ë¡œì¨ ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ í™•ì¥ë©ë‹ˆë‹¤. ì´ë¥¼ \"ë…¸ë“œ ìë™ í”„ë¡œë¹„ì €ë‹\"ì´ë¼ê³  í•˜ë©°, ë‹¤ë¥¸ ì¢…ë¥˜ì˜ í™•ì¥ì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦½ë‹ˆë‹¤.\n\nì•„ë˜ëŠ” ëª‡ ê°€ì§€ íŒì…ë‹ˆë‹¤:\n\n- GKE Autopilotì„ ì‚¬ìš©í•  ë•ŒëŠ” ì¸í”„ë¼ ìë™ìŠ¤ì¼€ì¼ë§ (CA ë° NAP)ì´ Googleì— ì˜í•´ ì„¤ì •ë©ë‹ˆë‹¤. ë‹¹ì‹ ì€ íŒŸ ì˜¤í† ìŠ¤ì¼€ì¼ë§ êµ¬ì„±ë§Œ ê³ ë ¤í•˜ë©´ ë©ë‹ˆë‹¤.\n- HPAì™€ VPAë¥¼ ë™ì‹œì— ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ê°™ì€ ìì› ë©”íŠ¸ë¦­ìœ¼ë¡œ HPAì™€ VPAë¥¼ í•¨ê»˜ ì„¤ì •í•˜ëŠ” ê²ƒì„ í”¼í•˜ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´, CPU ì‚¬ìš©ë¥ ì— ëŒ€í•œ HPAì™€ VPAë¥¼ ë™ì‹œì— ì„¤ì •í•˜ëŠ” ê²ƒì„ í”¼í•˜ì„¸ìš”.\n- ê°€ë¡œì™€ ì„¸ë¡œ ë°©í–¥ íŒŸ ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ê´€ë¦¬í•˜ëŠ” ë‹¤ì°¨ì› íŒŸ ì˜¤í† ìŠ¤ì¼€ì¼ëŸ¬(MPA)ë¥¼ ì‚¬ìš©í•˜ë©´ ì›Œí¬ë¡œë“œ í™•ì¥ì„ ê°„ë‹¨íˆ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nê²°ë¡ ì ìœ¼ë¡œ:\n\n- GKE í‘œì¤€ ë²„ì „ì„ ì‚¬ìš©í•˜ë©´ ì¸í”„ë¼ ìŠ¤ì¼€ì¼ë§ê³¼ ì›Œí¬ë¡œë“œ(íŒŒë“œ) ìŠ¤ì¼€ì¼ë§ì„ ëª¨ë‘ ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.\n- GKE Autopilotì„ ì‚¬ìš©í•˜ë©´ ì›Œí¬ë¡œë“œ ìŠ¤ì¼€ì¼ë§ì—ë§Œ ì§‘ì¤‘í•˜ë©´ ë˜ë©°, MPAë¥¼ ì‚¬ìš©í•˜ì—¬ ì›Œí¬ë¡œë“œ ìë™ ìŠ¤ì¼€ì¼ë§ì„ ê°„í¸í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ì¸í”„ë¼ ë° ì›Œí¬ë¡œë“œ ë°°í¬\n\nGoogleì€ í´ëŸ¬ìŠ¤í„° ìì²´ë¥¼ ë°°í¬í•  ë•Œ í´ë¼ìš°ë“œ ì¸í”„ë¼ì˜ ê²½ìš°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤(Terraformê³¼ ê°™ì€). ë”°ë¼ì„œ í´ëŸ¬ìŠ¤í„° ë° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ë°°í¬í•  ë•Œ IaCë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nê·€í•˜ì˜ ì‘ì—… ë¡œë“œë¥¼ ë°°í¬í•˜ë ¤ë©´ â€” ë°°í¬, ì„œë¹„ìŠ¤, ì‘ì—…, StatefufSets, ì¸ê·¸ë ˆìŠ¤, ì •ì±… ë“± â€” ì„ ì–¸ì  yaml íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë„¤ì´í‹°ë¸Œ Kubernetes API í˜¸ì¶œì„ í•´ì•¼ í•©ë‹ˆë‹¤. Helmì€ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ë„ì›€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## GKE ë””ìì¸ ê²°ì • ìš”ì•½\n\nìš”ì•½í•˜ìë©´: ê³ ë ¤í•´ì•¼ í•  ì£¼ìš” Kubernetes ë””ìì¸ ê²°ì • ì‚¬í•­ê³¼ ê°ê°ì— ëŒ€í•œ ë‚˜ì˜ ê¶Œì¥ ì‚¬í•­ì…ë‹ˆë‹¤.\n\n- GKE, ë˜ëŠ” ìŠ¤ìŠ¤ë¡œ ê´€ë¦¬í•˜ëŠ” ë°©ì‹? ê¶Œì¥ ì‚¬í•­: GKE.\n- GKE Autopilot ëŒ€ GKE Standard. ê¶Œì¥ ì‚¬í•­: Autopilot.\n- ë©€í‹° í…Œë„ŒíŠ¸ í´ëŸ¬ìŠ¤í„°? ì–´ë–¤ ìˆ˜ì¤€ì˜ í´ëŸ¬ìŠ¤í„°? ê¶Œì¥ ì‚¬í•­: ë©€í‹° í…Œë„ŒíŠ¸.\n- ì‹±ê¸€ í…Œë„ŒíŠ¸ í´ëŸ¬ìŠ¤í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥. ê¶Œì¥ ì‚¬í•­: ì˜ˆì™¸ì ìœ¼ë¡œë§Œ.\n- VPC ë„¤ì´í‹°ë¸Œ ë˜ëŠ” ë¼ìš°íŠ¸ ê¸°ë°˜ í´ëŸ¬ìŠ¤í„°? ê¶Œì¥ ì‚¬í•­: VPC ë„¤ì´í‹°ë¸Œ.\n- í”„ë¼ì´ë¹— í´ëŸ¬ìŠ¤í„°? ê¶Œì¥ ì‚¬í•­: í”„ë¼ì´ë¹— í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n- í´ëŸ¬ìŠ¤í„° ê°„ IP ì£¼ì†Œ ë²”ìœ„ ê³µìœ ? ì¶”ì²œ ì‚¬í•­: ê³µìœ  VPC ë‚´ì— ëª‡ ê°œ ë˜ëŠ” ë§ì€ í´ëŸ¬ìŠ¤í„°ê°€ ìˆë‹¤ë©´ ì´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n- ë¦´ë¦¬ìŠ¤ ì±„ë„? í•­ìƒ ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ë“±ë¡í•˜ì„¸ìš”. ìŠ¤í…Œì´ì§• ë° í”„ë¡œë“œ í´ëŸ¬ìŠ¤í„°ë¥¼ ë™ì¼í•œ ë¦´ë¦¬ìŠ¤ ì±„ë„ì— ìœ ì§€í•˜ì„¸ìš”. í´ëŸ¬ìŠ¤í„°ê°€ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ì—…ê·¸ë ˆì´ë“œë˜ë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ fleets ë° rollout sequencesë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n- Workload identity? ë„¤ â€” ì‚¬ìš©í•˜ì„¸ìš”.\n- ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì „ëµ? ì›Œí¬ë¡œë“œ ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ì§€ì›í•˜ê¸° ìœ„í•´ í´ëŸ¬ìŠ¤í„° ì˜¤í† ìŠ¤ì¼€ì¼ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. GKE Autopilotì„ ì‚¬ìš©í•  ë•Œ í´ëŸ¬ìŠ¤í„° ì˜¤í† ìŠ¤ì¼€ì¼ë§ì€ ìë™ìœ¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤. ì›Œí¬ë¡œë“œ ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ê°„ì†Œí™”í•˜ê¸° ìœ„í•´ MPAë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n- ì¸í”„ë¼ ë° ì›Œí¬ë¡œë“œ ë°°í¬? í´ëŸ¬ìŠ¤í„° ë°°í¬ ë° ê´€ë¦¬ì—ëŠ” IaC(ì˜ˆ: Terraform)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. ì• í”Œë¦¬ì¼€ì´ì…˜ ì›Œí¬ë¡œë“œë¥¼ ë°°í¬í•˜ê¸° ìœ„í•´ ì„ ì–¸ì  Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ë§ˆë¬´ë¦¬\n\nGKEë¥¼ ëœë”© ì¡´ì—ì„œ ì„±ê³µì ìœ¼ë¡œ ë””ìì¸í•˜ëŠ” ë° ê³ ë ¤í•´ì•¼ í•  ì£¼ìš” ì‚¬í•­ë“¤ì€ ì—¬ê¸°ê¹Œì§€ì…ë‹ˆë‹¤. ë‹¤ìŒ íŒŒíŠ¸ì—ì„œëŠ” LZ ë””ìì¸ ê³ ë ¤ ì‚¬í•­ì„ ì™„ë£Œí•˜ê³ , ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ì „ëµ, ìš”ê¸ˆ ì²­êµ¬, ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ ì½”ë“œ (IaC)ì™€ ê°™ì€ ì£¼ì œë¥¼ ë‹¤ë£° ê²ƒì…ë‹ˆë‹¤.\n\n# ë– ë‚˜ì‹œê¸° ì „ì—\n\n- ê´€ì‹¬ì´ ìˆì„ ê²ƒìœ¼ë¡œ ìƒê°ë˜ëŠ” ë¶„ê³¼ ê³µìœ í•´ì£¼ì„¸ìš”. ê·¸ë“¤ì—ê²Œ ë„ì›€ì´ ë  ìˆ˜ë„ ìˆê³ , ì €ì—ê²Œ ì •ë§ë¡œ ë„ì›€ì´ ë©ë‹ˆë‹¤!\n- ë°•ìˆ˜ë¥¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤! ì—¬ëŸ¬ë¶„ì€ í•œ ë²ˆ ì´ìƒ ë°•ìˆ˜ë¥¼ ì¹  ìˆ˜ ìˆë‹¤ëŠ” ê±¸ ì•„ì‹œë‚˜ìš”?\n- ììœ ë¡­ê²Œ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸ’¬.\n- ë‚´ ì»¨í…ì¸ ë¥¼ ë†“ì¹˜ì§€ ì•Šìœ¼ë ¤ë©´ íŒ”ë¡œìš°í•˜ê³  êµ¬ë…í•´ì£¼ì„¸ìš”. ë‚´ í”„ë¡œí•„ í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ ì´ ì•„ì´ì½˜ë“¤ì„ í´ë¦­í•´ì£¼ì„¸ìš”:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![Image](/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_9.png)\n\n# ë§í¬\n\n- Google Cloudì˜ ëœë”© ì¡´: í•„ìš”ì„± ë° ìƒì„± ë°©ë²•\n- Google Cloudì˜ ëœë”© ì¡´ ë””ìì¸\n- GKE Autopilot\n- GKE Autopilot íŠ¹ê¶Œ ì—…ë¬´ ìš© ì—…ë¬´\n- GKE í´ëŸ¬ìŠ¤í„° êµ¬ì„± ì˜µì…˜\n- ê¸°ì—…ìš© GKE ë©€í‹° í…Œë„Œì‹œì— ëŒ€í•œ ëª¨ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤\n- VPC ë„¤ì´í‹°ë¸Œ GKE í´ëŸ¬ìŠ¤í„°\n- GKEì˜ í”„ë¼ì´ë¹— í´ëŸ¬ìŠ¤í„°\n- ì™¸ë¶€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ ìœ„í•œ GKE Ingress\n- GKEë¡œ ì´ì£¼í•  ë•Œ IP ì£¼ì†Œ ê³„íš\n- GKE ë„¤íŠ¸ì›Œí¬ í”Œë˜ë‹ 2023 (William Denniss)\n- GKE ë¦´ë¦¬ìŠ¤ ì±„ë„\n- ë¡¤ì•„ì›ƒ ìˆœì„œë¡œ GKE í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œ\n- GKE SLA\n- GKE ìë™ í™•ì¥ (Kaslin Fields)\n- GKEì—ì„œ ë¹„ìš© ìµœì í™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ëª¨ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤\n- GKEë¥¼ ìœ„í•œ ì›Œí¬ë¡œë“œ ID ì—°í•©\n- Google Cloud ì•„í‚¤í…ì²˜ í”„ë ˆì„ì›Œí¬\n- ê¸°ì—…ìš© ê¸°ì´ˆ ì„¤ê³„ ì²­ì‚¬ì§„\n\n# ì‹œë¦¬ì¦ˆ ë‚´ë¹„ê²Œì´ì…˜\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ì‹œë¦¬ì¦ˆ ê°œìš” ë° êµ¬ì¡°\n- ì´ì „: ëœë”© ì¡´ ì„¤ê³„í•˜ê¸° â€” ë””ìì¸ ê³ ë ¤ì‚¬í•­ íŒŒíŠ¸ 1\n- ë‹¤ìŒ: ëœë”© ì¡´ ì„¤ê³„í•˜ê¸° â€” ë””ìì¸ ê³ ë ¤ì‚¬í•­ íŒŒíŠ¸ 3 â€” ëª¨ë‹ˆí„°ë§, ë¡œê¹…, ë¹Œë§ ë° ë¼ë²¨ë§\n","ogImage":{"url":"/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_0.png"},"coverImage":"/assets/img/2024-05-27-DesignyourLandingZoneDesignConsiderationsPart2KubernetesandGKEGoogleCloudAdoptionSeries_0.png","tag":["Tech"],"readingTime":22},{"title":"EKSì— GitOps Argo CD ì„¤ì •í•˜ê¸°","description":"","date":"2024-05-27 17:23","slug":"2024-05-27-GitOpsArgoCDSetupOnEKS","content":"\nArgo CDëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ìœ„í•œ GitOps ì§€ì†ì  ì „ë‹¬ ë„êµ¬ë¡œ, ì‘ìš© í”„ë¡œê·¸ë¨ ìƒíƒœë¥¼ Git ì €ì¥ì†Œì™€ ìë™ ë™ê¸°í™”í•˜ê³  ë¡¤ë°±, í—¬ìŠ¤ ì²´í¬, RBAC í†µí•©, ë‹¤ì¤‘ í™˜ê²½ ì§€ì› ë° CI/CD ì‹œìŠ¤í…œê³¼ì˜ ì›í™œí•œ í†µí•©ì„ ê°€ëŠ¥ì¼€ í•©ë‹ˆë‹¤. ìš°ë¦¬ì˜ êµ¬í˜„ì— ì‚¬ìš©í•  Argo CDì— ëŒ€í•œ ëª‡ ê°€ì§€ í¬ì¸íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n- Git Ops ì—ì´ì „íŠ¸ â€” Argo CDëŠ” Git ì €ì¥ì†Œì—ì„œ ì—…ë°ì´íŠ¸ëœ ì½”ë“œë¥¼ ê°€ì ¸ì™€ ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ë¡œ ì§ì ‘ ë°°í¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì¸í”„ë¼ êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì—…ë°ì´íŠ¸ë¥¼ í•œ ì‹œìŠ¤í…œì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ìë™ ë°°í¬: Argo CDëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì§€ì •ëœ ëª©í‘œ í™˜ê²½ì— ìë™ìœ¼ë¡œ ë°°í¬í•©ë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ ìƒíƒœë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜í•˜ê³ , Argo CDê°€ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n- ë‹¤ì¤‘ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬: Argo CDë¥¼ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ê´€ë¦¬í•˜ê³  ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- í…œí”Œë¦¿ ì§€ì›: Argo CDëŠ” helmê³¼ Kustomizeë¥¼ ì‚¬ìš©í•˜ì—¬ í…œí”Œë¦¿ ë° êµ¬ì„± ê´€ë¦¬ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\n- ë¡¤ë°±: Git ì €ì¥ì†Œì— ì»¤ë°‹ëœ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ì„ ì–´ë””ì„œë“ ì§€ ë¡¤ë°±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nArgo CDì—ëŠ” ë§ì€ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ì„¤ëª…í•œ ê¸°ëŠ¥ ì¤‘ ì¼ë¶€ë¥¼ ìš°ë¦¬ì˜ CI/CD íŒŒì´í”„ë¼ì¸ì— ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. Argo CDì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ Argo CD â€” Declarative GitOps CD for Kubernetes (argo-cd.readthedocs.io)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# Argo CD ì„¤ì¹˜í•˜ê¸°:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì•„ë¥´ê³  CDëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ EKSì— ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n## ì¿ ë²„ë„¤í‹°ìŠ¤ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•:\n\n1. ì•„ë¥´ê³  CD Git ì €ì¥ì†Œë¥¼ ë³µì œí•˜ì„¸ìš”:\n\n```js\nC: />git clone https:/ / github.com / argoproj / argo - cd.git;\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nê·€í•˜ì˜ ê¸°ê³„ì— gitì„ ì„¤ì¹˜í•´ì•¼ í•˜ë©°, git CLIê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n\nb. ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ê·€í•˜ì˜ Kubernetes í´ëŸ¬ìŠ¤í„°ì— ì ìš©í•˜ì„¸ìš”:\n\n```js\nC:/argo-cd> kubectl apply -n argocd -f manifests/install.yaml\n```\n\n## Helm ì‚¬ìš© (ê¶Œì¥ë˜ëŠ” ìµœìƒì˜ ë°©ë²•)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\na. ì•„ë¥´ê³  CD í—¬ë¦„ ë¦¬í¬ì§€í† ë¦¬ ì¶”ê°€:\n\n```js\n  helm repo add argo https://argoproj.github.io/argo-helm\n```\n\nb. Helm ì—…ë°ì´íŠ¸\n\n```js\nhelm repo update\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nc. ì„¤ì¹˜\n\nhelm install argocd argo/argo-cd -n argocd\n\n# Argo CD CLI:\n\nArgo CDëŠ” ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„° ì¶”ê°€, ì‚¬ìš©ì ì¶”ê°€, Argo CD CLI ëª…ë ¹ ì‹¤í–‰ ë“± ì—¬ëŸ¬ ê¸°ëŠ¥ ìœ„í•œ ì¤‘ìš”í•œ ë„êµ¬ì…ë‹ˆë‹¤. Argo CD Command Line Interface (CLI)ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ ìš´ì˜ ì²´ì œì— ë”°ë¼ ì˜µì…˜ì´ ì¡°ê¸ˆ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ CLIë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nLinux/macOS\n\n```bash\nbrew install argocd\n```\n\nWindows:\n\nê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ PowerShellì„ ì—´ì–´ì£¼ì„¸ìš”. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ chocoë¥¼ ì„¤ì¹˜í•´ì£¼ì„¸ìš”. ìì„¸í•œ ë‹¨ê³„ëŠ” https://medium.com/@vikash06.india/part-1-multi-environment-instance-deployment-helm-template-argo-cd-eks-initial-setup-5ce4519184fcì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nC:/> choco install argocd-cli\n```\n\n```js\nC:/> argocd version\nargocd: v2.9.3+6eba5be\n  BuildDate: 2023-12-01T23:24:09Z\n  GitCommit: 6eba5be864b7e031871ed7698f5233336dfe75c7\n  GitTreeState: clean\n  GoVersion: go1.21.4\n  Compiler: gc\n  Platform: windows/amd64\n```\n\n# Argo CD UIì— ì•¡ì„¸ìŠ¤í•˜ê¸°:\n\nArgo CD UIì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- í¬íŠ¸ í¬ì›Œë”©\n- ì¸ê·¸ë ˆìŠ¤\n\n## í¬íŠ¸ í¬ì›Œë”©:\n\ní¬íŠ¸ í¬ì›Œë”©ì€ ì£¼ë¡œ ë¡œì»¬ ë¨¸ì‹ ì—ì„œ Argo CD UIë¥¼ ì‚¬ìš©í•˜ê³ ì í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤\n\n```js\nkubectl port-forward svc/argocd-server -n argocd 8080:443\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nê·¸ëŸ¼, ë¸Œë¼ìš°ì €ì—ì„œ https://localhost:8080ì„ ì—´ì–´ Argo CD UIì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ìš”.\n\n## ALB Ingress:\n\nEKSì— ì„¤ì¹˜í•˜ê³  Argo CDë¥¼ ë¡œë“œ ë°¸ëŸ°ì„œë¡œ ë…¸ì¶œí•˜ë ¤ë©´ ALB Ingressê°€ ìµœì ì˜ ì˜µì…˜ì…ë‹ˆë‹¤(ë‹¤ë¥¸ ë¡œë“œ ë°¸ëŸ°ì„œë„ ìˆìŠµë‹ˆë‹¤)\n\n```js\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: argocd-ingress\n  namespace: argocd\n  annotations:\n    alb.ingress.kubernetes.io/actions.ssl-redirect: '{\"Type\": \"redirect\", \"RedirectConfig\":{ \"Protocol\": \"HTTPS\", \"Port\": \"443\", \"StatusCode\": \"HTTP_301\"}'\n    alb.ingress.kubernetes.io/backend-protocol: HTTPS\n    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-east-1:<account-id>:certificate/<certificate-id>\n    alb.ingress.kubernetes.io/group.name:  prodalb\n    alb.ingress.kubernetes.io/listen-ports: '[{\"HTTP\": 80}, {\"HTTPS\": 443}]'\n    alb.ingress.kubernetes.io/load-balancer-name: shared-load-balacer-name\n    alb.ingress.kubernetes.io/scheme: internet-facing\n    alb.ingress.kubernetes.io/tags: Environment=dev,Team=Cool Product, name=ALB\n      Dev , UsedIN=EKS\n    alb.ingress.kubernetes.io/target-type: ip\n\n  finalizers:\n   - ingress.k8s.aws/resources\n\nspec:\n    ingressClassName: alb\n    rules:\n    - host: argocd.example.net\n      http:\n        paths:\n        - path: /\n          backend:\n            service:\n              name: argocd-server\n              port:\n                number: 443\n          pathType: Prefix\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nìœ„ ì˜ˆì œì—ì„œ `account-id`ë¥¼ ê·€í•˜ì˜ AWS ê³„ì • IDë¡œ, ì¸ì¦ì„œ IDë¥¼ AWS Certificate Managerì—ì„œ ê°€ì ¸ì˜¨ ì¸ì¦ì„œ IDë¡œ ë°”ê¾¸ì„¸ìš”. ë³¸ì§ˆì ìœ¼ë¡œ ê·¸ê²ƒì€ ì¸ì¦ì„œ ARNì…ë‹ˆë‹¤. ì•„ì§ ì¸ì¦ì„œë¥¼ ë³´ìœ í•˜ê³  ìˆì§€ ì•Šë‹¤ë©´ AWS Certificate Managerì—ì„œ ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ì„¸ìš”. ë§¤ìš° ê°„ë‹¨í•œ ê³¼ì •ì´ë©° ë°œê¸‰ ì™„ë£Œê¹Œì§€ ì•½ 5-10ë¶„ì´ ì†Œìš”ë©ë‹ˆë‹¤. ì´ ë§í¬ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”: [ë§í¬](https://docs.aws.amazon.com/acm/latest/userguide/gs-acm-request-public.html)\n\në˜í•œ, `alb.ingress.kubernetes.io/group.name`ì€ ì—¬ëŸ¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ë™ì¼í•œ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n```js\nC:> kubectl apply -f argocd-ingress.yaml\n```\n\nìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ ALB Ingress ë¡œë“œ ë°¸ëŸ°ì„œê°€ ìƒì„±ë©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nargocd.example.ioëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì† ê°€ëŠ¥í•©ë‹ˆë‹¤. (ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì„œë¸Œ ë„ë©”ì¸ì˜ Route 53 A ë ˆì½”ë“œë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.)\n\nargocd.example.io ë˜ëŠ” localhost:8080(í¬íŠ¸ í¬ì›Œë“œ)ë¡œ ì ‘ì†í•˜ë©´ ì•„ë˜ í˜ì´ì§€ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:\n\n![Argo CD ì„¤ì¹˜ í˜ì´ì§€](/assets/img/2024-05-27-GitOpsArgoCDSetupOnEKS_0.png)\n\nArgo CDì— ì²˜ìŒìœ¼ë¡œ ë¡œê·¸ì¸í•˜ê¸°.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nArgo CDì™€ ì¸ê·¸ë ˆìŠ¤ ì„¤ì •ì„ ì„¤ì¹˜í•œ í›„ì—ëŠ” Argo CDì˜ ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\nkubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath=\"{.data.password}\" | base64 -d\n```\n\nìœ„ ëª…ë ¹ì€ Argo CDì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ k8sì— ì €ì¥ëœ ëª¨ë“  ë¹„ë°€ë²ˆí˜¸ëŠ” Secretìœ¼ë¡œ ì•”í˜¸í™”ë˜ì–´ base64ë¡œ ì €ì¥ë©ë‹ˆë‹¤. ìœˆë„ìš° ì‚¬ìš©ìì˜ ê²½ìš° ë•Œë¡œëŠ” ìœ„ ëª…ë ¹ì´ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë‹ˆ PowerShellì„ ì‚¬ìš©í•˜ê±°ë‚˜ 'kubectl -n argocd get secret argocd-initial-admin-secret -o' ëª…ë ¹ì–´ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê°€ì ¸ì˜¨ í›„ì— Base64ë¡œ ë³µí˜¸í™”í•´ì£¼ì„¸ìš”.\n\nargo cd.example.io ë˜ëŠ” localhost:8080(í¬íŠ¸ í¬ì›Œë“œ)ë¡œ ì ‘ì†í•  ë•Œ, ì‚¬ìš©ìë¥¼ adminìœ¼ë¡œ ì„¤ì •í•˜ê³  ìœ„ ë‹¨ê³„ì—ì„œ ê°€ì ¸ì˜¨ 'password'ë¡œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në¡œê·¸ì¸ í›„ì—ëŠ” ì‚¬ìš©ì ì •ë³´ í™”ë©´ì—ì„œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![User Info Screen](/assets/img/2024-05-27-GitOpsArgoCDSetupOnEKS_1.png)\n\n# ì‚¬ìš©ì ë° RBAC Argo CD ìƒì„±\n\nArgo CD ì„¤ì¹˜ ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ê´€ë¦¬ì ì‚¬ìš©ìê°€ ìƒì„±ë©ë‹ˆë‹¤. ë•Œë¡œëŠ” ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³  ì—­í• ì„ ê´€ë¦¬í•´ì•¼ í•  ë•Œë„ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nArgo CDë¥¼ í†µí•´ ì„¤ì¹˜ëœ ì¸ì¦ ë° ì—­í•  ê´€ë¦¬ìš© Configmapsì´ ìˆìŠµë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì—ì„œ ì—­í•  ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì•„ë˜ ConfigMapì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ K8sì˜ ëª¨ë“  ConfigMapsì´ í‘œì‹œë©ë‹ˆë‹¤.\n\n```js\nkubectl get configmaps -n argoccd\n```\n\nê²°ê³¼:\n\n<img src=\"/assets/img/2024-05-27-GitOpsArgoCDSetupOnEKS_2.png\" />\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‹¤ìŒìœ¼ë¡œ ìš°ë¦¬ëŠ” ì‚¬ìš©ìë¥¼ ë§Œë“¤ê¸° ìœ„í•´ argocd-cmì„ ì‚¬ìš©í•  ê²ƒì´ê³  ì—­í•  ê´€ë¦¬ë¥¼ ìœ„í•´ argocd-rbac-cmì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\n## ì‚¬ìš©ì ìƒì„±:\n\nì‚¬ìš©ì ê´€ì ì—ì„œ Argo CDì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤:\n\n- OIDC ê³µê¸‰ì â€” ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ OIDC ê³µê¸‰ì(ì˜ˆ: Okta, OneLogin, Auth0, Microsoft, Keycloak, Google (G Suite))ê°€ ìˆìœ¼ë©´ ì´ ì˜µì…˜ì„ ì‚¬ìš©í•˜ì„¸ìš”. ì—¬ê¸°ì„œ ì‚¬ìš©ì, ê·¸ë£¹ ë° ë©¤ë²„ì‹­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\n- ë²ˆë“¤ëœ Dex OIDC ê³µê¸‰ì â€” í˜„ì¬ ê³µê¸‰ìê°€ OIDCë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš°(ì˜ˆ: SAML, LDAP) ë˜ëŠ” Dexì˜ ì»¤ë„¥í„° ê¸°ëŠ¥(ì˜ˆ: GitHub ì¡°ì§ ë° íŒ€ì„ OIDC ê·¸ë£¹ í´ë ˆì„ì— ë§¤í•‘í•˜ëŠ” ê¸°ëŠ¥)ì„ í™œìš©í•˜ë ¤ëŠ” ê²½ìš° ì´ ì˜µì…˜ì„ ì‚¬ìš©í•˜ì„¸ìš”.\n- ì†Œê·œëª¨ íŒ€ì„ ìœ„í•œ ì‚¬ìš©ì ìƒì„±:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```plaintext\nC:\\Users\\vikas>kubectl edit configmap/argocd-cm -n argocd\n```\n\nì•„ë˜ì™€ ê°™ì´ ì¶œë ¥ì´ë˜ë©°, ì‚¬ìš©ìë¥¼ \"accounts\" ì„¹ì…˜ì— ì¶”ê°€í•˜ê³  í›„í–‰ ì•±ì•¤ë”ë¡œ ì‚¬ìš©ìë¥¼ ì¶”ê°€í•˜ì„¸ìš”:\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-cm\n  namespace: argocd\n  labels:\n    app.kubernetes.io/name: argocd-cm\n    app.kubernetes.io/part-of: argocd\ndata:\n  # add an additional local user with apiKey and login capabilities\n  #   apiKey - allows generating API keys\n  #   login - allows to login using UI\n  accounts.demouser: apiKey, login\n  # disables user. User is enabled by default\n  accounts.demouser.enabled: \"false\"\n```\n\n\"accounts.demouser.enabled\"ì€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™œì„±í™”í•˜ê±°ë‚˜ ë¹„í™œì„±í™”í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nìƒˆë¡œ ì¶”ê°€ëœ ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ Argo CD CLIê°€ í•„ìš”í•©ë‹ˆë‹¤. ì´ë¯¸ ë¡œì»¬ì— Argo CD CLIë¥¼ ì„¤ì¹˜í•´ ë‘ì—ˆìœ¼ë©° í•´ë‹¹ ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ EKS Argo CDì— ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. Windows ê¸°ê¸°ì˜ ê²½ìš° Environment ë³€ìˆ˜ ARGOCD_SERVERë¥¼ ì„¤ì •í•´ì•¼ í•˜ë©° URLì€ http(ingress ë˜ëŠ” port forward)ì„ ì œì™¸í•œ ê°’ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ë°©ë²•ì€ login ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ Argo CD CLIì— ë¡œê·¸ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n```js\nargocd login <ARGOCD_SERVER> --username <USERNAME> --password <PASSWORD>\n```\n\nìƒˆë¡œ ìƒì„±ëœ ì‚¬ìš©ìë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n\n```js\nargocd account list\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì‚¬ìš©ì ëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤. ì´ì œ ì‚¬ìš©ì ì•”í˜¸ë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤:\n\n```js\n# ë§Œì¼ ë‹¹ì‹ ì´ ì–´ë“œë¯¼ ì‚¬ìš©ìë¡œì„œ ì‚¬ìš©ìë¥¼ ê´€ë¦¬ ì¤‘ì´ë¼ë©´, <current-user-password>ì—ëŠ” í˜„ì¬ ì–´ë“œë¯¼ ì•”í˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\nargocd account update-password --account <name> --current-password <current-user-password> --new-password <new-user-password>\n```\n\nìœ„ì—ì„œ ì‚¬ìš©ì ì´ë¦„ì€ êµ¬ì„± ë§µì— ì •ì˜ë˜ì–´ ìˆëŠ” demouserì´ê³ , current-passwordëŠ” ì–´ë“œë¯¼ ì‚¬ìš©ìì˜ ì•”í˜¸ì…ë‹ˆë‹¤.\n\nhttps://argo-cd.readthedocs.io/en/stable/operator-manual/user-management/#:~:text=Once%20installed%20Argo%20CD%20has,users%20or%20configure%20SSO%20integration.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# RBAC:\n\nìœ„ì—ì„œ ì‚¬ìš©ìë¥¼ ë§Œë“  í›„ì—ëŠ” ê¶Œí•œ ì—­í• ì„ í• ë‹¹í•´ì•¼ í•©ë‹ˆë‹¤. RBACëŠ” Argo CDì˜ ì¼ë¶€ë¡œ ì´ë¯¸ ì„¤ì¹˜ëœ ConfigMapì…ë‹ˆë‹¤. ì—­í•  ë° ì¸ì¦ì„ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì—ì„œ ì—­í• ê³¼ ê¶Œí•œì„ ê´€ë¦¬í•˜ëŠ” ConfigMapì„ ì•„ë˜ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ë³€ê²½í•˜ê³  ê¶Œí•œ ë° ì•¡ì„¸ìŠ¤ì™€ ê´€ë ¨ëœ ë¬¸ì œê°€ ë°œìƒí•  ë•ŒëŠ” í•­ìƒ ì•„ë˜ ConfigMapì„ ì°¸ê³ í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ëª¨ë“  RBAC ì„¸ë¶€ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤:\n\n```js\nC:\\Users\\vikas>kubectl describe configmap/argocd-rbac-cm -n argocd\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-rbac-cm\n  namespace: argocd\ndata:\n  policy.default: role:readonly\n  policy.csv: |\n    p, role:org-admin, applications, *, */*, allow\n    p, role:org-admin, clusters, get, *, allow\n```\n\nì•„ë˜ ëª…ë ¹ì–´ë¡œ êµ¬ì„± ë§µì„ ìˆ˜ì •í•  ìˆ˜ ìˆì–´ìš”\n\n```bash\nC:\\Users\\vikas>kubectl edit configmap/argocd-rbac-cm -n argocd\n```\n\nì´ ë§í¬ì—ì„œ ê° ì •ì±… íŒŒì¼ì˜ ê° ì†ì„±ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš” RBAC Configuration â€” Argo CD â€” Declarative GitOps CD for Kubernetes (argo-cd.readthedocs.io)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ê²°ë¡ :\n","ogImage":{"url":"/assets/img/2024-05-27-GitOpsArgoCDSetupOnEKS_0.png"},"coverImage":"/assets/img/2024-05-27-GitOpsArgoCDSetupOnEKS_0.png","tag":["Tech"],"readingTime":14},{"title":"ìš°ë¦¬ê°€ ë„ì»¤ ë¹Œë“œ ì‹œê°„ì„ 40 ì¤„ì¸ ë°©ë²•","description":"","date":"2024-05-27 17:22","slug":"2024-05-27-Howwereducedourdockerbuildtimesby40","content":"\në§ì€ ê¸°ì—…ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ì €í¬ íšŒì‚¬ë„ ì œí’ˆì— ì‚¬ìš©ë˜ëŠ” ëª¨ë“  êµ¬ì„± ìš”ì†Œì— ëŒ€í•œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤. ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ëª‡ ê°€ì§€ ì´ë¯¸ì§€ê°€ ì ì  ì»¤ì§€ê³ , ë˜í•œ CI ë¹Œë“œ ì‹œê°„ì´ ì ì  ì˜¤ë˜ ê±¸ë¦¬ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì œ ëª©í‘œëŠ” CI ë¹Œë“œê°€ 5ë¶„ì„ ë„˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ì•„ì´ë””ì–´ëŠ” ì»¤í”¼ë¥¼ ë§ˆì‹œê¸°ì— ì´ìƒì ì¸ ì‹œê°„ì´ê¸° ë•Œë¬¸ì— ë‚˜ì™”ìŠµë‹ˆë‹¤. ê·¸ ì‹œê°„ì„ ë„˜ì–´ê°€ë©´, ê°œë°œìì˜ ìƒì‚°ì„±ì´ ë–¨ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.\n\nìƒì‚°ì„±ì´ ê°ì†Œí•˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n- ê°œë°œìë“¤ì€ ë¹Œë“œê°€ ì™„ë£Œë˜ê¸°ë¥¼ ê¸°ë‹¤ë ¤ì•¼ í•˜ë©°, ë”°ë¼ì„œ ì‹œê°„ì„ ë‚­ë¹„í•©ë‹ˆë‹¤.\n- ê°œë°œìë“¤ì€ ìƒˆë¡œìš´ ì‘ì—…ì„ ì‹œì‘í•˜ê³  ë‚˜ì¤‘ì— ë˜ëŒì•„ì˜µë‹ˆë‹¤. ì´ëŠ” ë” ë§ì€ ë¬¸ë§¥ ì „í™˜ì„ ìš”êµ¬í•˜ë©° ì¢…ì¢… ë¹„íš¨ìœ¨ì„±ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.\n\n[ì´ë¯¸ì§€](/assets/img/2024-05-27-Howwereducedourdockerbuildtimesby40_0.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì ìš©í•œ 2ê°€ì§€ ì‘ì€ ë³€ê²½ ì‚¬í•­ì„ ì„¤ëª…í•˜ê³ , ë¹Œë“œ ì‹œê°„ì´ drascticí•˜ê²Œ ê°œì„ ëœ ê²°ê³¼ë¥¼ ë³´ì—¬ë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê°œì„  ì‚¬í•­ì— ì§‘ì¤‘í•˜ê¸° ì „ì— Dockerfile ì‘ì„±ì— ëŒ€í•œ ìµœìƒì˜ ì‹¤ì²œ ë°©ë²•ì„ ì´ë¯¸ ì¤€ìˆ˜í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n- ë ˆì´ì–´ ìˆ˜ë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤\n- ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤\n- ìµœì†Œí•œì˜ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤\n- â€¦\n\n# Buildkit vs Buildx\n\në¨¼ì € Buildkitê³¼ Buildxì— ëŒ€í•´ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. ì´ ë‘ ìš©ì–´ëŠ” ì¢…ì¢… ì„œë¡œ êµì°¨ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ë§Œ ì‹¤ì œë¡œ ë™ì¼í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ì´ ê²Œì‹œë¬¼ì„ ì‘ì„±í•˜ê¸° ì „ì— ë‚˜ë„ ë‘ ìš©ì–´ ì‚¬ì´ì˜ ì°¨ì´ë¥¼ ì™„ì „íˆ ì´í•´í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ë¹Œí‚·\n\në¹Œí‚·ì€ ê¸°ì¡´ì˜ ë„ì»¤ ë¹Œë”ë¥¼ ëŒ€ì²´í•˜ëŠ” ê°œì„ ëœ ë°±ì—”ë“œì…ë‹ˆë‹¤. 2018ë…„ë¶€í„° ë„ì»¤ì™€ í•¨ê»˜ ì œê³µë˜ì–´ ê¸°ë³¸ ë¹Œë”ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në‹¤ìŒê³¼ ê°™ì€ ë§ì€ í¥ë¯¸ë¡œìš´ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:\n\n- ê°œì„ ëœ ìºì‹± ê¸°ëŠ¥\n- ì„œë¡œ ë‹¤ë¥¸ ë ˆì´ì–´ë¥¼ ë³‘ë ¬ë¡œ ë¹Œë“œ\n- ê¸°ë³¸ ì´ë¯¸ì§€ë¥¼ ì§€ì—°í•´ì„œ ë¡œë“œí•©ë‹ˆë‹¤ (â‰¥ ë¹Œí‚· 0.9)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nBuildkitì„ ì‚¬ìš©í•  ë•Œ docker build ëª…ë ¹ì˜ ì¶œë ¥ì´ ë” ê¹”ë”í•˜ê³  êµ¬ì¡°í™”ëœ ëª¨ìŠµì´ ë¹ ë¥´ê²Œ ëˆˆì— ë•ë‹ˆë‹¤.\n\n23.0 ë²„ì „ë³´ë‹¤ ì˜¤ë˜ëœ docker ë²„ì „ì„ ì‚¬ìš©í•  ë•Œ Buildkitì„ ì‚¬ìš©í•˜ëŠ” ì¼ë°˜ì ì¸ ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ì´ Buildkit ì¸ìˆ˜ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:\n\n```js\nDOCKER_BUILDKIT=1 docker build --platform linux/amd64 . -t someImage:someVersion\nDOCKER_BUILDKIT=1 docker push someImage:someVersion\n```\n\n## Buildx\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në¹Œë“œì—‘ìŠ¤(Buildx)ëŠ” ë„ì»¤ì˜ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ, ë„ì»¤ì—ì„œ ë¹Œë“œí‚·(Buildkit)ì˜ ëª¨ë“  ì ì¬ë ¥ì„ í™œìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ê²ƒì€ ë¹Œë“œí‚·ì´ ìƒˆë¡œìš´ êµ¬ì„± ì˜µì…˜ì„ ì§€ì›í•˜ëŠ”ë°, ì´ë¥¼ ëª¨ë‘ ë„ì»¤ ë¹Œë“œ ëª…ë ¹ì— ê±°ìŠ¬ëŸ¬ í˜¸í™˜ë˜ëŠ” ë°©ì‹ìœ¼ë¡œ í†µí•©í•˜ê¸° ì–´ë ¤ìš´ ê²½ìš°ì— ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.\n\nì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ëŠ” ë° ì¶”ê°€ë¡œ, ë¹Œë“œì—‘ìŠ¤ëŠ” ì—¬ëŸ¬ ë¹Œë”ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì§€ì›í•©ë‹ˆë‹¤. CIì—ì„œ ìœ ìš©í•˜ê²Œ ì“°ì¼ ìˆ˜ ìˆìœ¼ë©°, ê³µìœ  ë„ì»¤ ë°ëª¬ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ì„¤ì •ìœ¼ë¡œ í™˜ê²½ì„ ì •ì˜í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\n\në¹Œë“œì—‘ìŠ¤ë¥¼ ì‹œì‘í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n```js\ndocker buildx create --bootstrap --name builder\ndocker buildx use builder\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ì›ê²© ìºì‹œì˜ í˜œíƒ\n\në¹Œë“œë¥¼ ê°€ì†í™”í•˜ëŠ” ì²« ë²ˆì§¸ ë°©ë²•ì€ ì´ë¯¸ì§€ë¥¼ ì›ê²© ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ìºì‹œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì¼ë°˜ì ìœ¼ë¡œ CIì—ì„œ ìˆ˜í–‰ë˜ëŠ” ë¹Œë“œì™€ ê°™ì´ ë‹¤ë¥¸ ê¸°ê³„ì—ì„œ ë¹Œë“œí•˜ëŠ” ê²½ìš°ì—ë„ ë¹Œë“œ ìºì‹œë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë§ì€ ì‚¬ëŒë“¤ì´ ìƒˆ ì´ë¯¸ì§€ ë²„ì „ì„ ë¹Œë“œí•˜ê¸° ì „ì— ì´ë¯¸ì§€ì˜ ìµœì‹  ë²„ì „ì„ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤. ì´ì ì€ ë³€ê²½ë˜ì§€ ì•Šì€ ë ˆì´ì–´ë¥¼ ìºì‹œí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì¸ë°, ì²˜ìŒì— ì „ì²´ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆì§€ë§Œ ë ˆì´ì–´ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë³´ì¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤:\n\n```js\ndocker pull someImage:latest || true\ndocker build --platform linux/amd64 . \\\n-t someImage:someVersion \\\n--cache-from someImage:latest\n```\n\nBuildxë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ ì •ë³´ë¥¼ ì›ê²© ìœ„ì¹˜(ì˜ˆ: ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬, Blob ìŠ¤í† ë¦¬ì§€ ë“±)ì— ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹Œë”ëŠ” ì£¼ì–´ì§„ ë ˆì´ì–´ê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ê·¸ë ‡ë‹¤ë©´ ë‹¤ì‹œ ë§Œë“¤ì§€ ì•Šê³  ì¬ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ ë¡œì»¬ë¡œ ë‹¤ìš´ë¡œë“œí•˜ì§€ ì•Šê³ ë„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë©”ì»¤ë‹ˆì¦˜ì„ í™œìš©í•˜ê¸° ìœ„í•´ ì´ì „ ëª…ë ¹ì–´ë¥¼ ì¬ì‘ì„±í•œ ê²ƒì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\ndocker buildx build --platform linux/amd64 . \\\n-t someImage:someVersion --push \\\n--cache-to type=inline,mode=max \\\n--cache-from someImage:somePreviousVersion\n\n\"max\" ëª¨ë“œëŠ” ê²°ê³¼ ì´ë¯¸ì§€ì— ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë ˆì´ì–´ë„ ëª¨ë“  ë¹Œë“œ ì •ë³´ë¥¼ ì €ì¥í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤ (ì˜ˆ: ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œ ì‚¬ìš© ì‹œ). ê¸°ë³¸ì ìœ¼ë¡œ \"min\" ëª¨ë“œê°€ ì‚¬ìš©ë˜ë©° ìµœì¢… ì´ë¯¸ì§€ì— ì¡´ì¬í•˜ëŠ” ë ˆì´ì–´ì— ëŒ€í•œ ë¹Œë“œ ì •ë³´ë§Œ ì €ì¥í•©ë‹ˆë‹¤.\n\nìºì‹±ì˜ íŠ¹ìˆ˜ ì‚¬ë¡€ëŠ” ìºì‹œ ë°ì´í„°ë¥¼ \"inline\"ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì´ë©°, ì´ë¯¸ì§€ì™€ í•¨ê»˜ ìºì‹±ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ ì˜µì…˜ì€ Buildx ì—†ì´ Buildkitì„ ì‚¬ìš©í•  ë•Œë„ ì§€ì›ë©ë‹ˆë‹¤. ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œë¥¼ ì‚¬ìš©í•  ë•Œ ì‹œì‘í•˜ê¸° ê°€ì¥ ì‰½ì§€ë§Œ ì¶œë ¥ë¬¼ê³¼ ìºì‹œ ì‚¬ì´ì— ëª…í™•í•œ êµ¬ë¶„ì„ ì œê³µí•˜ì§€ ì•Šìœ¼ë©° ì¡°ì‹¬í•´ì•¼ í•©ë‹ˆë‹¤. ìºì‹œ ë°ì´í„°ë¥¼ \"inline\"ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\ndocker buildx build --platform linux/amd64 . \\\n-t someImage:someVersion --push \\\n--cache-to type=inline,mode=max \\\n--cache-from someImage:somePreviousVersion\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# Docker ì´ë¯¸ì§€ì— íŒŒì¼ ì¶”ê°€í•˜ëŠ” ìƒˆë¡œìš´ ë°©ë²•\n\në„ì»¤ëŠ” Dockerfile ì‘ì„±ì„ ìœ„í•œ ìƒˆë¡œìš´ êµ¬ë¬¸ ë²„ì „, ì¦‰ #syntax=docker/dockerfile:1.4ë¥¼ ì†Œê°œí–ˆìŠµë‹ˆë‹¤. ì´ ë²„ì „ì€ COPY ë° ADD ëª…ë ¹ì— ëŒ€í•œ ì¶”ê°€ ë§í¬ ì˜µì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤.\n\nì´ì „ì— COPY ë˜ëŠ” ADD ëª…ë ¹ì„ ì‚¬ìš©í•  ë•Œ ë¹Œë”ê°€ ìƒˆë¡œìš´ ìŠ¤ëƒ…ìƒ·ì„ ë§Œë“¤ì–´ ìƒˆ íŒŒì¼ì„ ê¸°ì¡´ íŒŒì¼ ì‹œìŠ¤í…œê³¼ ë³‘í•©í–ˆìŠµë‹ˆë‹¤. ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ë©´ ë¶€ëª¨ ë ˆì´ì–´ê°€ ëª¨ë‘ ì¡´ì¬í•´ì•¼ í•˜ëŠ”ë°, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ëŒ€ìƒ ë””ë ‰í† ë¦¬ê°€ ì•„ì§ ì¡´ì¬í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœì¢…ì ìœ¼ë¡œ ì´ë¯¸ì§€(ë¹Œë“œ ëª…ë ¹ì˜ ê²°ê³¼ë¬¼)ëŠ” ê°ê°ì˜ ìŠ¤ëƒ…ìƒ· ê°„ì˜ ì°¨ì´ë¥¼ í¬í•¨í•˜ëŠ” ë ˆì´ì–´ ë‹¹ tarballë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.\n\n```js\nFROM baseImage:version\nCOPY binary /opt/\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në§í¬ ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ìƒˆ íŒŒì¼ì€ ì´ì „ ë ˆì´ì–´ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ìì²´ ìŠ¤ëƒ…ìƒ·ì— ë„£ìŠµë‹ˆë‹¤. ë§í¬ëœ íŒŒì¼ì€ ìì²´ tarballì— ì €ì¥ë˜ë©° ì„œë¡œ ë‹¤ë¥¸ tarballë“¤ì´ ì—°ê²°ë˜ì–´ íŒŒì¼ ì‹œìŠ¤í…œì— ì˜ì¡´í•˜ì§€ ì•Šê³  ì—°ê²°ë©ë‹ˆë‹¤. ë‹¤ìŒ ì´ë¯¸ì§€ì— ì„¤ëª…ì´ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-Howwereducedourdockerbuildtimesby40_1.png)\n\n```js\n# syntax=docker/dockerfile:1.4\nFROM baseImage:version\nCOPY [--chown=<user>:<group>] [--chmod=<perms>] --link binary /opt/\n```\n\nì£¼ìš” ì¥ì ì€ íŒŒì¼ì´ ì´ì œ ì´ì „ ë ˆì´ì–´ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. íŒŒì¼ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì´ì „ ë ˆì´ì–´ê°€ ë³€ê²½ë˜ë”ë¼ë„ ë ˆì´ì–´ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në˜í•œ ì—¬ëŸ¬ ë ˆì´ì–´ì˜ ë°ì´í„° ë³µì‚¬ê°€ ì´ì œ ë³‘ë ¬ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¹Œë“œ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n# ê²°ë¡ \n\nì´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” CI íŒŒì´í”„ë¼ì¸ì„ ìµœì í™”í•œ í›„ ì–»ì€ ëª‡ ê°€ì§€ ìƒˆë¡œìš´ í†µì°°ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ì „ì²´ ë„ì»¤ ë¹Œë“œ ì‹œê°„ì„ 40% ì¤„ì´ê²Œ ëœ ë‘ ê°€ì§€ ì‘ì€ ë³€ê²½ ì‚¬í•­ì— ëŒ€í•´ ë…¼ì˜í•˜ê² ìŠµë‹ˆë‹¤.\n\n- ë¹Œë“œ ìºì‹œ ì •ë³´ë¥¼ ì›ê²©ìœ¼ë¡œ ì €ì¥\n- ë„ì»¤ ì´ë¯¸ì§€ì— íŒŒì¼ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë³µì‚¬í•  ë•Œ ë§í¬ ì˜µì…˜ ì‚¬ìš©\n","ogImage":{"url":"/assets/img/2024-05-27-Howwereducedourdockerbuildtimesby40_0.png"},"coverImage":"/assets/img/2024-05-27-Howwereducedourdockerbuildtimesby40_0.png","tag":["Tech"],"readingTime":7},{"title":"Python ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê°€ë²¼ìš´ ë„ì»¤ ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ì¡°ìœ¨í•˜ê¸°","description":"","date":"2024-05-27 17:21","slug":"2024-05-27-OrchestratingPythonscriptswithalightweightdockerscheduler","content":"\n<img src=\"/assets/img/2024-05-27-OrchestratingPythonscriptswithalightweightdockerscheduler_0.png\" />\n\nì•ˆë…•í•˜ì„¸ìš”,\n\nìš”ì¦˜ì— ë¯¸ë‹ˆ PCë¥¼ ì‚¬ì„œ ì§‘ì— ì‘ì€ ê°œì¸ ì„œë²„ë¥¼ ì„¸íŒ…í•´ë´¤ì–´ìš” â€” ì§„ì§œ ê²Œì´ë¨¸ ê°™ì€ ìŠ¤íƒ€ì¼, ã…‹ã…‹ã…‹. ì´ ì„œë²„ì—ì„œ ëª‡ ê°€ì§€ ê°œì¸ í”„ë¡œì íŠ¸ë¥¼ ëŒë¦´ ê³„íšì´ì—ˆëŠ”ë°, ê·¸ë˜ì„œ crontabë§Œí¼ ë‹¨ìˆœí•˜ì§€ ì•Šì€ ê°€ë²¼ìš´ Python ìŠ¤í¬ë¦½íŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ í•„ìš”í–ˆì–´ìš”.\n\nì¡°ì‚¬ë¥¼ í•˜ë‹¤ê°€ Cronicleì„ ë°œê²¬í–ˆê³ , Dockerì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í”„ë¡œì íŠ¸ë„ ì°¾ì•˜ì–´ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-OrchestratingPythonscriptswithalightweightdockerscheduler_1.png)\n\në¬¸ì œëŠ”... Cronicleì€ ê¸°ë³¸ì ìœ¼ë¡œ ì…¸ ë° HTTP ìš”ì²­ ë‘ ê°€ì§€ ìœ í˜•ì˜ ì‘ì—…ë§Œ ì§€ì›í•©ë‹ˆë‹¤. ì…¸ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ Pythonì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ í•­ìƒ ìµœìƒì˜ ê²½í—˜ì€ ì•„ë‹ˆë©° (ê²Œë‹¤ê°€ ì´ë¯¸ì§€ì—ëŠ” Pythonì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ë„ ì•ŠìŠµë‹ˆë‹¤. Cronicleì€ Node.jsì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤).\n\nê·¸ë˜ì„œ ì €ëŠ” Python í™˜ê²½ì´ ì„¤ì •ë˜ê³  Cronicle ë‚´ë¶€ì— ì‚¬ìš©í•  ì¤€ë¹„ê°€ ëœ ê¸°ì¡´ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‚˜ë§Œì˜ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤!\n\n```js\nFROM soulteary/cronicle:0.9.46\n\nENV PYTHONUNBUFFERED=1\n\nRUN apk add --no-cache python3 py3-pip\n\nCOPY bin/python-script-plugin.py /opt/cronicle/bin/python-script-plugin.py\nRUN chmod +x /opt/cronicle/bin/python-script-plugin.py\nCOPY config/plugins.pixl /tmp/plugins.pixl\nRUN /opt/cronicle/bin/control.sh import /tmp/plugins.pixl\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‚´ í”ŒëŸ¬ê·¸ì¸ì—ì„œëŠ” ìŠ¤í¬ë¦½íŠ¸ë¿ë§Œ ì•„ë‹ˆë¼ ì‘ì—…ì„ ìƒì„±í•  ë•Œ Python ë¼ì´ë¸ŒëŸ¬ë¦¬, í™˜ê²½ ë³€ìˆ˜, ì‹¤í–‰ ë§¤ê°œë³€ìˆ˜ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆì–´ìš”. ê° Python \"ì´ë²¤íŠ¸\" (Cronicleì´ ì‘ì—…/ì‘ì—…ì„ ìœ„í•œ ìš©ì–´ë¡œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´)ëŠ” ìì²´ \"ëŸ°íƒ€ì„\"ì—ì„œ ì‹¤í–‰ë˜ë©°, ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ í˜¼í•©í•˜ì§€ ì•Šì•„ ëª¨ë“  ì‹¤í–‰ì—ì„œ ë¬´ê²°ì„±ì„ ë³´ì¥í•´ìš”.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-27-OrchestratingPythonscriptswithalightweightdockerscheduler_2.png)\n\nê°œì¸ í”„ë¡œì íŠ¸(ë˜ëŠ” ì†Œê·œëª¨/ì¤‘ê·œëª¨ ì „ë¬¸ í”„ë¡œì íŠ¸)ë¥¼ ì§„í–‰ ì¤‘ì¸ ë¶„ë“¤ì„ ìœ„í•´ Cronicleì€ ë†€ë¼ìš´ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° ëŒ€ì•ˆì´ì—ìš”. ì™œëƒí•˜ë©´:\n\n- ì‘ì—… ì‹¤í–‰ ì¼ì • ì§œê¸° ë° ì—°ê²°í•˜ê¸°\n- ì´ë©”ì¼ ì•Œë¦¼\n- ì‘ì—… ì‹¤í–‰ ë¡œê·¸, í†µê³„, ì´ë ¥ ë“±ì— ì ‘ê·¼í•˜ê¸° ê°€ëŠ¥í•´ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![Image](/assets/img/2024-05-27-OrchestratingPythonscriptswithalightweightdockerscheduler_3.png)\n\nThe link to my repository with the image is [here](repository_link).\nFeel free to access my other repositories, I post a lot of snippets and personal projects that could help you!\n","ogImage":{"url":"/assets/img/2024-05-27-OrchestratingPythonscriptswithalightweightdockerscheduler_0.png"},"coverImage":"/assets/img/2024-05-27-OrchestratingPythonscriptswithalightweightdockerscheduler_0.png","tag":["Tech"],"readingTime":3}],"page":"47","totalPageCount":113,"totalPageGroupCount":6,"lastPageGroup":20,"currentPageGroup":2},"__N_SSG":true}