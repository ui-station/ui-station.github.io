{"pageProps":{"post":{"title":" í…Œë¼í¼ì„ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ MERN ì•±ì„ ìœ„í•œ ì—”ë“œíˆ¬ì—”ë“œ CICD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•í•˜ê¸°, GitHub Actionsì™€ Ansibleìœ¼ë¡œ","description":"","date":"2024-05-18 16:59","slug":"2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible","content":"\n<img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_0.png\" />\n\nì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ MERN ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ì™„ë²½í•œ CI/CD íŒŒì´í”„ë¼ì¸ì„ ì•Œì•„ë³´ê³  í…Œë¼í¼ì„ GitHub Actionsì™€ í†µí•©í•˜ì—¬ ì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ ë° ê´€ë¦¬ë¥¼ ìë™í™”í•©ë‹ˆë‹¤. AWS EC2 êµ¬ì„±, Kubernetes (K3s) ì„¤ì¹˜ ë° EC2ì— í’€ ìŠ¤íƒ MERN í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•˜ëŠ” ë° Ansibleì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n# ğŸ› ï¸ì‚¬ì „ ìš”êµ¬ ì‚¬í•­\n\n- í•„ìš”í•œ ê¶Œí•œì„ ê°–ì¶˜ AWS ê³„ì •\n- ì „ì²´ ìŠ¤íƒ ì‘ìš© í”„ë¡œê·¸ë¨(MERN)ì„ ì»¨í…Œì´ë„ˆí™”\n- HCP Terraform, GitHub ë° Docker Hub ê³„ì •\n- AWS í´ë¼ìš°ë“œì˜ ê¸°ë³¸ ì§€ì‹\n- DNS í¸ì§‘ ê¶Œí•œì´ ìˆëŠ” ë„ë©”ì¸\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì´ ê¸°ì‚¬ëŠ” ì¡°ê¸ˆ ê¸¸ì–´ìš”. ê·¸ë˜ì„œ ë§ˆì§€ë§‰ ë‹¨ê³„ë¡œ ë”°ë¼ì™€ì„œ í…Œë¼í¼ì„ ì‚¬ìš©í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì— MERN ì•±ìš© ì—”ë“œíˆ¬ì—”ë“œ CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ì‹œë©´ ì¢‹ê² ë„¤ìš”. GitHub Actionsì™€ Ansibleì„ í™œìš©í•´ìš”.\n\nì´ í”„ë¡œì íŠ¸ëŠ” ê³ ê¸‰ ìˆ˜ì¤€ì˜ í”„ë¡œì íŠ¸ì—ìš”. ê·¸ë˜ì„œ AWS, í…Œë¼í¼, ì•¤ì„œë¸”, MERN í”„ë¡œì íŠ¸, GitHub Actionsì˜ ê¸°ë³¸ ê°œë…ì´ ëª…í™•í•˜ë‹¤ê³  ê°€ì •í• ê²Œìš”. ê¸°ë³¸ ìˆ˜ì¤€ì€ ë§í•˜ì§€ ì•Šì•„ìš”. ê·¸ëƒ¥ í”„ë¡œì íŠ¸ë¥¼ í†µí•©í•˜ê³  êµ¬í˜„í–ˆì–´ìš”.\n\nì´ ê¸°ì‚¬ëŠ” ì„¸ ê°€ì§€ ì„¹ì…˜ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì–´ìš”:\n\nì„¹ì…˜ 1: GitHub Actionsë¥¼ ì‚¬ìš©í•´ í…Œë¼í¼ì„ í™œìš©í•´ AWS ì¸í”„ë¼ ë°°í¬ë¥¼ ìë™í™”í•˜ê¸°.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nSection 2: EC2 êµ¬ì„±, Kubernetes (K3s) ì„¤ì¹˜ ë° Ansibleì„ ì‚¬ìš©í•˜ì—¬ MERN ì•± ë°°í¬í•˜ê¸°.\n\nSection 3: GitHub Actionsë¥¼ ì‚¬ìš©í•œ Kubernetes (K3s)ì—ì„œ MERN ì•±ì„ ìœ„í•œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±.\n\nê·¸ëŸ¼, ì§€ê¸ˆ ê°€ë³´ì, ë§Œì•½ ì´ ê¸€ì— ëŒ€í•œ ì§ˆë¬¸ì´ ìˆê±°ë‚˜ ë„ì›€ì´ í•„ìš”í•˜ë©´ ì–¸ì œë“ ì§€ ì—°ë½í•´ ì£¼ì„¸ìš”.\n\n# ğŸ“˜Section 1: GitHub Actionsë¥¼ ì´ìš©í•˜ì—¬ Terraformì„ ì‚¬ìš©í•˜ì—¬ AWS ì¸í”„ë¼ ìë™í™”í•˜ê¸°\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nìš°ì„  GitHubì—ì„œ Terraformì„ ì‚¬ìš©í•˜ì—¬ AWS ì¸í”„ë¼ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ GitHub ì•¡ì…˜ì„ ì´ìš©í•´ git ì €ì¥ì†Œ(terraform)ë¥¼ ë³µì œí•˜ì„¸ìš”.\n\në‹¨ê³„ 1: ë¡œì»¬ ë¨¸ì‹ ì—ì„œ ì €ì¥ì†Œë¥¼ ë³µì œí•©ë‹ˆë‹¤.\n\n```js\ngit clone https://github.com/bjnandi/terraform-ci-cd-aws.git\n```\n\në³µì œ í›„ì—ëŠ” VS Code í¸ì§‘ê¸°ì˜ Dev Containerì—ì„œ í•´ë‹¹ ì €ì¥ì†Œë¥¼ ì—½ë‹ˆë‹¤. Dev Containerë¥¼ ì‚¬ìš©í•˜ë©´ ì£¼ìš” ë¨¸ì‹ ìœ¼ë¡œë¶€í„° í™˜ê²½(Terraform)ì„ ê²©ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‹¨ê³„ 2: HCP Terraform Cloud ì„¤ì •í•˜ê¸°\nìš°ë¦¬ê°€ ìƒì„±í•  GitHub Actionì€ HCP Terraform Cloudì— ì—°ê²°í•˜ì—¬ êµ¬ì„±ì„ ê³„íší•˜ê³  ì ìš©í•  ê²ƒì…ë‹ˆë‹¤. ì•¡ì…˜ ì›Œí¬í”Œë¡œìš°ë¥¼ ì„¤ì •í•˜ê¸° ì „ì—, HCP Terraform Cloudì— ë¡œê·¸ì¸í•˜ê³  ì¡°ì§ ë‚´ì—ì„œ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•œ ë‹¤ìŒ AWS ìê²© ì¦ëª…ì„ HCP Terraform ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ì£¼ì„¸ìš”:\n\nì¡°ì§ `ì›Œí¬ìŠ¤í˜ì´ìŠ¤` ë³€ìˆ˜\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_1.png)\n\në‹¨ê³„ 3: API í† í° ìƒì„±í•˜ê¸°\nHCP Terraform ì‚¬ìš©ì API í† í°ì„ ìƒì„±í•˜ì„¸ìš”. ì´ë¥¼ ìœ„í•´ HCP Terraform ì‚¬ìš©ì ì„¤ì •ì˜ í† í° í˜ì´ì§€ë¡œ ì´ë™í•˜ì„¸ìš”. API í† í° ìƒì„±ì„ í´ë¦­í•œ ë‹¤ìŒ \"Generate token\"ì„ í´ë¦­í•˜ì—¬ GitHub Actions í† í°ì„ ì„¤ëª…ë€ì— ì…ë ¥í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_2.png)\n\n**ë‹¨ê³„ 4:** GitHub Secretsì— GitHub ì €ì¥ì†Œì— API í† í°ì„ ì„¤ì •í•©ë‹ˆë‹¤.\nìì„¸í•œ ë‚´ìš©ì€ GitHub Secretsì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ì‹œí¬ë¦¿ê³¼ ë³€ìˆ˜ë¡œ ì´ë™í•˜ì—¬ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.\n\nGitHub `ì €ì¥ì†Œ ì´ë¦„` ì„¤ì • `ì‹œí¬ë¦¿ê³¼ ë³€ìˆ˜` ì‘ì—… `ì €ì¥ì†Œ ì‹œí¬ë¦¿` ìƒˆ ì €ì¥ì†Œ ì‹œí¬ë¦¿ :\n\nTF_API_TOKEN: HCP Terraform ì‚¬ìš©ì ì„¤ì •ì—ì„œ ìƒì„±ëœ API í† í°ì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_3.png\" />\n\n5ë‹¨ê³„: VS Code í¸ì§‘ê¸°ë¡œ ëŒì•„ê°€ì„œ \"tf-infa-test\"ë¼ëŠ” ì´ë¦„ì˜ ìƒˆ ë¸Œëœì¹˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.\n\n```js\ngit checkout -b 'tf-infa-test'\n```\n\nê·¸ëŸ° ë‹¤ìŒ \"env/dev\" ë””ë ‰í† ë¦¬ì˜ main.tf íŒŒì¼ì„ ì—½ë‹ˆë‹¤. HCP Terraformì—ì„œ ìƒì„±ëœ HCP Terraform ì¡°ì§ ë° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì´ë¦„ìœ¼ë¡œ \"organization\"ê³¼ \"workspaces\"ë¥¼ ì„¤ì •í•œ ë‹¤ìŒ íŒŒì¼ì„ ì €ì¥í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n  cloud {\n    organization = \"YOUR-ORGANIZATION-HERE\"\n\n    workspaces {\n      name = \"YOUR-WORKS-SPACE\"\n    }\n  }\n```\n\nê·¸ëŸ° ë‹¤ìŒ \".github/workflows/\" ë””ë ‰í† ë¦¬ì—ì„œ ë‘ ê°œì˜ ì›Œí¬í”Œë¡œ íŒŒì¼ (terraform-plan.yml ë° terraform-plan.yml)ì„ ì—½ë‹ˆë‹¤.\n\n- terraform-plan.yml\n- terraform-plan.yml\n\nâ€œTF_CLOUD_ORGANIZATIONâ€ ë° â€œTF_WORKSPACEâ€ë¥¼ HCP Terraform ì¡°ì§ ë° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì˜ ì´ë¦„ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  íŒŒì¼ì„ ì €ì¥í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n6ë‹¨ê³„: ì €í¬ì˜ í…Œë¼í¼ íŒŒì¼ êµ¬ì¡°ëŠ” ë£¨íŠ¸ ì‘ì—… ë””ë ‰í† ë¦¬ê°€ \"env/dev\"ì¸ ë¸”ë£¨í”„ë¦°íŠ¸ ëª¨ë¸ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ HCP í…Œë¼í¼ í´ë¼ìš°ë“œì—ì„œ í…Œë¼í¼ ì‘ì—… ë””ë ‰í† ë¦¬ì— \"env/dev\"ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\n\nì´ë¥¼ ìœ„í•´ í…Œë¼í¼ í´ë¼ìš°ë“œë¡œ ì´ë™í•˜ì‹­ì‹œì˜¤:\n\nOrganizations `Workspaces` Workspace Name `Setting` Terraform Working Directory\n\n```js\nenv / dev;\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì•„ë˜ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”.\n\n![image](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_4.png)\n\në§ˆì§€ë§‰ìœ¼ë¡œ \"Save settings\"ë¥¼ í´ë¦­í•˜ì„¸ìš”.\n\nì´ì œ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ì„ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n**ë‹¨ê³„ 7: í’€ ë¦¬í€˜ìŠ¤íŠ¸ ìƒì„±í•˜ê¸°**\nì´ì œ VS Code í¸ì§‘ê¸°ë¡œ ëŒì•„ê°€ì„œ ë°ëª¨ í…ŒìŠ¤íŠ¸ìš© ì½”ë“œë¥¼ ì•½ê°„ ìˆ˜ì •í•œ í›„, í•´ë‹¹ ì½”ë“œë¥¼ GitHub \"tf-infa-test\" ë¸Œëœì¹˜ì— ì»¤ë°‹í•˜ê³  í‘¸ì‹œí•˜ì„¸ìš”. ê·¸ëŸ° ë‹¤ìŒ GitHubì—ì„œ ì´ ë¸Œëœì¹˜ì— ëŒ€í•œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ì„¸ìš”.\n\ní’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ìƒì„±í•œ í›„ GitHub ì›Œí¬í”Œë¡œìš°(í…Œë¼í¼ í”Œëœ)ë¥¼ ì‹¤í–‰í•˜ì—¬ í…Œë¼í¼ í”Œëœì„ í™•ì¸í•˜ì„¸ìš”.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_5.png)\n\n**ë‹¨ê³„ 8: í’€ ë¦¬í€˜ìŠ¤íŠ¸ ê²€í†  ë° ë³‘í•©**\n\"Terraform plan\"ì— ë§Œì¡±í•œë‹¤ë©´, 'main' ë¸Œëœì¹˜ì— 'ë³‘í•©' ì½”ë“œë¡œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë‹«ì€ ë‹¤ìŒ ì¸í”„ë¼ êµ¬ì¶•ì„ ìœ„í•´ ì›Œí¬í”Œë¡œìš°(í…Œë¼í¼ ì• í”Œë¼ì´)ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![Step 9](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_6.png)\n\n9ë‹¨ê³„: í”„ë¡œë¹„ì „ëœ EC2 ì¸ìŠ¤í„´ìŠ¤ í™•ì¸\n\nëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n![Step 9](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_7.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ğŸ“˜ ì„¹ì…˜ 2: EC2 êµ¬ì„±, Kubernetes (K3s) ì„¤ì¹˜ ë° Ansibleë¥¼ ì‚¬ìš©í•˜ì—¬ MERN ì•± ë°°í¬\n\nì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ì´ ì™„ë£Œë˜ë©´ GitHubì˜ ë‘ ë²ˆì§¸ git ì €ì¥ì†Œ (Ansible)ë¡œ ì´ë™í•˜ì—¬ AWS EC2ë¥¼ êµ¬ì„±í•˜ê³  Kubernetes (K3s)ë¥¼ ì„¤ì¹˜í•˜ê³  Ansibleë¥¼ ì‚¬ìš©í•˜ì—¬ MERN ì•±ì„ ë°°í¬í•©ë‹ˆë‹¤.\n\në‹¨ê³„ 1: ë¡œì»¬ ë¨¸ì‹ ì—ì„œ ì €ì¥ì†Œë¥¼ ë³µì œí•©ë‹ˆë‹¤.\n\n```js\ngit clone https://github.com/bjnandi/ansible-k3s-nginx-lb.git\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nê¹ƒ ì €ì¥ì†Œë¥¼ ë³µì œí•œ í›„, VS Codeì˜ Dev Containerì—ì„œ ì—´ì–´ë³´ì„¸ìš”. Dev ContainerëŠ” í™˜ê²½(Ansible)ì„ ë©”ì¸ ë¨¸ì‹ ê³¼ ê²©ë¦¬ì‹œí‚µë‹ˆë‹¤.\n\në‹¨ê³„ 2: SSH í‚¤ë¥¼ ìœ„í•´ \".ssh\" í´ë”ì— \"linux.pem\" íŒŒì¼ì„ ë§Œë“œì„¸ìš”.\n\n```bash\nnano ~/.ssh/linux.pem\n```\n\nì—¬ê¸°ì— \"pem\" íŒŒì¼ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ê³  íŒŒì¼ì„ ì €ì¥í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nStep 3: \"linux.pem\" íŒŒì¼ì˜ ê¶Œí•œì„ ì„¤ì •í•˜ì„¸ìš”\n\n```js\nchmod 400 ~/.ssh/linux.pem\n```\n\nStep 4: ì´ì œ ë””ë ‰í† ë¦¬ì˜ ê¶Œí•œì„ ì„¤ì •í•˜ì„¸ìš”. Dev ContainerëŠ” ëª¨ë“  ì‚¬ìš©ìì— ëŒ€í•´ ê¸°ë³¸ ê¶Œí•œìœ¼ë¡œ ë””ë ‰í† ë¦¬ë¥¼ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤.\n\n```js\nchmod 755 /workspaces/ansible-k3s-nginx-lb\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‹¨ê³„ 5: ì´ì œ ìš°ë¦¬ì˜ AWS EC2 IP ì£¼ì†Œë¡œ IP ì£¼ì†Œë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.\n\n- â€œhostsâ€ íŒŒì¼ì—ì„œ:\n\n- bastion (ê³µìš© IP)\n- k3s_nodes, additional_agent_nodes ë° nginx_lb (ì‚¬ì„¤ IP)\n- nginx_lb(ì‚¬ì„¤ IP)\n- ProxyCommandìš© (ê³µìš© IP)\n\n```js\n[bastion]\nbastion ansible_host=34.195.33.137\n[bastion:vars]\nansible_user=ubuntu\nansible_ssh_private_key_file=~/.ssh/linux.pem\n\n[k3s_nodes]\nmaster ansible_host=10.0.1.222\n[k3s_nodes:vars]\nansible_user=ubuntu\nansible_ssh_private_key_file=~/.ssh/linux.pem\nansible_ssh_common_args='-o ProxyCommand=\"ssh -o StrictHostKeyChecking=no -i ~/.ssh/linux.pem -W %h:%p -q ubuntu@34.195.33.137\"'\n\n[additional_agent_nodes]\nworker1 ansible_host=10.0.2.244\nworker2 ansible_host=10.0.1.236\n[additional_agent_nodes:vars]\nansible_user=ubuntu\nansible_ssh_private_key_file=~/.ssh/linux.pem\nansible_ssh_common_args='-o ProxyCommand=\" ssh -o StrictHostKeyChecking=no -i ~/.ssh/linux.pem -W %h:%p -q ubuntu@34.195.33.137\"'\n\n[nginx_lb]\nnginx_lb ansible_host=10.0.5.187\n[nginx_lb:vars]\nansible_user=ubuntu\nansible_ssh_private_key_file=~/.ssh/linux.pem\nansible_ssh_common_args='-o ProxyCommand=\" ssh -o StrictHostKeyChecking=no -i ~/.ssh/linux.pem -W %h:%p -q ubuntu@34.195.33.137\"'\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n2. \"nginx.conf\" íŒŒì¼ì—ì„œ:\n\n- ì—…ìŠ¤íŠ¸ë¦¼ í´ë¼ì´ì–¸íŠ¸ ë° API ì„œë²„\n\n```js\n   upstream client {\n        server 10.0.1.222:30001; # ê·€í•˜ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ IPë¡œ êµì²´í•˜ì„¸ìš”\n        server 10.0.2.244:30001; # ê·€í•˜ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ IPë¡œ êµì²´í•˜ì„¸ìš”\n        server 10.0.1.236:30001; # ê·€í•˜ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ IPë¡œ êµì²´í•˜ì„¸ìš”\n    }\n\n    upstream apiserver {\n        server 10.0.1.222:30005;  # ê·€í•˜ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ IPë¡œ êµì²´í•˜ì„¸ìš”\n        server 10.0.2.244:30005; # ê·€í•˜ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ IPë¡œ êµì²´í•˜ì„¸ìš”\n        server 10.0.1.236:30005; # ê·€í•˜ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ IPë¡œ êµì²´í•˜ì„¸ìš”\n    }\n```\n\n3. ì´ì œ \"project_vars\" íŒŒì¼ì—ì„œ:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nmaster_ip: 10.0.1.222\n```\n\në‹¨ê³„ 6: Ansible êµ¬ì„±ì´ ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤\n\n- Makefileì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  êµ¬ì„±ì„ í•œ ì£¼ì„ì—ì„œ ì‹¤í–‰í•˜ë ¤ë©´:\n\n```js\nmake run_ansible\n```\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- í•˜ë‚˜ì”© ì‹¤í–‰í•˜ë ¤ë©´:\n\n```js\n ansible-playbook -i hosts k3s_install.yaml\n\n ansible-playbook -i hosts k3s_mern_deploy.yaml\n\n ansible-playbook -i hosts config_nginx_lb.yaml\n\n ansible-playbook -i hosts config_bastion.yaml\n```\n\nì´ì œ, ëª¨ë“  EC2ë¥¼ êµ¬ì„±í•˜ê³  Kubernetes(k3s)ë¥¼ ì„¤ì¹˜í•œ ë‹¤ìŒ Kubernetes(k3s)ì— MERN ì•±ì„ ë°°í¬í•©ë‹ˆë‹¤.\n\në‹¨ê³„ 7: ì´ì œ ë„ë©”ì¸ DNS ì„¤ì •ìœ¼ë¡œ ì´ë™í•˜ì—¬ \"A\" ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. ì €í¬ ë„ë©”ì¸ì€ Squarespaceì—ì„œ ì œê³µí•©ë‹ˆë‹¤. ê·¸ë˜ì„œ, Squarespace DNS ì„¤ì •ì—ì„œ ì´ ë„ë©”ì¸ DNSë¥¼ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nìš°ë¦¬ ì•±ì— ëŒ€í•´ EC2 ì¸ìŠ¤í„´ìŠ¤(ê°œë°œ ë¡œë“œë°¸ëŸ°ì„œ)ì˜ ê³µê°œ IPë¡œ ë‘ ê°œì˜ ì‚¬ìš©ì ì •ì˜ \"A\" ë ˆì½”ë“œë¥¼ ì¶”ê°€í–ˆì–´ìš”.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_8.png)\n\në‹¨ê³„ 8: ì´ì œ ë„ë©”ì¸ì„ ì‚¬ìš©í•˜ì—¬ ì•±ì„ ë³´ì—¬ì¤„ ì°¨ë¡€ì—ìš”.\n\nì´ ë„ë©”ì¸(http://bjtechlife.com)ì—ì„œ ìš°ë¦¬ ì•±ì„ ë´¤ì–´ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në§Œì•½ Docker Hub repository ì´ë¯¸ì§€ê°€ ìˆê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ Docker Hubì— í‘¸ì‹œí–ˆë‹¤ë©´, ë¨¼ì € ì¶œë ¥ì—ì„œ ì•± UIë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° (ì„¹ì…˜ 3)ë¥¼ ì™„ë£Œí•œ ë‹¤ìŒ ì¶œë ¥ì—ì„œ ì•± UIë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_9.png)\n\n# ğŸ“˜ì„¸ì…˜ 3: Kubernetes (k3s)ì—ì„œ MERN ì•±ì„ ìœ„í•œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•í•˜ê¸° (GitHub Actions ì‚¬ìš©)\n\nEC2 êµ¬ì„±, (k3s) ì„¤ì¹˜ ë° ì•± ë°°í¬ë¥¼ ì™„ë£Œí•˜ê³ , AWS EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ Kubernetes (k3s)ì—ì„œ MERN ì•±ì„ ìœ„í•œ CI/CD íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ê¸° ìœ„í•´ GitHubì˜ ì„¸ ë²ˆì§¸ git ì €ì¥ì†Œ(MERN í”„ë¡œì íŠ¸)ë¡œ ì´ë™í•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nìŠ¤í… 1: ë¡œì»¬ ë¨¸ì‹ ì—ì„œ ì €ì¥ì†Œë¥¼ ë³µì œí•˜ì„¸ìš”\n\n```js\ngit clone https://github.com/bjnandi/ci-cd-pipeline-MERN-k3s.git\n```\n\në³µì œí•œ í›„, VS Code ì—ë””í„°ì—ì„œ ì—´ì–´ì£¼ì„¸ìš”.\n\n\".github/workflows/\" ë””ë ‰í† ë¦¬ì— ë‘ ê°œì˜ ì›Œí¬í”Œë¡œìš° íŒŒì¼ (docker-ci ë° k3s-cd)ì´ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- docker-ci.yml\n- k3s-cd.yml\n\nì²« ë²ˆì§¸ ì›Œí¬í”Œë¡œìš° \"docker-ci.yml\" íŒŒì¼ì€ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ Docker Hubì— í‘¸ì‹œí•˜ê³ , ë‹¤ë¥¸ ì›Œí¬í”Œë¡œìš° \"k3s-cd.yml\" íŒŒì¼ì€ Kubernetes(k3s)ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\n\në‹¨ê³„ 2: ì´ì œ GitHub Secretsë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ì±„ì›Œë„£ì–´ì•¼í•©ë‹ˆë‹¤. GitHub ë¦¬í¬ì§€í† ë¦¬ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ì •ë³´ëŠ” GitHub Secretsì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ì‹œí¬ë¦¿ê³¼ ë³€ìˆ˜ë¡œ ì´ë™í•˜ì—¬ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.\n\nGithub `Repo Name` ì„¤ì • `Secrets and variables` ì‘ì—… `Repository Secrets` ìƒˆ ë¦¬í¬ì§€í† ë¦¬ ì‹œí¬ë¦¿ :\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nEC2_HOST: ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ê³µê°œ IP ì£¼ì†ŒëŠ” ëŒ€ëµ ì´ì™€ ê°™ì„ ê²ƒì…ë‹ˆë‹¤. \"34.195.33.137\".\n\nMASTER_NODE: k8s-instance-master EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì‚¬ì„¤ IP ì£¼ì†ŒëŠ” ëŒ€ëµ ì´ì™€ ê°™ì„ ê²ƒì…ë‹ˆë‹¤. \"10.0.1.222\".\n\nEC2_USERNAME: EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì‚¬ìš©ì ì´ë¦„ì€ ì¼ë°˜ì ìœ¼ë¡œ \"ubuntu\"ì…ë‹ˆë‹¤.\n\nSSH_PRIVATE_KEY: ì¸ìŠ¤í„´ìŠ¤ì— ë¡œê·¸ì¸í•˜ëŠ” ë° ì‚¬ìš©í•  â€œ.pemâ€ íŒŒì¼ì…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nDOCKER_USERNAME: ì´ê²ƒì€ ë„ì»¤ í—ˆë¸Œ ê³„ì • í”„ë¡œí•„ë¡œ ì´ë™í•˜ë©´ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë„ì»¤ í—ˆë¸Œì˜ \"ì‚¬ìš©ì ì´ë¦„\"ì…ë‹ˆë‹¤. ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë„ì»¤ í—ˆë¸Œì— í‘¸ì‹œí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\nDOCKER_PASSWORD: ì´ê²ƒì€ ë„ì»¤ í—ˆë¸Œ ê³„ì •ì˜ \"ë¹„ë°€ë²ˆí˜¸\"ì…ë‹ˆë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_10.png)\n\në‹¨ê³„ 3: \"VS Code Editor\"ë¡œ ëŒì•„ê°€ì„œ ë°ëª¨ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì½”ë“œë‚˜ UI íŒŒì¼ì„ í¸ì§‘í•˜ê±°ë‚˜ ì‘ì€ ë³€ê²½ ì‚¬í•­ì„ ìˆ˜í–‰í•œ í›„, í˜„ì¬ íŒŒì¼ì—ì„œ ì•±ì˜ CI/CD í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ GitHubì˜ \"main\" ë¸Œëœì¹˜ì— ì½”ë“œë¥¼ ì»¤ë°‹í•˜ê³  í‘¸ì‹œí•˜ì„¸ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nê³ ê°ë‹˜, `src` í´ë”ì˜ `components` í´ë” ì•ˆì— ìˆëŠ” `Navbar.js` íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\"CRUD\" í…ìŠ¤íŠ¸ë¥¼ \"CRUD test\"ë¡œ ë³€ê²½í•œ ë‹¤ìŒ, ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•˜ê³  ë©”ì¸ ë¸Œëœì¹˜ì— í‘¸ì‹œí•˜ì„¸ìš”.\n\n<img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_11.png\" />\n\në¹Œë“œ, í‘¸ì‹œ, ê·¸ë¦¬ê³  ë°°í¬í•˜ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ì•± UI(http://bjtechlife.com)ì— ë³€ê²½ ì‚¬í•­ì´ í‘œì‹œë˜ê³  ë°ì´í„°ë¥¼ ì‚½ì…í•˜ëŠ” ê²ƒê³¼ ê°™ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_12.png\" />\n\nì™€ìš°! ğŸ˜ğŸš€ ì—¬ê¸°ì—ëŠ” ìš°ë¦¬ê°€ ì½”ë“œì—ì„œ ë³€ê²½í•œ \"CRUD í…ŒìŠ¤íŠ¸\"ê°€ ë‚˜ì™€ ìˆë„¤ìš”.\n\nì €í¬ ì•± UIì—ì„œ ì„œë¡œ ë‹¤ë¥¸ ë³€ê²½ì„ ê³„ì†í•´ì„œ ì ìš©í•˜ë©´ ë³€ê²½ ì‚¬í•­ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.\n\nê²°ê³¼ì ìœ¼ë¡œ, GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ Kubernetes(k3s)ì—ì„œ MERN ì•±ì„ ìœ„í•œ ì—”ë“œ íˆ¬ ì—”ë“œ CI/CD íŒŒì´í”„ë¼ì¸ì„ ì™„ë£Œí–ˆì–´ìš”.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nğŸŒŸì¶•í•˜í•©ë‹ˆë‹¤!!ğŸŒŸ, ì €í¬ê°€ GitHub Actions ë° Ansibleì„ ì‚¬ìš©í•˜ì—¬ Kubernetesì—ì„œ Terraformì„ í™œìš©í•˜ì—¬ MERN ì•±ì„ ìœ„í•œ End-to-End CI/CD íŒŒì´í”„ë¼ì¸ì„ ì„±ê³µì ìœ¼ë¡œ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.\n\nâœ¨ì´ì œ AWSì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê±°í•  ì‹œê°„ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ, Terraform ì €ì¥ì†Œ VS Code í¸ì§‘ê¸° í„°ë¯¸ë„(/workspaces/terraform-ci-cd-aws/env/dev)ë¡œ ëŒì•„ê°€ì„œ ë‹¤ìŒì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”:\n\n```js\nterraform login\nterraform init\nterraform destroy -auto-approve\n```\n\nì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ì €ì™€ í•¨ê»˜ ì˜¤ë˜ ì§‘ì¤‘í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œ ë˜ ë‹¤ë¥¸ ì£¼ì œë¡œ í¬ìŠ¤íŒ…í•˜ê² ìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# K8s #ì¿ ë²„ë„¤í‹°ìŠ¤ #k3s #í…Œë¼í¼ #ì•¤ì„œë¸” #MERN #í’€ìŠ¤íƒ #ë„ì»¤ #ì›¹ì• í”Œë¦¬ì¼€ì´ì…˜ #ì»¨í…Œì´ë„ˆí™” #ë°ë¸Œì˜µìŠ¤ #ì»¨í…Œì´ë„ˆí™”ëœì•± #EC2 #MERNìŠ¤íƒ #ë„ì»¤í™”ëœì›¹ì•± #MERNì•± #ë„ì»¤ì»¨í…Œì´ë„ˆ #CI/CD íŒŒì´í”„ë¼ì¸ #GitHub ì•¡ì…˜ #ì œë¡œë‹¤ìš´íƒ€ì„ #CI/CD #ìë™í™” #ë°°í¬ #ê¸°ìˆ íŒ\n\në§Œì¼ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ í…Œë¼í¼ì„ ì‚¬ìš©í•˜ì—¬ GitHub ì•¡ì…˜ ë° ì•¤ì„œë¸”ì„ ì´ìš©í•´ MERN ì•±ì„ ìœ„í•œ ì—”ë“œ íˆ¬ ì—”ë“œ CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ ì–¸ì œë“ ì§€ ì €ì—ê²Œ ì—°ë½í•´ ì£¼ì„¸ìš”. ìµœì„ ì„ ë‹¤í•´ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.\n\n# í‰ë¬¸ìœ¼ë¡œ ğŸš€\n\nIn Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ì‘ê°€ë¥¼ ì‘ì›í•˜ê³  íŒ”ë¡œìš°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”! ğŸ‘\n- íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°\n- ë‹¤ë¥¸ í”Œë«í¼ë„ ë°©ë¬¸í•´ë³´ì„¸ìš”: Stackademic | CoFeed | Venture | Cubed\n- ì•Œê³ ë¦¬ì¦˜ ì½˜í…ì¸ ë¥¼ ë‹¤ë£¨ë„ë¡ ê°•ìš”í•˜ëŠ” ë¸”ë¡œê¹… í”Œë«í¼ì— ì§€ì³¤ë‚˜ìš”? Differë¥¼ ì‹œë„í•´ë³´ì„¸ìš”\n- ë” ë§ì€ ì½˜í…ì¸ ëŠ” PlainEnglish.ioì—ì„œ í™•ì¸í•˜ì„¸ìš”\n","ogImage":{"url":"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_0.png"},"coverImage":"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_0.png","tag":["Tech"],"readingTime":19},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_0.png\">\n<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ MERN ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ì™„ë²½í•œ CI/CD íŒŒì´í”„ë¼ì¸ì„ ì•Œì•„ë³´ê³  í…Œë¼í¼ì„ GitHub Actionsì™€ í†µí•©í•˜ì—¬ ì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ ë° ê´€ë¦¬ë¥¼ ìë™í™”í•©ë‹ˆë‹¤. AWS EC2 êµ¬ì„±, Kubernetes (K3s) ì„¤ì¹˜ ë° EC2ì— í’€ ìŠ¤íƒ MERN í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•˜ëŠ” ë° Ansibleì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>\n<h1>ğŸ› ï¸ì‚¬ì „ ìš”êµ¬ ì‚¬í•­</h1>\n<ul>\n<li>í•„ìš”í•œ ê¶Œí•œì„ ê°–ì¶˜ AWS ê³„ì •</li>\n<li>ì „ì²´ ìŠ¤íƒ ì‘ìš© í”„ë¡œê·¸ë¨(MERN)ì„ ì»¨í…Œì´ë„ˆí™”</li>\n<li>HCP Terraform, GitHub ë° Docker Hub ê³„ì •</li>\n<li>AWS í´ë¼ìš°ë“œì˜ ê¸°ë³¸ ì§€ì‹</li>\n<li>DNS í¸ì§‘ ê¶Œí•œì´ ìˆëŠ” ë„ë©”ì¸</li>\n</ul>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ì´ ê¸°ì‚¬ëŠ” ì¡°ê¸ˆ ê¸¸ì–´ìš”. ê·¸ë˜ì„œ ë§ˆì§€ë§‰ ë‹¨ê³„ë¡œ ë”°ë¼ì™€ì„œ í…Œë¼í¼ì„ ì‚¬ìš©í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì— MERN ì•±ìš© ì—”ë“œíˆ¬ì—”ë“œ CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ì‹œë©´ ì¢‹ê² ë„¤ìš”. GitHub Actionsì™€ Ansibleì„ í™œìš©í•´ìš”.</p>\n<p>ì´ í”„ë¡œì íŠ¸ëŠ” ê³ ê¸‰ ìˆ˜ì¤€ì˜ í”„ë¡œì íŠ¸ì—ìš”. ê·¸ë˜ì„œ AWS, í…Œë¼í¼, ì•¤ì„œë¸”, MERN í”„ë¡œì íŠ¸, GitHub Actionsì˜ ê¸°ë³¸ ê°œë…ì´ ëª…í™•í•˜ë‹¤ê³  ê°€ì •í• ê²Œìš”. ê¸°ë³¸ ìˆ˜ì¤€ì€ ë§í•˜ì§€ ì•Šì•„ìš”. ê·¸ëƒ¥ í”„ë¡œì íŠ¸ë¥¼ í†µí•©í•˜ê³  êµ¬í˜„í–ˆì–´ìš”.</p>\n<p>ì´ ê¸°ì‚¬ëŠ” ì„¸ ê°€ì§€ ì„¹ì…˜ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì–´ìš”:</p>\n<p>ì„¹ì…˜ 1: GitHub Actionsë¥¼ ì‚¬ìš©í•´ í…Œë¼í¼ì„ í™œìš©í•´ AWS ì¸í”„ë¼ ë°°í¬ë¥¼ ìë™í™”í•˜ê¸°.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>Section 2: EC2 êµ¬ì„±, Kubernetes (K3s) ì„¤ì¹˜ ë° Ansibleì„ ì‚¬ìš©í•˜ì—¬ MERN ì•± ë°°í¬í•˜ê¸°.</p>\n<p>Section 3: GitHub Actionsë¥¼ ì‚¬ìš©í•œ Kubernetes (K3s)ì—ì„œ MERN ì•±ì„ ìœ„í•œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±.</p>\n<p>ê·¸ëŸ¼, ì§€ê¸ˆ ê°€ë³´ì, ë§Œì•½ ì´ ê¸€ì— ëŒ€í•œ ì§ˆë¬¸ì´ ìˆê±°ë‚˜ ë„ì›€ì´ í•„ìš”í•˜ë©´ ì–¸ì œë“ ì§€ ì—°ë½í•´ ì£¼ì„¸ìš”.</p>\n<h1>ğŸ“˜Section 1: GitHub Actionsë¥¼ ì´ìš©í•˜ì—¬ Terraformì„ ì‚¬ìš©í•˜ì—¬ AWS ì¸í”„ë¼ ìë™í™”í•˜ê¸°</h1>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ìš°ì„  GitHubì—ì„œ Terraformì„ ì‚¬ìš©í•˜ì—¬ AWS ì¸í”„ë¼ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ GitHub ì•¡ì…˜ì„ ì´ìš©í•´ git ì €ì¥ì†Œ(terraform)ë¥¼ ë³µì œí•˜ì„¸ìš”.</p>\n<p>ë‹¨ê³„ 1: ë¡œì»¬ ë¨¸ì‹ ì—ì„œ ì €ì¥ì†Œë¥¼ ë³µì œí•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\">git clone <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//github.com/bjnandi/terraform-ci-cd-aws.git</span>\n</code></pre>\n<p>ë³µì œ í›„ì—ëŠ” VS Code í¸ì§‘ê¸°ì˜ Dev Containerì—ì„œ í•´ë‹¹ ì €ì¥ì†Œë¥¼ ì—½ë‹ˆë‹¤. Dev Containerë¥¼ ì‚¬ìš©í•˜ë©´ ì£¼ìš” ë¨¸ì‹ ìœ¼ë¡œë¶€í„° í™˜ê²½(Terraform)ì„ ê²©ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ë‹¨ê³„ 2: HCP Terraform Cloud ì„¤ì •í•˜ê¸°\nìš°ë¦¬ê°€ ìƒì„±í•  GitHub Actionì€ HCP Terraform Cloudì— ì—°ê²°í•˜ì—¬ êµ¬ì„±ì„ ê³„íší•˜ê³  ì ìš©í•  ê²ƒì…ë‹ˆë‹¤. ì•¡ì…˜ ì›Œí¬í”Œë¡œìš°ë¥¼ ì„¤ì •í•˜ê¸° ì „ì—, HCP Terraform Cloudì— ë¡œê·¸ì¸í•˜ê³  ì¡°ì§ ë‚´ì—ì„œ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•œ ë‹¤ìŒ AWS ìê²© ì¦ëª…ì„ HCP Terraform ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ì£¼ì„¸ìš”:</p>\n<p>ì¡°ì§ <code>ì›Œí¬ìŠ¤í˜ì´ìŠ¤</code> ë³€ìˆ˜</p>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_1.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p>ë‹¨ê³„ 3: API í† í° ìƒì„±í•˜ê¸°\nHCP Terraform ì‚¬ìš©ì API í† í°ì„ ìƒì„±í•˜ì„¸ìš”. ì´ë¥¼ ìœ„í•´ HCP Terraform ì‚¬ìš©ì ì„¤ì •ì˜ í† í° í˜ì´ì§€ë¡œ ì´ë™í•˜ì„¸ìš”. API í† í° ìƒì„±ì„ í´ë¦­í•œ ë‹¤ìŒ \"Generate token\"ì„ í´ë¦­í•˜ì—¬ GitHub Actions í† í°ì„ ì„¤ëª…ë€ì— ì…ë ¥í•˜ì„¸ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_2.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p><strong>ë‹¨ê³„ 4:</strong> GitHub Secretsì— GitHub ì €ì¥ì†Œì— API í† í°ì„ ì„¤ì •í•©ë‹ˆë‹¤.\nìì„¸í•œ ë‚´ìš©ì€ GitHub Secretsì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ì‹œí¬ë¦¿ê³¼ ë³€ìˆ˜ë¡œ ì´ë™í•˜ì—¬ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.</p>\n<p>GitHub <code>ì €ì¥ì†Œ ì´ë¦„</code> ì„¤ì • <code>ì‹œí¬ë¦¿ê³¼ ë³€ìˆ˜</code> ì‘ì—… <code>ì €ì¥ì†Œ ì‹œí¬ë¦¿</code> ìƒˆ ì €ì¥ì†Œ ì‹œí¬ë¦¿ :</p>\n<p>TF_API_TOKEN: HCP Terraform ì‚¬ìš©ì ì„¤ì •ì—ì„œ ìƒì„±ëœ API í† í°ì…ë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_3.png\">\n<p>5ë‹¨ê³„: VS Code í¸ì§‘ê¸°ë¡œ ëŒì•„ê°€ì„œ \"tf-infa-test\"ë¼ëŠ” ì´ë¦„ì˜ ìƒˆ ë¸Œëœì¹˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\">git checkout -b <span class=\"hljs-string\">'tf-infa-test'</span>\n</code></pre>\n<p>ê·¸ëŸ° ë‹¤ìŒ \"env/dev\" ë””ë ‰í† ë¦¬ì˜ main.tf íŒŒì¼ì„ ì—½ë‹ˆë‹¤. HCP Terraformì—ì„œ ìƒì„±ëœ HCP Terraform ì¡°ì§ ë° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì´ë¦„ìœ¼ë¡œ \"organization\"ê³¼ \"workspaces\"ë¥¼ ì„¤ì •í•œ ë‹¤ìŒ íŒŒì¼ì„ ì €ì¥í•˜ì„¸ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<pre><code class=\"hljs language-js\">  cloud {\n    organization = <span class=\"hljs-string\">\"YOUR-ORGANIZATION-HERE\"</span>\n\n    workspaces {\n      name = <span class=\"hljs-string\">\"YOUR-WORKS-SPACE\"</span>\n    }\n  }\n</code></pre>\n<p>ê·¸ëŸ° ë‹¤ìŒ \".github/workflows/\" ë””ë ‰í† ë¦¬ì—ì„œ ë‘ ê°œì˜ ì›Œí¬í”Œë¡œ íŒŒì¼ (terraform-plan.yml ë° terraform-plan.yml)ì„ ì—½ë‹ˆë‹¤.</p>\n<ul>\n<li>terraform-plan.yml</li>\n<li>terraform-plan.yml</li>\n</ul>\n<p>â€œTF_CLOUD_ORGANIZATIONâ€ ë° â€œTF_WORKSPACEâ€ë¥¼ HCP Terraform ì¡°ì§ ë° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì˜ ì´ë¦„ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  íŒŒì¼ì„ ì €ì¥í•˜ì„¸ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>6ë‹¨ê³„: ì €í¬ì˜ í…Œë¼í¼ íŒŒì¼ êµ¬ì¡°ëŠ” ë£¨íŠ¸ ì‘ì—… ë””ë ‰í† ë¦¬ê°€ \"env/dev\"ì¸ ë¸”ë£¨í”„ë¦°íŠ¸ ëª¨ë¸ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ HCP í…Œë¼í¼ í´ë¼ìš°ë“œì—ì„œ í…Œë¼í¼ ì‘ì—… ë””ë ‰í† ë¦¬ì— \"env/dev\"ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ë¥¼ ìœ„í•´ í…Œë¼í¼ í´ë¼ìš°ë“œë¡œ ì´ë™í•˜ì‹­ì‹œì˜¤:</p>\n<p>Organizations <code>Workspaces</code> Workspace Name <code>Setting</code> Terraform Working Directory</p>\n<pre><code class=\"hljs language-js\">env / dev;\n</code></pre>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ì•„ë˜ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”.</p>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_4.png\" alt=\"image\"></p>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ \"Save settings\"ë¥¼ í´ë¦­í•˜ì„¸ìš”.</p>\n<p>ì´ì œ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ì„ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p><strong>ë‹¨ê³„ 7: í’€ ë¦¬í€˜ìŠ¤íŠ¸ ìƒì„±í•˜ê¸°</strong>\nì´ì œ VS Code í¸ì§‘ê¸°ë¡œ ëŒì•„ê°€ì„œ ë°ëª¨ í…ŒìŠ¤íŠ¸ìš© ì½”ë“œë¥¼ ì•½ê°„ ìˆ˜ì •í•œ í›„, í•´ë‹¹ ì½”ë“œë¥¼ GitHub \"tf-infa-test\" ë¸Œëœì¹˜ì— ì»¤ë°‹í•˜ê³  í‘¸ì‹œí•˜ì„¸ìš”. ê·¸ëŸ° ë‹¤ìŒ GitHubì—ì„œ ì´ ë¸Œëœì¹˜ì— ëŒ€í•œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ì„¸ìš”.</p>\n<p>í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ìƒì„±í•œ í›„ GitHub ì›Œí¬í”Œë¡œìš°(í…Œë¼í¼ í”Œëœ)ë¥¼ ì‹¤í–‰í•˜ì—¬ í…Œë¼í¼ í”Œëœì„ í™•ì¸í•˜ì„¸ìš”.</p>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_5.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p><strong>ë‹¨ê³„ 8: í’€ ë¦¬í€˜ìŠ¤íŠ¸ ê²€í†  ë° ë³‘í•©</strong>\n\"Terraform plan\"ì— ë§Œì¡±í•œë‹¤ë©´, 'main' ë¸Œëœì¹˜ì— 'ë³‘í•©' ì½”ë“œë¡œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë‹«ì€ ë‹¤ìŒ ì¸í”„ë¼ êµ¬ì¶•ì„ ìœ„í•´ ì›Œí¬í”Œë¡œìš°(í…Œë¼í¼ ì• í”Œë¼ì´)ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_6.png\" alt=\"Step 9\"></p>\n<p>9ë‹¨ê³„: í”„ë¡œë¹„ì „ëœ EC2 ì¸ìŠ¤í„´ìŠ¤ í™•ì¸</p>\n<p>ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_7.png\" alt=\"Step 9\"></p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h1>ğŸ“˜ ì„¹ì…˜ 2: EC2 êµ¬ì„±, Kubernetes (K3s) ì„¤ì¹˜ ë° Ansibleë¥¼ ì‚¬ìš©í•˜ì—¬ MERN ì•± ë°°í¬</h1>\n<p>ì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ì´ ì™„ë£Œë˜ë©´ GitHubì˜ ë‘ ë²ˆì§¸ git ì €ì¥ì†Œ (Ansible)ë¡œ ì´ë™í•˜ì—¬ AWS EC2ë¥¼ êµ¬ì„±í•˜ê³  Kubernetes (K3s)ë¥¼ ì„¤ì¹˜í•˜ê³  Ansibleë¥¼ ì‚¬ìš©í•˜ì—¬ MERN ì•±ì„ ë°°í¬í•©ë‹ˆë‹¤.</p>\n<p>ë‹¨ê³„ 1: ë¡œì»¬ ë¨¸ì‹ ì—ì„œ ì €ì¥ì†Œë¥¼ ë³µì œí•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\">git clone <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//github.com/bjnandi/ansible-k3s-nginx-lb.git</span>\n</code></pre>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ê¹ƒ ì €ì¥ì†Œë¥¼ ë³µì œí•œ í›„, VS Codeì˜ Dev Containerì—ì„œ ì—´ì–´ë³´ì„¸ìš”. Dev ContainerëŠ” í™˜ê²½(Ansible)ì„ ë©”ì¸ ë¨¸ì‹ ê³¼ ê²©ë¦¬ì‹œí‚µë‹ˆë‹¤.</p>\n<p>ë‹¨ê³„ 2: SSH í‚¤ë¥¼ ìœ„í•´ \".ssh\" í´ë”ì— \"linux.pem\" íŒŒì¼ì„ ë§Œë“œì„¸ìš”.</p>\n<pre><code class=\"hljs language-bash\">nano ~/.ssh/linux.pem\n</code></pre>\n<p>ì—¬ê¸°ì— \"pem\" íŒŒì¼ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ê³  íŒŒì¼ì„ ì €ì¥í•˜ì„¸ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>Step 3: \"linux.pem\" íŒŒì¼ì˜ ê¶Œí•œì„ ì„¤ì •í•˜ì„¸ìš”</p>\n<pre><code class=\"hljs language-js\">chmod <span class=\"hljs-number\">400</span> ~<span class=\"hljs-regexp\">/.ssh/</span>linux.<span class=\"hljs-property\">pem</span>\n</code></pre>\n<p>Step 4: ì´ì œ ë””ë ‰í† ë¦¬ì˜ ê¶Œí•œì„ ì„¤ì •í•˜ì„¸ìš”. Dev ContainerëŠ” ëª¨ë“  ì‚¬ìš©ìì— ëŒ€í•´ ê¸°ë³¸ ê¶Œí•œìœ¼ë¡œ ë””ë ‰í† ë¦¬ë¥¼ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\">chmod <span class=\"hljs-number\">755</span> /workspaces/ansible-k3s-nginx-lb\n</code></pre>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ë‹¨ê³„ 5: ì´ì œ ìš°ë¦¬ì˜ AWS EC2 IP ì£¼ì†Œë¡œ IP ì£¼ì†Œë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.</p>\n<ul>\n<li>\n<p>â€œhostsâ€ íŒŒì¼ì—ì„œ:</p>\n</li>\n<li>\n<p>bastion (ê³µìš© IP)</p>\n</li>\n<li>\n<p>k3s_nodes, additional_agent_nodes ë° nginx_lb (ì‚¬ì„¤ IP)</p>\n</li>\n<li>\n<p>nginx_lb(ì‚¬ì„¤ IP)</p>\n</li>\n<li>\n<p>ProxyCommandìš© (ê³µìš© IP)</p>\n</li>\n</ul>\n<pre><code class=\"hljs language-js\">[bastion]\nbastion ansible_host=<span class=\"hljs-number\">34.195</span><span class=\"hljs-number\">.33</span><span class=\"hljs-number\">.137</span>\n[<span class=\"hljs-attr\">bastion</span>:vars]\nansible_user=ubuntu\nansible_ssh_private_key_file=~<span class=\"hljs-regexp\">/.ssh/</span>linux.<span class=\"hljs-property\">pem</span>\n\n[k3s_nodes]\nmaster ansible_host=<span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-number\">.222</span>\n[<span class=\"hljs-attr\">k3s_nodes</span>:vars]\nansible_user=ubuntu\nansible_ssh_private_key_file=~<span class=\"hljs-regexp\">/.ssh/</span>linux.<span class=\"hljs-property\">pem</span>\nansible_ssh_common_args=<span class=\"hljs-string\">'-o ProxyCommand=\"ssh -o StrictHostKeyChecking=no -i ~/.ssh/linux.pem -W %h:%p -q ubuntu@34.195.33.137\"'</span>\n\n[additional_agent_nodes]\nworker1 ansible_host=<span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.2</span><span class=\"hljs-number\">.244</span>\nworker2 ansible_host=<span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-number\">.236</span>\n[<span class=\"hljs-attr\">additional_agent_nodes</span>:vars]\nansible_user=ubuntu\nansible_ssh_private_key_file=~<span class=\"hljs-regexp\">/.ssh/</span>linux.<span class=\"hljs-property\">pem</span>\nansible_ssh_common_args=<span class=\"hljs-string\">'-o ProxyCommand=\" ssh -o StrictHostKeyChecking=no -i ~/.ssh/linux.pem -W %h:%p -q ubuntu@34.195.33.137\"'</span>\n\n[nginx_lb]\nnginx_lb ansible_host=<span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.5</span><span class=\"hljs-number\">.187</span>\n[<span class=\"hljs-attr\">nginx_lb</span>:vars]\nansible_user=ubuntu\nansible_ssh_private_key_file=~<span class=\"hljs-regexp\">/.ssh/</span>linux.<span class=\"hljs-property\">pem</span>\nansible_ssh_common_args=<span class=\"hljs-string\">'-o ProxyCommand=\" ssh -o StrictHostKeyChecking=no -i ~/.ssh/linux.pem -W %h:%p -q ubuntu@34.195.33.137\"'</span>\n</code></pre>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ol start=\"2\">\n<li>\"nginx.conf\" íŒŒì¼ì—ì„œ:</li>\n</ol>\n<ul>\n<li>ì—…ìŠ¤íŠ¸ë¦¼ í´ë¼ì´ì–¸íŠ¸ ë° API ì„œë²„</li>\n</ul>\n<pre><code class=\"hljs language-js\">   upstream client {\n        server <span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-number\">.222</span>:<span class=\"hljs-number\">30001</span>; # ê·€í•˜ì˜ <span class=\"hljs-title class_\">EC2</span> ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ <span class=\"hljs-variable constant_\">IP</span>ë¡œ êµì²´í•˜ì„¸ìš”\n        server <span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.2</span><span class=\"hljs-number\">.244</span>:<span class=\"hljs-number\">30001</span>; # ê·€í•˜ì˜ <span class=\"hljs-title class_\">EC2</span> ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ <span class=\"hljs-variable constant_\">IP</span>ë¡œ êµì²´í•˜ì„¸ìš”\n        server <span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-number\">.236</span>:<span class=\"hljs-number\">30001</span>; # ê·€í•˜ì˜ <span class=\"hljs-title class_\">EC2</span> ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ <span class=\"hljs-variable constant_\">IP</span>ë¡œ êµì²´í•˜ì„¸ìš”\n    }\n\n    upstream apiserver {\n        server <span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-number\">.222</span>:<span class=\"hljs-number\">30005</span>;  # ê·€í•˜ì˜ <span class=\"hljs-title class_\">EC2</span> ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ <span class=\"hljs-variable constant_\">IP</span>ë¡œ êµì²´í•˜ì„¸ìš”\n        server <span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.2</span><span class=\"hljs-number\">.244</span>:<span class=\"hljs-number\">30005</span>; # ê·€í•˜ì˜ <span class=\"hljs-title class_\">EC2</span> ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ <span class=\"hljs-variable constant_\">IP</span>ë¡œ êµì²´í•˜ì„¸ìš”\n        server <span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-number\">.236</span>:<span class=\"hljs-number\">30005</span>; # ê·€í•˜ì˜ <span class=\"hljs-title class_\">EC2</span> ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì„¤ <span class=\"hljs-variable constant_\">IP</span>ë¡œ êµì²´í•˜ì„¸ìš”\n    }\n</code></pre>\n<ol start=\"3\">\n<li>ì´ì œ \"project_vars\" íŒŒì¼ì—ì„œ:</li>\n</ol>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-attr\">master_ip</span>: <span class=\"hljs-number\">10.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-number\">.222</span>\n</code></pre>\n<p>ë‹¨ê³„ 6: Ansible êµ¬ì„±ì´ ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤</p>\n<ul>\n<li>Makefileì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  êµ¬ì„±ì„ í•œ ì£¼ì„ì—ì„œ ì‹¤í–‰í•˜ë ¤ë©´:</li>\n</ul>\n<pre><code class=\"hljs language-js\">make run_ansible\n</code></pre>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>í•˜ë‚˜ì”© ì‹¤í–‰í•˜ë ¤ë©´:</li>\n</ul>\n<pre><code class=\"hljs language-js\"> ansible-playbook -i hosts k3s_install.<span class=\"hljs-property\">yaml</span>\n\n ansible-playbook -i hosts k3s_mern_deploy.<span class=\"hljs-property\">yaml</span>\n\n ansible-playbook -i hosts config_nginx_lb.<span class=\"hljs-property\">yaml</span>\n\n ansible-playbook -i hosts config_bastion.<span class=\"hljs-property\">yaml</span>\n</code></pre>\n<p>ì´ì œ, ëª¨ë“  EC2ë¥¼ êµ¬ì„±í•˜ê³  Kubernetes(k3s)ë¥¼ ì„¤ì¹˜í•œ ë‹¤ìŒ Kubernetes(k3s)ì— MERN ì•±ì„ ë°°í¬í•©ë‹ˆë‹¤.</p>\n<p>ë‹¨ê³„ 7: ì´ì œ ë„ë©”ì¸ DNS ì„¤ì •ìœ¼ë¡œ ì´ë™í•˜ì—¬ \"A\" ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. ì €í¬ ë„ë©”ì¸ì€ Squarespaceì—ì„œ ì œê³µí•©ë‹ˆë‹¤. ê·¸ë˜ì„œ, Squarespace DNS ì„¤ì •ì—ì„œ ì´ ë„ë©”ì¸ DNSë¥¼ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ìš°ë¦¬ ì•±ì— ëŒ€í•´ EC2 ì¸ìŠ¤í„´ìŠ¤(ê°œë°œ ë¡œë“œë°¸ëŸ°ì„œ)ì˜ ê³µê°œ IPë¡œ ë‘ ê°œì˜ ì‚¬ìš©ì ì •ì˜ \"A\" ë ˆì½”ë“œë¥¼ ì¶”ê°€í–ˆì–´ìš”.</p>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_8.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p>ë‹¨ê³„ 8: ì´ì œ ë„ë©”ì¸ì„ ì‚¬ìš©í•˜ì—¬ ì•±ì„ ë³´ì—¬ì¤„ ì°¨ë¡€ì—ìš”.</p>\n<p>ì´ ë„ë©”ì¸(<a href=\"http://bjtechlife.com)%EC%97%90%EC%84%9C\" rel=\"nofollow\" target=\"_blank\">http://bjtechlife.com)ì—ì„œ</a> ìš°ë¦¬ ì•±ì„ ë´¤ì–´ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ë§Œì•½ Docker Hub repository ì´ë¯¸ì§€ê°€ ìˆê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ Docker Hubì— í‘¸ì‹œí–ˆë‹¤ë©´, ë¨¼ì € ì¶œë ¥ì—ì„œ ì•± UIë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° (ì„¹ì…˜ 3)ë¥¼ ì™„ë£Œí•œ ë‹¤ìŒ ì¶œë ¥ì—ì„œ ì•± UIë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_9.png\" alt=\"\"></p>\n<h1>ğŸ“˜ì„¸ì…˜ 3: Kubernetes (k3s)ì—ì„œ MERN ì•±ì„ ìœ„í•œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•í•˜ê¸° (GitHub Actions ì‚¬ìš©)</h1>\n<p>EC2 êµ¬ì„±, (k3s) ì„¤ì¹˜ ë° ì•± ë°°í¬ë¥¼ ì™„ë£Œí•˜ê³ , AWS EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ Kubernetes (k3s)ì—ì„œ MERN ì•±ì„ ìœ„í•œ CI/CD íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ê¸° ìœ„í•´ GitHubì˜ ì„¸ ë²ˆì§¸ git ì €ì¥ì†Œ(MERN í”„ë¡œì íŠ¸)ë¡œ ì´ë™í•˜ì„¸ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ìŠ¤í… 1: ë¡œì»¬ ë¨¸ì‹ ì—ì„œ ì €ì¥ì†Œë¥¼ ë³µì œí•˜ì„¸ìš”</p>\n<pre><code class=\"hljs language-js\">git clone <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//github.com/bjnandi/ci-cd-pipeline-MERN-k3s.git</span>\n</code></pre>\n<p>ë³µì œí•œ í›„, VS Code ì—ë””í„°ì—ì„œ ì—´ì–´ì£¼ì„¸ìš”.</p>\n<p>\".github/workflows/\" ë””ë ‰í† ë¦¬ì— ë‘ ê°œì˜ ì›Œí¬í”Œë¡œìš° íŒŒì¼ (docker-ci ë° k3s-cd)ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>docker-ci.yml</li>\n<li>k3s-cd.yml</li>\n</ul>\n<p>ì²« ë²ˆì§¸ ì›Œí¬í”Œë¡œìš° \"docker-ci.yml\" íŒŒì¼ì€ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ Docker Hubì— í‘¸ì‹œí•˜ê³ , ë‹¤ë¥¸ ì›Œí¬í”Œë¡œìš° \"k3s-cd.yml\" íŒŒì¼ì€ Kubernetes(k3s)ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.</p>\n<p>ë‹¨ê³„ 2: ì´ì œ GitHub Secretsë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ì±„ì›Œë„£ì–´ì•¼í•©ë‹ˆë‹¤. GitHub ë¦¬í¬ì§€í† ë¦¬ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ì •ë³´ëŠ” GitHub Secretsì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ì‹œí¬ë¦¿ê³¼ ë³€ìˆ˜ë¡œ ì´ë™í•˜ì—¬ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.</p>\n<p>Github <code>Repo Name</code> ì„¤ì • <code>Secrets and variables</code> ì‘ì—… <code>Repository Secrets</code> ìƒˆ ë¦¬í¬ì§€í† ë¦¬ ì‹œí¬ë¦¿ :</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>EC2_HOST: ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ê³µê°œ IP ì£¼ì†ŒëŠ” ëŒ€ëµ ì´ì™€ ê°™ì„ ê²ƒì…ë‹ˆë‹¤. \"34.195.33.137\".</p>\n<p>MASTER_NODE: k8s-instance-master EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì‚¬ì„¤ IP ì£¼ì†ŒëŠ” ëŒ€ëµ ì´ì™€ ê°™ì„ ê²ƒì…ë‹ˆë‹¤. \"10.0.1.222\".</p>\n<p>EC2_USERNAME: EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì‚¬ìš©ì ì´ë¦„ì€ ì¼ë°˜ì ìœ¼ë¡œ \"ubuntu\"ì…ë‹ˆë‹¤.</p>\n<p>SSH_PRIVATE_KEY: ì¸ìŠ¤í„´ìŠ¤ì— ë¡œê·¸ì¸í•˜ëŠ” ë° ì‚¬ìš©í•  â€œ.pemâ€ íŒŒì¼ì…ë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>DOCKER_USERNAME: ì´ê²ƒì€ ë„ì»¤ í—ˆë¸Œ ê³„ì • í”„ë¡œí•„ë¡œ ì´ë™í•˜ë©´ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë„ì»¤ í—ˆë¸Œì˜ \"ì‚¬ìš©ì ì´ë¦„\"ì…ë‹ˆë‹¤. ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë„ì»¤ í—ˆë¸Œì— í‘¸ì‹œí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<p>DOCKER_PASSWORD: ì´ê²ƒì€ ë„ì»¤ í—ˆë¸Œ ê³„ì •ì˜ \"ë¹„ë°€ë²ˆí˜¸\"ì…ë‹ˆë‹¤.</p>\n<p><img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_10.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p>ë‹¨ê³„ 3: \"VS Code Editor\"ë¡œ ëŒì•„ê°€ì„œ ë°ëª¨ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì½”ë“œë‚˜ UI íŒŒì¼ì„ í¸ì§‘í•˜ê±°ë‚˜ ì‘ì€ ë³€ê²½ ì‚¬í•­ì„ ìˆ˜í–‰í•œ í›„, í˜„ì¬ íŒŒì¼ì—ì„œ ì•±ì˜ CI/CD í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ GitHubì˜ \"main\" ë¸Œëœì¹˜ì— ì½”ë“œë¥¼ ì»¤ë°‹í•˜ê³  í‘¸ì‹œí•˜ì„¸ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ê³ ê°ë‹˜, <code>src</code> í´ë”ì˜ <code>components</code> í´ë” ì•ˆì— ìˆëŠ” <code>Navbar.js</code> íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>\"CRUD\" í…ìŠ¤íŠ¸ë¥¼ \"CRUD test\"ë¡œ ë³€ê²½í•œ ë‹¤ìŒ, ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•˜ê³  ë©”ì¸ ë¸Œëœì¹˜ì— í‘¸ì‹œí•˜ì„¸ìš”.</p>\n<img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_11.png\">\n<p>ë¹Œë“œ, í‘¸ì‹œ, ê·¸ë¦¬ê³  ë°°í¬í•˜ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ì•± UI(<a href=\"http://bjtechlife.com)%EC%97%90\" rel=\"nofollow\" target=\"_blank\">http://bjtechlife.com)ì—</a> ë³€ê²½ ì‚¬í•­ì´ í‘œì‹œë˜ê³  ë°ì´í„°ë¥¼ ì‚½ì…í•˜ëŠ” ê²ƒê³¼ ê°™ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<img src=\"/assets/img/2024-05-18-BuildanEnd-to-EndCICDPipelineforaMERNAppinKuberneteswithTerraformusingGitHubActionsAnsible_12.png\">\n<p>ì™€ìš°! ğŸ˜ğŸš€ ì—¬ê¸°ì—ëŠ” ìš°ë¦¬ê°€ ì½”ë“œì—ì„œ ë³€ê²½í•œ \"CRUD í…ŒìŠ¤íŠ¸\"ê°€ ë‚˜ì™€ ìˆë„¤ìš”.</p>\n<p>ì €í¬ ì•± UIì—ì„œ ì„œë¡œ ë‹¤ë¥¸ ë³€ê²½ì„ ê³„ì†í•´ì„œ ì ìš©í•˜ë©´ ë³€ê²½ ì‚¬í•­ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>\n<p>ê²°ê³¼ì ìœ¼ë¡œ, GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ Kubernetes(k3s)ì—ì„œ MERN ì•±ì„ ìœ„í•œ ì—”ë“œ íˆ¬ ì—”ë“œ CI/CD íŒŒì´í”„ë¼ì¸ì„ ì™„ë£Œí–ˆì–´ìš”.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ğŸŒŸì¶•í•˜í•©ë‹ˆë‹¤!!ğŸŒŸ, ì €í¬ê°€ GitHub Actions ë° Ansibleì„ ì‚¬ìš©í•˜ì—¬ Kubernetesì—ì„œ Terraformì„ í™œìš©í•˜ì—¬ MERN ì•±ì„ ìœ„í•œ End-to-End CI/CD íŒŒì´í”„ë¼ì¸ì„ ì„±ê³µì ìœ¼ë¡œ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.</p>\n<p>âœ¨ì´ì œ AWSì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê±°í•  ì‹œê°„ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ, Terraform ì €ì¥ì†Œ VS Code í¸ì§‘ê¸° í„°ë¯¸ë„(/workspaces/terraform-ci-cd-aws/env/dev)ë¡œ ëŒì•„ê°€ì„œ ë‹¤ìŒì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”:</p>\n<pre><code class=\"hljs language-js\">terraform login\nterraform init\nterraform destroy -auto-approve\n</code></pre>\n<p>ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ì €ì™€ í•¨ê»˜ ì˜¤ë˜ ì§‘ì¤‘í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œ ë˜ ë‹¤ë¥¸ ì£¼ì œë¡œ í¬ìŠ¤íŒ…í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h1>K8s #ì¿ ë²„ë„¤í‹°ìŠ¤ #k3s #í…Œë¼í¼ #ì•¤ì„œë¸” #MERN #í’€ìŠ¤íƒ #ë„ì»¤ #ì›¹ì• í”Œë¦¬ì¼€ì´ì…˜ #ì»¨í…Œì´ë„ˆí™” #ë°ë¸Œì˜µìŠ¤ #ì»¨í…Œì´ë„ˆí™”ëœì•± #EC2 #MERNìŠ¤íƒ #ë„ì»¤í™”ëœì›¹ì•± #MERNì•± #ë„ì»¤ì»¨í…Œì´ë„ˆ #CI/CD íŒŒì´í”„ë¼ì¸ #GitHub ì•¡ì…˜ #ì œë¡œë‹¤ìš´íƒ€ì„ #CI/CD #ìë™í™” #ë°°í¬ #ê¸°ìˆ íŒ</h1>\n<p>ë§Œì¼ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ í…Œë¼í¼ì„ ì‚¬ìš©í•˜ì—¬ GitHub ì•¡ì…˜ ë° ì•¤ì„œë¸”ì„ ì´ìš©í•´ MERN ì•±ì„ ìœ„í•œ ì—”ë“œ íˆ¬ ì—”ë“œ CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ ì–¸ì œë“ ì§€ ì €ì—ê²Œ ì—°ë½í•´ ì£¼ì„¸ìš”. ìµœì„ ì„ ë‹¤í•´ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.</p>\n<h1>í‰ë¬¸ìœ¼ë¡œ ğŸš€</h1>\n<p>In Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>ì‘ê°€ë¥¼ ì‘ì›í•˜ê³  íŒ”ë¡œìš°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”! ğŸ‘</li>\n<li>íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°</li>\n<li>ë‹¤ë¥¸ í”Œë«í¼ë„ ë°©ë¬¸í•´ë³´ì„¸ìš”: Stackademic | CoFeed | Venture | Cubed</li>\n<li>ì•Œê³ ë¦¬ì¦˜ ì½˜í…ì¸ ë¥¼ ë‹¤ë£¨ë„ë¡ ê°•ìš”í•˜ëŠ” ë¸”ë¡œê¹… í”Œë«í¼ì— ì§€ì³¤ë‚˜ìš”? Differë¥¼ ì‹œë„í•´ë³´ì„¸ìš”</li>\n<li>ë” ë§ì€ ì½˜í…ì¸ ëŠ” PlainEnglish.ioì—ì„œ í™•ì¸í•˜ì„¸ìš”</li>\n</ul>\n</body>\n</html>\n"},"__N_SSG":true}