{"pageProps":{"post":{"title":"테스트 더블이란 무엇이며 RSpec 3에서 어떻게 사용하는 지","description":"","date":"2024-06-19 22:21","slug":"2024-06-19-WhatAreTestDoublesandHowToUseTheminRSpec3","content":"\n![Test Doubles](/assets/img/2024-06-19-WhatAreTestDoublesandHowToUseTheminRSpec3_0.png)\n\n# 소프트웨어 개발에서의 테스트 더블 이해\n\n소프트웨어에 대한 테스트를 작성할 때, 종종 실제 객체나 의존성의 동작을 시뮬레이션하기 위해 \"테스트 더블\" 또는 \"모의 객체\"를 만들어야 합니다. 각각 특정 목적을 위해 사용되는 다양한 종류의 테스트 더블이 있습니다.\n\n# 테스트 더블의 종류\n\n<!-- ui-station 사각형 -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n테스트 더블은 사용 모드와 원본에 따라 분류할 수 있어요.\n\n## 사용 모드\n\nStub: Stub은 사이드 이펙트를 발생시키지 않고 값을 반환하는 쿼리 메소드를 시뮬레이트하는 데 사용돼요. 미리 정의된 캐너드 응답을 반환합니다.\n\n```js\n# LMS 코스 모델을 위한 Stub\nstub_course = double('Course', name: 'Ruby 입문', description: '루비 기초 학습')\n```\n\n<!-- ui-station 사각형 -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n모의 객체: 모의 객체는 값을 반환하는 것보다 부작용을 수행하는 명령 메서드를 테스트할 때 유용합니다. 특정 메시지가 수신되었는지 확인하고, 예상한 메시지가 수신되지 않으면 오류를 발생시킵니다.\n\n```js\n# LMS 등록 서비스용 모의 객체\nmock_enrollment_service = double('EnrollmentService')\nexpect(mock_enrollment_service).to receive(:enroll).with(user, course)\n```\n\n널 객체: 널 객체는 어떤 메시지에 대해 자신을 반환하는 친화적인 테스트 대역입니다. 여러 협력자가 있는 객체를 테스트할 때 유용합니다.\n\n```js\n# LMS 사용자용 널 객체\nnull_user = double('User').as_null_object\nnull_user.enroll_in_course(course)\n```\n\n<!-- ui-station 사각형 -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n스파이: 스파이들은 받은 메시지를 기록하여 특정 메시지가 올바른 매개변수로 호출되었음을 확인할 수 있게 해줍니다.\n\n```js\n# LMS 알림 서비스용 스파이\nspy_notification_service = spy('NotificationService')\nspy_notification_service.send_notification(user, '환영합니다!')\nexpect(spy_notification_service).to have_received(:send_notification).with(user, '환영합니다!')\n```\n\n## 원점\n\n테스트 더블의 사용 모드를 이해하는 것 외에도, 그 원점과 유형을 알아야 합니다. 테스트 더블은 순수한(pure), 부분적인(partial), 또는 확인(verify)할 수 있는 것으로, 각각 다른 목적을 제공합니다.\n\n<!-- ui-station 사각형 -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n순수 더블: 순수 더블은 RSpec과 같은 테스트 프레임워크에 의해 목적에 맞게 생성되며 해당 행동이 완전히 추가된 것으로 구성됩니다. 의존성을 전달할 수 있는 코드를 테스트하기 위해 유연하고 사용하기 쉽습니다.\n\n```js\n# LMS 강좌를 위한 순수 더블\npure_course = double('Course')\nallow(pure_course).to receive(:name).and_return('루비 입문')\n```\n\n부분 더블: 때로는 테스트 중인 코드가 간단한 의존성 주입을 허용하지 않을 수 있습니다. 이러한 경우 기존 Ruby 객체에 모의(Mocking) 및 스텁(Stubbing) 행동을 추가하는 부분 더블을 사용할 수 있습니다.\n\n```js\n# 내장된 Ruby Time 클래스의 부분 더블\nallow(Time).to receive(:now).and_return(Time.new(2023, 6, 1))\n```\n\n<!-- ui-station 사각형 -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n더블 검증: 더블 검증은 테스트 더블과 실제 의존성이 동기화되지 않을 때 문제를 찾는 데 도움이 됩니다. 더블의 인터페이스를 실제 클래스나 객체에 기반하여 제한하여 메서드 변경을 감지합니다.\n\n```js\n# LMS 사용자 클래스의 더블 검증\nuser = instance_double('User')\nallow(user).to receive(:enroll_in_course)\n```\n\n오버로드된 상수: 테스트 더블은 루비 상수를 바꾸거나 제거하여 테스트 기간 동안 환경을 제어할 수 있습니다.\n\n```js\n# 기본 등록 기간을 위한 상수 스텁\nstub_const('LMS::DEFAULT_ENROLLMENT_PERIOD', 7)\n```\n\n<!-- ui-station 사각형 -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n테스트 더블은 사용 모드와 원본을 모두 결합할 수 있어요. 예를 들어, 순수한 더블이 스텁으로 작동하거나 검증 더블이 스파이로 작동하는 경우가 있을 수 있어요.\n","ogImage":{"url":"/assets/img/2024-06-19-WhatAreTestDoublesandHowToUseTheminRSpec3_0.png"},"coverImage":"/assets/img/2024-06-19-WhatAreTestDoublesandHowToUseTheminRSpec3_0.png","tag":["Tech"],"readingTime":4},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p><img src=\"/assets/img/2024-06-19-WhatAreTestDoublesandHowToUseTheminRSpec3_0.png\" alt=\"Test Doubles\"></p>\n<h1>소프트웨어 개발에서의 테스트 더블 이해</h1>\n<p>소프트웨어에 대한 테스트를 작성할 때, 종종 실제 객체나 의존성의 동작을 시뮬레이션하기 위해 \"테스트 더블\" 또는 \"모의 객체\"를 만들어야 합니다. 각각 특정 목적을 위해 사용되는 다양한 종류의 테스트 더블이 있습니다.</p>\n<h1>테스트 더블의 종류</h1>\n<!-- ui-station 사각형 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>테스트 더블은 사용 모드와 원본에 따라 분류할 수 있어요.</p>\n<h2>사용 모드</h2>\n<p>Stub: Stub은 사이드 이펙트를 발생시키지 않고 값을 반환하는 쿼리 메소드를 시뮬레이트하는 데 사용돼요. 미리 정의된 캐너드 응답을 반환합니다.</p>\n<pre><code class=\"hljs language-js\"># <span class=\"hljs-variable constant_\">LMS</span> 코스 모델을 위한 <span class=\"hljs-title class_\">Stub</span>\nstub_course = <span class=\"hljs-title function_\">double</span>(<span class=\"hljs-string\">'Course'</span>, <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'Ruby 입문'</span>, <span class=\"hljs-attr\">description</span>: <span class=\"hljs-string\">'루비 기초 학습'</span>)\n</code></pre>\n<!-- ui-station 사각형 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>모의 객체: 모의 객체는 값을 반환하는 것보다 부작용을 수행하는 명령 메서드를 테스트할 때 유용합니다. 특정 메시지가 수신되었는지 확인하고, 예상한 메시지가 수신되지 않으면 오류를 발생시킵니다.</p>\n<pre><code class=\"hljs language-js\"># <span class=\"hljs-variable constant_\">LMS</span> 등록 서비스용 모의 객체\nmock_enrollment_service = <span class=\"hljs-title function_\">double</span>(<span class=\"hljs-string\">'EnrollmentService'</span>)\n<span class=\"hljs-title function_\">expect</span>(mock_enrollment_service).<span class=\"hljs-property\">to</span> <span class=\"hljs-title function_\">receive</span>(:enroll).<span class=\"hljs-title function_\">with</span>(user, course)\n</code></pre>\n<p>널 객체: 널 객체는 어떤 메시지에 대해 자신을 반환하는 친화적인 테스트 대역입니다. 여러 협력자가 있는 객체를 테스트할 때 유용합니다.</p>\n<pre><code class=\"hljs language-js\"># <span class=\"hljs-variable constant_\">LMS</span> 사용자용 널 객체\nnull_user = <span class=\"hljs-title function_\">double</span>(<span class=\"hljs-string\">'User'</span>).<span class=\"hljs-property\">as_null_object</span>\nnull_user.<span class=\"hljs-title function_\">enroll_in_course</span>(course)\n</code></pre>\n<!-- ui-station 사각형 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>스파이: 스파이들은 받은 메시지를 기록하여 특정 메시지가 올바른 매개변수로 호출되었음을 확인할 수 있게 해줍니다.</p>\n<pre><code class=\"hljs language-js\"># <span class=\"hljs-variable constant_\">LMS</span> 알림 서비스용 스파이\nspy_notification_service = <span class=\"hljs-title function_\">spy</span>(<span class=\"hljs-string\">'NotificationService'</span>)\nspy_notification_service.<span class=\"hljs-title function_\">send_notification</span>(user, <span class=\"hljs-string\">'환영합니다!'</span>)\n<span class=\"hljs-title function_\">expect</span>(spy_notification_service).<span class=\"hljs-property\">to</span> <span class=\"hljs-title function_\">have_received</span>(:send_notification).<span class=\"hljs-title function_\">with</span>(user, <span class=\"hljs-string\">'환영합니다!'</span>)\n</code></pre>\n<h2>원점</h2>\n<p>테스트 더블의 사용 모드를 이해하는 것 외에도, 그 원점과 유형을 알아야 합니다. 테스트 더블은 순수한(pure), 부분적인(partial), 또는 확인(verify)할 수 있는 것으로, 각각 다른 목적을 제공합니다.</p>\n<!-- ui-station 사각형 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>순수 더블: 순수 더블은 RSpec과 같은 테스트 프레임워크에 의해 목적에 맞게 생성되며 해당 행동이 완전히 추가된 것으로 구성됩니다. 의존성을 전달할 수 있는 코드를 테스트하기 위해 유연하고 사용하기 쉽습니다.</p>\n<pre><code class=\"hljs language-js\"># <span class=\"hljs-variable constant_\">LMS</span> 강좌를 위한 순수 더블\npure_course = <span class=\"hljs-title function_\">double</span>(<span class=\"hljs-string\">'Course'</span>)\n<span class=\"hljs-title function_\">allow</span>(pure_course).<span class=\"hljs-property\">to</span> <span class=\"hljs-title function_\">receive</span>(:name).<span class=\"hljs-title function_\">and_return</span>(<span class=\"hljs-string\">'루비 입문'</span>)\n</code></pre>\n<p>부분 더블: 때로는 테스트 중인 코드가 간단한 의존성 주입을 허용하지 않을 수 있습니다. 이러한 경우 기존 Ruby 객체에 모의(Mocking) 및 스텁(Stubbing) 행동을 추가하는 부분 더블을 사용할 수 있습니다.</p>\n<pre><code class=\"hljs language-js\"># 내장된 <span class=\"hljs-title class_\">Ruby</span> <span class=\"hljs-title class_\">Time</span> 클래스의 부분 더블\n<span class=\"hljs-title function_\">allow</span>(<span class=\"hljs-title class_\">Time</span>).<span class=\"hljs-property\">to</span> <span class=\"hljs-title function_\">receive</span>(:now).<span class=\"hljs-title function_\">and_return</span>(<span class=\"hljs-title class_\">Time</span>.<span class=\"hljs-title function_\">new</span>(<span class=\"hljs-number\">2023</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">1</span>))\n</code></pre>\n<!-- ui-station 사각형 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>더블 검증: 더블 검증은 테스트 더블과 실제 의존성이 동기화되지 않을 때 문제를 찾는 데 도움이 됩니다. 더블의 인터페이스를 실제 클래스나 객체에 기반하여 제한하여 메서드 변경을 감지합니다.</p>\n<pre><code class=\"hljs language-js\"># <span class=\"hljs-variable constant_\">LMS</span> 사용자 클래스의 더블 검증\nuser = <span class=\"hljs-title function_\">instance_double</span>(<span class=\"hljs-string\">'User'</span>)\n<span class=\"hljs-title function_\">allow</span>(user).<span class=\"hljs-property\">to</span> <span class=\"hljs-title function_\">receive</span>(:enroll_in_course)\n</code></pre>\n<p>오버로드된 상수: 테스트 더블은 루비 상수를 바꾸거나 제거하여 테스트 기간 동안 환경을 제어할 수 있습니다.</p>\n<pre><code class=\"hljs language-js\"># 기본 등록 기간을 위한 상수 스텁\n<span class=\"hljs-title function_\">stub_const</span>(<span class=\"hljs-string\">'LMS::DEFAULT_ENROLLMENT_PERIOD'</span>, <span class=\"hljs-number\">7</span>)\n</code></pre>\n<!-- ui-station 사각형 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>테스트 더블은 사용 모드와 원본을 모두 결합할 수 있어요. 예를 들어, 순수한 더블이 스텁으로 작동하거나 검증 더블이 스파이로 작동하는 경우가 있을 수 있어요.</p>\n</body>\n</html>\n"},"__N_SSG":true}