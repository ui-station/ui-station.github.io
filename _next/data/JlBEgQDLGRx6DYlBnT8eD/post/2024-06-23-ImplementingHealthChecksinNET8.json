{"pageProps":{"post":{"title":"NET 8ì—ì„œ í—¬ìŠ¤ ì²´í¬ êµ¬í˜„í•˜ëŠ” ë°©ë²•","description":"","date":"2024-06-23 22:01","slug":"2024-06-23-ImplementingHealthChecksinNET8","content":"\n<img src=\"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_0.png\" />\n\nHealth checks are critical for monitoring the status of your applications and services. They offer a fast and automated method to ensure that your application's dependencies and components are functioning correctly.\n\nThis article will delve into how to implement health checks in a .NET 8 web application.\n\n## Why Health Checks in ASP.NET Applications?\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\ní—¬ìŠ¤ ì²´í¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ë¬¸ì œì ì„ ì‚¬ì „ì— ì‹ë³„í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ì–´ ì‚¬ìš©ìì— ì˜í–¥ì„ ë¯¸ì¹˜ê¸° ì „ì— ê·¸ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì£¼ëŠ” ì¤‘ìš”í•œ ë„êµ¬ì…ë‹ˆë‹¤. ì •ê¸°ì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ìš”ì†Œë“¤ì˜ ê±´ê°• ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì€ ë”ìš± ì‹ ë¢°ì„±ì´ ë†’ê³  ê²¬ê³ í•œ ì‹œìŠ¤í…œì„ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.\n\nASP.NET ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ë•Œ, ì´ëŠ” ì¢…ì¢… ë°ì´í„°ë² ì´ìŠ¤, íŒŒì¼ ì‹œìŠ¤í…œ, API ë“±ê³¼ ê°™ì€ ë‹¤ì–‘í•œ í•˜ìœ„ ì‹œìŠ¤í…œì— ì˜ì¡´í•©ë‹ˆë‹¤. ê°€ì¥ í”í•œ ì‹œë‚˜ë¦¬ì˜¤ ì¤‘ í•˜ë‚˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì˜ì¡´ì„±ì…ë‹ˆë‹¤. ì‚¬ì‹¤ ê±°ì˜ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì›í™œí•œ ìƒí˜¸ ì‘ìš©ì„ í•„ìš”ë¡œ í•˜ë©° ì´ëŠ” í•µì‹¬ ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œë¡œ ì‘ìš©í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê¸°ì¡´ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì€ ì¢…ì¢… ì´ ë¶€ë¶„ì„ ê°„ê³¼í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ê²°ì´ ëŠì–´ì§€ëŠ” ê²½ìš° ì ì¬ì ì¸ ê³ ì¥ì„ ì•¼ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì˜ˆë¥¼ ë“¤ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´í•˜ëŠ” ìƒí™©ì„ ìƒê°í•´ë´…ì‹œë‹¤. ë‹¤ì–‘í•œ ì´ìœ ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì—°ê²°ì´ ëŠê²¨ë²„ë¦¬ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë™í•˜ì§€ ì•Šì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì´ ìƒí™©ì€ í—¬ìŠ¤ ì²´í¬ê°€ ì™œ ìœ ìš©í•œì§€ì˜ ê¸°ë³¸ì ì¸ ì˜ˆì‹œì´ì§€ë§Œ, ê·¸ë“¤ì˜ ê°œë°œì˜ ì „ì²´ì ì¸ ë²”ìœ„ë¥¼ ì¶©ë¶„íˆ ì´í•´í•˜ê¸°ì—ëŠ” ë¶€ì¡±í•©ë‹ˆë‹¤. ë”°ë¼ì„œ,\n\n## ë°ì´í„°ë² ì´ìŠ¤ ì˜ˆì œë¥¼ ê¹Šê²Œ ë“¤ì–´ê°€ ASP.NET í—¬ìŠ¤ ì²´í¬ê°€ ì–´ë–»ê²Œ ë” í° ê·œëª¨ì—ì„œ ì¤‘ìš”í•œì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì„¤ì •í•˜ê¸° ì „ì— ë°ì´í„°ë² ì´ìŠ¤ì˜ ê°€ìš©ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\n  â€” â€” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¤‘ìš”í•œ í•˜ìœ„ ì‹œìŠ¤í…œì˜ ìƒíƒœì™€ ê°€ìš©ì„±ì„ ì‚¬ì „ì— í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ê°–ê³  ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”? ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ ëŠê²¨ ê°‘ì‘ìŠ¤ëŸ½ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ëŒ€ì‹ , ê°€ìš©ì„±ì„ ì„ í–‰ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤ë©´ ì¢‹ì§€ ì•Šì„ê¹Œìš”?\n- ë°ì´í„°ë² ì´ìŠ¤ ê°€ìš©ì„± ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìš°ì•„í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\n  â€” â€” ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì—ì„œ ì‚¬ìš©ì ì¹œí™”ì ì¸ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê°–ê³  ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”? ì‚¬ìš©ìë“¤ì„ í˜¼ë€ìŠ¤ëŸ½ê²Œ ë§Œë“œëŠ” ì•”í˜¸í™”ëœ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì•„ë‹Œ ì¤‘ìš” êµ¬ì„± ìš”ì†Œì˜ ê°€ìš©ì„±ì„ ì›í™œí•˜ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤ë©´ ì‚¬ìš©ì ê²½í—˜ì´ í–¥ìƒë˜ì§€ ì•Šì„ê¹Œìš”?\n- ê°€ìš©í•˜ì§€ ì•Šì„ ë•Œ ëŒ€ë¹„í•´ ëŒ€ì²´ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì›í™œí•˜ê²Œ ì „í™˜í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\n  â€” â€” ì£¼ ë°ì´í„°ë² ì´ìŠ¤ê°€ ê°€ìš©í•˜ì§€ ì•Šì„ ê²½ìš° ëŒ€ë¹„í•˜ì—¬ ëŒ€ì²´ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ìˆœì¡°ë¡­ê²Œ ì „í™˜í•  ìˆ˜ ìˆëŠ” ìœ ì—°ì„±ì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—°ì†ì„±ì„ ìœ ì§€í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì‚¬ìš©ìë“¤ì´ ìµœì†Œí•œì˜ ì¤‘ë‹¨ì´ ë°œìƒí•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\n- ìƒíƒœ í™•ì¸ì— ë”°ë¼ ëŒ€ì²´ í™˜ê²½ìœ¼ë¡œ ìŠ¤ìœ„ì¹˜í•  ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ ì§€ì‹œí•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\n  â€” â€” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ë¡œë“œ ë°¸ëŸ°ì„œì—ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ìƒìƒí•´ë³´ì„¸ìš”. ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—†ê±°ë‚˜ ë‹¤ë¥¸ ì‹¬ê°í•œ ë¬¸ì œë¡œ ì¸í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê±´ê°•í•˜ì§€ ì•Šë‹¤ê³  íŒë‹¨ë˜ë©´ ë¡œë“œ ë°¸ëŸ°ì„œëŠ” ì§€ëŠ¥ì ìœ¼ë¡œ íŠ¸ë˜í”½ì„ ëŒ€ì²´ í™˜ê²½ìœ¼ë¡œ ë¦¬ë””ë ‰ì…˜í•˜ì—¬ ì§€ì†ì ì¸ ì„œë¹„ìŠ¤ ê°€ìš©ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.\n\nASP.NET Health Checksë¥¼ í†µí•´ ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n- ì‹œìŠ¤í…œì˜ ê±´ê°• ìƒíƒœì™€ ê°€ìš©ì„±ì„ í‰ê°€í•©ë‹ˆë‹¤.\n- ë‹¤ë¥¸ ì‹œìŠ¤í…œì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê±´ê°• ìƒíƒœë¥¼ ì•Œë¦¬ê¸° ìœ„í•œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n- ë‹¤ë¥¸ ì‹œìŠ¤í…œì˜ ê±´ê°• í™•ì¸ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ ê±´ê°• í™•ì¸ ê¸°ëŠ¥ì€ ëŠìŠ¨í•˜ê²Œ ì—°ê²°ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ì†ë˜ì–´ ìˆëŠ” ì‹œìŠ¤í…œì˜ ê±´ê°•ì„ ì•Œì•„ì•¼ í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì„ ìœ„í•´ íŠ¹ë³„íˆ ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë‹¤ì–‘í•œ í•˜ìœ„ ì‹œìŠ¤í…œê³¼ ì¸í”„ë¼ì— ì˜ì¡´í•˜ëŠ” ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œë„ ìœ ìš©í•©ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# .Net 8ì—ì„œ ê±´ê°• ì ê²€ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•\n\n.NET 8ì—ì„œ ê±´ê°• ì ê²€ êµ¬ì„± ë°©ë²•ì„ ë‘ ê°€ì§€ë¡œ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n# ì„¹ì…˜ 1: ê¸°ë³¸ ê±´ê°• ì ê²€ ì„¤ì •\n\nì´ ì„¹ì…˜ì€ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê±´ê°• ì ê²€ì„ ìœ„í•œ ê¸°ì´ˆë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ëª©ì ì´ ìˆìŠµë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nNuGet íŒ¨í‚¤ì§€ ì„¤ì¹˜ í•„ìš”\në‹¤ìŒ NuGet íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:\n\n1. Microsoft.Extensions.Diagnostics.HealthChecks\n\nHealth Checks ì„œë¹„ìŠ¤ ì¶”ê°€\nProgram.csì— í•„ìš”í•œ í—¬ìŠ¤ ì²´í¬ ì„œë¹„ìŠ¤ë¥¼ DI ì»¨í…Œì´ë„ˆì— ì¶”ê°€í•˜ì„¸ìš”:\nProgram.cs\n\n```js\nbuilder.Services.AddHealthChecks();\n\n//HealthCheck Middleware\napp.MapHealthChecks(\"/api/health\");\n```\n\nì´ê²ƒë“¤ì„ .NET 8 ì›¹ APIì— ì¶”ê°€í•œ í›„, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰í•˜ì„¸ìš”. ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ ë‹¤ìŒ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•˜ì„¸ìš”:\nhttps://localhost:44333/swagger/feedbackservice/index.html\nì›¹ APIì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”:\nhttps://localhost:44333/api/health\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•œ ë’¤ì— ì›¹ APIê°€ \"Healthy\"ì„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-23-ImplementingHealthChecksinNET8_1.png)\n\nì´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•˜ë©´ ì›¹ APIê°€ \"Healthy\"ë¡œ í‘œì‹œë˜ëŠ” ê²ƒì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ë‹¨ê³„ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ì ì¸ ê±´ê°•ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê¸°ë³¸ ê±´ê°• ì ê²€ì´ ì„¤ì •ë˜ì–´ ìˆì§€ë§Œ ë¶€ì† ì‹œìŠ¤í…œì— ëŒ€í•œ êµ¬ì²´ì ì¸ ê±´ê°• ì ê²€ì€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŒì„ ì•Œë¦½ë‹ˆë‹¤.\n\n# ì„¹ì…˜ 2: ê±´ê°• ì ê²€ìœ¼ë¡œ êµ¬í˜„\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nê³ ê°ë‹˜ì„ ìœ„í•œ ê°œì¸í™”ëœ ê±´ê°• ì²´í¬ë¥¼ í†µí•œ ì²¨ë‹¨ ëª¨ë‹ˆí„°ë§\nì´ ì„¹ì…˜ì—ì„œëŠ” .NET 8 ì›¹ APIì˜ ì¤‘ìš” êµ¬ì„± ìš”ì†Œë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ë° ë§ì¶¤í˜• ê±´ê°• ì²´í¬ë¥¼ êµ¬í˜„í•˜ëŠ” êµ¬ì²´ì ì¸ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì²´í¬ëŠ” ê¸°ë³¸ ì„¤ì •ì„ ë›°ì–´ë„˜ì–´ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê±´ê°• ìƒíƒœì— ëŒ€í•œ ë³´ë‹¤ ìƒì„¸í•˜ê³  í†µì°°ë ¥ ìˆëŠ” ê´€ì ì„ ì œê³µí•©ë‹ˆë‹¤.\n\ní•„ìš”í•œ NuGet íŒ¨í‚¤ì§€\në‹¤ìŒ NuGet íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:\n\n1. Microsoft.Extensions.Diagnostics.HealthChecks\n2. AspNetCore.HealthChecks.SqlServer\n3. AspNetCore.HealthChecks.UI\n4. AspNetCore.HealthChecks.UI.Client\n5. AspNetCore.HealthChecks.UI.InMemory.Storage\n6. AspNetCore.HealthChecks.Uris\n\nì°¸ê³ : ë³„ë„ì˜ HealthCheck.cs íŒŒì¼ì„ ë§Œë“¤ê³  ëª¨ë“  ê±´ê°• ì²´í¬ êµ¬ì„±ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.\n\n## a. ë°ì´í„°ë² ì´ìŠ¤ ê±´ê°• ì²´í¬\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në°ì´í„°ë² ì´ìŠ¤ í—¬ìŠ¤ ì²´í¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì›°ë¹™ì„ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ì¤‘ìš”í•œ ì¸¡ë©´ì…ë‹ˆë‹¤. íŠ¹íˆ ë°ì´í„° ì €ì¥ ë° ê²€ìƒ‰ì„ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ë”ìš± ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ í—¬ìŠ¤ ì²´í¬ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—°ê²° ê°€ëŠ¥í•˜ê³  ì¿¼ë¦¬ì— ì‘ë‹µí•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\n\nHealthCheck.cs\n\n```csharp\npublic static void ConfigureHealthChecks(this IServiceCollection services, IConfiguration configuration)\n{\n    services.AddHealthChecks()\n        .AddSqlServer(configuration[\"ConnectionStrings:DefaultConnection\"], healthQuery: \"select 1\", name: \"SQL Server\", failureStatus: HealthStatus.Unhealthy, tags: new[] { \"Feedback\", \"Database\" });\n\n    //services.AddHealthChecksUI();\n    services.AddHealthChecksUI(opt =>\n    {\n        opt.SetEvaluationTimeInSeconds(10); //ì²´í¬ ê°„ ì‹œê°„(ì´ˆ)\n        opt.MaximumHistoryEntriesPerEndpoint(60); //ì²´í¬ íˆìŠ¤í† ë¦¬ ìµœëŒ€\n        opt.SetApiMaxActiveRequests(1); //API ìš”ì²­ ë™ì‹œì„±\n        opt.AddHealthCheckEndpoint(\"í”¼ë“œë°± API\", \"/api/health\"); //í—¬ìŠ¤ ì²´í¬ API ë§µí•‘\n\n    })\n        .AddInMemoryStorage();\n}\n```\n\n`configuration[\"ConnectionStrings:DefaultConnection\"]`ì€ êµ¬ì„±ì—ì„œ ì—°ê²° ë¬¸ìì—´ì„ ê²€ìƒ‰í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° êµ¬ì„±ì„ ìœ ì—°í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n`failureStatus: HealthStatus.Unhealthy`ëŠ” í—¬ìŠ¤ ì²´í¬ ì‹¤íŒ¨ ì‹œ ì „ì²´ í—¬ìŠ¤ ìƒíƒœë¥¼ ê±´ê°•í•˜ì§€ ì•ŠìŒìœ¼ë¡œ í‘œì‹œí•´ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\ní”„ë¡œê·¸ë¨.csì—ì„œ ConfigureHealthChecks()ë¥¼ êµ¬ì„±í•˜ì„¸ìš”.\n\n```js\n// Health Check êµ¬ì„±\nbuilder.Services.ConfigureHealthChecks(builder.Configuration);\n\n// Health Check ë¯¸ë“¤ì›¨ì–´\napp.MapHealthChecks(\"/api/health\", new HealthCheckOptions()\n{\n    Predicate = _ => true,\n    ResponseWriter = UIResponseWriter.WriteHealthCheckUIResponse\n});\napp.UseHealthChecksUI(delegate (Options options)\n{\n    options.UIPath = \"/healthcheck-ui\";\n    options.AddCustomStylesheet(\"./HealthCheck/Custom.css\");\n});\n```\n\nê²°ê³¼:\nEndpoint: /api/health\n\n<img src=\"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_2.png\" />\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì—”ë“œí¬ì¸íŠ¸: /healthcheck-ui\n\n![health-check-screenshot](/assets/img/2024-06-23-ImplementingHealthChecksinNET8_3.png)\n\n## b. ì›ê²© ì—”ë“œí¬ì¸íŠ¸ì˜ ê±´ê°• ìƒíƒœ í™•ì¸\n\në‹¤ìŒìœ¼ë¡œ, ì›ê²© ì—”ë“œí¬ì¸íŠ¸ ë° ë©”ëª¨ë¦¬ì˜ ê±´ê°• ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì‘ì—…ì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\nRemoteHealthCheck.cs\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```csharp\nusing Microsoft.Extensions.Diagnostics.HealthChecks;\nusing System;\nusing System.Net.Http;\nusing System.Threading;\nusing System.Threading.Tasks;\n\nnamespace FeedbackService.Api\n{\n    public class RemoteHealthCheck : IHealthCheck\n    {\n        private readonly IHttpClientFactory _httpClientFactory;\n        public RemoteHealthCheck(IHttpClientFactory httpClientFactory)\n        {\n            _httpClientFactory = httpClientFactory;\n        }\n        public async Task<HealthCheckResult> CheckHealthAsync(HealthCheckContext context, CancellationToken cancellationToken = new CancellationToken())\n        {\n            using (var httpClient = _httpClientFactory.CreateClient())\n            {\n                var response = await httpClient.GetAsync(\"https://api.ipify.org\");\n                if (response.IsSuccessStatusCode)\n                {\n                    return HealthCheckResult.Healthy($\"Remote endpoint is healthy.\");\n                }\n\n                return HealthCheckResult.Unhealthy(\"Remote endpoint is unhealthy\");\n            }\n        }\n    }\n}\n```\n\nì´ health checkì€ HTTP ìš”ì²­ì„ í†µí•´ ì›ê²© ì—”ë“œí¬ì¸íŠ¸(ì˜ˆ: API)ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.\n\n## b. ë©”ëª¨ë¦¬ í—¬ìŠ¤ ì²´í¬\n\në§ˆì§€ë§‰ìœ¼ë¡œ API ì„œë¹„ìŠ¤ì˜ ë©”ëª¨ë¦¬ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” health checkì„ êµ¬í˜„í•´ ë´…ì‹œë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nMemoryHealthCheck.cs\n\n```js\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing Microsoft.Extensions.Diagnostics.HealthChecks;\nusing Microsoft.Extensions.Options;\n\nnamespace FeedbackService.Api.HealthCheck\n{\n    public class MemoryHealthCheck : IHealthCheck\n    {\n        private readonly IOptionsMonitor<MemoryCheckOptions> _options;\n\n        public MemoryHealthCheck(IOptionsMonitor<MemoryCheckOptions> options)\n        {\n            _options = options;\n        }\n\n        public string Name => \"memory_check\";\n\n        public Task<HealthCheckResult> CheckHealthAsync(\n            HealthCheckContext context,\n            CancellationToken cancellationToken = default(CancellationToken))\n        {\n            var options = _options.Get(context.Registration.Name);\n\n            // Include GC information in the reported diagnostics.\n            var allocated = GC.GetTotalMemory(forceFullCollection: false);\n            var data = new Dictionary<string, object>()\n        {\n            { \"AllocatedBytes\", allocated },\n            { \"Gen0Collections\", GC.CollectionCount(0) },\n            { \"Gen1Collections\", GC.CollectionCount(1) },\n            { \"Gen2Collections\", GC.CollectionCount(2) },\n        };\n            var status = (allocated < options.Threshold) ? HealthStatus.Healthy : HealthStatus.Unhealthy;\n\n            return Task.FromResult(new HealthCheckResult(\n                status,\n                description: \"Reports degraded status if allocated bytes \" +\n                    $\">= {options.Threshold} bytes.\",\n                exception: null,\n                data: data));\n        }\n    }\n    public class MemoryCheckOptions\n    {\n        public string Memorystatus { get; set; }\n        //public int Threshold { get; set; }\n        // Failure threshold (in bytes)\n        public long Threshold { get; set; } = 1024L * 1024L * 1024L;\n    }\n}\n```\n\nì´ Health Checkì€ Feedback Serviceì˜ ë©”ëª¨ë¦¬ ìƒíƒœë¥¼ í• ë‹¹ëœ ë°”ì´íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í‰ê°€í•©ë‹ˆë‹¤.\n\nì´ì œ HealthCheck.cs ë‚´ë¶€ì—ì„œ RemoteHealthCheck.csì™€ MemoryHealthCheck.csë¥¼ êµ¬ì„±í•©ì‹œë‹¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nHealthCheck.cs\n\n```js\npublic static void ConfigureHealthChecks(this IServiceCollection services, IConfiguration configuration)\n{\n    services.AddHealthChecks()\n        .AddSqlServer(configuration[\"ConnectionStrings:Feedback\"], healthQuery: \"select 1\", name: \"SQL ì„œë²„\", failureStatus: HealthStatus.Unhealthy, tags: new[] { \"Feedback\", \"Database\" })\n        .AddCheck<RemoteHealthCheck>(\"ì›ê²© ì—”ë“œí¬ì¸íŠ¸ í—¬ìŠ¤ì²´í¬\", failureStatus: HealthStatus.Unhealthy)\n        .AddCheck<MemoryHealthCheck>($\"í”¼ë“œë°± ì„œë¹„ìŠ¤ ë©”ëª¨ë¦¬ ì²´í¬\", failureStatus: HealthStatus.Unhealthy, tags: new[] { \"í”¼ë“œë°± ì„œë¹„ìŠ¤\" })\n        .AddUrlGroup(new Uri(\"https://localhost:44333/api/v1/heartbeats/ping\"), name: \"ê¸°ë³¸ URL\", failureStatus: HealthStatus.Unhealthy);\n\n    //services.AddHealthChecksUI();\n    services.AddHealthChecksUI(opt =>\n    {\n        opt.SetEvaluationTimeInSeconds(10); // ê° ì²´í¬ ì‚¬ì´ì˜ ì‹œê°„(ì´ˆ)\n        opt.MaximumHistoryEntriesPerEndpoint(60); // ì²´í¬ ì´ë ¥ ìµœëŒ€ ê°¯ìˆ˜\n        opt.SetApiMaxActiveRequests(1); // API ìš”ì²­ ë™ì‹œì„±\n        opt.AddHealthCheckEndpoint(\"í”¼ë“œë°± API\", \"/api/health\"); // í—¬ìŠ¤ì²´í¬ API ë§¤í•‘\n\n    })\n        .AddInMemoryStorage();\n}\n```\n\n**ì¶œë ¥:**\nEndpoint: /api/health\n\n![ImplementingHealthChecksin.NET8.4](/assets/img/2024-06-23-ImplementingHealthChecksinNET8_4.png)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nEndpoint: /healthcheck-ui\n\n![Health Check](https://assets/img/2024-06-23-ImplementingHealthChecksinNET8_5.png)\n\nì—¬ê¸° ìˆìŠµë‹ˆë‹¤! ì›¹ API ë‚´ì—ì„œ ëª‡ ê°€ì§€ í—¬ìŠ¤ ì²´í¬ë¥¼ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì²´í¬ë¥¼ í†µí•´ ì‘ìš© í”„ë¡œê·¸ë¨ì´ ëª¨ë‹ˆí„°ë§ë˜ê³  ì›°ë¹™ì´ ë³´ì¥ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. .NET 8ì˜ í—¬ìŠ¤ ì²´í¬ì˜ í˜ìœ¼ë¡œ ê²¬ê³ í•˜ê³  ê²¬ê³ í•œ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ê³„ì†í•˜ì—¬ ë§Œë“¤ì–´ë³´ì„¸ìš”! ğŸ˜\n\n![Resilient Applications](https://miro.medium.com/v2/resize:fit:996/1*ECmfhzVd4avHlD_B1-gocg.gif)\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ê²°ë¡ \n\n.NET 8 ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê±´ê°• ì ê²€ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ íƒ„íƒ„í•˜ê³  ì•ˆì •ì ì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ì¤‘ìš”í•œ ë‹¨ê³„ì…ë‹ˆë‹¤. ë‚´ì¥ ë° ì‚¬ìš©ì ì •ì˜ ê±´ê°• ì ê²€ì„ í†µí•´ ì‘ìš© í”„ë¡œê·¸ë¨ê³¼ í•´ë‹¹ ì¢…ì†ì„±ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë” ì›í• í•œ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në³¸ ë¬¸ì„œì—ì„œëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì— ê±´ê°• ì ê²€ì„ ì¶”ê°€í•˜ëŠ” ê¸°ë³¸ ì‚¬í•­ì„ ë‹¤ë£¨ì—ˆìœ¼ë©°, ê³ ìœ í•œ ìš”êµ¬ì— ë§ì¶° ì ê²€ì„ ìì„¸íˆ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ì„ ê³„ì† ê°œë°œí•˜ëŠ” ê³¼ì •ì—ì„œ ì‹œìŠ¤í…œ ê±´ê°•ì˜ ë‹¤ì–‘í•œ ì¸¡ë©´ì„ ì»¤ë²„í•˜ê¸° ìœ„í•´ ì¶”ê°€ì ì¸ ì ê²€ í•­ëª©ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”. ì •ê¸°ì ì¸ ê²€í†  ë° ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ê±´ê°• ì ê²€ì„ ìœ ì§€í•˜ë©´ ê°•ë ¥í•˜ê³  ë°˜ì‘ ë¹ ë¥¸ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në” ìì„¸í•œ ì •ë³´ì™€ ê³ ê¸‰ êµ¬ì„±ì— ëŒ€í•´ì„œëŠ” AspNetCore.Diagnostics.HealthChecks ì €ì¥ì†Œë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.\n\n<!-- ui-station ì‚¬ê°í˜• -->\n\n<ins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì €ì: Jeslur Rahman ğŸ˜\n","ogImage":{"url":"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_0.png"},"coverImage":"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_0.png","tag":["Tech"],"readingTime":15},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<img src=\"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_0.png\">\n<p>Health checks are critical for monitoring the status of your applications and services. They offer a fast and automated method to ensure that your application's dependencies and components are functioning correctly.</p>\n<p>This article will delve into how to implement health checks in a .NET 8 web application.</p>\n<h2>Why Health Checks in ASP.NET Applications?</h2>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>í—¬ìŠ¤ ì²´í¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ë¬¸ì œì ì„ ì‚¬ì „ì— ì‹ë³„í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ì–´ ì‚¬ìš©ìì— ì˜í–¥ì„ ë¯¸ì¹˜ê¸° ì „ì— ê·¸ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì£¼ëŠ” ì¤‘ìš”í•œ ë„êµ¬ì…ë‹ˆë‹¤. ì •ê¸°ì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ìš”ì†Œë“¤ì˜ ê±´ê°• ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì€ ë”ìš± ì‹ ë¢°ì„±ì´ ë†’ê³  ê²¬ê³ í•œ ì‹œìŠ¤í…œì„ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.</p>\n<p>ASP.NET ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ë•Œ, ì´ëŠ” ì¢…ì¢… ë°ì´í„°ë² ì´ìŠ¤, íŒŒì¼ ì‹œìŠ¤í…œ, API ë“±ê³¼ ê°™ì€ ë‹¤ì–‘í•œ í•˜ìœ„ ì‹œìŠ¤í…œì— ì˜ì¡´í•©ë‹ˆë‹¤. ê°€ì¥ í”í•œ ì‹œë‚˜ë¦¬ì˜¤ ì¤‘ í•˜ë‚˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì˜ì¡´ì„±ì…ë‹ˆë‹¤. ì‚¬ì‹¤ ê±°ì˜ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì›í™œí•œ ìƒí˜¸ ì‘ìš©ì„ í•„ìš”ë¡œ í•˜ë©° ì´ëŠ” í•µì‹¬ ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œë¡œ ì‘ìš©í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê¸°ì¡´ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì€ ì¢…ì¢… ì´ ë¶€ë¶„ì„ ê°„ê³¼í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ê²°ì´ ëŠì–´ì§€ëŠ” ê²½ìš° ì ì¬ì ì¸ ê³ ì¥ì„ ì•¼ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´í•˜ëŠ” ìƒí™©ì„ ìƒê°í•´ë´…ì‹œë‹¤. ë‹¤ì–‘í•œ ì´ìœ ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì—°ê²°ì´ ëŠê²¨ë²„ë¦¬ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë™í•˜ì§€ ì•Šì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì´ ìƒí™©ì€ í—¬ìŠ¤ ì²´í¬ê°€ ì™œ ìœ ìš©í•œì§€ì˜ ê¸°ë³¸ì ì¸ ì˜ˆì‹œì´ì§€ë§Œ, ê·¸ë“¤ì˜ ê°œë°œì˜ ì „ì²´ì ì¸ ë²”ìœ„ë¥¼ ì¶©ë¶„íˆ ì´í•´í•˜ê¸°ì—ëŠ” ë¶€ì¡±í•©ë‹ˆë‹¤. ë”°ë¼ì„œ,</p>\n<h2>ë°ì´í„°ë² ì´ìŠ¤ ì˜ˆì œë¥¼ ê¹Šê²Œ ë“¤ì–´ê°€ ASP.NET í—¬ìŠ¤ ì²´í¬ê°€ ì–´ë–»ê²Œ ë” í° ê·œëª¨ì—ì„œ ì¤‘ìš”í•œì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</h2>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì„¤ì •í•˜ê¸° ì „ì— ë°ì´í„°ë² ì´ìŠ¤ì˜ ê°€ìš©ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\nâ€” â€” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¤‘ìš”í•œ í•˜ìœ„ ì‹œìŠ¤í…œì˜ ìƒíƒœì™€ ê°€ìš©ì„±ì„ ì‚¬ì „ì— í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ê°–ê³  ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”? ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ ëŠê²¨ ê°‘ì‘ìŠ¤ëŸ½ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ëŒ€ì‹ , ê°€ìš©ì„±ì„ ì„ í–‰ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤ë©´ ì¢‹ì§€ ì•Šì„ê¹Œìš”?</li>\n<li>ë°ì´í„°ë² ì´ìŠ¤ ê°€ìš©ì„± ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìš°ì•„í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\nâ€” â€” ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì—ì„œ ì‚¬ìš©ì ì¹œí™”ì ì¸ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê°–ê³  ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”? ì‚¬ìš©ìë“¤ì„ í˜¼ë€ìŠ¤ëŸ½ê²Œ ë§Œë“œëŠ” ì•”í˜¸í™”ëœ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì•„ë‹Œ ì¤‘ìš” êµ¬ì„± ìš”ì†Œì˜ ê°€ìš©ì„±ì„ ì›í™œí•˜ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤ë©´ ì‚¬ìš©ì ê²½í—˜ì´ í–¥ìƒë˜ì§€ ì•Šì„ê¹Œìš”?</li>\n<li>ê°€ìš©í•˜ì§€ ì•Šì„ ë•Œ ëŒ€ë¹„í•´ ëŒ€ì²´ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì›í™œí•˜ê²Œ ì „í™˜í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\nâ€” â€” ì£¼ ë°ì´í„°ë² ì´ìŠ¤ê°€ ê°€ìš©í•˜ì§€ ì•Šì„ ê²½ìš° ëŒ€ë¹„í•˜ì—¬ ëŒ€ì²´ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ìˆœì¡°ë¡­ê²Œ ì „í™˜í•  ìˆ˜ ìˆëŠ” ìœ ì—°ì„±ì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—°ì†ì„±ì„ ìœ ì§€í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì‚¬ìš©ìë“¤ì´ ìµœì†Œí•œì˜ ì¤‘ë‹¨ì´ ë°œìƒí•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.</li>\n<li>ìƒíƒœ í™•ì¸ì— ë”°ë¼ ëŒ€ì²´ í™˜ê²½ìœ¼ë¡œ ìŠ¤ìœ„ì¹˜í•  ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ ì§€ì‹œí•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\nâ€” â€” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ë¡œë“œ ë°¸ëŸ°ì„œì—ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ìƒìƒí•´ë³´ì„¸ìš”. ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—†ê±°ë‚˜ ë‹¤ë¥¸ ì‹¬ê°í•œ ë¬¸ì œë¡œ ì¸í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê±´ê°•í•˜ì§€ ì•Šë‹¤ê³  íŒë‹¨ë˜ë©´ ë¡œë“œ ë°¸ëŸ°ì„œëŠ” ì§€ëŠ¥ì ìœ¼ë¡œ íŠ¸ë˜í”½ì„ ëŒ€ì²´ í™˜ê²½ìœ¼ë¡œ ë¦¬ë””ë ‰ì…˜í•˜ì—¬ ì§€ì†ì ì¸ ì„œë¹„ìŠ¤ ê°€ìš©ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.</li>\n</ul>\n<p>ASP.NET Health Checksë¥¼ í†µí•´ ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>\n<ul>\n<li>ì‹œìŠ¤í…œì˜ ê±´ê°• ìƒíƒœì™€ ê°€ìš©ì„±ì„ í‰ê°€í•©ë‹ˆë‹¤.</li>\n<li>ë‹¤ë¥¸ ì‹œìŠ¤í…œì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê±´ê°• ìƒíƒœë¥¼ ì•Œë¦¬ê¸° ìœ„í•œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</li>\n<li>ë‹¤ë¥¸ ì‹œìŠ¤í…œì˜ ê±´ê°• í™•ì¸ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</li>\n</ul>\n<p>ì´ëŸ¬í•œ ê±´ê°• í™•ì¸ ê¸°ëŠ¥ì€ ëŠìŠ¨í•˜ê²Œ ì—°ê²°ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ì†ë˜ì–´ ìˆëŠ” ì‹œìŠ¤í…œì˜ ê±´ê°•ì„ ì•Œì•„ì•¼ í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì„ ìœ„í•´ íŠ¹ë³„íˆ ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë‹¤ì–‘í•œ í•˜ìœ„ ì‹œìŠ¤í…œê³¼ ì¸í”„ë¼ì— ì˜ì¡´í•˜ëŠ” ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œë„ ìœ ìš©í•©ë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h1>.Net 8ì—ì„œ ê±´ê°• ì ê²€ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•</h1>\n<p>.NET 8ì—ì„œ ê±´ê°• ì ê²€ êµ¬ì„± ë°©ë²•ì„ ë‘ ê°€ì§€ë¡œ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>\n<h1>ì„¹ì…˜ 1: ê¸°ë³¸ ê±´ê°• ì ê²€ ì„¤ì •</h1>\n<p>ì´ ì„¹ì…˜ì€ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê±´ê°• ì ê²€ì„ ìœ„í•œ ê¸°ì´ˆë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ëª©ì ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>NuGet íŒ¨í‚¤ì§€ ì„¤ì¹˜ í•„ìš”\në‹¤ìŒ NuGet íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:</p>\n<ol>\n<li>Microsoft.Extensions.Diagnostics.HealthChecks</li>\n</ol>\n<p>Health Checks ì„œë¹„ìŠ¤ ì¶”ê°€\nProgram.csì— í•„ìš”í•œ í—¬ìŠ¤ ì²´í¬ ì„œë¹„ìŠ¤ë¥¼ DI ì»¨í…Œì´ë„ˆì— ì¶”ê°€í•˜ì„¸ìš”:\nProgram.cs</p>\n<pre><code class=\"hljs language-js\">builder.<span class=\"hljs-property\">Services</span>.<span class=\"hljs-title class_\">AddHealthChecks</span>();\n\n<span class=\"hljs-comment\">//HealthCheck Middleware</span>\napp.<span class=\"hljs-title class_\">MapHealthChecks</span>(<span class=\"hljs-string\">\"/api/health\"</span>);\n</code></pre>\n<p>ì´ê²ƒë“¤ì„ .NET 8 ì›¹ APIì— ì¶”ê°€í•œ í›„, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰í•˜ì„¸ìš”. ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ ë‹¤ìŒ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•˜ì„¸ìš”:\n<a href=\"https://localhost:44333/swagger/feedbackservice/index.html\" rel=\"nofollow\" target=\"_blank\">https://localhost:44333/swagger/feedbackservice/index.html</a>\nì›¹ APIì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”:\n<a href=\"https://localhost:44333/api/health\" rel=\"nofollow\" target=\"_blank\">https://localhost:44333/api/health</a></p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•œ ë’¤ì— ì›¹ APIê°€ \"Healthy\"ì„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_1.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p>ì´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•˜ë©´ ì›¹ APIê°€ \"Healthy\"ë¡œ í‘œì‹œë˜ëŠ” ê²ƒì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ë‹¨ê³„ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ì ì¸ ê±´ê°•ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê¸°ë³¸ ê±´ê°• ì ê²€ì´ ì„¤ì •ë˜ì–´ ìˆì§€ë§Œ ë¶€ì† ì‹œìŠ¤í…œì— ëŒ€í•œ êµ¬ì²´ì ì¸ ê±´ê°• ì ê²€ì€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŒì„ ì•Œë¦½ë‹ˆë‹¤.</p>\n<h1>ì„¹ì…˜ 2: ê±´ê°• ì ê²€ìœ¼ë¡œ êµ¬í˜„</h1>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ê³ ê°ë‹˜ì„ ìœ„í•œ ê°œì¸í™”ëœ ê±´ê°• ì²´í¬ë¥¼ í†µí•œ ì²¨ë‹¨ ëª¨ë‹ˆí„°ë§\nì´ ì„¹ì…˜ì—ì„œëŠ” .NET 8 ì›¹ APIì˜ ì¤‘ìš” êµ¬ì„± ìš”ì†Œë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ë° ë§ì¶¤í˜• ê±´ê°• ì²´í¬ë¥¼ êµ¬í˜„í•˜ëŠ” êµ¬ì²´ì ì¸ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì²´í¬ëŠ” ê¸°ë³¸ ì„¤ì •ì„ ë›°ì–´ë„˜ì–´ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê±´ê°• ìƒíƒœì— ëŒ€í•œ ë³´ë‹¤ ìƒì„¸í•˜ê³  í†µì°°ë ¥ ìˆëŠ” ê´€ì ì„ ì œê³µí•©ë‹ˆë‹¤.</p>\n<p>í•„ìš”í•œ NuGet íŒ¨í‚¤ì§€\në‹¤ìŒ NuGet íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:</p>\n<ol>\n<li>Microsoft.Extensions.Diagnostics.HealthChecks</li>\n<li>AspNetCore.HealthChecks.SqlServer</li>\n<li>AspNetCore.HealthChecks.UI</li>\n<li>AspNetCore.HealthChecks.UI.Client</li>\n<li>AspNetCore.HealthChecks.UI.InMemory.Storage</li>\n<li>AspNetCore.HealthChecks.Uris</li>\n</ol>\n<p>ì°¸ê³ : ë³„ë„ì˜ HealthCheck.cs íŒŒì¼ì„ ë§Œë“¤ê³  ëª¨ë“  ê±´ê°• ì²´í¬ êµ¬ì„±ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.</p>\n<h2>a. ë°ì´í„°ë² ì´ìŠ¤ ê±´ê°• ì²´í¬</h2>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ë°ì´í„°ë² ì´ìŠ¤ í—¬ìŠ¤ ì²´í¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì›°ë¹™ì„ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ì¤‘ìš”í•œ ì¸¡ë©´ì…ë‹ˆë‹¤. íŠ¹íˆ ë°ì´í„° ì €ì¥ ë° ê²€ìƒ‰ì„ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ë”ìš± ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ í—¬ìŠ¤ ì²´í¬ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—°ê²° ê°€ëŠ¥í•˜ê³  ì¿¼ë¦¬ì— ì‘ë‹µí•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>\n<p>HealthCheck.cs</p>\n<pre><code class=\"hljs language-csharp\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">ConfigureHealthChecks</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">this</span> IServiceCollection services, IConfiguration configuration</span>)</span>\n{\n    services.AddHealthChecks()\n        .AddSqlServer(configuration[<span class=\"hljs-string\">\"ConnectionStrings:DefaultConnection\"</span>], healthQuery: <span class=\"hljs-string\">\"select 1\"</span>, name: <span class=\"hljs-string\">\"SQL Server\"</span>, failureStatus: HealthStatus.Unhealthy, tags: <span class=\"hljs-keyword\">new</span>[] { <span class=\"hljs-string\">\"Feedback\"</span>, <span class=\"hljs-string\">\"Database\"</span> });\n\n    <span class=\"hljs-comment\">//services.AddHealthChecksUI();</span>\n    services.AddHealthChecksUI(opt =>\n    {\n        opt.SetEvaluationTimeInSeconds(<span class=\"hljs-number\">10</span>); <span class=\"hljs-comment\">//ì²´í¬ ê°„ ì‹œê°„(ì´ˆ)</span>\n        opt.MaximumHistoryEntriesPerEndpoint(<span class=\"hljs-number\">60</span>); <span class=\"hljs-comment\">//ì²´í¬ íˆìŠ¤í† ë¦¬ ìµœëŒ€</span>\n        opt.SetApiMaxActiveRequests(<span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">//API ìš”ì²­ ë™ì‹œì„±</span>\n        opt.AddHealthCheckEndpoint(<span class=\"hljs-string\">\"í”¼ë“œë°± API\"</span>, <span class=\"hljs-string\">\"/api/health\"</span>); <span class=\"hljs-comment\">//í—¬ìŠ¤ ì²´í¬ API ë§µí•‘</span>\n\n    })\n        .AddInMemoryStorage();\n}\n</code></pre>\n<p><code>configuration[\"ConnectionStrings:DefaultConnection\"]</code>ì€ êµ¬ì„±ì—ì„œ ì—°ê²° ë¬¸ìì—´ì„ ê²€ìƒ‰í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° êµ¬ì„±ì„ ìœ ì—°í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<code>failureStatus: HealthStatus.Unhealthy</code>ëŠ” í—¬ìŠ¤ ì²´í¬ ì‹¤íŒ¨ ì‹œ ì „ì²´ í—¬ìŠ¤ ìƒíƒœë¥¼ ê±´ê°•í•˜ì§€ ì•ŠìŒìœ¼ë¡œ í‘œì‹œí•´ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>í”„ë¡œê·¸ë¨.csì—ì„œ ConfigureHealthChecks()ë¥¼ êµ¬ì„±í•˜ì„¸ìš”.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// Health Check êµ¬ì„±</span>\nbuilder.<span class=\"hljs-property\">Services</span>.<span class=\"hljs-title class_\">ConfigureHealthChecks</span>(builder.<span class=\"hljs-property\">Configuration</span>);\n\n<span class=\"hljs-comment\">// Health Check ë¯¸ë“¤ì›¨ì–´</span>\napp.<span class=\"hljs-title class_\">MapHealthChecks</span>(<span class=\"hljs-string\">\"/api/health\"</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HealthCheckOptions</span>()\n{\n    <span class=\"hljs-title class_\">Predicate</span> = <span class=\"hljs-function\"><span class=\"hljs-params\">_</span> =></span> <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-title class_\">ResponseWriter</span> = <span class=\"hljs-title class_\">UIResponseWriter</span>.<span class=\"hljs-property\">WriteHealthCheckUIResponse</span>\n});\napp.<span class=\"hljs-title class_\">UseHealthChecksUI</span>(delegate (<span class=\"hljs-title class_\">Options</span> options)\n{\n    options.<span class=\"hljs-property\">UIPath</span> = <span class=\"hljs-string\">\"/healthcheck-ui\"</span>;\n    options.<span class=\"hljs-title class_\">AddCustomStylesheet</span>(<span class=\"hljs-string\">\"./HealthCheck/Custom.css\"</span>);\n});\n</code></pre>\n<p>ê²°ê³¼:\nEndpoint: /api/health</p>\n<img src=\"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_2.png\">\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ì—”ë“œí¬ì¸íŠ¸: /healthcheck-ui</p>\n<p><img src=\"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_3.png\" alt=\"health-check-screenshot\"></p>\n<h2>b. ì›ê²© ì—”ë“œí¬ì¸íŠ¸ì˜ ê±´ê°• ìƒíƒœ í™•ì¸</h2>\n<p>ë‹¤ìŒìœ¼ë¡œ, ì›ê²© ì—”ë“œí¬ì¸íŠ¸ ë° ë©”ëª¨ë¦¬ì˜ ê±´ê°• ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì‘ì—…ì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\nRemoteHealthCheck.cs</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<pre><code class=\"hljs language-csharp\"><span class=\"hljs-keyword\">using</span> Microsoft.Extensions.Diagnostics.HealthChecks;\n<span class=\"hljs-keyword\">using</span> System;\n<span class=\"hljs-keyword\">using</span> System.Net.Http;\n<span class=\"hljs-keyword\">using</span> System.Threading;\n<span class=\"hljs-keyword\">using</span> System.Threading.Tasks;\n\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title\">FeedbackService.Api</span>\n{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">RemoteHealthCheck</span> : <span class=\"hljs-title\">IHealthCheck</span>\n    {\n        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">readonly</span> IHttpClientFactory _httpClientFactory;\n        <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">RemoteHealthCheck</span>(<span class=\"hljs-params\">IHttpClientFactory httpClientFactory</span>)</span>\n        {\n            _httpClientFactory = httpClientFactory;\n        }\n        <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">async</span> Task&#x3C;HealthCheckResult> <span class=\"hljs-title\">CheckHealthAsync</span>(<span class=\"hljs-params\">HealthCheckContext context, CancellationToken cancellationToken = <span class=\"hljs-keyword\">new</span> CancellationToken(</span>))</span>\n        {\n            <span class=\"hljs-keyword\">using</span> (<span class=\"hljs-keyword\">var</span> httpClient = _httpClientFactory.CreateClient())\n            {\n                <span class=\"hljs-keyword\">var</span> response = <span class=\"hljs-keyword\">await</span> httpClient.GetAsync(<span class=\"hljs-string\">\"https://api.ipify.org\"</span>);\n                <span class=\"hljs-keyword\">if</span> (response.IsSuccessStatusCode)\n                {\n                    <span class=\"hljs-keyword\">return</span> HealthCheckResult.Healthy(<span class=\"hljs-string\">$\"Remote endpoint is healthy.\"</span>);\n                }\n\n                <span class=\"hljs-keyword\">return</span> HealthCheckResult.Unhealthy(<span class=\"hljs-string\">\"Remote endpoint is unhealthy\"</span>);\n            }\n        }\n    }\n}\n</code></pre>\n<p>ì´ health checkì€ HTTP ìš”ì²­ì„ í†µí•´ ì›ê²© ì—”ë“œí¬ì¸íŠ¸(ì˜ˆ: API)ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.</p>\n<h2>b. ë©”ëª¨ë¦¬ í—¬ìŠ¤ ì²´í¬</h2>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ API ì„œë¹„ìŠ¤ì˜ ë©”ëª¨ë¦¬ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” health checkì„ êµ¬í˜„í•´ ë´…ì‹œë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>MemoryHealthCheck.cs</p>\n<pre><code class=\"hljs language-js\">using <span class=\"hljs-title class_\">System</span>;\nusing <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">Collections</span>.<span class=\"hljs-property\">Generic</span>;\nusing <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">Linq</span>;\nusing <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">Threading</span>;\nusing <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">Threading</span>.<span class=\"hljs-property\">Tasks</span>;\nusing <span class=\"hljs-title class_\">Microsoft</span>.<span class=\"hljs-property\">Extensions</span>.<span class=\"hljs-property\">Diagnostics</span>.<span class=\"hljs-property\">HealthChecks</span>;\nusing <span class=\"hljs-title class_\">Microsoft</span>.<span class=\"hljs-property\">Extensions</span>.<span class=\"hljs-property\">Options</span>;\n\nnamespace <span class=\"hljs-title class_\">FeedbackService</span>.<span class=\"hljs-property\">Api</span>.<span class=\"hljs-property\">HealthCheck</span>\n{\n    public <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MemoryHealthCheck</span> : <span class=\"hljs-title class_\">IHealthCheck</span>\n    {\n        private readonly <span class=\"hljs-title class_\">IOptionsMonitor</span>&#x3C;<span class=\"hljs-title class_\">MemoryCheckOptions</span>> _options;\n\n        public <span class=\"hljs-title class_\">MemoryHealthCheck</span>(<span class=\"hljs-title class_\">IOptionsMonitor</span>&#x3C;<span class=\"hljs-title class_\">MemoryCheckOptions</span>> options)\n        {\n            _options = options;\n        }\n\n        public string <span class=\"hljs-title class_\">Name</span> => <span class=\"hljs-string\">\"memory_check\"</span>;\n\n        public <span class=\"hljs-title class_\">Task</span>&#x3C;<span class=\"hljs-title class_\">HealthCheckResult</span>> <span class=\"hljs-title class_\">CheckHealthAsync</span>(\n            <span class=\"hljs-title class_\">HealthCheckContext</span> context,\n            <span class=\"hljs-title class_\">CancellationToken</span> cancellationToken = <span class=\"hljs-title function_\">default</span>(<span class=\"hljs-title class_\">CancellationToken</span>))\n        {\n            <span class=\"hljs-keyword\">var</span> options = _options.<span class=\"hljs-title class_\">Get</span>(context.<span class=\"hljs-property\">Registration</span>.<span class=\"hljs-property\">Name</span>);\n\n            <span class=\"hljs-comment\">// Include GC information in the reported diagnostics.</span>\n            <span class=\"hljs-keyword\">var</span> allocated = <span class=\"hljs-variable constant_\">GC</span>.<span class=\"hljs-title class_\">GetTotalMemory</span>(<span class=\"hljs-attr\">forceFullCollection</span>: <span class=\"hljs-literal\">false</span>);\n            <span class=\"hljs-keyword\">var</span> data = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Dictionary</span>&#x3C;string, object>()\n        {\n            { <span class=\"hljs-string\">\"AllocatedBytes\"</span>, allocated },\n            { <span class=\"hljs-string\">\"Gen0Collections\"</span>, <span class=\"hljs-variable constant_\">GC</span>.<span class=\"hljs-title class_\">CollectionCount</span>(<span class=\"hljs-number\">0</span>) },\n            { <span class=\"hljs-string\">\"Gen1Collections\"</span>, <span class=\"hljs-variable constant_\">GC</span>.<span class=\"hljs-title class_\">CollectionCount</span>(<span class=\"hljs-number\">1</span>) },\n            { <span class=\"hljs-string\">\"Gen2Collections\"</span>, <span class=\"hljs-variable constant_\">GC</span>.<span class=\"hljs-title class_\">CollectionCount</span>(<span class=\"hljs-number\">2</span>) },\n        };\n            <span class=\"hljs-keyword\">var</span> status = (allocated &#x3C; options.<span class=\"hljs-property\">Threshold</span>) ? <span class=\"hljs-title class_\">HealthStatus</span>.<span class=\"hljs-property\">Healthy</span> : <span class=\"hljs-title class_\">HealthStatus</span>.<span class=\"hljs-property\">Unhealthy</span>;\n\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Task</span>.<span class=\"hljs-title class_\">FromResult</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HealthCheckResult</span>(\n                status,\n                <span class=\"hljs-attr\">description</span>: <span class=\"hljs-string\">\"Reports degraded status if allocated bytes \"</span> +\n                    $<span class=\"hljs-string\">\">= {options.Threshold} bytes.\"</span>,\n                <span class=\"hljs-attr\">exception</span>: <span class=\"hljs-literal\">null</span>,\n                <span class=\"hljs-attr\">data</span>: data));\n        }\n    }\n    public <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MemoryCheckOptions</span>\n    {\n        public string <span class=\"hljs-title class_\">Memorystatus</span> { get; set; }\n        <span class=\"hljs-comment\">//public int Threshold { get; set; }</span>\n        <span class=\"hljs-comment\">// Failure threshold (in bytes)</span>\n        public long <span class=\"hljs-title class_\">Threshold</span> { get; set; } = 1024L * 1024L * 1024L;\n    }\n}\n</code></pre>\n<p>ì´ Health Checkì€ Feedback Serviceì˜ ë©”ëª¨ë¦¬ ìƒíƒœë¥¼ í• ë‹¹ëœ ë°”ì´íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í‰ê°€í•©ë‹ˆë‹¤.</p>\n<p>ì´ì œ HealthCheck.cs ë‚´ë¶€ì—ì„œ RemoteHealthCheck.csì™€ MemoryHealthCheck.csë¥¼ êµ¬ì„±í•©ì‹œë‹¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>HealthCheck.cs</p>\n<pre><code class=\"hljs language-js\">public <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title class_\">ConfigureHealthChecks</span>(<span class=\"hljs-variable language_\">this</span> <span class=\"hljs-title class_\">IServiceCollection</span> services, <span class=\"hljs-title class_\">IConfiguration</span> configuration)\n{\n    services.<span class=\"hljs-title class_\">AddHealthChecks</span>()\n        .<span class=\"hljs-title class_\">AddSqlServer</span>(configuration[<span class=\"hljs-string\">\"ConnectionStrings:Feedback\"</span>], <span class=\"hljs-attr\">healthQuery</span>: <span class=\"hljs-string\">\"select 1\"</span>, <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">\"SQL ì„œë²„\"</span>, <span class=\"hljs-attr\">failureStatus</span>: <span class=\"hljs-title class_\">HealthStatus</span>.<span class=\"hljs-property\">Unhealthy</span>, <span class=\"hljs-attr\">tags</span>: <span class=\"hljs-keyword\">new</span>[] { <span class=\"hljs-string\">\"Feedback\"</span>, <span class=\"hljs-string\">\"Database\"</span> })\n        .<span class=\"hljs-property\">AddCheck</span>&#x3C;<span class=\"hljs-title class_\">RemoteHealthCheck</span>>(<span class=\"hljs-string\">\"ì›ê²© ì—”ë“œí¬ì¸íŠ¸ í—¬ìŠ¤ì²´í¬\"</span>, <span class=\"hljs-attr\">failureStatus</span>: <span class=\"hljs-title class_\">HealthStatus</span>.<span class=\"hljs-property\">Unhealthy</span>)\n        .<span class=\"hljs-property\">AddCheck</span>&#x3C;<span class=\"hljs-title class_\">MemoryHealthCheck</span>>($<span class=\"hljs-string\">\"í”¼ë“œë°± ì„œë¹„ìŠ¤ ë©”ëª¨ë¦¬ ì²´í¬\"</span>, <span class=\"hljs-attr\">failureStatus</span>: <span class=\"hljs-title class_\">HealthStatus</span>.<span class=\"hljs-property\">Unhealthy</span>, <span class=\"hljs-attr\">tags</span>: <span class=\"hljs-keyword\">new</span>[] { <span class=\"hljs-string\">\"í”¼ë“œë°± ì„œë¹„ìŠ¤\"</span> })\n        .<span class=\"hljs-title class_\">AddUrlGroup</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Uri</span>(<span class=\"hljs-string\">\"https://localhost:44333/api/v1/heartbeats/ping\"</span>), <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">\"ê¸°ë³¸ URL\"</span>, <span class=\"hljs-attr\">failureStatus</span>: <span class=\"hljs-title class_\">HealthStatus</span>.<span class=\"hljs-property\">Unhealthy</span>);\n\n    <span class=\"hljs-comment\">//services.AddHealthChecksUI();</span>\n    services.<span class=\"hljs-title class_\">AddHealthChecksUI</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">opt</span> =></span>\n    {\n        opt.<span class=\"hljs-title class_\">SetEvaluationTimeInSeconds</span>(<span class=\"hljs-number\">10</span>); <span class=\"hljs-comment\">// ê° ì²´í¬ ì‚¬ì´ì˜ ì‹œê°„(ì´ˆ)</span>\n        opt.<span class=\"hljs-title class_\">MaximumHistoryEntriesPerEndpoint</span>(<span class=\"hljs-number\">60</span>); <span class=\"hljs-comment\">// ì²´í¬ ì´ë ¥ ìµœëŒ€ ê°¯ìˆ˜</span>\n        opt.<span class=\"hljs-title class_\">SetApiMaxActiveRequests</span>(<span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// API ìš”ì²­ ë™ì‹œì„±</span>\n        opt.<span class=\"hljs-title class_\">AddHealthCheckEndpoint</span>(<span class=\"hljs-string\">\"í”¼ë“œë°± API\"</span>, <span class=\"hljs-string\">\"/api/health\"</span>); <span class=\"hljs-comment\">// í—¬ìŠ¤ì²´í¬ API ë§¤í•‘</span>\n\n    })\n        .<span class=\"hljs-title class_\">AddInMemoryStorage</span>();\n}\n</code></pre>\n<p><strong>ì¶œë ¥:</strong>\nEndpoint: /api/health</p>\n<p><img src=\"/assets/img/2024-06-23-ImplementingHealthChecksinNET8_4.png\" alt=\"ImplementingHealthChecksin.NET8.4\"></p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>Endpoint: /healthcheck-ui</p>\n<p><img src=\"https://assets/img/2024-06-23-ImplementingHealthChecksinNET8_5.png\" alt=\"Health Check\"></p>\n<p>ì—¬ê¸° ìˆìŠµë‹ˆë‹¤! ì›¹ API ë‚´ì—ì„œ ëª‡ ê°€ì§€ í—¬ìŠ¤ ì²´í¬ë¥¼ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì²´í¬ë¥¼ í†µí•´ ì‘ìš© í”„ë¡œê·¸ë¨ì´ ëª¨ë‹ˆí„°ë§ë˜ê³  ì›°ë¹™ì´ ë³´ì¥ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. .NET 8ì˜ í—¬ìŠ¤ ì²´í¬ì˜ í˜ìœ¼ë¡œ ê²¬ê³ í•˜ê³  ê²¬ê³ í•œ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ê³„ì†í•˜ì—¬ ë§Œë“¤ì–´ë³´ì„¸ìš”! ğŸ˜</p>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:996/1*ECmfhzVd4avHlD_B1-gocg.gif\" alt=\"Resilient Applications\"></p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h1>ê²°ë¡ </h1>\n<p>.NET 8 ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê±´ê°• ì ê²€ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ íƒ„íƒ„í•˜ê³  ì•ˆì •ì ì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ì¤‘ìš”í•œ ë‹¨ê³„ì…ë‹ˆë‹¤. ë‚´ì¥ ë° ì‚¬ìš©ì ì •ì˜ ê±´ê°• ì ê²€ì„ í†µí•´ ì‘ìš© í”„ë¡œê·¸ë¨ê³¼ í•´ë‹¹ ì¢…ì†ì„±ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë” ì›í• í•œ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë³¸ ë¬¸ì„œì—ì„œëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì— ê±´ê°• ì ê²€ì„ ì¶”ê°€í•˜ëŠ” ê¸°ë³¸ ì‚¬í•­ì„ ë‹¤ë£¨ì—ˆìœ¼ë©°, ê³ ìœ í•œ ìš”êµ¬ì— ë§ì¶° ì ê²€ì„ ìì„¸íˆ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ì„ ê³„ì† ê°œë°œí•˜ëŠ” ê³¼ì •ì—ì„œ ì‹œìŠ¤í…œ ê±´ê°•ì˜ ë‹¤ì–‘í•œ ì¸¡ë©´ì„ ì»¤ë²„í•˜ê¸° ìœ„í•´ ì¶”ê°€ì ì¸ ì ê²€ í•­ëª©ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”. ì •ê¸°ì ì¸ ê²€í†  ë° ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ê±´ê°• ì ê²€ì„ ìœ ì§€í•˜ë©´ ê°•ë ¥í•˜ê³  ë°˜ì‘ ë¹ ë¥¸ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë” ìì„¸í•œ ì •ë³´ì™€ ê³ ê¸‰ êµ¬ì„±ì— ëŒ€í•´ì„œëŠ” AspNetCore.Diagnostics.HealthChecks ì €ì¥ì†Œë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.</p>\n<!-- ui-station ì‚¬ê°í˜• -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ì €ì: Jeslur Rahman ğŸ˜</p>\n</body>\n</html>\n"},"__N_SSG":true}