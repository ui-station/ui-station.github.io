{"pageProps":{"post":{"title":"TryHackMe Writeup - CyberLens를 번역해보겠습니다","description":"","date":"2024-05-20 18:10","slug":"2024-05-20-TryHackMeWriteup-CyberLens","content":"\n\n## CyberLens 웹 서버를 악용하고 숨겨진 플래그를 발견할 수 있을까요?\n\n\"사이버 렌즈\" CTF 룸에 오신 것을 환영합니다!\n\n2024년 5월 17일에 공개된 이 CTF 챌린지는 약 120분 정도 소요되며 \"쉬움\" 난이도로 평가됩니다.\n하지만 제 개인적인 경험에 따르면, 완료하는 데 2시간이 넘게 걸렸어요.\n\n🕵️‍♂️ 준비가 되셨나요? 룸을 찾을 수 있습니다.\n\n<div class=\"content-ad\"></div>\n\n🔍 챌린지 설명 확인: 챌린지에 대한 자세한 내용은 방의 내용을 확인하세요.\n\n![이미지](/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_0.png)\n\n## 주의 사항\n\n1. IP를 /etc/hosts 파일에 추가하세요: `sudo echo [IP] cyberlens.thm >> /etc/hosts`\n\n<div class=\"content-ad\"></div>\n\n\n이 공간은 CyberLens 및 그들의 전문 도구에 대해 다루며, 스테가노그래피에 초점을 맞출 수도 있습니다. 화법 및 메타데이터를 위해 이미지를 분석하거나 숨겨진 플래그를 찾기 위해 이러한 도구 내의 취약점을 이용할 수도 있습니다.\n\n## 열거\n\n우리는 빠른 스캔을 위해 올드스쿨 nmap으로 시작합니다.\n그리고 흥미로운 포트가 열려 있는 것을 발견합니다\n\n```js\n─# nmap 10.10.189.206 -A\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-05-18 09:40 EDT\nNmap scan report for cyberlens.thm (10.10.189.206)\nHost is up (0.10s latency).\nNot shown: 995 closed tcp ports (reset)\nPORT     STATE SERVICE       VERSION\n80/tcp   open  http          Apache httpd 2.4.57 ((Win64))\n|_http-server-header: Apache/2.4.57 (Win64)\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-title: CyberLens: Unveiling the Hidden Matrix\n135/tcp  open  msrpc         Microsoft Windows RPC\n139/tcp  open  netbios-ssn   Microsoft Windows netbios-ssn\n445/tcp  open  microsoft-ds?\n3389/tcp open  ms-wbt-server Microsoft Terminal Services\n| ssl-cert: Subject: commonName=CyberLens\n| Not valid before: 2024-05-17T13:10:13\n|_Not valid after:  2024-11-16T13:10:13\n| rdp-ntlm-info: \n|   Target_Name: CYBERLENS\n|   NetBIOS_Domain_Name: CYBERLENS\n|   NetBIOS_Computer_Name: CYBERLENS\n|   DNS_Domain_Name: CyberLens\n|   DNS_Computer_Name: CyberLens\n|   Product_Version: 10.0.17763\n|_  System_Time: 2024-05-18T13:47:39+00:00\n|_ssl-date: 2024-05-18T13:47:47+00:00; -10s from scanner time.\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7)... redacted ...\n\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-time: \n|   date: 2024-05-18T13:47:41\n|_  start_date: N/A\n|_clock-skew: mean: -10s, deviation: 0s, median: -10s\n| smb2-security-mode: \n|   3:1:1: \n|_    Message signing enabled but not required\n\nTRACEROUTE (using port 587/tcp)\nHOP RTT       ADDRESS\n1   125.60 ms 10.9.0.1\n2   121.35 ms cyberlens.thm (10.10.189.206)\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 464.64 seconds\n```\n\n<div class=\"content-ad\"></div>\n\n- 80/tcp: Apache httpd 2.4.57에서 오픈된 HTTP — CVE 발견 안 됨\n- 135/tcp: Microsoft Windows RPC 오픈\n- 139/tcp: Microsoft Windows netbios-ssn 오픈\n- 445/tcp: Microsoft-DS 오픈\n- 3389/tcp: Microsoft Terminal Services (RDP) 오픈\n\n우리는 웹사이트를 돌아다니다가, dirb를 실행하여 새로운 디렉토리를 발견하였어요.\n\n![이미지](/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_1.png)\n\n우리의 관심을 끄는 두 가지 발견:\n\n<div class=\"content-ad\"></div>\n\n1. 연락 양식: 현재 유용한 정보가 없습니다.\n2. 이미지 추출기: 저희 조사에 대한 잠재적인 통찰력을 약속하는 온라인 메타데이터 추출 서비스입니다.\n\n![이미지](/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_2.png)\n\n나는 http://cyberlens.thm/images/에서 찾은 이미지를 힌트를 얻기 위해 도구에 업로드했지만 유용한 메타데이터를 찾을 수 없었습니다.\n\n다음으로 \"메타데이터 가져오기\" 버튼을 조사하고 해당 이벤트를 추적했습니다. 이로써 다음이 드러났습니다:\n\n<div class=\"content-ad\"></div>\n\n<img src=\"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_3.png\" />\n\nnmap 결과에 이 포트가 나오지 않았어요. 이 포트는 일반적이지 않은 포트라서이고, -p- 플래그를 사용하지 않았기 때문입니다. 일반적으로는 권장되지 않아요.\n\n<img src=\"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_4.png\" />\n\n첫 번째로는 해당 아파치 티카 버전에 대한 CVE를 찾아보는 거에요.\n\n<div class=\"content-ad\"></div>\n\nMetasploit을 시작하고,\n\n![CyberLens_5](/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_5.png)\n\n## 접근 방법\n\nMetasploit을 구성하고 (set RHOSTS, RPORT, LPORT), 그런 다음 exploit을 실행합니다. 그리고 바로 Meterpreter 세션을 열었습니다. 와우!\n\n<div class=\"content-ad\"></div>\n\n![이미지](/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_6.png)\n\n우선 CyberLens의 문서에서 깃발을 찾으려고 했어요. 대신 관리 부분을 우연히 발견했어요. 거기에서 승격을 위해 사용할 자격 증명을 찾았어요.\n\n![이미지](/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_7.png)\n\n힌트에서 이해한대로 대부분의 Windows 깃발은 데스크톱에 있기 때문에 거기로 가서 첫 번째 깃발을 얻었어요.\n\n<div class=\"content-ad\"></div>\n\n<img src=\"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_8.png\" />\n\n## 권한 상슨\n\n이전에 찾은 자격 증명을 다시 보면, 원격 데스크톱 프로토콜(RDP) 포트 3389과 일치합니다.\n그래서 remmina를 실행하지만, 동일한 사용자로 굳어 버린 것을 발견합니다. 이는 클래식한 실수였습니다. 사용자 이름에 주의를 기울이지 않았기 때문입니다. 권한 상슨이 내가 희망했던 만큼 간단하지 않을 것이라는 것을 알게 되었습니다. 그럼에도 불구하고 GUI 인터페이스를 보유하고 있기 때문에 이제 시스템을 쉽게 탐색할 방법이 제공되었습니다.\n\n다음으로 모든 서비스를 나열했습니다:\n\n<div class=\"content-ad\"></div>\n\n```js\nsc.exe query state=all\n```\n\n하지만 리스트가 굉장히 길었고, 수작업으로 걸러내는 대신 더 포괄적인 분석을 위해 WinPEAS를 실행하기로 결정했습니다.\n\n이미 존재하는 Metasploit 쉘을 고려할 때, 나는 나의 접근 방식을 전환했습니다. WinPEAS 대신 Metasploit의 multi/recon/local_exploit_suggester 모듈을 사용하여 권한 상승을 위한 잠재적인 취약점을 식별했습니다.\n\n<img src=\"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_9.png\" />\n\n\n<div class=\"content-ad\"></div>\n\n세션을 설정하고 모듈을 실행하여 총 세 가지 취약점을 발견했어요. 먼저 첫 번째 취약점부터 시작해서 해당 옵션을 구성한 후(exploit를 실행하기 전에 LHOST, LPORT, SESSION을 설정해주세요).\n\n그리고 이제 NT AUTHORITY\\SYSTEM으로 권한 상승했어요.\n\n![TryHackMeWriteup-CyberLens_10](/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_10.png)\n\n관리자의 데스크톱에 깃발이 있을 거에요.\n\n<div class=\"content-ad\"></div>\n\n# 결론\n\n- 주의 깊은 열거: 중요한 서비스를 식별하면서 모든 포트를 스캔하는 것을 잊지 마세요 (-p-).\n- 수동 열거: 잠재적으로 간과된 단서를 잡는 데 중요합니다.\n- 도전의 조합: 웹 취약점 분석과 권한 상승을 결합했습니다.\n- 적응성 있는 전략: 수동 서비스 분석 및 WinPEAS에서 Metasploit의 익스플로잇 제안자로 전환했습니다.\n- 주요 발견: 취약점을 발견하고 악용하여 사용자와 관리자 깃발을 얻었습니다.\n- 필수 기술: 적응적 전략 및 실용적 사이버 보안 기술을 강화했습니다.\n\nLinkedIn에서 저와 연결하세요.","ogImage":{"url":"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_0.png"},"coverImage":"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_0.png","tag":["Tech"],"readingTime":6},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    p: \"p\",\n    img: \"img\",\n    ol: \"ol\",\n    li: \"li\",\n    code: \"code\",\n    pre: \"pre\",\n    span: \"span\",\n    ul: \"ul\",\n    h1: \"h1\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h2, {\n      children: \"CyberLens 웹 서버를 악용하고 숨겨진 플래그를 발견할 수 있을까요?\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"\\\"사이버 렌즈\\\" CTF 룸에 오신 것을 환영합니다!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"2024년 5월 17일에 공개된 이 CTF 챌린지는 약 120분 정도 소요되며 \\\"쉬움\\\" 난이도로 평가됩니다.\\n하지만 제 개인적인 경험에 따르면, 완료하는 데 2시간이 넘게 걸렸어요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"🕵️‍♂️ 준비가 되셨나요? 룸을 찾을 수 있습니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"🔍 챌린지 설명 확인: 챌린지에 대한 자세한 내용은 방의 내용을 확인하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_0.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"주의 사항\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"IP를 /etc/hosts 파일에 추가하세요: \", _jsx(_components.code, {\n          children: \"sudo echo [IP] cyberlens.thm >> /etc/hosts\"\n        })]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 공간은 CyberLens 및 그들의 전문 도구에 대해 다루며, 스테가노그래피에 초점을 맞출 수도 있습니다. 화법 및 메타데이터를 위해 이미지를 분석하거나 숨겨진 플래그를 찾기 위해 이러한 도구 내의 취약점을 이용할 수도 있습니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"열거\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리는 빠른 스캔을 위해 올드스쿨 nmap으로 시작합니다.\\n그리고 흥미로운 포트가 열려 있는 것을 발견합니다\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"─# nmap \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"10.10\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".189\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".206\"\n        }), \" -A\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Starting\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Nmap\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"7.\"\n        }), \"94SVN ( \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"https\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//nmap.org ) at 2024-05-18 09:40 EDT\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Nmap\"\n        }), \" scan report \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"for\"\n        }), \" cyberlens.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"thm\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"10.10\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".189\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".206\"\n        }), \")\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Host\"\n        }), \" is up (\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.\"\n        }), \"10s latency).\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Not\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"shown\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"995\"\n        }), \" closed tcp ports (reset)\\n\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"PORT\"\n        }), \"     \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"STATE\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"SERVICE\"\n        }), \"       \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"VERSION\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"80\"\n        }), \"/tcp   open  http          \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Apache\"\n        }), \" httpd \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2.4\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".57\"\n        }), \" ((\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Win64\"\n        }), \"))\\n|_http-server-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"header\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Apache\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2.4\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".57\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Win64\"\n        }), \")\\n| http-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"methods\"\n        }), \": \\n|_  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Potentially\"\n        }), \" risky \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"methods\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"TRACE\"\n        }), \"\\n|_http-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"title\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CyberLens\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Unveiling\"\n        }), \" the \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Hidden\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Matrix\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"135\"\n        }), \"/tcp  open  msrpc         \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Microsoft\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Windows\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"RPC\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"139\"\n        }), \"/tcp  open  netbios-ssn   \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Microsoft\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Windows\"\n        }), \" netbios-ssn\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"445\"\n        }), \"/tcp  open  microsoft-ds?\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"3389\"\n        }), \"/tcp open  ms-wbt-server \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Microsoft\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Terminal\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Services\"\n        }), \"\\n| ssl-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"cert\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Subject\"\n        }), \": commonName=\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CyberLens\"\n        }), \"\\n| \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Not\"\n        }), \" valid \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"before\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2024\"\n        }), \"-\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"05\"\n        }), \"-17\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"T13\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"10\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"13\"\n        }), \"\\n|_Not valid \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"after\"\n        }), \":  \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2024\"\n        }), \"-\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"11\"\n        }), \"-16\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"T13\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"10\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"13\"\n        }), \"\\n| rdp-ntlm-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"info\"\n        }), \": \\n|   \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Target\"\n        }), _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"_Name\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"CYBERLENS\"\n        }), \"\\n|   \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"NetBIOS\"\n        }), _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"_Domain_Name\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"CYBERLENS\"\n        }), \"\\n|   \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"NetBIOS\"\n        }), _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"_Computer_Name\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"CYBERLENS\"\n        }), \"\\n|   \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"DNS_Domain_Name\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CyberLens\"\n        }), \"\\n|   \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"DNS_Computer_Name\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CyberLens\"\n        }), \"\\n|   \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Product\"\n        }), _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"_Version\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"10.0\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".17763\"\n        }), \"\\n|_  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"System\"\n        }), _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"_Time\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2024\"\n        }), \"-\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"05\"\n        }), \"-18\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"T13\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"47\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"39\"\n        }), \"+\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"00\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"00\"\n        }), \"\\n|_ssl-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"date\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2024\"\n        }), \"-\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"05\"\n        }), \"-18\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"T13\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"47\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"47\"\n        }), \"+\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"00\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"00\"\n        }), \"; -10s \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" scanner time.\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"No\"\n        }), \" exact \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OS\"\n        }), \" matches \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"for\"\n        }), \" host (\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"If\"\n        }), \" you know what \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OS\"\n        }), \" is running on it, see \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"https\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//nmap.org/submit/ ).\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"TCP\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"IP\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"fingerprint\"\n        }), \":\\n\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"OS\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"SCAN\"\n        }), \"(V=\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"7\"\n        }), \")... redacted ...\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Network\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Distance\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2\"\n        }), \" hops\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Service\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Info\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"OS\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Windows\"\n        }), \"; \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"CPE\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"cpe\"\n        }), \":/\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"o\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"microsoft\"\n        }), \":windows\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Host\"\n        }), \" script \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"results\"\n        }), \":\\n| smb2-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"time\"\n        }), \": \\n|   \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"date\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2024\"\n        }), \"-\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"05\"\n        }), \"-18\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"T13\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"47\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"41\"\n        }), \"\\n|_  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"start_date\"\n        }), \": N/A\\n|_clock-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"skew\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"mean\"\n        }), \": -10s, \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"deviation\"\n        }), \": 0s, \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"median\"\n        }), \": -10s\\n| smb2-security-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"mode\"\n        }), \": \\n|   \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"3\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \": \\n|_    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Message\"\n        }), \" signing enabled but not required\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"TRACEROUTE\"\n        }), \" (using port \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"587\"\n        }), \"/tcp)\\n\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"HOP\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"RTT\"\n        }), \"       \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"ADDRESS\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \"   \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"125.60\"\n        }), \" ms \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"10.9\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".0\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".1\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2\"\n        }), \"   \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"121.35\"\n        }), \" ms cyberlens.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"thm\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"10.10\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".189\"\n        }), _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \".206\"\n        }), \")\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OS\"\n        }), \" and \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Service\"\n        }), \" detection performed. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Please\"\n        }), \" report any incorrect results at \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"https\"\n        }), \":\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//nmap.org/submit/ .\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Nmap\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"done\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"IP\"\n        }), \" address (\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \" host up) scanned \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"in\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"464.64\"\n        }), \" seconds\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"80/tcp: Apache httpd 2.4.57에서 오픈된 HTTP — CVE 발견 안 됨\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"135/tcp: Microsoft Windows RPC 오픈\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"139/tcp: Microsoft Windows netbios-ssn 오픈\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"445/tcp: Microsoft-DS 오픈\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"3389/tcp: Microsoft Terminal Services (RDP) 오픈\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리는 웹사이트를 돌아다니다가, dirb를 실행하여 새로운 디렉토리를 발견하였어요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_1.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리의 관심을 끄는 두 가지 발견:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"연락 양식: 현재 유용한 정보가 없습니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"이미지 추출기: 저희 조사에 대한 잠재적인 통찰력을 약속하는 온라인 메타데이터 추출 서비스입니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_2.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"나는 http://cyberlens.thm/images/에서 찾은 이미지를 힌트를 얻기 위해 도구에 업로드했지만 유용한 메타데이터를 찾을 수 없었습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음으로 \\\"메타데이터 가져오기\\\" 버튼을 조사하고 해당 이벤트를 추적했습니다. 이로써 다음이 드러났습니다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_3.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"nmap 결과에 이 포트가 나오지 않았어요. 이 포트는 일반적이지 않은 포트라서이고, -p- 플래그를 사용하지 않았기 때문입니다. 일반적으로는 권장되지 않아요.\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_4.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"첫 번째로는 해당 아파치 티카 버전에 대한 CVE를 찾아보는 거에요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Metasploit을 시작하고,\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_5.png\",\n        alt: \"CyberLens_5\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"접근 방법\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Metasploit을 구성하고 (set RHOSTS, RPORT, LPORT), 그런 다음 exploit을 실행합니다. 그리고 바로 Meterpreter 세션을 열었습니다. 와우!\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_6.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우선 CyberLens의 문서에서 깃발을 찾으려고 했어요. 대신 관리 부분을 우연히 발견했어요. 거기에서 승격을 위해 사용할 자격 증명을 찾았어요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_7.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"힌트에서 이해한대로 대부분의 Windows 깃발은 데스크톱에 있기 때문에 거기로 가서 첫 번째 깃발을 얻었어요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_8.png\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"권한 상슨\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이전에 찾은 자격 증명을 다시 보면, 원격 데스크톱 프로토콜(RDP) 포트 3389과 일치합니다.\\n그래서 remmina를 실행하지만, 동일한 사용자로 굳어 버린 것을 발견합니다. 이는 클래식한 실수였습니다. 사용자 이름에 주의를 기울이지 않았기 때문입니다. 권한 상슨이 내가 희망했던 만큼 간단하지 않을 것이라는 것을 알게 되었습니다. 그럼에도 불구하고 GUI 인터페이스를 보유하고 있기 때문에 이제 시스템을 쉽게 탐색할 방법이 제공되었습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음으로 모든 서비스를 나열했습니다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"sc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"exe\"\n        }), \" query state=all\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"하지만 리스트가 굉장히 길었고, 수작업으로 걸러내는 대신 더 포괄적인 분석을 위해 WinPEAS를 실행하기로 결정했습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이미 존재하는 Metasploit 쉘을 고려할 때, 나는 나의 접근 방식을 전환했습니다. WinPEAS 대신 Metasploit의 multi/recon/local_exploit_suggester 모듈을 사용하여 권한 상승을 위한 잠재적인 취약점을 식별했습니다.\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_9.png\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"세션을 설정하고 모듈을 실행하여 총 세 가지 취약점을 발견했어요. 먼저 첫 번째 취약점부터 시작해서 해당 옵션을 구성한 후(exploit를 실행하기 전에 LHOST, LPORT, SESSION을 설정해주세요).\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그리고 이제 NT AUTHORITY\\\\SYSTEM으로 권한 상승했어요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-20-TryHackMeWriteup-CyberLens_10.png\",\n        alt: \"TryHackMeWriteup-CyberLens_10\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"관리자의 데스크톱에 깃발이 있을 거에요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"결론\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"주의 깊은 열거: 중요한 서비스를 식별하면서 모든 포트를 스캔하는 것을 잊지 마세요 (-p-).\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"수동 열거: 잠재적으로 간과된 단서를 잡는 데 중요합니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"도전의 조합: 웹 취약점 분석과 권한 상승을 결합했습니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"적응성 있는 전략: 수동 서비스 분석 및 WinPEAS에서 Metasploit의 익스플로잇 제안자로 전환했습니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"주요 발견: 취약점을 발견하고 악용하여 사용자와 관리자 깃발을 얻었습니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"필수 기술: 적응적 전략 및 실용적 사이버 보안 기술을 강화했습니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"LinkedIn에서 저와 연결하세요.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true}