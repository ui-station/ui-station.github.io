<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>FastAPIì™€ MongoDB ì†Œê°œ ì²« ê±¸ìŒë¶€í„° ì‹œì‘í•˜ê¸° | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-23-IntrotoFastAPIandMongoDB" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="FastAPIì™€ MongoDB ì†Œê°œ ì²« ê±¸ìŒë¶€í„° ì‹œì‘í•˜ê¸° | ui-station" data-gatsby-head="true"/><meta property="og:title" content="FastAPIì™€ MongoDB ì†Œê°œ ì²« ê±¸ìŒë¶€í„° ì‹œì‘í•˜ê¸° | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-23-IntrotoFastAPIandMongoDB" data-gatsby-head="true"/><meta name="twitter:title" content="FastAPIì™€ MongoDB ì†Œê°œ ì²« ê±¸ìŒë¶€í„° ì‹œì‘í•˜ê¸° | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-23 22:46" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/wOkGEDZCvEs3S_XaNsdwr/_buildManifest.js" defer=""></script><script src="/_next/static/wOkGEDZCvEs3S_XaNsdwr/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">FastAPIì™€ MongoDB ì†Œê°œ ì²« ê±¸ìŒë¶€í„° ì‹œì‘í•˜ê¸°</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="FastAPIì™€ MongoDB ì†Œê°œ ì²« ê±¸ìŒë¶€í„° ì‹œì‘í•˜ê¸°" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 23, 2024</span><span class="posts_reading_time__f7YPP">7<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-23-IntrotoFastAPIandMongoDB&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” FastAPIì— ì˜ì¡´í•˜ëŠ” ê°„ë‹¨í•œ íŒŒì´ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ MongoDBë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê¸°ëŠ¥ì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>í”„ë¡œê·¸ë¨ì´ ëª¨ë“  ì¥ì¹˜ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´, ì´ íŠœí† ë¦¬ì–¼ì€ ë³´í¸ì ì¸ ì ‘ê·¼ ë°©ì‹ì„ ì·¨í•˜ë©° Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<p>ë˜í•œ ë³´ì•ˆê³¼ í™•ì¥ì„±ì— ëŒ€í•œ ë‚´ìš©ì— ëŒ€í•´ì„œëŠ” ì´ PoCì—ì„œëŠ” ì¤‘ì ì„ ë‘ì§€ ì•Šì•˜ìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ì— ëŒ€í•´ì„œëŠ” FastAPI ë³´ì•ˆ ë¬¸ì„œë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h2>ì‚¬ì „ ìš”êµ¬ ì‚¬í•­</h2>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì¹œêµ¬ì•¼, ê¸°ê¸°ì— ë‹¤ìŒ ì†Œí”„íŠ¸ì›¨ì–´ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
<ul>
<li>Git</li>
<li>Docker Desktop</li>
<li>Python</li>
<li>MongoDB Compass ë˜ëŠ” Mongosh</li>
</ul>
<h2>PoC ì‹¤í–‰ ë°©ë²•</h2>
<p>ì €ì¥ì†Œë¥¼ ë³µì œ(clone)í•˜ê¸° ì „ì—, ëª¨ë“  ì„ í–‰ ìš”êµ¬ ì‚¬í•­ì´ ì¶©ì¡±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">git clone <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/raduul/FastMongo.git</span>
</code></pre>
<p>Docker Desktopì„ ì¼œê³ , ë°ì´í„°ê°€ ìœ ì§€ë  ë³¼ë¥¨ì„ êµ¬ì„±í•˜ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-title class_">Docker</span> <span class="hljs-title class_">Desktop</span> > <span class="hljs-title class_">Settings</span> > <span class="hljs-title class_">Resources</span> > <span class="hljs-title class_">File</span> <span class="hljs-title class_">Sharing</span> > ì›í•˜ëŠ” ìœ„ì¹˜ ì„ íƒ
</code></pre>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•œ í›„, ë³µì œí•œ ì €ì¥ì†Œë¡œ ì´ë™í•´ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">docker compose -f deployment/docker-compose-fastapi.<span class="hljs-property">yaml</span> up --build
</code></pre>
<p>ë¡œì»¬ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ MongoDBì— ìƒ˜í”Œ ë°ì´í„°ë¥¼ ë³´ë‚´ë ¤ë©´ Swagger UI(localhost:8000/docs)ì— ì•¡ì„¸ìŠ¤í•˜ì‹­ì‹œì˜¤.</p>
<p>â€˜send_dataâ€™ë¥¼ ì—´ì–´ì„œ â€œTry it outâ€ì„ ì„ íƒí•œ í›„ â€œExecuteâ€ë¥¼ ì„ íƒí•˜ì—¬ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë³´ë‚´ì„¸ìš”.</p>
<img src="/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_0.png">
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´í›„ì—ëŠ” "ì‹¤í–‰" ë²„íŠ¼ ì•„ë˜ì— ìš”ì²­ ìƒíƒœê°€ í‘œì‹œë©ë‹ˆë‹¤. ìƒíƒœ ì½”ë“œ 200ì€ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤!</p>
<p><img src="/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_1.png" alt="ì´ë¯¸ì§€"></p>
<p>ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ë©´ MongoDB Compassë¡œ ì´ë™í•˜ì—¬ ì¶”ê°€ëœ ë°ì´í„°ê°€ ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë° ì»¬ë ‰ì…˜ì— ì•¡ì„¸ìŠ¤í•˜ì‹­ì‹œì˜¤.
ì—°ê²° ë¬¸ìì—´ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-attr">mongodb</span>:<span class="hljs-comment">//root:example@localhost:27017/fast-api?authSource=admin</span>
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_2.png">
<p>ì´ì œ ë°ì´í„°ë¥¼ MongoDBì— ì„±ê³µì ìœ¼ë¡œ ë³´ëƒˆìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ ì‹¤í—˜í•˜ê³  MongoDB ë°ì´í„°ë² ì´ìŠ¤ì— ì¶”ê°€ ê²½ë¡œì™€ ì»¬ë ‰ì…˜ì„ ìƒì„±í•´ë³´ì„¸ìš”. ì¶•í•˜í•©ë‹ˆë‹¤ ğŸ¥³ğŸŠ</p>
<h2>ì½”ë“œ ì†Œê°œ</h2>
<p>ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ë° í•„ìš”í•œ ì½”ë“œëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤! ì„¸ ê°œì˜ ê·¸ë£¹ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>FastAPI â€” ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” API Endpointë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</li>
<li>MongoDB â€” FastAPIì—ì„œ ì „ì†¡ëœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</li>
<li>Docker Compose â€” FastAPI ë° MongoDBì˜ ì»¨í…Œì´ë„ˆí™”ëœ ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</li>
</ul>
<h2>FastAPI</h2>
<p>ì´ ì½”ë“œëŠ” ì—¬ëŸ¬ ê°œì˜ íŒŒì´ì¬ íŒŒì¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì§€ë§Œ, ê°€ì¥ ì¤‘ìš”í•œ ë‘ ê°œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<ul>
<li>ë¨¼ì € MongoDB ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ì´ ì„¤ì •ë©ë‹ˆë‹¤: (database.py)</li>
</ul>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> motor.<span class="hljs-property">motor_asyncio</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">AsyncIOMotorClient</span>
<span class="hljs-keyword">import</span> os

logging.<span class="hljs-title function_">basicConfig</span>(level=logging.<span class="hljs-property">INFO</span>, format=<span class="hljs-string">'%(asctime)s - %(levelname)s - %(message)s'</span>)

<span class="hljs-attr">client</span>: <span class="hljs-title class_">AsyncIOMotorClient</span> = <span class="hljs-title class_">None</span>

def <span class="hljs-title function_">startup_db_client</span>():
    <span class="hljs-variable language_">global</span> client
    <span class="hljs-attr">try</span>:
        mongo_uri = os.<span class="hljs-title function_">getenv</span>(<span class="hljs-string">'MONGO_URL'</span>)
        client = <span class="hljs-title class_">AsyncIOMotorClient</span>(mongo_uri)
        logging.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Connected to MongoDB successfully."</span>)
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        logging.<span class="hljs-title function_">error</span>(f<span class="hljs-string">"Failed to connect to MongoDB: {e}"</span>)
    <span class="hljs-keyword">return</span> client[<span class="hljs-string">'fast-api'</span>]

def <span class="hljs-title function_">shutdown_db_client</span>():
    client.<span class="hljs-title function_">close</span>()
    logging.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MongoDB connection closed."</span>)

def <span class="hljs-title function_">get_database</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">startup_db_client</span>()
</code></pre>
<p>ë‘˜ì§¸ë¡œ, ì—°ê²°ì´ ì„¤ì •ë˜ë©´ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ ìœ ì¶”í•©ë‹ˆë‹¤ (main.py)</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> <span class="hljs-title class_">FastAPI</span>, <span class="hljs-title class_">Depends</span>
<span class="hljs-keyword">from</span> database <span class="hljs-keyword">import</span> startup_db_client, shutdown_db_client, get_database

app = <span class="hljs-title class_">FastAPI</span>()

app.<span class="hljs-title function_">add_event_handler</span>(<span class="hljs-string">"startup"</span>, startup_db_client)
app.<span class="hljs-title function_">add_event_handler</span>(<span class="hljs-string">"shutdown"</span>, shutdown_db_client)

@app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/send_data"</span>)
<span class="hljs-keyword">async</span> def <span class="hljs-title function_">insert_sample_data</span>(<span class="hljs-attr">sample_data</span>: dict, db=<span class="hljs-title class_">Depends</span>(get_database)):
    <span class="hljs-attr">try</span>:
        collection = db[<span class="hljs-string">'sample-users'</span>]
        result = <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">insert_one</span>(sample_data)
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"id of inserted record"</span>: <span class="hljs-title function_">str</span>(result.<span class="hljs-property">inserted_id</span>)}
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"error"</span>: <span class="hljs-title function_">str</span>(e)}
</code></pre>
<h2>MongoDB</h2>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>MongoDB êµ¬ì„±ì€ PoCë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ê°„ë‹¨í•˜ê²Œ ìœ ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ êµ¬ì„±ì€ ìˆœì „íˆ ê¸°ë³¸ ì„¤ì •ì…ë‹ˆë‹¤. MongoDBì˜ ë‘ ê°€ì§€ ì£¼ìš” íŒŒì¼ì€ "deployment/docker-compose-fastapi.yaml" ë° "deployment/init-mongo.js"ì…ë‹ˆë‹¤.</p>
<ul>
<li>docker-compose-fastapi.yaml â€” MongoDBë¥¼ ìœ„í•œ ê¸°ë³¸ ë°°í¬ êµ¬ì„±ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</li>
<li>deployment/init-mongo.js â€” Docker Composeì— ì˜í•´ MongoDBê°€ ë°°í¬ë  ë•Œ PoCë¥¼ ìœ„í•´ ìƒì„±ë  ìŠ¤í‚¤ë§ˆì— ëŒ€í•œ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h2>Docker Compose</h2>
<p>Docker Composeì€ ì´ PoCì—ì„œ ì‚¬ìš©ë˜ëŠ” ì´ë¯¸ì§€ ì¤‘ ë‘ ê°œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. êµ¬ì„±ì€ "deployment/docker-compose-fastapi.yaml"ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>fastapi ì„œë¹„ìŠ¤ëŠ” ë£¨íŠ¸ì— ìœ„ì¹˜í•œ Dockerfileì„ ì°¸ì¡°í•˜ë©° FastAPI ì•±ì„ ë¹Œë“œí•˜ê³  ë¹Œë“œëœ í›„ì— ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ êµ¬ì„±ì„ í¬í•¨í•©ë‹ˆë‹¤.</li>
<li>mongo ì„œë¹„ìŠ¤ëŠ” MongoDB ì´ë¯¸ì§€ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤. "docker compose down" í›„ì—ë„ ë°ì´í„°ê°€ ìœ ì§€ë˜ë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ ë³¼ë¥¨ì´ ìƒì„±ë˜ì–´ ë°ì´í„°ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤. ì‚¬ìš© ì¤‘ì¸ íŠ¹ì • ì´ë¯¸ì§€ëŠ” OS/ARCH Amd64 ë° Arm64ì™€ í˜¸í™˜ë©ë‹ˆë‹¤.</li>
</ul>
<p>LinkedInì—ì„œ ì–¸ì œë“ ì§€ ì—°ë½ ì£¼ì„¸ìš”.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"FastAPIì™€ MongoDB ì†Œê°œ ì²« ê±¸ìŒë¶€í„° ì‹œì‘í•˜ê¸°","description":"","date":"2024-06-23 22:46","slug":"2024-06-23-IntrotoFastAPIandMongoDB","content":"\nì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” FastAPIì— ì˜ì¡´í•˜ëŠ” ê°„ë‹¨í•œ íŒŒì´ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ MongoDBë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê¸°ëŠ¥ì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.\n\ní”„ë¡œê·¸ë¨ì´ ëª¨ë“  ì¥ì¹˜ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´, ì´ íŠœí† ë¦¬ì–¼ì€ ë³´í¸ì ì¸ ì ‘ê·¼ ë°©ì‹ì„ ì·¨í•˜ë©° Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\n\në˜í•œ ë³´ì•ˆê³¼ í™•ì¥ì„±ì— ëŒ€í•œ ë‚´ìš©ì— ëŒ€í•´ì„œëŠ” ì´ PoCì—ì„œëŠ” ì¤‘ì ì„ ë‘ì§€ ì•Šì•˜ìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ì— ëŒ€í•´ì„œëŠ” FastAPI ë³´ì•ˆ ë¬¸ì„œë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n## ì‚¬ì „ ìš”êµ¬ ì‚¬í•­\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì¹œêµ¬ì•¼, ê¸°ê¸°ì— ë‹¤ìŒ ì†Œí”„íŠ¸ì›¨ì–´ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n- Git\n- Docker Desktop\n- Python\n- MongoDB Compass ë˜ëŠ” Mongosh\n\n## PoC ì‹¤í–‰ ë°©ë²•\n\nì €ì¥ì†Œë¥¼ ë³µì œ(clone)í•˜ê¸° ì „ì—, ëª¨ë“  ì„ í–‰ ìš”êµ¬ ì‚¬í•­ì´ ì¶©ì¡±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\ngit clone https://github.com/raduul/FastMongo.git\n```\n\nDocker Desktopì„ ì¼œê³ , ë°ì´í„°ê°€ ìœ ì§€ë  ë³¼ë¥¨ì„ êµ¬ì„±í•˜ì„¸ìš”.\n\n```js\nDocker Desktop \u003e Settings \u003e Resources \u003e File Sharing \u003e ì›í•˜ëŠ” ìœ„ì¹˜ ì„ íƒ\n```\n\nì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•œ í›„, ë³µì œí•œ ì €ì¥ì†Œë¡œ ì´ë™í•´ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\ndocker compose -f deployment/docker-compose-fastapi.yaml up --build\n```\n\në¡œì»¬ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ MongoDBì— ìƒ˜í”Œ ë°ì´í„°ë¥¼ ë³´ë‚´ë ¤ë©´ Swagger UI(localhost:8000/docs)ì— ì•¡ì„¸ìŠ¤í•˜ì‹­ì‹œì˜¤.\n\nâ€˜send_dataâ€™ë¥¼ ì—´ì–´ì„œ â€œTry it outâ€ì„ ì„ íƒí•œ í›„ â€œExecuteâ€ë¥¼ ì„ íƒí•˜ì—¬ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë³´ë‚´ì„¸ìš”.\n\n\u003cimg src=\"/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_0.png\" /\u003e\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´í›„ì—ëŠ” \"ì‹¤í–‰\" ë²„íŠ¼ ì•„ë˜ì— ìš”ì²­ ìƒíƒœê°€ í‘œì‹œë©ë‹ˆë‹¤. ìƒíƒœ ì½”ë“œ 200ì€ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤!\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_1.png)\n\në°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ë©´ MongoDB Compassë¡œ ì´ë™í•˜ì—¬ ì¶”ê°€ëœ ë°ì´í„°ê°€ ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë° ì»¬ë ‰ì…˜ì— ì•¡ì„¸ìŠ¤í•˜ì‹­ì‹œì˜¤.\nì—°ê²° ë¬¸ìì—´ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n```js\nmongodb://root:example@localhost:27017/fast-api?authSource=admin\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_2.png\" /\u003e\n\nì´ì œ ë°ì´í„°ë¥¼ MongoDBì— ì„±ê³µì ìœ¼ë¡œ ë³´ëƒˆìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ ì‹¤í—˜í•˜ê³  MongoDB ë°ì´í„°ë² ì´ìŠ¤ì— ì¶”ê°€ ê²½ë¡œì™€ ì»¬ë ‰ì…˜ì„ ìƒì„±í•´ë³´ì„¸ìš”. ì¶•í•˜í•©ë‹ˆë‹¤ ğŸ¥³ğŸŠ\n\n## ì½”ë“œ ì†Œê°œ\n\nì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ë° í•„ìš”í•œ ì½”ë“œëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤! ì„¸ ê°œì˜ ê·¸ë£¹ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- FastAPI â€” ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” API Endpointë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n- MongoDB â€” FastAPIì—ì„œ ì „ì†¡ëœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n- Docker Compose â€” FastAPI ë° MongoDBì˜ ì»¨í…Œì´ë„ˆí™”ëœ ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n## FastAPI\n\nì´ ì½”ë“œëŠ” ì—¬ëŸ¬ ê°œì˜ íŒŒì´ì¬ íŒŒì¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì§€ë§Œ, ê°€ì¥ ì¤‘ìš”í•œ ë‘ ê°œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n- ë¨¼ì € MongoDB ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ì´ ì„¤ì •ë©ë‹ˆë‹¤: (database.py)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nimport logging\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\n\nlogging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')\n\nclient: AsyncIOMotorClient = None\n\ndef startup_db_client():\n    global client\n    try:\n        mongo_uri = os.getenv('MONGO_URL')\n        client = AsyncIOMotorClient(mongo_uri)\n        logging.info(\"Connected to MongoDB successfully.\")\n    except Exception as e:\n        logging.error(f\"Failed to connect to MongoDB: {e}\")\n    return client['fast-api']\n\ndef shutdown_db_client():\n    client.close()\n    logging.info(\"MongoDB connection closed.\")\n\ndef get_database():\n    return startup_db_client()\n```\n\në‘˜ì§¸ë¡œ, ì—°ê²°ì´ ì„¤ì •ë˜ë©´ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ ìœ ì¶”í•©ë‹ˆë‹¤ (main.py)\n\n```js\nfrom fastapi import FastAPI, Depends\nfrom database import startup_db_client, shutdown_db_client, get_database\n\napp = FastAPI()\n\napp.add_event_handler(\"startup\", startup_db_client)\napp.add_event_handler(\"shutdown\", shutdown_db_client)\n\n@app.post(\"/send_data\")\nasync def insert_sample_data(sample_data: dict, db=Depends(get_database)):\n    try:\n        collection = db['sample-users']\n        result = await collection.insert_one(sample_data)\n        return {\"id of inserted record\": str(result.inserted_id)}\n    except Exception as e:\n        return {\"error\": str(e)}\n```\n\n## MongoDB\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nMongoDB êµ¬ì„±ì€ PoCë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ê°„ë‹¨í•˜ê²Œ ìœ ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ êµ¬ì„±ì€ ìˆœì „íˆ ê¸°ë³¸ ì„¤ì •ì…ë‹ˆë‹¤. MongoDBì˜ ë‘ ê°€ì§€ ì£¼ìš” íŒŒì¼ì€ \"deployment/docker-compose-fastapi.yaml\" ë° \"deployment/init-mongo.js\"ì…ë‹ˆë‹¤.\n\n- docker-compose-fastapi.yaml â€” MongoDBë¥¼ ìœ„í•œ ê¸°ë³¸ ë°°í¬ êµ¬ì„±ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n- deployment/init-mongo.js â€” Docker Composeì— ì˜í•´ MongoDBê°€ ë°°í¬ë  ë•Œ PoCë¥¼ ìœ„í•´ ìƒì„±ë  ìŠ¤í‚¤ë§ˆì— ëŒ€í•œ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n## Docker Compose\n\nDocker Composeì€ ì´ PoCì—ì„œ ì‚¬ìš©ë˜ëŠ” ì´ë¯¸ì§€ ì¤‘ ë‘ ê°œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. êµ¬ì„±ì€ \"deployment/docker-compose-fastapi.yaml\"ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- fastapi ì„œë¹„ìŠ¤ëŠ” ë£¨íŠ¸ì— ìœ„ì¹˜í•œ Dockerfileì„ ì°¸ì¡°í•˜ë©° FastAPI ì•±ì„ ë¹Œë“œí•˜ê³  ë¹Œë“œëœ í›„ì— ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ êµ¬ì„±ì„ í¬í•¨í•©ë‹ˆë‹¤.\n- mongo ì„œë¹„ìŠ¤ëŠ” MongoDB ì´ë¯¸ì§€ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤. \"docker compose down\" í›„ì—ë„ ë°ì´í„°ê°€ ìœ ì§€ë˜ë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ ë³¼ë¥¨ì´ ìƒì„±ë˜ì–´ ë°ì´í„°ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤. ì‚¬ìš© ì¤‘ì¸ íŠ¹ì • ì´ë¯¸ì§€ëŠ” OS/ARCH Amd64 ë° Arm64ì™€ í˜¸í™˜ë©ë‹ˆë‹¤.\n\nLinkedInì—ì„œ ì–¸ì œë“ ì§€ ì—°ë½ ì£¼ì„¸ìš”.\n","ogImage":{"url":"/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_0.png"},"coverImage":"/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_0.png","tag":["Tech"],"readingTime":7},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003eì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” FastAPIì— ì˜ì¡´í•˜ëŠ” ê°„ë‹¨í•œ íŒŒì´ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ MongoDBë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê¸°ëŠ¥ì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eí”„ë¡œê·¸ë¨ì´ ëª¨ë“  ì¥ì¹˜ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´, ì´ íŠœí† ë¦¬ì–¼ì€ ë³´í¸ì ì¸ ì ‘ê·¼ ë°©ì‹ì„ ì·¨í•˜ë©° Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë˜í•œ ë³´ì•ˆê³¼ í™•ì¥ì„±ì— ëŒ€í•œ ë‚´ìš©ì— ëŒ€í•´ì„œëŠ” ì´ PoCì—ì„œëŠ” ì¤‘ì ì„ ë‘ì§€ ì•Šì•˜ìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ì— ëŒ€í•´ì„œëŠ” FastAPI ë³´ì•ˆ ë¬¸ì„œë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eì‚¬ì „ ìš”êµ¬ ì‚¬í•­\u003c/h2\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì¹œêµ¬ì•¼, ê¸°ê¸°ì— ë‹¤ìŒ ì†Œí”„íŠ¸ì›¨ì–´ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGit\u003c/li\u003e\n\u003cli\u003eDocker Desktop\u003c/li\u003e\n\u003cli\u003ePython\u003c/li\u003e\n\u003cli\u003eMongoDB Compass ë˜ëŠ” Mongosh\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePoC ì‹¤í–‰ ë°©ë²•\u003c/h2\u003e\n\u003cp\u003eì €ì¥ì†Œë¥¼ ë³µì œ(clone)í•˜ê¸° ì „ì—, ëª¨ë“  ì„ í–‰ ìš”êµ¬ ì‚¬í•­ì´ ì¶©ì¡±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003egit clone \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/raduul/FastMongo.git\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDocker Desktopì„ ì¼œê³ , ë°ì´í„°ê°€ ìœ ì§€ë  ë³¼ë¥¨ì„ êµ¬ì„±í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eDocker\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDesktop\u003c/span\u003e \u003e \u003cspan class=\"hljs-title class_\"\u003eSettings\u003c/span\u003e \u003e \u003cspan class=\"hljs-title class_\"\u003eResources\u003c/span\u003e \u003e \u003cspan class=\"hljs-title class_\"\u003eFile\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSharing\u003c/span\u003e \u003e ì›í•˜ëŠ” ìœ„ì¹˜ ì„ íƒ\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•œ í›„, ë³µì œí•œ ì €ì¥ì†Œë¡œ ì´ë™í•´ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edocker compose -f deployment/docker-compose-fastapi.\u003cspan class=\"hljs-property\"\u003eyaml\u003c/span\u003e up --build\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë¡œì»¬ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ MongoDBì— ìƒ˜í”Œ ë°ì´í„°ë¥¼ ë³´ë‚´ë ¤ë©´ Swagger UI(localhost:8000/docs)ì— ì•¡ì„¸ìŠ¤í•˜ì‹­ì‹œì˜¤.\u003c/p\u003e\n\u003cp\u003eâ€˜send_dataâ€™ë¥¼ ì—´ì–´ì„œ â€œTry it outâ€ì„ ì„ íƒí•œ í›„ â€œExecuteâ€ë¥¼ ì„ íƒí•˜ì—¬ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë³´ë‚´ì„¸ìš”.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_0.png\"\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´í›„ì—ëŠ” \"ì‹¤í–‰\" ë²„íŠ¼ ì•„ë˜ì— ìš”ì²­ ìƒíƒœê°€ í‘œì‹œë©ë‹ˆë‹¤. ìƒíƒœ ì½”ë“œ 200ì€ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_1.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003eë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ë©´ MongoDB Compassë¡œ ì´ë™í•˜ì—¬ ì¶”ê°€ëœ ë°ì´í„°ê°€ ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë° ì»¬ë ‰ì…˜ì— ì•¡ì„¸ìŠ¤í•˜ì‹­ì‹œì˜¤.\nì—°ê²° ë¬¸ìì—´ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003emongodb\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//root:example@localhost:27017/fast-api?authSource=admin\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/assets/img/2024-06-23-IntrotoFastAPIandMongoDB_2.png\"\u003e\n\u003cp\u003eì´ì œ ë°ì´í„°ë¥¼ MongoDBì— ì„±ê³µì ìœ¼ë¡œ ë³´ëƒˆìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ ì‹¤í—˜í•˜ê³  MongoDB ë°ì´í„°ë² ì´ìŠ¤ì— ì¶”ê°€ ê²½ë¡œì™€ ì»¬ë ‰ì…˜ì„ ìƒì„±í•´ë³´ì„¸ìš”. ì¶•í•˜í•©ë‹ˆë‹¤ ğŸ¥³ğŸŠ\u003c/p\u003e\n\u003ch2\u003eì½”ë“œ ì†Œê°œ\u003c/h2\u003e\n\u003cp\u003eì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ë° í•„ìš”í•œ ì½”ë“œëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤! ì„¸ ê°œì˜ ê·¸ë£¹ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eFastAPI â€” ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” API Endpointë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eMongoDB â€” FastAPIì—ì„œ ì „ì†¡ëœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eDocker Compose â€” FastAPI ë° MongoDBì˜ ì»¨í…Œì´ë„ˆí™”ëœ ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eFastAPI\u003c/h2\u003e\n\u003cp\u003eì´ ì½”ë“œëŠ” ì—¬ëŸ¬ ê°œì˜ íŒŒì´ì¬ íŒŒì¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì§€ë§Œ, ê°€ì¥ ì¤‘ìš”í•œ ë‘ ê°œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eë¨¼ì € MongoDB ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ì´ ì„¤ì •ë©ë‹ˆë‹¤: (database.py)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e logging\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e motor.\u003cspan class=\"hljs-property\"\u003emotor_asyncio\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAsyncIOMotorClient\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e os\n\nlogging.\u003cspan class=\"hljs-title function_\"\u003ebasicConfig\u003c/span\u003e(level=logging.\u003cspan class=\"hljs-property\"\u003eINFO\u003c/span\u003e, format=\u003cspan class=\"hljs-string\"\u003e'%(asctime)s - %(levelname)s - %(message)s'\u003c/span\u003e)\n\n\u003cspan class=\"hljs-attr\"\u003eclient\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAsyncIOMotorClient\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eNone\u003c/span\u003e\n\ndef \u003cspan class=\"hljs-title function_\"\u003estartup_db_client\u003c/span\u003e():\n    \u003cspan class=\"hljs-variable language_\"\u003eglobal\u003c/span\u003e client\n    \u003cspan class=\"hljs-attr\"\u003etry\u003c/span\u003e:\n        mongo_uri = os.\u003cspan class=\"hljs-title function_\"\u003egetenv\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'MONGO_URL'\u003c/span\u003e)\n        client = \u003cspan class=\"hljs-title class_\"\u003eAsyncIOMotorClient\u003c/span\u003e(mongo_uri)\n        logging.\u003cspan class=\"hljs-title function_\"\u003einfo\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Connected to MongoDB successfully.\"\u003c/span\u003e)\n    except \u003cspan class=\"hljs-title class_\"\u003eException\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ee\u003c/span\u003e:\n        logging.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"Failed to connect to MongoDB: {e}\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e client[\u003cspan class=\"hljs-string\"\u003e'fast-api'\u003c/span\u003e]\n\ndef \u003cspan class=\"hljs-title function_\"\u003eshutdown_db_client\u003c/span\u003e():\n    client.\u003cspan class=\"hljs-title function_\"\u003eclose\u003c/span\u003e()\n    logging.\u003cspan class=\"hljs-title function_\"\u003einfo\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"MongoDB connection closed.\"\u003c/span\u003e)\n\ndef \u003cspan class=\"hljs-title function_\"\u003eget_database\u003c/span\u003e():\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003estartup_db_client\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë‘˜ì§¸ë¡œ, ì—°ê²°ì´ ì„¤ì •ë˜ë©´ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ ìœ ì¶”í•©ë‹ˆë‹¤ (main.py)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e fastapi \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFastAPI\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eDepends\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e database \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e startup_db_client, shutdown_db_client, get_database\n\napp = \u003cspan class=\"hljs-title class_\"\u003eFastAPI\u003c/span\u003e()\n\napp.\u003cspan class=\"hljs-title function_\"\u003eadd_event_handler\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"startup\"\u003c/span\u003e, startup_db_client)\napp.\u003cspan class=\"hljs-title function_\"\u003eadd_event_handler\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"shutdown\"\u003c/span\u003e, shutdown_db_client)\n\n@app.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/send_data\"\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e def \u003cspan class=\"hljs-title function_\"\u003einsert_sample_data\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esample_data\u003c/span\u003e: dict, db=\u003cspan class=\"hljs-title class_\"\u003eDepends\u003c/span\u003e(get_database)):\n    \u003cspan class=\"hljs-attr\"\u003etry\u003c/span\u003e:\n        collection = db[\u003cspan class=\"hljs-string\"\u003e'sample-users'\u003c/span\u003e]\n        result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e collection.\u003cspan class=\"hljs-title function_\"\u003einsert_one\u003c/span\u003e(sample_data)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003e\"id of inserted record\"\u003c/span\u003e: \u003cspan class=\"hljs-title function_\"\u003estr\u003c/span\u003e(result.\u003cspan class=\"hljs-property\"\u003einserted_id\u003c/span\u003e)}\n    except \u003cspan class=\"hljs-title class_\"\u003eException\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ee\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003e\"error\"\u003c/span\u003e: \u003cspan class=\"hljs-title function_\"\u003estr\u003c/span\u003e(e)}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eMongoDB\u003c/h2\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eMongoDB êµ¬ì„±ì€ PoCë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ê°„ë‹¨í•˜ê²Œ ìœ ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ êµ¬ì„±ì€ ìˆœì „íˆ ê¸°ë³¸ ì„¤ì •ì…ë‹ˆë‹¤. MongoDBì˜ ë‘ ê°€ì§€ ì£¼ìš” íŒŒì¼ì€ \"deployment/docker-compose-fastapi.yaml\" ë° \"deployment/init-mongo.js\"ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003edocker-compose-fastapi.yaml â€” MongoDBë¥¼ ìœ„í•œ ê¸°ë³¸ ë°°í¬ êµ¬ì„±ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003edeployment/init-mongo.js â€” Docker Composeì— ì˜í•´ MongoDBê°€ ë°°í¬ë  ë•Œ PoCë¥¼ ìœ„í•´ ìƒì„±ë  ìŠ¤í‚¤ë§ˆì— ëŒ€í•œ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eDocker Compose\u003c/h2\u003e\n\u003cp\u003eDocker Composeì€ ì´ PoCì—ì„œ ì‚¬ìš©ë˜ëŠ” ì´ë¯¸ì§€ ì¤‘ ë‘ ê°œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. êµ¬ì„±ì€ \"deployment/docker-compose-fastapi.yaml\"ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003efastapi ì„œë¹„ìŠ¤ëŠ” ë£¨íŠ¸ì— ìœ„ì¹˜í•œ Dockerfileì„ ì°¸ì¡°í•˜ë©° FastAPI ì•±ì„ ë¹Œë“œí•˜ê³  ë¹Œë“œëœ í›„ì— ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ êµ¬ì„±ì„ í¬í•¨í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003emongo ì„œë¹„ìŠ¤ëŠ” MongoDB ì´ë¯¸ì§€ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤. \"docker compose down\" í›„ì—ë„ ë°ì´í„°ê°€ ìœ ì§€ë˜ë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ ë³¼ë¥¨ì´ ìƒì„±ë˜ì–´ ë°ì´í„°ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤. ì‚¬ìš© ì¤‘ì¸ íŠ¹ì • ì´ë¯¸ì§€ëŠ” OS/ARCH Amd64 ë° Arm64ì™€ í˜¸í™˜ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLinkedInì—ì„œ ì–¸ì œë“ ì§€ ì—°ë½ ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-23-IntrotoFastAPIandMongoDB"},"buildId":"wOkGEDZCvEs3S_XaNsdwr","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>