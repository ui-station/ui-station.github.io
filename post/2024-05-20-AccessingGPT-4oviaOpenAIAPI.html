<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>OpenAI API를 통해 GPT-4o에 접속하기 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-05-20-AccessingGPT-4oviaOpenAIAPI" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="OpenAI API를 통해 GPT-4o에 접속하기 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="OpenAI API를 통해 GPT-4o에 접속하기 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-05-20-AccessingGPT-4oviaOpenAIAPI" data-gatsby-head="true"/><meta name="twitter:title" content="OpenAI API를 통해 GPT-4o에 접속하기 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-20 21:08" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/wOkGEDZCvEs3S_XaNsdwr/_buildManifest.js" defer=""></script><script src="/_next/static/wOkGEDZCvEs3S_XaNsdwr/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">OpenAI API를 통해 GPT-4o에 접속하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="OpenAI API를 통해 GPT-4o에 접속하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 20, 2024</span><span class="posts_reading_time__f7YPP">11<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-20-AccessingGPT-4oviaOpenAIAPI&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_0.png" alt="image"></p>
<h1>소개</h1>
<p>OpenAI가 최근에 발표한 GPT-4o는 텍스트, 이미지, 비디오 및 오디오 분석에 강력한 능력을 갖춘 첫 번째 멀티 모달 모델입니다. 이는 생성적 AI 모델의 응용 프로그램을 크게 확장시켰습니다. 이 블로그에서는 현재 텍스트 및 이미지 입력을 지원하는 API를 통해 이 모델을 사용하는 방법을 보여 드리려고 합니다. 모든 기능이 아직 제공되지 않았지만, OpenAI가 곧 출시할 예정입니다.</p>
<h1>특징</h1>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>일반 텍스트 생성</li>
<li>JSON 모드의 텍스트 생성</li>
<li>이미지 이해</li>
<li>함수 호출</li>
</ul>
<p>초기 설정</p>
<p>OpenAI 시크릿 키로 라이브러리를 설치하고 가져온 후, 환경 변수를 설정해주세요.</p>
<pre><code class="hljs language-js">pip install --upgrade openai --quiet
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>첫 번째 단계는 OpenAI 클라이언트를 설정하는 것입니다. 이를 위해 먼저 시크릿 키로 환경 변수를 만들어야 합니다. OPENAI_KEY=xyz와 같이 OpenAI 시크릿 키가 저장된 .env 파일을 만들어주세요.</p>
<p>작업이 완료되면 dotenv를 사용하여 키에 액세스할 수 있습니다.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

load_dotenv()
<span class="hljs-comment">## API 키 및 모델 이름 설정</span>
MODEL=<span class="hljs-string">"gpt-4o"</span>

api_key = os.getenv(<span class="hljs-string">'OPENAI_KEY'</span>)
client = OpenAI(api_key=api_key)
</code></pre>
<p>일반 텍스트 생성</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">completion = client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>(
  model=<span class="hljs-variable constant_">MODEL</span>,
  messages=[
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"당신은 도움이 되는 조수입니다. 수학 숙제를 돕습니다!"</span>}, # &#x3C;-- 모델에 맥락을 제공하는 시스템 메시지입니다
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"안녕하세요! 2+2를 해결할 수 있나요?"</span>}  # &#x3C;-- 모델이 응답을 생성할 사용자 메시지입니다
  ]
)

<span class="hljs-title function_">print</span>(<span class="hljs-string">"조수: "</span> + completion.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>)
</code></pre>
<p>출력:</p>
<p>물론이죠! 2 + 2 = 4. 다른 도움이 필요하시면 언제든지 물어보세요!</p>
<p>Json 모드에서 텍스트 생성하기</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">completion = client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>(
  (model = <span class="hljs-variable constant_">MODEL</span>),
  (response_format = { <span class="hljs-attr">type</span>: <span class="hljs-string">"json_object"</span> }),
  (messages = [
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">"system"</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">"You are a trainer who always responds in JSON"</span>,
    },
    { <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"Create a weekly workout routine for me"</span> },
  ])
);

json.<span class="hljs-title function_">loads</span>(completion.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>);
</code></pre>
<p>출력:</p>
<pre><code class="hljs language-bash"><span class="hljs-string">'‘workoutRoutine’: '</span>‘week’: 1, ‘days’: <span class="hljs-string">'‘Monday’: '</span>‘muscleGroup’: ‘Chest and Triceps’, ‘exercises’: [<span class="hljs-string">'‘name’: ‘Bench Press’, ‘sets’: 4, ‘reps’: 12'</span>, <span class="hljs-string">'‘name’: ‘Incline Dumbbell Press’, ‘sets’: 4, ‘reps’: 12'</span>, <span class="hljs-string">'‘name’: ‘Tricep Dips’, ‘sets’: 3, ‘reps’: 15'</span>, <span class="hljs-string">'‘name’: ‘Tricep Pushdown’, ‘sets’: 3, ‘reps’: 15'</span>]<span class="hljs-string">', ‘Tuesday’: '</span>‘muscleGroup’: ‘Back and Biceps’, ‘exercises’: [<span class="hljs-string">'‘name’: ‘Pull-Ups’, ‘sets’: 4, ‘reps’: 10'</span>, <span class="hljs-string">'‘name’: ‘Deadlifts’, ‘sets’: 4, ‘reps’: 12'</span>, <span class="hljs-string">'‘name’: ‘Barbell Rows’, ‘sets’: 4, ‘reps’: 12'</span>, <span class="hljs-string">'‘name’: ‘Bicep Curls’, ‘sets’: 3, ‘reps’: 15'</span>]<span class="hljs-string">',
</span></code></pre>
<ul>
<li>이미지 이해</li>
</ul>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>로컬 이미지 사용하기</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">from</span> <span class="hljs-title class_">IPython</span>.<span class="hljs-property">display</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span>, display, <span class="hljs-title class_">Audio</span>, <span class="hljs-title class_">Markdown</span>
<span class="hljs-keyword">import</span> base64

<span class="hljs-variable constant_">IMAGE_PATH</span> = <span class="hljs-string">"triangle.png"</span>

# 컨텍스트를 위한 이미지 미리보기
<span class="hljs-title function_">display</span>(<span class="hljs-title class_">Image</span>(<span class="hljs-variable constant_">IMAGE_PATH</span>))
</code></pre>
<img src="/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_1.png">
<pre><code class="hljs language-js"># 이미지 파일 열고 base64 문자열로 인코딩하기
def <span class="hljs-title function_">encode_image</span>(image_path):
    <span class="hljs-keyword">with</span> <span class="hljs-title function_">open</span>(image_path, <span class="hljs-string">"rb"</span>) <span class="hljs-keyword">as</span> <span class="hljs-attr">image_file</span>:
        <span class="hljs-keyword">return</span> base64.<span class="hljs-title function_">b64encode</span>(image_file.<span class="hljs-title function_">read</span>()).<span class="hljs-title function_">decode</span>(<span class="hljs-string">"utf-8"</span>)

base64_image = <span class="hljs-title function_">encode_image</span>(<span class="hljs-variable constant_">IMAGE_PATH</span>)

response = client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>(
    model=<span class="hljs-variable constant_">MODEL</span>,
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"당신은 Markdown으로 응답하는 유용한 도우미입니다. 내 수학 숙제를 도와주세요!"</span>},
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: [
            {<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>, <span class="hljs-string">"text"</span>: <span class="hljs-string">"삼각형의 면적은 얼마인가요?"</span>},
            {<span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>, <span class="hljs-string">"image_url"</span>: {
                <span class="hljs-string">"url"</span>: f<span class="hljs-string">"data:image/png;base64,{base64_image}"</span>}
            }
        ]}
    ],
    temperature=<span class="hljs-number">0.0</span>,
)

<span class="hljs-title function_">print</span>(response.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>)
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-bash">삼각형의 면적을 찾기 위해 직갛각 삼각형의 면적을 구하는 공식을 사용할 수 있습니다: \[ \text{면적} = \frac{1}{2} \<span class="hljs-built_in">times</span> \text{밑변} \<span class="hljs-built_in">times</span> \text{높이} \] 이 삼각형에서 밑변은 20 cm이고 높이는 15 cm입니다. \[ \text{면적} = \frac{1}{2} \<span class="hljs-built_in">times</span> 20 \, \text{cm} \<span class="hljs-built_in">times</span> 15 \, \text{cm} \] \[ \text{면적} = \frac{1}{2} \<span class="hljs-built_in">times</span> 300 \, \text{cm}² \] \[ \text{면적} = 150 \, \text{cm}² \] 따라서, 삼각형의 면적은 \( 150 \, \text{cm}² \)입니다.
</code></pre>
<p>URL을 사용하는 예시</p>
<pre><code class="hljs language-js">response = client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>(
  (model = <span class="hljs-variable constant_">MODEL</span>),
  (messages = [
    { <span class="hljs-attr">role</span>: <span class="hljs-string">"system"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"마크다운으로 응답하는 유용한 도우미입니다."</span> },
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>,
      <span class="hljs-attr">content</span>: [
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>,
          <span class="hljs-attr">text</span>: <span class="hljs-string">"이 이미지에서 무엇을 보고 무슨 감정이 표현되었는지 설명해주세요."</span>,
        },
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">"image_url"</span>,
          <span class="hljs-attr">image_url</span>: {
            <span class="hljs-attr">url</span>: <span class="hljs-string">"https://pbs.twimg.com/media/GNeb4-Ua8AAuaKp?format=png&#x26;name=small"</span>,
          },
        },
      ],
    },
  ]),
  (temperature = <span class="hljs-number">0.0</span>)
);

<span class="hljs-title function_">print</span>(response.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>);
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이미지:</p>
<p><img src="/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_2.png" alt="이미지"></p>
<p>결과:</p>
<p>이 이미지는 웃는 사람을 보여줍니다. 전달되는 감정은 행복이나 만족으로 보입니다. 웃음은 긍정적이고 즐거운 기분을 시사합니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>기능 호출</p>
<pre><code class="hljs language-js"># <span class="hljs-variable constant_">NBA</span> 게임 점수를 가져 오기 위한 <span class="hljs-title class_">Mock</span> 함수
def <span class="hljs-title function_">get_nba_game_score</span>(team):
    <span class="hljs-title function_">print</span>(<span class="hljs-string">'get_nba_game_score가 호출되었습니다.'</span>)
    <span class="hljs-string">""</span><span class="hljs-string">"주어진 팀에 대한 NBA 게임의 현재 점수를 가져옵니다."</span><span class="hljs-string">""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">"lakers"</span> <span class="hljs-keyword">in</span> team.<span class="hljs-title function_">lower</span>():
        <span class="hljs-keyword">return</span> json.<span class="hljs-title function_">dumps</span>({<span class="hljs-string">"team"</span>: <span class="hljs-string">"Lakers"</span>, <span class="hljs-string">"score"</span>: <span class="hljs-string">"102"</span>, <span class="hljs-string">"opponent"</span>: <span class="hljs-string">"Warriors"</span>, <span class="hljs-string">"opponent_score"</span>: <span class="hljs-string">"98"</span>})
    elif <span class="hljs-string">"bulls"</span> <span class="hljs-keyword">in</span> team.<span class="hljs-title function_">lower</span>():
        <span class="hljs-keyword">return</span> json.<span class="hljs-title function_">dumps</span>({<span class="hljs-string">"team"</span>: <span class="hljs-string">"Bulls"</span>, <span class="hljs-string">"score"</span>: <span class="hljs-string">"89"</span>, <span class="hljs-string">"opponent"</span>: <span class="hljs-string">"Celtics"</span>, <span class="hljs-string">"opponent_score"</span>: <span class="hljs-string">"95"</span>})
    <span class="hljs-attr">else</span>:
        <span class="hljs-keyword">return</span> json.<span class="hljs-title function_">dumps</span>({<span class="hljs-string">"team"</span>: team, <span class="hljs-string">"score"</span>: <span class="hljs-string">"N/A"</span>, <span class="hljs-string">"opponent"</span>: <span class="hljs-string">"N/A"</span>, <span class="hljs-string">"opponent_score"</span>: <span class="hljs-string">"N/A"</span>})
</code></pre>
<p>필요한 경우 도구를 통해 함수 호출:</p>
<pre><code class="hljs language-js">def <span class="hljs-title function_">function_calling</span>():
    # 단계 <span class="hljs-number">1</span>: 사용자 메시지로 대화를 초기화합니다
    messages = [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"레이커스 게임 점수가 어떻게 되나요?"</span>}]

    # 모델이 사용할 수있는 도구(함수) 정의
    tools = [
        {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
            <span class="hljs-string">"function"</span>: {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_nba_game_score"</span>,
                <span class="hljs-string">"description"</span>: <span class="hljs-string">"주어진 팀의 NBA 게임의 현재 점수를 가져옵니다."</span>,
                <span class="hljs-string">"parameters"</span>: {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                    <span class="hljs-string">"properties"</span>: {
                        <span class="hljs-string">"team"</span>: {
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                            <span class="hljs-string">"description"</span>: <span class="hljs-string">"NBA 팀의 이름, 예: 레이커스, 불스"</span>,
                        },
                    },
                    <span class="hljs-string">"required"</span>: [<span class="hljs-string">"team"</span>],
                },
            },
        }
    ]

    # 단계 <span class="hljs-number">2</span>: 대화 컨텍스트와 사용 가능한 도구를 모델에게 전송합니다
    response = client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>(
        model=<span class="hljs-variable constant_">MODEL</span>,
        messages=messages,
        tools=tools,
        tool_choice=<span class="hljs-string">"auto"</span>,  # auto가 기본값입니다. 명시적으로 지정해줍니다.
    )

    # 모델의 응답을 추출합니다.
    response_message = response.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>
    tool_calls = response_message.<span class="hljs-property">tool_calls</span>  # 모델이 도구를 호출하도록 요청하는지 확인합니다

    # 단계 <span class="hljs-number">3</span>: 모델이 요청한 도구 호출이 있는지 확인합니다
    <span class="hljs-keyword">if</span> <span class="hljs-attr">tool_calls</span>:
        # 사용 가능한 함수 정의
        available_functions = {
            <span class="hljs-string">"get_nba_game_score"</span>: get_nba_game_score,
        }  # 이 예제에서는 함수가 한 개뿐이지만 확장할 수 있습니다

        # 모델의 응답을 대화 기록에 추가합니다
        messages.<span class="hljs-title function_">append</span>(response_message)

        # 단계 <span class="hljs-number">4</span>: 모델에서 요청된 함수를 호출합니다
        <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> <span class="hljs-attr">tool_calls</span>:
            function_name = tool_call.<span class="hljs-property">function</span>.<span class="hljs-property">name</span>
            function_to_call = available_functions[function_name]
            function_args = json.<span class="hljs-title function_">loads</span>(tool_call.<span class="hljs-property">function</span>.<span class="hljs-property">arguments</span>)

            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"도구 호출: {tool_call}"</span>)

            # 추출 된 인수로 함수를 호출합니다
            function_response = <span class="hljs-title function_">function_to_call</span>(
                team=function_args.<span class="hljs-title function_">get</span>(<span class="hljs-string">"team"</span>),
            )

            # 함수 응답을 대화 기록에 추가합니다
            messages.<span class="hljs-title function_">append</span>(
                {
                    <span class="hljs-string">"tool_call_id"</span>: tool_call.<span class="hljs-property">id</span>,
                    <span class="hljs-string">"role"</span>: <span class="hljs-string">"tool"</span>,
                    <span class="hljs-string">"name"</span>: function_name,
                    <span class="hljs-string">"content"</span>: function_response,
                }
            )

        # 단계 <span class="hljs-number">5</span>: 업데이트된 기록을 사용하여 대화를 계속합니다
        second_response = client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>(
            model=<span class="hljs-variable constant_">MODEL</span>,
            messages=messages,
        )  # 함수 응답을 확인할 수 있는 모델의 새로운 응답을 받습니다

        <span class="hljs-keyword">return</span> second_response

# 대화를 실행하고 결과를 인쇄합니다
response = <span class="hljs-title function_">function_calling</span>()
<span class="hljs-title function_">print</span>(response.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>)
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>출력:</p>
<p>도구 호출: ChatCompletionMessageToolCall(id='call_k2lcfdlVAcQ8PTUL1uwu3fYz', function=Function(arguments=' "team": "Lakers" ', name='get_nba_game_score'), type='function') get_nba_game_score 호출됨</p>
<p>현재 레이커스 경기 점수는 레이커스 102, 워리어스 98 입니다.</p>
<p>마무리</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이제 전체 기사를 읽으셔서 GPT-4o 모델을 활용해 텍스트 생성, JSON 모드, 이미지 이해, 그리고 함수 호출을 OpenAI API를 통해 사용할 준비가 되셨습니다. API에 오디오 및 비디오 지원이 추가되면 다시 블로그를 쓸 계획입니다. 그 때까지 계속 탐험하고 배우세요!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"OpenAI API를 통해 GPT-4o에 접속하기","description":"","date":"2024-05-20 21:08","slug":"2024-05-20-AccessingGPT-4oviaOpenAIAPI","content":"\n![image](/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_0.png)\n\n# 소개\n\nOpenAI가 최근에 발표한 GPT-4o는 텍스트, 이미지, 비디오 및 오디오 분석에 강력한 능력을 갖춘 첫 번째 멀티 모달 모델입니다. 이는 생성적 AI 모델의 응용 프로그램을 크게 확장시켰습니다. 이 블로그에서는 현재 텍스트 및 이미지 입력을 지원하는 API를 통해 이 모델을 사용하는 방법을 보여 드리려고 합니다. 모든 기능이 아직 제공되지 않았지만, OpenAI가 곧 출시할 예정입니다.\n\n# 특징\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 일반 텍스트 생성\n- JSON 모드의 텍스트 생성\n- 이미지 이해\n- 함수 호출\n\n초기 설정\n\nOpenAI 시크릿 키로 라이브러리를 설치하고 가져온 후, 환경 변수를 설정해주세요.\n\n```js\npip install --upgrade openai --quiet\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n첫 번째 단계는 OpenAI 클라이언트를 설정하는 것입니다. 이를 위해 먼저 시크릿 키로 환경 변수를 만들어야 합니다. OPENAI_KEY=xyz와 같이 OpenAI 시크릿 키가 저장된 .env 파일을 만들어주세요.\n\n작업이 완료되면 dotenv를 사용하여 키에 액세스할 수 있습니다.\n\n```python\nimport os\nfrom openai import OpenAI\nfrom dotenv import load_dotenv\n\nload_dotenv()\n## API 키 및 모델 이름 설정\nMODEL=\"gpt-4o\"\n\napi_key = os.getenv('OPENAI_KEY')\nclient = OpenAI(api_key=api_key)\n```\n\n일반 텍스트 생성\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\ncompletion = client.chat.completions.create(\n  model=MODEL,\n  messages=[\n    {\"role\": \"system\", \"content\": \"당신은 도움이 되는 조수입니다. 수학 숙제를 돕습니다!\"}, # \u003c-- 모델에 맥락을 제공하는 시스템 메시지입니다\n    {\"role\": \"user\", \"content\": \"안녕하세요! 2+2를 해결할 수 있나요?\"}  # \u003c-- 모델이 응답을 생성할 사용자 메시지입니다\n  ]\n)\n\nprint(\"조수: \" + completion.choices[0].message.content)\n```\n\n출력:\n\n물론이죠! 2 + 2 = 4. 다른 도움이 필요하시면 언제든지 물어보세요!\n\nJson 모드에서 텍스트 생성하기\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\ncompletion = client.chat.completions.create(\n  (model = MODEL),\n  (response_format = { type: \"json_object\" }),\n  (messages = [\n    {\n      role: \"system\",\n      content: \"You are a trainer who always responds in JSON\",\n    },\n    { role: \"user\", content: \"Create a weekly workout routine for me\" },\n  ])\n);\n\njson.loads(completion.choices[0].message.content);\n```\n\n출력:\n\n```bash\n'‘workoutRoutine’: '‘week’: 1, ‘days’: '‘Monday’: '‘muscleGroup’: ‘Chest and Triceps’, ‘exercises’: ['‘name’: ‘Bench Press’, ‘sets’: 4, ‘reps’: 12', '‘name’: ‘Incline Dumbbell Press’, ‘sets’: 4, ‘reps’: 12', '‘name’: ‘Tricep Dips’, ‘sets’: 3, ‘reps’: 15', '‘name’: ‘Tricep Pushdown’, ‘sets’: 3, ‘reps’: 15']', ‘Tuesday’: '‘muscleGroup’: ‘Back and Biceps’, ‘exercises’: ['‘name’: ‘Pull-Ups’, ‘sets’: 4, ‘reps’: 10', '‘name’: ‘Deadlifts’, ‘sets’: 4, ‘reps’: 12', '‘name’: ‘Barbell Rows’, ‘sets’: 4, ‘reps’: 12', '‘name’: ‘Bicep Curls’, ‘sets’: 3, ‘reps’: 15']',\n```\n\n- 이미지 이해\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n로컬 이미지 사용하기\n\n```js\nfrom IPython.display import Image, display, Audio, Markdown\nimport base64\n\nIMAGE_PATH = \"triangle.png\"\n\n# 컨텍스트를 위한 이미지 미리보기\ndisplay(Image(IMAGE_PATH))\n```\n\n\u003cimg src=\"/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_1.png\" /\u003e\n\n```js\n# 이미지 파일 열고 base64 문자열로 인코딩하기\ndef encode_image(image_path):\n    with open(image_path, \"rb\") as image_file:\n        return base64.b64encode(image_file.read()).decode(\"utf-8\")\n\nbase64_image = encode_image(IMAGE_PATH)\n\nresponse = client.chat.completions.create(\n    model=MODEL,\n    messages=[\n        {\"role\": \"system\", \"content\": \"당신은 Markdown으로 응답하는 유용한 도우미입니다. 내 수학 숙제를 도와주세요!\"},\n        {\"role\": \"user\", \"content\": [\n            {\"type\": \"text\", \"text\": \"삼각형의 면적은 얼마인가요?\"},\n            {\"type\": \"image_url\", \"image_url\": {\n                \"url\": f\"data:image/png;base64,{base64_image}\"}\n            }\n        ]}\n    ],\n    temperature=0.0,\n)\n\nprint(response.choices[0].message.content)\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```bash\n삼각형의 면적을 찾기 위해 직갛각 삼각형의 면적을 구하는 공식을 사용할 수 있습니다: \\[ \\text{면적} = \\frac{1}{2} \\times \\text{밑변} \\times \\text{높이} \\] 이 삼각형에서 밑변은 20 cm이고 높이는 15 cm입니다. \\[ \\text{면적} = \\frac{1}{2} \\times 20 \\, \\text{cm} \\times 15 \\, \\text{cm} \\] \\[ \\text{면적} = \\frac{1}{2} \\times 300 \\, \\text{cm}² \\] \\[ \\text{면적} = 150 \\, \\text{cm}² \\] 따라서, 삼각형의 면적은 \\( 150 \\, \\text{cm}² \\)입니다.\n```\n\nURL을 사용하는 예시\n\n```js\nresponse = client.chat.completions.create(\n  (model = MODEL),\n  (messages = [\n    { role: \"system\", content: \"마크다운으로 응답하는 유용한 도우미입니다.\" },\n    {\n      role: \"user\",\n      content: [\n        {\n          type: \"text\",\n          text: \"이 이미지에서 무엇을 보고 무슨 감정이 표현되었는지 설명해주세요.\",\n        },\n        {\n          type: \"image_url\",\n          image_url: {\n            url: \"https://pbs.twimg.com/media/GNeb4-Ua8AAuaKp?format=png\u0026name=small\",\n          },\n        },\n      ],\n    },\n  ]),\n  (temperature = 0.0)\n);\n\nprint(response.choices[0].message.content);\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이미지:\n\n![이미지](/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_2.png)\n\n결과:\n\n이 이미지는 웃는 사람을 보여줍니다. 전달되는 감정은 행복이나 만족으로 보입니다. 웃음은 긍정적이고 즐거운 기분을 시사합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n기능 호출\n\n```js\n# NBA 게임 점수를 가져 오기 위한 Mock 함수\ndef get_nba_game_score(team):\n    print('get_nba_game_score가 호출되었습니다.')\n    \"\"\"주어진 팀에 대한 NBA 게임의 현재 점수를 가져옵니다.\"\"\"\n    if \"lakers\" in team.lower():\n        return json.dumps({\"team\": \"Lakers\", \"score\": \"102\", \"opponent\": \"Warriors\", \"opponent_score\": \"98\"})\n    elif \"bulls\" in team.lower():\n        return json.dumps({\"team\": \"Bulls\", \"score\": \"89\", \"opponent\": \"Celtics\", \"opponent_score\": \"95\"})\n    else:\n        return json.dumps({\"team\": team, \"score\": \"N/A\", \"opponent\": \"N/A\", \"opponent_score\": \"N/A\"})\n```\n\n필요한 경우 도구를 통해 함수 호출:\n\n```js\ndef function_calling():\n    # 단계 1: 사용자 메시지로 대화를 초기화합니다\n    messages = [{\"role\": \"user\", \"content\": \"레이커스 게임 점수가 어떻게 되나요?\"}]\n\n    # 모델이 사용할 수있는 도구(함수) 정의\n    tools = [\n        {\n            \"type\": \"function\",\n            \"function\": {\n                \"name\": \"get_nba_game_score\",\n                \"description\": \"주어진 팀의 NBA 게임의 현재 점수를 가져옵니다.\",\n                \"parameters\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"team\": {\n                            \"type\": \"string\",\n                            \"description\": \"NBA 팀의 이름, 예: 레이커스, 불스\",\n                        },\n                    },\n                    \"required\": [\"team\"],\n                },\n            },\n        }\n    ]\n\n    # 단계 2: 대화 컨텍스트와 사용 가능한 도구를 모델에게 전송합니다\n    response = client.chat.completions.create(\n        model=MODEL,\n        messages=messages,\n        tools=tools,\n        tool_choice=\"auto\",  # auto가 기본값입니다. 명시적으로 지정해줍니다.\n    )\n\n    # 모델의 응답을 추출합니다.\n    response_message = response.choices[0].message\n    tool_calls = response_message.tool_calls  # 모델이 도구를 호출하도록 요청하는지 확인합니다\n\n    # 단계 3: 모델이 요청한 도구 호출이 있는지 확인합니다\n    if tool_calls:\n        # 사용 가능한 함수 정의\n        available_functions = {\n            \"get_nba_game_score\": get_nba_game_score,\n        }  # 이 예제에서는 함수가 한 개뿐이지만 확장할 수 있습니다\n\n        # 모델의 응답을 대화 기록에 추가합니다\n        messages.append(response_message)\n\n        # 단계 4: 모델에서 요청된 함수를 호출합니다\n        for tool_call in tool_calls:\n            function_name = tool_call.function.name\n            function_to_call = available_functions[function_name]\n            function_args = json.loads(tool_call.function.arguments)\n\n            print(f\"도구 호출: {tool_call}\")\n\n            # 추출 된 인수로 함수를 호출합니다\n            function_response = function_to_call(\n                team=function_args.get(\"team\"),\n            )\n\n            # 함수 응답을 대화 기록에 추가합니다\n            messages.append(\n                {\n                    \"tool_call_id\": tool_call.id,\n                    \"role\": \"tool\",\n                    \"name\": function_name,\n                    \"content\": function_response,\n                }\n            )\n\n        # 단계 5: 업데이트된 기록을 사용하여 대화를 계속합니다\n        second_response = client.chat.completions.create(\n            model=MODEL,\n            messages=messages,\n        )  # 함수 응답을 확인할 수 있는 모델의 새로운 응답을 받습니다\n\n        return second_response\n\n# 대화를 실행하고 결과를 인쇄합니다\nresponse = function_calling()\nprint(response.choices[0].message.content)\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n출력:\n\n도구 호출: ChatCompletionMessageToolCall(id='call_k2lcfdlVAcQ8PTUL1uwu3fYz', function=Function(arguments=' \"team\": \"Lakers\" ', name='get_nba_game_score'), type='function') get_nba_game_score 호출됨\n\n현재 레이커스 경기 점수는 레이커스 102, 워리어스 98 입니다.\n\n마무리\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이제 전체 기사를 읽으셔서 GPT-4o 모델을 활용해 텍스트 생성, JSON 모드, 이미지 이해, 그리고 함수 호출을 OpenAI API를 통해 사용할 준비가 되셨습니다. API에 오디오 및 비디오 지원이 추가되면 다시 블로그를 쓸 계획입니다. 그 때까지 계속 탐험하고 배우세요!\n","ogImage":{"url":"/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_0.png"},"coverImage":"/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_0.png","tag":["Tech"],"readingTime":11},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_0.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003ch1\u003e소개\u003c/h1\u003e\n\u003cp\u003eOpenAI가 최근에 발표한 GPT-4o는 텍스트, 이미지, 비디오 및 오디오 분석에 강력한 능력을 갖춘 첫 번째 멀티 모달 모델입니다. 이는 생성적 AI 모델의 응용 프로그램을 크게 확장시켰습니다. 이 블로그에서는 현재 텍스트 및 이미지 입력을 지원하는 API를 통해 이 모델을 사용하는 방법을 보여 드리려고 합니다. 모든 기능이 아직 제공되지 않았지만, OpenAI가 곧 출시할 예정입니다.\u003c/p\u003e\n\u003ch1\u003e특징\u003c/h1\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e일반 텍스트 생성\u003c/li\u003e\n\u003cli\u003eJSON 모드의 텍스트 생성\u003c/li\u003e\n\u003cli\u003e이미지 이해\u003c/li\u003e\n\u003cli\u003e함수 호출\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e초기 설정\u003c/p\u003e\n\u003cp\u003eOpenAI 시크릿 키로 라이브러리를 설치하고 가져온 후, 환경 변수를 설정해주세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003epip install --upgrade openai --quiet\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e첫 번째 단계는 OpenAI 클라이언트를 설정하는 것입니다. 이를 위해 먼저 시크릿 키로 환경 변수를 만들어야 합니다. OPENAI_KEY=xyz와 같이 OpenAI 시크릿 키가 저장된 .env 파일을 만들어주세요.\u003c/p\u003e\n\u003cp\u003e작업이 완료되면 dotenv를 사용하여 키에 액세스할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e os\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e openai \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e OpenAI\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e load_dotenv\n\nload_dotenv()\n\u003cspan class=\"hljs-comment\"\u003e## API 키 및 모델 이름 설정\u003c/span\u003e\nMODEL=\u003cspan class=\"hljs-string\"\u003e\"gpt-4o\"\u003c/span\u003e\n\napi_key = os.getenv(\u003cspan class=\"hljs-string\"\u003e'OPENAI_KEY'\u003c/span\u003e)\nclient = OpenAI(api_key=api_key)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e일반 텍스트 생성\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecompletion = client.\u003cspan class=\"hljs-property\"\u003echat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecompletions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n  model=\u003cspan class=\"hljs-variable constant_\"\u003eMODEL\u003c/span\u003e,\n  messages=[\n    {\u003cspan class=\"hljs-string\"\u003e\"role\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"system\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"content\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"당신은 도움이 되는 조수입니다. 수학 숙제를 돕습니다!\"\u003c/span\u003e}, # \u0026#x3C;-- 모델에 맥락을 제공하는 시스템 메시지입니다\n    {\u003cspan class=\"hljs-string\"\u003e\"role\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"content\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"안녕하세요! 2+2를 해결할 수 있나요?\"\u003c/span\u003e}  # \u0026#x3C;-- 모델이 응답을 생성할 사용자 메시지입니다\n  ]\n)\n\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"조수: \"\u003c/span\u003e + completion.\u003cspan class=\"hljs-property\"\u003echoices\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e출력:\u003c/p\u003e\n\u003cp\u003e물론이죠! 2 + 2 = 4. 다른 도움이 필요하시면 언제든지 물어보세요!\u003c/p\u003e\n\u003cp\u003eJson 모드에서 텍스트 생성하기\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecompletion = client.\u003cspan class=\"hljs-property\"\u003echat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecompletions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n  (model = \u003cspan class=\"hljs-variable constant_\"\u003eMODEL\u003c/span\u003e),\n  (response_format = { \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"json_object\"\u003c/span\u003e }),\n  (messages = [\n    {\n      \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"system\"\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"You are a trainer who always responds in JSON\"\u003c/span\u003e,\n    },\n    { \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Create a weekly workout routine for me\"\u003c/span\u003e },\n  ])\n);\n\njson.\u003cspan class=\"hljs-title function_\"\u003eloads\u003c/span\u003e(completion.\u003cspan class=\"hljs-property\"\u003echoices\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e출력:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-string\"\u003e'‘workoutRoutine’: '\u003c/span\u003e‘week’: 1, ‘days’: \u003cspan class=\"hljs-string\"\u003e'‘Monday’: '\u003c/span\u003e‘muscleGroup’: ‘Chest and Triceps’, ‘exercises’: [\u003cspan class=\"hljs-string\"\u003e'‘name’: ‘Bench Press’, ‘sets’: 4, ‘reps’: 12'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'‘name’: ‘Incline Dumbbell Press’, ‘sets’: 4, ‘reps’: 12'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'‘name’: ‘Tricep Dips’, ‘sets’: 3, ‘reps’: 15'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'‘name’: ‘Tricep Pushdown’, ‘sets’: 3, ‘reps’: 15'\u003c/span\u003e]\u003cspan class=\"hljs-string\"\u003e', ‘Tuesday’: '\u003c/span\u003e‘muscleGroup’: ‘Back and Biceps’, ‘exercises’: [\u003cspan class=\"hljs-string\"\u003e'‘name’: ‘Pull-Ups’, ‘sets’: 4, ‘reps’: 10'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'‘name’: ‘Deadlifts’, ‘sets’: 4, ‘reps’: 12'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'‘name’: ‘Barbell Rows’, ‘sets’: 4, ‘reps’: 12'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'‘name’: ‘Bicep Curls’, ‘sets’: 3, ‘reps’: 15'\u003c/span\u003e]\u003cspan class=\"hljs-string\"\u003e',\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e이미지 이해\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e로컬 이미지 사용하기\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIPython\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edisplay\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e, display, \u003cspan class=\"hljs-title class_\"\u003eAudio\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eMarkdown\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e base64\n\n\u003cspan class=\"hljs-variable constant_\"\u003eIMAGE_PATH\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"triangle.png\"\u003c/span\u003e\n\n# 컨텍스트를 위한 이미지 미리보기\n\u003cspan class=\"hljs-title function_\"\u003edisplay\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eIMAGE_PATH\u003c/span\u003e))\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_1.png\"\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 이미지 파일 열고 base64 문자열로 인코딩하기\ndef \u003cspan class=\"hljs-title function_\"\u003eencode_image\u003c/span\u003e(image_path):\n    \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(image_path, \u003cspan class=\"hljs-string\"\u003e\"rb\"\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eimage_file\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e base64.\u003cspan class=\"hljs-title function_\"\u003eb64encode\u003c/span\u003e(image_file.\u003cspan class=\"hljs-title function_\"\u003eread\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003edecode\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"utf-8\"\u003c/span\u003e)\n\nbase64_image = \u003cspan class=\"hljs-title function_\"\u003eencode_image\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eIMAGE_PATH\u003c/span\u003e)\n\nresponse = client.\u003cspan class=\"hljs-property\"\u003echat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecompletions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n    model=\u003cspan class=\"hljs-variable constant_\"\u003eMODEL\u003c/span\u003e,\n    messages=[\n        {\u003cspan class=\"hljs-string\"\u003e\"role\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"system\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"content\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"당신은 Markdown으로 응답하는 유용한 도우미입니다. 내 수학 숙제를 도와주세요!\"\u003c/span\u003e},\n        {\u003cspan class=\"hljs-string\"\u003e\"role\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"content\"\u003c/span\u003e: [\n            {\u003cspan class=\"hljs-string\"\u003e\"type\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"삼각형의 면적은 얼마인가요?\"\u003c/span\u003e},\n            {\u003cspan class=\"hljs-string\"\u003e\"type\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"image_url\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"image_url\"\u003c/span\u003e: {\n                \u003cspan class=\"hljs-string\"\u003e\"url\"\u003c/span\u003e: f\u003cspan class=\"hljs-string\"\u003e\"data:image/png;base64,{base64_image}\"\u003c/span\u003e}\n            }\n        ]}\n    ],\n    temperature=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e,\n)\n\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(response.\u003cspan class=\"hljs-property\"\u003echoices\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e삼각형의 면적을 찾기 위해 직갛각 삼각형의 면적을 구하는 공식을 사용할 수 있습니다: \\[ \\text{면적} = \\frac{1}{2} \\\u003cspan class=\"hljs-built_in\"\u003etimes\u003c/span\u003e \\text{밑변} \\\u003cspan class=\"hljs-built_in\"\u003etimes\u003c/span\u003e \\text{높이} \\] 이 삼각형에서 밑변은 20 cm이고 높이는 15 cm입니다. \\[ \\text{면적} = \\frac{1}{2} \\\u003cspan class=\"hljs-built_in\"\u003etimes\u003c/span\u003e 20 \\, \\text{cm} \\\u003cspan class=\"hljs-built_in\"\u003etimes\u003c/span\u003e 15 \\, \\text{cm} \\] \\[ \\text{면적} = \\frac{1}{2} \\\u003cspan class=\"hljs-built_in\"\u003etimes\u003c/span\u003e 300 \\, \\text{cm}² \\] \\[ \\text{면적} = 150 \\, \\text{cm}² \\] 따라서, 삼각형의 면적은 \\( 150 \\, \\text{cm}² \\)입니다.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eURL을 사용하는 예시\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eresponse = client.\u003cspan class=\"hljs-property\"\u003echat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecompletions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n  (model = \u003cspan class=\"hljs-variable constant_\"\u003eMODEL\u003c/span\u003e),\n  (messages = [\n    { \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"system\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"마크다운으로 응답하는 유용한 도우미입니다.\"\u003c/span\u003e },\n    {\n      \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n        {\n          \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"이 이미지에서 무엇을 보고 무슨 감정이 표현되었는지 설명해주세요.\"\u003c/span\u003e,\n        },\n        {\n          \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"image_url\"\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003eimage_url\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"https://pbs.twimg.com/media/GNeb4-Ua8AAuaKp?format=png\u0026#x26;name=small\"\u003c/span\u003e,\n          },\n        },\n      ],\n    },\n  ]),\n  (temperature = \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e)\n);\n\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(response.\u003cspan class=\"hljs-property\"\u003echoices\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이미지:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-20-AccessingGPT-4oviaOpenAIAPI_2.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e결과:\u003c/p\u003e\n\u003cp\u003e이 이미지는 웃는 사람을 보여줍니다. 전달되는 감정은 행복이나 만족으로 보입니다. 웃음은 긍정적이고 즐거운 기분을 시사합니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e기능 호출\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-variable constant_\"\u003eNBA\u003c/span\u003e 게임 점수를 가져 오기 위한 \u003cspan class=\"hljs-title class_\"\u003eMock\u003c/span\u003e 함수\ndef \u003cspan class=\"hljs-title function_\"\u003eget_nba_game_score\u003c/span\u003e(team):\n    \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'get_nba_game_score가 호출되었습니다.'\u003c/span\u003e)\n    \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"주어진 팀에 대한 NBA 게임의 현재 점수를 가져옵니다.\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"lakers\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e team.\u003cspan class=\"hljs-title function_\"\u003elower\u003c/span\u003e():\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e json.\u003cspan class=\"hljs-title function_\"\u003edumps\u003c/span\u003e({\u003cspan class=\"hljs-string\"\u003e\"team\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Lakers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"score\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"102\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"opponent\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Warriors\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"opponent_score\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"98\"\u003c/span\u003e})\n    elif \u003cspan class=\"hljs-string\"\u003e\"bulls\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e team.\u003cspan class=\"hljs-title function_\"\u003elower\u003c/span\u003e():\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e json.\u003cspan class=\"hljs-title function_\"\u003edumps\u003c/span\u003e({\u003cspan class=\"hljs-string\"\u003e\"team\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Bulls\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"score\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"89\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"opponent\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Celtics\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"opponent_score\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"95\"\u003c/span\u003e})\n    \u003cspan class=\"hljs-attr\"\u003eelse\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e json.\u003cspan class=\"hljs-title function_\"\u003edumps\u003c/span\u003e({\u003cspan class=\"hljs-string\"\u003e\"team\"\u003c/span\u003e: team, \u003cspan class=\"hljs-string\"\u003e\"score\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"N/A\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"opponent\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"N/A\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"opponent_score\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"N/A\"\u003c/span\u003e})\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e필요한 경우 도구를 통해 함수 호출:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edef \u003cspan class=\"hljs-title function_\"\u003efunction_calling\u003c/span\u003e():\n    # 단계 \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e: 사용자 메시지로 대화를 초기화합니다\n    messages = [{\u003cspan class=\"hljs-string\"\u003e\"role\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"content\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"레이커스 게임 점수가 어떻게 되나요?\"\u003c/span\u003e}]\n\n    # 모델이 사용할 수있는 도구(함수) 정의\n    tools = [\n        {\n            \u003cspan class=\"hljs-string\"\u003e\"type\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"function\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"function\"\u003c/span\u003e: {\n                \u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"get_nba_game_score\"\u003c/span\u003e,\n                \u003cspan class=\"hljs-string\"\u003e\"description\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"주어진 팀의 NBA 게임의 현재 점수를 가져옵니다.\"\u003c/span\u003e,\n                \u003cspan class=\"hljs-string\"\u003e\"parameters\"\u003c/span\u003e: {\n                    \u003cspan class=\"hljs-string\"\u003e\"type\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"object\"\u003c/span\u003e,\n                    \u003cspan class=\"hljs-string\"\u003e\"properties\"\u003c/span\u003e: {\n                        \u003cspan class=\"hljs-string\"\u003e\"team\"\u003c/span\u003e: {\n                            \u003cspan class=\"hljs-string\"\u003e\"type\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"string\"\u003c/span\u003e,\n                            \u003cspan class=\"hljs-string\"\u003e\"description\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"NBA 팀의 이름, 예: 레이커스, 불스\"\u003c/span\u003e,\n                        },\n                    },\n                    \u003cspan class=\"hljs-string\"\u003e\"required\"\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\"team\"\u003c/span\u003e],\n                },\n            },\n        }\n    ]\n\n    # 단계 \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e: 대화 컨텍스트와 사용 가능한 도구를 모델에게 전송합니다\n    response = client.\u003cspan class=\"hljs-property\"\u003echat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecompletions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n        model=\u003cspan class=\"hljs-variable constant_\"\u003eMODEL\u003c/span\u003e,\n        messages=messages,\n        tools=tools,\n        tool_choice=\u003cspan class=\"hljs-string\"\u003e\"auto\"\u003c/span\u003e,  # auto가 기본값입니다. 명시적으로 지정해줍니다.\n    )\n\n    # 모델의 응답을 추출합니다.\n    response_message = response.\u003cspan class=\"hljs-property\"\u003echoices\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e\n    tool_calls = response_message.\u003cspan class=\"hljs-property\"\u003etool_calls\u003c/span\u003e  # 모델이 도구를 호출하도록 요청하는지 확인합니다\n\n    # 단계 \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e: 모델이 요청한 도구 호출이 있는지 확인합니다\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etool_calls\u003c/span\u003e:\n        # 사용 가능한 함수 정의\n        available_functions = {\n            \u003cspan class=\"hljs-string\"\u003e\"get_nba_game_score\"\u003c/span\u003e: get_nba_game_score,\n        }  # 이 예제에서는 함수가 한 개뿐이지만 확장할 수 있습니다\n\n        # 모델의 응답을 대화 기록에 추가합니다\n        messages.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(response_message)\n\n        # 단계 \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e: 모델에서 요청된 함수를 호출합니다\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e tool_call \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etool_calls\u003c/span\u003e:\n            function_name = tool_call.\u003cspan class=\"hljs-property\"\u003efunction\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e\n            function_to_call = available_functions[function_name]\n            function_args = json.\u003cspan class=\"hljs-title function_\"\u003eloads\u003c/span\u003e(tool_call.\u003cspan class=\"hljs-property\"\u003efunction\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003earguments\u003c/span\u003e)\n\n            \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"도구 호출: {tool_call}\"\u003c/span\u003e)\n\n            # 추출 된 인수로 함수를 호출합니다\n            function_response = \u003cspan class=\"hljs-title function_\"\u003efunction_to_call\u003c/span\u003e(\n                team=function_args.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"team\"\u003c/span\u003e),\n            )\n\n            # 함수 응답을 대화 기록에 추가합니다\n            messages.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(\n                {\n                    \u003cspan class=\"hljs-string\"\u003e\"tool_call_id\"\u003c/span\u003e: tool_call.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e,\n                    \u003cspan class=\"hljs-string\"\u003e\"role\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"tool\"\u003c/span\u003e,\n                    \u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e: function_name,\n                    \u003cspan class=\"hljs-string\"\u003e\"content\"\u003c/span\u003e: function_response,\n                }\n            )\n\n        # 단계 \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e: 업데이트된 기록을 사용하여 대화를 계속합니다\n        second_response = client.\u003cspan class=\"hljs-property\"\u003echat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecompletions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n            model=\u003cspan class=\"hljs-variable constant_\"\u003eMODEL\u003c/span\u003e,\n            messages=messages,\n        )  # 함수 응답을 확인할 수 있는 모델의 새로운 응답을 받습니다\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e second_response\n\n# 대화를 실행하고 결과를 인쇄합니다\nresponse = \u003cspan class=\"hljs-title function_\"\u003efunction_calling\u003c/span\u003e()\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(response.\u003cspan class=\"hljs-property\"\u003echoices\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e출력:\u003c/p\u003e\n\u003cp\u003e도구 호출: ChatCompletionMessageToolCall(id='call_k2lcfdlVAcQ8PTUL1uwu3fYz', function=Function(arguments=' \"team\": \"Lakers\" ', name='get_nba_game_score'), type='function') get_nba_game_score 호출됨\u003c/p\u003e\n\u003cp\u003e현재 레이커스 경기 점수는 레이커스 102, 워리어스 98 입니다.\u003c/p\u003e\n\u003cp\u003e마무리\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이제 전체 기사를 읽으셔서 GPT-4o 모델을 활용해 텍스트 생성, JSON 모드, 이미지 이해, 그리고 함수 호출을 OpenAI API를 통해 사용할 준비가 되셨습니다. API에 오디오 및 비디오 지원이 추가되면 다시 블로그를 쓸 계획입니다. 그 때까지 계속 탐험하고 배우세요!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-20-AccessingGPT-4oviaOpenAIAPI"},"buildId":"wOkGEDZCvEs3S_XaNsdwr","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>