<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Nodejsì™€ Express ì•±ì—ì„œ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´RBAC êµ¬í˜„í•˜ëŠ” ë°©ë²• | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Nodejsì™€ Express ì•±ì—ì„œ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´RBAC êµ¬í˜„í•˜ëŠ” ë°©ë²• | ui-station" data-gatsby-head="true"/><meta property="og:title" content="Nodejsì™€ Express ì•±ì—ì„œ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´RBAC êµ¬í˜„í•˜ëŠ” ë°©ë²• | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp" data-gatsby-head="true"/><meta name="twitter:title" content="Nodejsì™€ Express ì•±ì—ì„œ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´RBAC êµ¬í˜„í•˜ëŠ” ë°©ë²• | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-30 21:53" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/GsgRekSb--BvxYwv9FPn6/_buildManifest.js" defer=""></script><script src="/_next/static/GsgRekSb--BvxYwv9FPn6/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Nodejsì™€ Express ì•±ì—ì„œ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´RBAC êµ¬í˜„í•˜ëŠ” ë°©ë²•</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Nodejsì™€ Express ì•±ì—ì„œ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´RBAC êµ¬í˜„í•˜ëŠ” ë°©ë²•" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 30, 2024</span><span class="posts_reading_time__f7YPP">21<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>ì´ ê¸°ì‚¬ì—ì„œëŠ” ë‹¨ ëª‡ ë¶„ ì•ˆì— Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— Role Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
<p><img src="/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_0.png" alt="ì´ë¯¸ì§€"></p>
<p>ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ íŠ¹ì • ê¸°ëŠ¥ ë° ë°ì´í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œì´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ Role-Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<p>ì´ ê¸°ì‚¬ì—ì„œëŠ” Permifyë¥¼ ì‚¬ìš©í•˜ì—¬ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBACì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•´ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>Node.js Express í”„ë¡œì íŠ¸ ì„¤ì •í•˜ê¸°</h1>
<p>Express.js í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¼ˆëŒ€ë¥¼ ë¹ ë¥´ê²Œ ìƒì„±í•˜ë ¤ë©´ express-generator ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹œì‘í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:</p>
<h2>ë‹¨ê³„ 1. express-generator ì„¤ì¹˜í•˜ê¸°:</h2>
<p>Node.js ë²„ì „ 8.2.0 ì´ìƒì„ ì‚¬ìš© ì¤‘ì´ë¼ë©´ npx ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ê¸°ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">npx express-generator
</code></pre>
<p>ì´ì „ Node ë²„ì „ì˜ ê²½ìš°, ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ê¸°ë¥¼ ê¸€ë¡œë²Œ npm íŒ¨í‚¤ì§€ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆì–´ìš”:</p>
<pre><code class="hljs language-js">npm install -g express-generator
</code></pre>
<h1>ë‹¨ê³„ 2. Express ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±í•˜ê¸°:</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>express-generatorì„ ì„¤ì¹˜í•˜ì…¨ìœ¼ë©´ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•  ìˆ˜ ìˆì–´ìš”. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”:</p>
<pre><code class="hljs language-js">express -h
</code></pre>
<p>ì´ë ‡ê²Œ í•˜ë©´ Express ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ì„ ìœ„í•œ ê°€ëŠ¥í•œ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´, Pug ë·° ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ permify-rbac-appì´ë¼ëŠ” Express ì•±ì„ ìƒì„±í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">express --view=pug permify-rbac-app
</code></pre>
<p>ì´ ëª…ë ¹ì–´ëŠ” í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬ì— permify-rbac-appì´ë¼ëŠ” í´ë”ë¥¼ ìƒì„±í•˜ê³  Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ íŒŒì¼ê³¼ í´ë”ë¥¼ í•¨ê»˜ ë§Œë“­ë‹ˆë‹¤.</p>
<h1>ë‹¨ê³„ 3. ì¢…ì†ì„± ì„¤ì¹˜:</h1>
<p>ìƒˆë¡œ ë§Œë“  Express ì• í”Œë¦¬ì¼€ì´ì…˜ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ì„¸ìš”:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">cd permify-rbac-app
</code></pre>
<p>ê·¸ëŸ° ë‹¤ìŒ npmì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">npm install express &#x26;&#x26; npm install @permify-node
</code></pre>
<h1>ë‹¨ê³„ 4. Express ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘í•˜ê¸°:</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>MacOS ë˜ëŠ” Linuxì—ì„œëŠ” ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì•±ì„ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”:</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">DEBUG</span>=permify-rbac-<span class="hljs-attr">app</span>:* npm start
</code></pre>
<h1>ë‹¨ê³„ 5. ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì•¡ì„¸ìŠ¤í•˜ê¸°:</h1>
<p>Express ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ <a href="http://localhost:3000/%EC%9D%84" rel="nofollow" target="_blank">http://localhost:3000/ì„</a> í†µí•´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>ë””ë ‰í† ë¦¬ êµ¬ì¡°:</h1>
<p>ìƒì„±ëœ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ìŒê³¼ ê°™ì€ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">permify-rbac-app/
â”œâ”€â”€ app.<span class="hljs-property">js</span>
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ www
â”œâ”€â”€ package.<span class="hljs-property">json</span>
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ javascripts/
â”‚   â””â”€â”€ stylesheets/
â”‚       â””â”€â”€ style.<span class="hljs-property">css</span>
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ index.<span class="hljs-property">js</span>
â”‚   â””â”€â”€ users.<span class="hljs-property">js</span>
â””â”€â”€ views/
    â”œâ”€â”€ error.<span class="hljs-property">pug</span>
    â”œâ”€â”€ index.<span class="hljs-property">pug</span>
    â””â”€â”€ layout.<span class="hljs-property">pug</span>
</code></pre>
<p>ì´ êµ¬ì¡°ì—ëŠ” ì£¼ìš” ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼(app.js), ì„œë²„ êµ¬ì„±(bin/www), ë¼ìš°íŠ¸(routes), ë·°(views), ê³µìš© ì—ì…‹(public assets), ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì´ í¬í•¨ëœ package.json íŒŒì¼ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>Express.js í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í–ˆìœ¼ë‹ˆ, ì´ì œ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBACë¥¼ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h1>Node.js ë° Expressì—ì„œ RBAC êµ¬í˜„í•˜ê¸°</h1>
<p>Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— Role-Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì—ëŠ” ëª‡ ê°€ì§€ ë‹¨ê³„ê°€ ì—°ë£¨ë©ë‹ˆë‹¤. ë‹¤ìŒì€ ê¸°ë³¸ì ì¸ êµ¬í˜„ ë°©ë²•ì…ë‹ˆë‹¤:</p>
<h1>ë‹¨ê³„ 1: Permifyë¥¼ ì‚¬ìš©í•˜ì—¬ RBAC ëª¨ë¸ ì„¤ê³„í•˜ê¸°</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>PermifyëŠ” ê°œë°© ì†ŒìŠ¤ ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ë¡œ, ê°œë°œìë“¤ì´ ê¶Œí•œ ì‹œìŠ¤í…œì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. Permifyë¥¼ ì´ìš©í•˜ë©´ ê¶Œí•œì„ ëª¨ë¸ë§í•˜ê³ , í™˜ê²½ì— ì¤‘ì•™ ê¶Œí•œ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì„œë¹„ìŠ¤ì—ì„œ ì•¡ì„¸ìŠ¤ í™•ì¸ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ë¥¼ ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ SDKsë¥¼ ì œê³µí•˜ì—¬, ë¯¸ë“¤ì›¨ì–´ì— ì¶”ê°€í•˜ì—¬ ì ‘ê·¼ í™•ì¸ê³¼ ê°™ì€ ê¶Œí•œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>PermifyëŠ” ì—­í• , ê¶Œí•œ ë° ê´€ê³„ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ ë„ë©”ì¸ íŠ¹í™” ì–¸ì–´(DSL)ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Permify Playgroundë¥¼ í™œìš©í•˜ì—¬ RBAC ëª¨ë¸ì„ ì‹¤í—˜í•˜ê³  ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_1.png" alt="ì´ë¯¸ì§€"></p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ ê²Œì‹œë¬¼ì—ì„œëŠ” ê·€í•˜ì˜ ì¡°ì§ ë‚´ ì‚¬ìš©ìê°€ ì—­í• ì— ë”°ë¼ ë¬¸ì„œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ íŒŒì¼ ê¸°ë°˜ ê¶Œí•œ ë¶€ì—¬ ì‹œìŠ¤í…œì„ ê°œë°œí•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>í–‰ì •ì, ê´€ë¦¬ì ë° ì§ì›ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì—­í• ì€ íŒŒì¼ì„ ë³´ê¸°, í¸ì§‘ ë˜ëŠ” ì‚­ì œí•˜ëŠ” ë° ì„œë¡œ ë‹¤ë¥¸ ìˆ˜ì¤€ì˜ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>Permify DSLì„ ì‚¬ìš©í•œ ì—­í•  ë° ê¶Œí•œ ì •ì˜</h2>
<p>ë‹¤ìŒì€ RBAC ëª¨ë¸ì„ ìœ„í•œ Permify DSL ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œì…ë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">entity user {} 

entity organization {
    <span class="hljs-comment">// roles </span>
    relation admin @user    
    relation member @user    
    relation manager @user    
    relation agent @user  
    
    <span class="hljs-comment">// organization files access permissions</span>
    permission view_files = admin or manager or (member not agent)
    permission delete_file = admin 
    
    <span class="hljs-comment">// vendor files access permissions</span>
    permission view_vendor_files = admin or manager or agent
    permission delete_vendor_file = agent
}
</code></pre>
<p>Roles and Permissions:</p>
<ul>
<li>Roles: The schema defines roles for the organization entity, including admin, member, manager, and agent. These roles determine the level of access and permissions users have within the organization.</li>
<li>Permissions: Actions such as <code>view_files</code>, <code>edit_files</code>, <code>delete_file</code>, <code>view_vendor_files</code>, <code>edit_vendor_files</code>, and <code>delete_vendor_file</code> define the specific permissions associated with each role. For example, only admins can delete organization files, while managers and members have different levels of access.</li>
</ul>
<p>Resource Types:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>ìŠ¤í‚¤ë§ˆëŠ” ì¡°ì§ íŒŒì¼ê³¼ ê³µê¸‰ ì—…ì²´ íŒŒì¼ì„ êµ¬ë³„í•˜ì—¬ ê°ê°ì˜ ê¶Œí•œ ì§‘í•©ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì˜ ë‹¤ë¥¸ ìœ í˜•ì˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.</li>
</ul>
<p>ì´ì œ RBAC ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í–ˆìœ¼ë‹ˆ Permify Local Serverë¥¼ ì„¤ì •í•˜ëŠ” ë‹¨ê³„ë¡œ ë„˜ì–´ê°ˆ ê²ƒì…ë‹ˆë‹¤.</p>
<h1>ë‹¨ê³„ 2: Dockerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Local Server ì„¤ì •í•˜ê¸°</h1>
<p>DockerëŠ” ì»¨í…Œì´ë„ˆí™”ëœ í™˜ê²½ì„ ì œê³µí•¨ìœ¼ë¡œì¨ ìš°ë¦¬ì˜ ì„¤ì •ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ í™˜ê²½ì€ ëª¨ë“  ê¶Œí•œ ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì¸ Permifyì˜ íš¨ìœ¨ì ì¸ ì‘ë™ì„ ìœ„í•œ í•„ìˆ˜ ìš”ì†Œì…ë‹ˆë‹¤.</p>
<p>ì´ì œ Docker Containerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Serverë¥¼ ì„¤ì •í•˜ëŠ” í•„ìš”í•œ ë‹¨ê³„ë¥¼ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤:</p>
<h2>Docker Containerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Server ì‹¤í–‰</h2>
<ul>
<li>í„°ë¯¸ë„ ì°½ì„ ì—´ê³  ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ Permify Server Docker ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê³  ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•©ë‹ˆë‹¤:</li>
</ul>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>sudo docker run -p 3476:3476 -p 3478:3478 ghcr.io/permify/permify serve</p>
<p>ì´ ëª…ë ¹ì–´ëŠ” GitHub Container Registryì—ì„œ Permify Server ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ë‹¤ìŒì˜ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ Permify, ì €í¬ì˜ ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:</p>
<ul>
<li>REST APIëŠ” 3476 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</li>
<li>gRPC ì„œë¹„ìŠ¤ëŠ” 3478 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</li>
<li>ê¶Œí•œ ë°ì´í„°ëŠ” ì»´í“¨í„° ë©”ëª¨ë¦¬ì— ì €ì¥ë©ë‹ˆë‹¤.</li>
</ul>
<p>ë‹¤ìŒê³¼ ìœ ì‚¬í•œ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Permify v0.9.5                      â”‚
â”‚          Fine-grained Authorization Service            â”‚
â”‚                                                        â”‚
â”‚    docs: ............... <a href="https://docs.permify.co" rel="nofollow" target="_blank">https://docs.permify.co</a>       â”‚
â”‚    github: .. <a href="https://github.com/Permify/permify" rel="nofollow" target="_blank">https://github.com/Permify/permify</a>       â”‚
â”‚    blog: ............... <a href="https://permify.co/blog" rel="nofollow" target="_blank">https://permify.co/blog</a>       â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
time=2024-03-22T14:59:09.851Z level=INFO msg="ğŸš€ starting permify service..."
time=2024-03-22T14:59:09.851Z level=ERROR msg="Account ID is not set. Please fill in the Account ID for better support. Get your Account ID from <a href="https://permify.co/account" rel="nofollow" target="_blank">https://permify.co/account</a>"
time=2024-03-22T14:59:09.859Z level=INFO msg="ğŸš€ grpc server successfully started: 3478"
time=2024-03-22T14:59:09.859Z level=INFO msg="ğŸš€ invoker grpc server successfully started: 5000"
time=2024-03-22T14:59:09.867Z level=INFO msg="ğŸš€ http server successfully started: 3476"</p>
<h2>Permify ì„œë²„ í™•ì¸</h2>
<p>ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì´ë©´ health check endpointì— ì•¡ì„¸ìŠ¤í•˜ì—¬ Permify ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Postmanì„ ì—´ê³  <a href="http://localhost:3476/healthz%EB%A1%9C" rel="nofollow" target="_blank">http://localhost:3476/healthzë¡œ</a> GET ìš”ì²­ì„ ë³´ë‚´ì„¸ìš”. Permify ì„œë²„ê°€ ì˜¬ë°”ë¥´ê²Œ ì‹¤í–‰ ì¤‘ì´ë©´ ì„œë¹„ìŠ¤ê°€ ê±´ê°•í•œ ê²ƒì„ ë‚˜íƒ€ë‚´ëŠ” ì‘ë‹µì„ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>
<img src="/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_2.png">
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ìœ„ì˜ ì´ë¯¸ì§€ë¥¼ ë³´ë©´ Permify ì„œë²„ê°€ ì‘ë™ ì¤‘ì´ë¼ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1>ë‹¨ê³„ 3: Permify Node.js í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”</h1>
<p>ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Permify Node í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê¶Œí•œ ë¶€ì—¬ë¥¼ ì œì–´í•©ë‹ˆë‹¤. Permify Swagger ë¬¸ì„œì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” Permifyì˜ ì ‘ê·¼ ì œì–´ ì²´í¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>ì´ì œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ˆê¸°í™”í•´ ë´…ì‹œë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// create-tenant.js</span>
<span class="hljs-keyword">const</span> permify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@permify/permify-node"</span>);

<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> permify.<span class="hljs-property">grpc</span>.<span class="hljs-title function_">newClient</span>({
    <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"localhost:3478"</span>,
})
</code></pre>
<h1>ë‹¨ê³„ 4: ê¶Œí•œ ëª¨ë¸ êµ¬ì„±</h1>
<p>ì´ì œ Permify ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ë¯€ë¡œ ê¶Œí•œ ëª¨ë¸ì„ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´í›„ì— í…ŒìŠ¤íŠ¸ ì•¡ì„¸ìŠ¤ í™•ì¸ì„ ìˆ˜í–‰í•  ì¤€ë¹„ê°€ ë  ê²ƒì…ë‹ˆë‹¤.</p>
<p>ê¶Œí•œ ëª¨ë¸ì„ êµ¬ì„±í•˜ë ¤ë©´ ìƒì„±í•œ ìŠ¤í‚¤ë§ˆë¥¼ Permifyì—ê²Œ Permify schema.write ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì†¡í•©ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-comment">//create-schema.js</span>

<span class="hljs-keyword">const</span> permify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@permify/permify-node"</span>);

<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> permify.<span class="hljs-property">grpc</span>.<span class="hljs-title function_">newClient</span>({
    <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"localhost:3478"</span>,
})

client.<span class="hljs-property">schema</span>.<span class="hljs-title function_">write</span>({
    <span class="hljs-attr">tenantId</span>: <span class="hljs-string">"t1"</span>,
    <span class="hljs-attr">schema</span>: <span class="hljs-string">"entity user {} \n\nentity organization {\n\n    relation admin @user    \n    relation member @user    \n    relation manager @user    \n    relation agent @user  \n\n    action view_files = admin or manager or (member not agent)\n    action edit_files = admin or manager\n    action delete_file = admin\n    action view_vendor_files = admin or manager or agent\n    action edit_vendor_files = admin or agent\n    action delete_vendor_file = agent\n\n} "</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =></span> {
    <span class="hljs-comment">// handle response</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response)
})
</code></pre>
<p>ìœ„ ì½”ë“œëŠ” Permify ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
<p>ì´ ì½”ë“œëŠ” localhostì˜ 3478 í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Permify ì„œë²„ì— ì—°ê²°í•˜ë„ë¡ êµ¬ì¶•ë˜ì—ˆìœ¼ë©°, write ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ t1 í…Œë„ŒíŠ¸ë¥¼ ìœ„í•œ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
<p>ì´ ìŠ¤í‚¤ë§ˆëŠ” ì‚¬ìš©ì ë° ì¡°ì§ê³¼ ê´€ë ¨ê´€ê³„ ë° ì‘ì—…ê³¼ ê°™ì€ ì—”í‹°í‹°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ì œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•´ ë³¼ê²Œìš”</p>
<pre><code class="hljs language-js">node create-schema.<span class="hljs-property">js</span>
</code></pre>
<p><img src="/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_3.png" alt="ìŠ¤í¬ë¦°ìƒ· ì´ë¯¸ì§€"></p>
<p>ìœ„ ìŠ¤í¬ë¦°ìƒ·ì—ì„œ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆê°€ Permify Node Js Clientë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ê³µì ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë§Œì„¸! ğŸ¥³ Permify ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ ì„¤ì •ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆì³¤ì–´ìš”. ì´ì œ ê¶Œí•œ ëª¨ë¸ì´ ì„¤ì •ë˜ì—ˆê³  ì‚¬ìš©í•  ì¤€ë¹„ê°€ ëë‚¬ë‹µë‹ˆë‹¤!</p>
<p>ë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ ìœ„í•œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.</p>
<h1>ë‹¨ê³„ 5: ì•¡ì„¸ìŠ¤ ì œì–´ ë¯¸ë“¤ì›¨ì–´ ìƒì„±</h1>
<p>ì—¬ê¸°ì„œëŠ” Express ë¯¸ë“¤ì›¨ì–´ë¥¼ ê°œë°œí•´ì„œ ê²½ë¡œì— ê¸°ë°˜í•œ ì—­í•  ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ ê°•ì œí•˜ëŠ” ë°©ë²•ì„ í•œ ì˜ˆì œë¡œ ë³´ì—¬ì¤„ê²Œìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>Permify ì•¡ì„¸ìŠ¤ í™•ì¸ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë¯¸ë“¤ì›¨ì–´ì— êµ¬í˜„í•˜ì—¬ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ì „ì— ì‚¬ìš©ìì˜ ì—­í• ê³¼ ê¶Œí•œì„ í™•ì¸í•˜ëŠ” ë°©ë²•ë„ ë°°ìš¸ ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// auth.js</span>

<span class="hljs-comment">// Permify í´ë¼ì´ì–¸íŠ¸ ê°€ì ¸ì˜¤ê¸°</span>
<span class="hljs-keyword">const</span> permify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@permify/permify-node'</span>);

<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> permify.<span class="hljs-property">grpc</span>.<span class="hljs-title function_">newClient</span>({
  <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"localhost:3478"</span>,
});

<span class="hljs-comment">// ì‚¬ìš©ìì˜ ê¶Œí•œì„ í™•ì¸í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkPermissions</span> = (<span class="hljs-params">permissionType</span>) => {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (req, res, next) => {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// req.params.idê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸</span>
      <span class="hljs-keyword">if</span> (!req.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì‚¬ìš©ì IDê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤'</span>);
      }

      <span class="hljs-comment">// í•„ìš”ì— ë”°ë¼ permissionTypeì„ ë¬¸ìì—´ë¡œ ë³€í™˜</span>
      <span class="hljs-keyword">const</span> permTypeString = <span class="hljs-title class_">String</span>(permissionType);

      <span class="hljs-comment">// Permify í™•ì¸ ìš”ì²­ì„ ìœ„í•œ ë°ì´í„° ì¤€ë¹„</span>
      <span class="hljs-keyword">const</span> checkRes = <span class="hljs-keyword">await</span> client.<span class="hljs-property">permission</span>.<span class="hljs-title function_">check</span>({
        <span class="hljs-attr">tenantId</span>: <span class="hljs-string">'t1'</span>,
        <span class="hljs-attr">metadata</span>: {
          <span class="hljs-attr">schemaVersion</span>: <span class="hljs-string">''</span>,
          <span class="hljs-attr">snapToken</span>: <span class="hljs-string">''</span>,
          <span class="hljs-attr">depth</span>: <span class="hljs-number">20</span>,
        },
        <span class="hljs-attr">entity</span>: {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'organization'</span>,
          <span class="hljs-attr">id</span>: <span class="hljs-string">"1"</span>,
        },
        <span class="hljs-attr">permission</span>: permTypeString, <span class="hljs-comment">// ë³€í™˜ëœ permissionType ì‚¬ìš©</span>
        <span class="hljs-attr">subject</span>: {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'user'</span>,
          <span class="hljs-attr">id</span>: req.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>,
        },
      });

      <span class="hljs-keyword">if</span> (checkRes.<span class="hljs-property">can</span> === <span class="hljs-number">1</span>) {
        <span class="hljs-comment">// ì‚¬ìš©ìê°€ ê¶Œí•œì´ ìˆëŠ” ê²½ìš°</span>
        req.<span class="hljs-property">authorized</span> = <span class="hljs-string">'authorized'</span>;
        <span class="hljs-title function_">next</span>();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ì‚¬ìš©ìê°€ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°</span>
        req.<span class="hljs-property">authorized</span> = <span class="hljs-string">'not authorized'</span>;
        <span class="hljs-title function_">next</span>();
      }
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ê¶Œí•œ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// ì‹¤ì œ ì˜¤ë¥˜ ë©”ì‹œì§€ ê¸°ë¡</span>
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(err.<span class="hljs-property">message</span>); <span class="hljs-comment">// ë””ë²„ê¹…ì„ ìœ„í•´ ì‹¤ì œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ëƒ„</span>
    }
  };
};

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = checkPermissions;
</code></pre>
<p>ìœ„ ì½”ë“œëŠ” ì‚¬ìš©ì ê¶Œí•œì„ í™•ì¸í•˜ê¸° ìœ„í•´ Permify ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œ checkPermission ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì‹¤í–‰ì‹œ ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì‚¬ìš©ì IDë¥¼ ì¶”ì¶œí•˜ê³ , í•„ìš”ì— ë”°ë¼ ê¶Œí•œ ìœ í˜•ì„ ë¬¸ìì—´ë¡œ ë³€í™˜í•œ í›„, Permifyì˜ "permission.check" ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Permify ì„œë²„ì— ê¶Œí•œ í™•ì¸ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. ê¶Œí•œì´ ë¶€ì—¬ëœ ê²½ìš° ìš”ì²­ ê°ì²´ì— "authorized"ë¥¼ ì¶”ê°€í•˜ë©°, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° "not authorized"ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì˜¤ë¥˜ëŠ” ë””ë²„ê¹…ì„ ìœ„í•´ ë” ìì„¸íˆ ê¸°ë¡ë˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜ë©ë‹ˆë‹¤.</p>
<p>ë‹¤ìŒìœ¼ë¡œ, ì´ì „ì— ë§Œë“  ë¯¸ë“¤ì›¨ì–´ë¥¼ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•˜ì—¬ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)ë¥¼ ê°•ì œí•˜ê³  ì ì ˆí•œ ì—­í•  ë° ê¶Œí•œì´ ìˆëŠ” ì¸ì¦ëœ ì‚¬ìš©ìë§Œ íŠ¹ì • ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•  ê²ƒì…ë‹ˆë‹¤.</p>
<h1>ë‹¨ê³„ 6: RBACë¡œ ê²½ë¡œ ë³´í˜¸í•˜ê¸°</h1>
<p>ì´ì œ ë§Œë“  ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œë¥¼ ì•ˆì „í•˜ê²Œ ë§Œë“¤ì–´ë´…ì‹œë‹¤. ìš°ë¦¬ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‹¤ì–‘í•œ ê²½ë¡œë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•´ checkPermissions ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ìš©í•  ê²ƒì…ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-comment">// app.js</span>

<span class="hljs-comment">// í•„ìš”í•œ ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°</span>
<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> permify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@permify/permify-node"</span>);
<span class="hljs-keyword">const</span> authMiddleware = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./auth'</span>); <span class="hljs-comment">// ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ê°€ì ¸ì˜¤ê¸°</span>

<span class="hljs-comment">// Express ì•± ìƒì„±</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// userInfoë¥¼ ì±„ìš°ëŠ” ì‚¬ìš©ì ì§€ì • ë¯¸ë“¤ì›¨ì–´ ì •ì˜</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =></span> {
  <span class="hljs-comment">// ì‚¬ìš©ì ì¸ì¦ ì‹œë®¬ë ˆì´ì…˜ ë° userInfo ì±„ìš°ê¸°</span>
  req.<span class="hljs-property">userInfo</span> = {
    <span class="hljs-attr">id</span>: req.<span class="hljs-property">params</span>.<span class="hljs-property">id</span> <span class="hljs-comment">// ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ id ì¶”ì¶œ</span>
    <span class="hljs-comment">// í•„ìš”í•œ ê²½ìš° ë‹¤ë¥¸ ì‚¬ìš©ì ì •ë³´ ì¶”ê°€</span>
  };
  <span class="hljs-title function_">next</span>();
});

<span class="hljs-comment">// ë¼ìš°íŠ¸ ì •ì˜</span>

<span class="hljs-comment">// '/users/:id' ê²½ë¡œì— ëŒ€í•œ ê¶Œí•œ í™•ì¸ì„ ì ìš©í•˜ë ¤ëŠ” ê²½ìš°</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/users/viewFiles/:id'</span>, <span class="hljs-title function_">authMiddleware</span>(<span class="hljs-string">'view_files'</span>), <span class="hljs-function">(<span class="hljs-params">req, res</span>) =></span> {
  <span class="hljs-comment">// ë¯¸ë“¤ì›¨ì–´ê°€ ìš”ì²­ì„ í†µê³¼ì‹œí‚¤ë©´ ë¼ìš°íŠ¸ ë¡œì§ ì²˜ë¦¬</span>
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">authorized</span> === <span class="hljs-string">'authorized'</span>) {
    res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'ì´ ì‚¬ìš©ì ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤'</span>);
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">403</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'ì´ ì‚¬ìš©ì ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤'</span>);
  }
});

<span class="hljs-comment">// '/admin/deleteVendorFiles/:id' ê²½ë¡œì— ëŒ€í•œ ê¶Œí•œ í™•ì¸ì„ ì ìš©í•˜ë ¤ëŠ” ê²½ìš°</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/admin/deleteVendorFiles/:id'</span>, <span class="hljs-title function_">authMiddleware</span>(<span class="hljs-string">'delete_vendor_file'</span>), <span class="hljs-function">(<span class="hljs-params">req, res</span>) =></span> {
  <span class="hljs-comment">// ë¯¸ë“¤ì›¨ì–´ê°€ ìš”ì²­ì„ í†µê³¼ì‹œí‚¤ë©´ ë¼ìš°íŠ¸ ë¡œì§ ì²˜ë¦¬</span>
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">authorized</span> === <span class="hljs-string">'authorized'</span>) {
    res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'ì´ ê´€ë¦¬ì ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤'</span>);
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">403</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'ì´ ê´€ë¦¬ì ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤'</span>);
  }
});

<span class="hljs-comment">// ì„œë²„ ì‹œì‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3000</span>;
app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ì„œë²„ê°€ <span class="hljs-subst">${PORT}</span>í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`</span>);
});
</code></pre>
<p>ì´ ì½”ë“œëŠ” íŠ¹ì • ë¼ìš°íŠ¸ê°€ authMiddlewareë¼ëŠ” ì‚¬ìš©ì ì§€ì • ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´í˜¸ë˜ëŠ” Express ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í¬íŠ¸ 3000ì—ì„œ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<p>ì´ authMiddlewareë¼ëŠ” ë¯¸ë“¤ì›¨ì–´ëŠ” auth.js íŒŒì¼ì—ì„œ ê°€ì ¸ì˜¨ Permifyì™€ í†µí•©í•˜ì—¬ ê¶Œí•œ í™•ì¸ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ë¯¸ë“¤ì›¨ì–´ì— ì˜í•´ ë³´í˜¸ë˜ëŠ” ë¼ìš°íŠ¸ì…ë‹ˆë‹¤;</p>
<p>authMiddlewareì— ì˜í•´ ë³´í˜¸ë˜ëŠ” ë¼ìš°íŠ¸:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>/users/viewFiles/:id ê²½ë¡œ: ì´ ê²½ë¡œëŠ” íŒŒì¼ì„ ë³¼ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.</li>
<li>/admin/viewFiles/:id ê²½ë¡œ: ì´ ê²½ë¡œëŠ” ì—…ì²´ íŒŒì¼ì„ ì‚­ì œí•  ê¶Œí•œì„ ê°€ì§„ ê´€ë¦¬ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.</li>
</ul>
<p>ì´ëŸ¬í•œ ê²½ë¡œì— authMiddlewareë¥¼ ì ìš©í•˜ì—¬ Permifyê°€ ë¶€ì—¬í•œ ê¶Œí•œì— ë”°ë¼ ì ‘ê·¼ì´ ì œí•œë©ë‹ˆë‹¤.</p>
<p>êµ¬í˜„ì„ í…ŒìŠ¤íŠ¸í•´ë´…ì‹œë‹¤!</p>
<h1>RBAC êµ¬í˜„ í…ŒìŠ¤íŠ¸</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì•„ë˜ëŠ” Markdown í˜•ì‹ìœ¼ë¡œ í‘œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>













<table><thead><tr><th>ì‚¬ìš©ìID</th><th>ì—­í• </th></tr></thead><tbody><tr><td>alice</td><td>ë©¤ë²„</td></tr></tbody></table>
<p>ì´ í‘œëŠ” ì‚¬ìš©ì aliceì—ê²Œ ë©¤ë²„ ì—­í• ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•œ Permify Nodejs í´ë¼ì´ì–¸íŠ¸ì˜ data.write ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œ ì½”ë“œì…ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ê·¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  Postmanì„ ì‚¬ìš©í•˜ì—¬ /users/viewFiles/ API ì—”ë“œí¬ì¸íŠ¸ì— ë°©ë¬¸í•´ ë³´ì„¸ìš”.</p>
<p><img src="/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_5.png" alt="image"></p>
<p>ì´ì œ ì½”ë“œë¥¼ ì‹¤í–‰í•œ í›„ AliceëŠ” /users/viewFiles/ API ì—”ë“œí¬ì¸íŠ¸ì— ì„±ê³µì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1>ê²°ë¡ </h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì¸ê°€(authorization)ê°€ í•œ ë²ˆë§Œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê³„ì†ëœ ê³¼ì •ì´ë¼ëŠ” ê²ƒì„ ì¸ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<p>ë”°ë¼ì„œ ëª¨ë¸ì„ ì •ê¸°ì ìœ¼ë¡œ ê²€í† í•˜ê³  ì² ì €í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°œì „í•¨ì— ë”°ë¼ ì ì‘ì‹œí‚¤ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<p>ì´ ê°€ì´ë“œëŠ” Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBAC(Role-Based Access Control)ì„ êµ¬í˜„í•˜ëŠ” ë° íŠ¼íŠ¼í•œ ê¸°ì´ˆ ì—­í• ì„ í•©ë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë‚˜ ê°œë³„ ìš”êµ¬ ì‚¬í•­ì— ì •í™•íˆ ë§ê²Œ RBAC ëª¨ë¸ì„ ë§ì¶¤í™”í•˜ëŠ” ë° ë” ì‹¬ì¸µì ìœ¼ë¡œ íŒŒê³ ë“¤ê³  ë§ì„¤ì´ì§€ ë§ˆì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>Permifyì˜ ê¸°ëŠ¥ì„ í™œìš©í•˜ë©´ ê¶Œí•œ ê´€ë¦¬ë¥¼ ìµœì í™”í•˜ê³  ê²¬ê³ í•˜ê³  ì•ˆì „í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì„ ìœ¡ì„±í•  ìˆ˜ ìˆì–´ìš”.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Nodejsì™€ Express ì•±ì—ì„œ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´RBAC êµ¬í˜„í•˜ëŠ” ë°©ë²•","description":"","date":"2024-06-30 21:53","slug":"2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp","content":"\n\nì´ ê¸°ì‚¬ì—ì„œëŠ” ë‹¨ ëª‡ ë¶„ ì•ˆì— Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— Role Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_0.png)\n\nì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ íŠ¹ì • ê¸°ëŠ¥ ë° ë°ì´í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œì´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ Role-Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\nì´ ê¸°ì‚¬ì—ì„œëŠ” Permifyë¥¼ ì‚¬ìš©í•˜ì—¬ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBACì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•´ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# Node.js Express í”„ë¡œì íŠ¸ ì„¤ì •í•˜ê¸°\n\nExpress.js í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¼ˆëŒ€ë¥¼ ë¹ ë¥´ê²Œ ìƒì„±í•˜ë ¤ë©´ express-generator ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹œì‘í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:\n\n## ë‹¨ê³„ 1. express-generator ì„¤ì¹˜í•˜ê¸°:\n\nNode.js ë²„ì „ 8.2.0 ì´ìƒì„ ì‚¬ìš© ì¤‘ì´ë¼ë©´ npx ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ê¸°ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nnpx express-generator\n```\n\nì´ì „ Node ë²„ì „ì˜ ê²½ìš°, ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ê¸°ë¥¼ ê¸€ë¡œë²Œ npm íŒ¨í‚¤ì§€ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆì–´ìš”:\n\n```js\nnpm install -g express-generator\n```\n\n# ë‹¨ê³„ 2. Express ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±í•˜ê¸°:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nexpress-generatorì„ ì„¤ì¹˜í•˜ì…¨ìœ¼ë©´ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•  ìˆ˜ ìˆì–´ìš”. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”:\n\n```js\nexpress -h\n```\n\nì´ë ‡ê²Œ í•˜ë©´ Express ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ì„ ìœ„í•œ ê°€ëŠ¥í•œ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.\n\nì˜ˆë¥¼ ë“¤ì–´, Pug ë·° ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ permify-rbac-appì´ë¼ëŠ” Express ì•±ì„ ìƒì„±í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nexpress --view=pug permify-rbac-app\n```\n\nì´ ëª…ë ¹ì–´ëŠ” í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬ì— permify-rbac-appì´ë¼ëŠ” í´ë”ë¥¼ ìƒì„±í•˜ê³  Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ íŒŒì¼ê³¼ í´ë”ë¥¼ í•¨ê»˜ ë§Œë“­ë‹ˆë‹¤.\n\n# ë‹¨ê³„ 3. ì¢…ì†ì„± ì„¤ì¹˜:\n\nìƒˆë¡œ ë§Œë“  Express ì• í”Œë¦¬ì¼€ì´ì…˜ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ì„¸ìš”:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\ncd permify-rbac-app\n```\n\nê·¸ëŸ° ë‹¤ìŒ npmì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ì„¸ìš”:\n\n```js\nnpm install express \u0026\u0026 npm install @permify-node\n```\n\n# ë‹¨ê³„ 4. Express ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘í•˜ê¸°:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nMacOS ë˜ëŠ” Linuxì—ì„œëŠ” ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì•±ì„ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”:\n\n```js\nDEBUG=permify-rbac-app:* npm start\n```\n\n# ë‹¨ê³„ 5. ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì•¡ì„¸ìŠ¤í•˜ê¸°:\n\nExpress ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000/ì„ í†µí•´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ë””ë ‰í† ë¦¬ êµ¬ì¡°:\n\nìƒì„±ëœ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ìŒê³¼ ê°™ì€ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤:\n\n```js\npermify-rbac-app/\nâ”œâ”€â”€ app.js\nâ”œâ”€â”€ bin/\nâ”‚   â””â”€â”€ www\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ public/\nâ”‚   â”œâ”€â”€ images/\nâ”‚   â”œâ”€â”€ javascripts/\nâ”‚   â””â”€â”€ stylesheets/\nâ”‚       â””â”€â”€ style.css\nâ”œâ”€â”€ routes/\nâ”‚   â”œâ”€â”€ index.js\nâ”‚   â””â”€â”€ users.js\nâ””â”€â”€ views/\n    â”œâ”€â”€ error.pug\n    â”œâ”€â”€ index.pug\n    â””â”€â”€ layout.pug\n```\n\nì´ êµ¬ì¡°ì—ëŠ” ì£¼ìš” ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼(app.js), ì„œë²„ êµ¬ì„±(bin/www), ë¼ìš°íŠ¸(routes), ë·°(views), ê³µìš© ì—ì…‹(public assets), ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì´ í¬í•¨ëœ package.json íŒŒì¼ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nExpress.js í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í–ˆìœ¼ë‹ˆ, ì´ì œ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBACë¥¼ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.\n\n# Node.js ë° Expressì—ì„œ RBAC êµ¬í˜„í•˜ê¸°\n\nNode.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— Role-Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì—ëŠ” ëª‡ ê°€ì§€ ë‹¨ê³„ê°€ ì—°ë£¨ë©ë‹ˆë‹¤. ë‹¤ìŒì€ ê¸°ë³¸ì ì¸ êµ¬í˜„ ë°©ë²•ì…ë‹ˆë‹¤:\n\n# ë‹¨ê³„ 1: Permifyë¥¼ ì‚¬ìš©í•˜ì—¬ RBAC ëª¨ë¸ ì„¤ê³„í•˜ê¸°\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nPermifyëŠ” ê°œë°© ì†ŒìŠ¤ ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ë¡œ, ê°œë°œìë“¤ì´ ê¶Œí•œ ì‹œìŠ¤í…œì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. Permifyë¥¼ ì´ìš©í•˜ë©´ ê¶Œí•œì„ ëª¨ë¸ë§í•˜ê³ , í™˜ê²½ì— ì¤‘ì•™ ê¶Œí•œ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì„œë¹„ìŠ¤ì—ì„œ ì•¡ì„¸ìŠ¤ í™•ì¸ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ë¥¼ ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ SDKsë¥¼ ì œê³µí•˜ì—¬, ë¯¸ë“¤ì›¨ì–´ì— ì¶”ê°€í•˜ì—¬ ì ‘ê·¼ í™•ì¸ê³¼ ê°™ì€ ê¶Œí•œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nPermifyëŠ” ì—­í• , ê¶Œí•œ ë° ê´€ê³„ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ ë„ë©”ì¸ íŠ¹í™” ì–¸ì–´(DSL)ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Permify Playgroundë¥¼ í™œìš©í•˜ì—¬ RBAC ëª¨ë¸ì„ ì‹¤í—˜í•˜ê³  ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_1.png)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ ê²Œì‹œë¬¼ì—ì„œëŠ” ê·€í•˜ì˜ ì¡°ì§ ë‚´ ì‚¬ìš©ìê°€ ì—­í• ì— ë”°ë¼ ë¬¸ì„œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ íŒŒì¼ ê¸°ë°˜ ê¶Œí•œ ë¶€ì—¬ ì‹œìŠ¤í…œì„ ê°œë°œí•  ê²ƒì…ë‹ˆë‹¤.\n\ní–‰ì •ì, ê´€ë¦¬ì ë° ì§ì›ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì—­í• ì€ íŒŒì¼ì„ ë³´ê¸°, í¸ì§‘ ë˜ëŠ” ì‚­ì œí•˜ëŠ” ë° ì„œë¡œ ë‹¤ë¥¸ ìˆ˜ì¤€ì˜ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Permify DSLì„ ì‚¬ìš©í•œ ì—­í•  ë° ê¶Œí•œ ì •ì˜\n\në‹¤ìŒì€ RBAC ëª¨ë¸ì„ ìœ„í•œ Permify DSL ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nentity user {} \n\nentity organization {\n    // roles \n    relation admin @user    \n    relation member @user    \n    relation manager @user    \n    relation agent @user  \n    \n    // organization files access permissions\n    permission view_files = admin or manager or (member not agent)\n    permission delete_file = admin \n    \n    // vendor files access permissions\n    permission view_vendor_files = admin or manager or agent\n    permission delete_vendor_file = agent\n}\n```\n\nRoles and Permissions:\n\n- Roles: The schema defines roles for the organization entity, including admin, member, manager, and agent. These roles determine the level of access and permissions users have within the organization.\n- Permissions: Actions such as `view_files`, `edit_files`, `delete_file`, `view_vendor_files`, `edit_vendor_files`, and `delete_vendor_file` define the specific permissions associated with each role. For example, only admins can delete organization files, while managers and members have different levels of access.\n\nResource Types:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- ìŠ¤í‚¤ë§ˆëŠ” ì¡°ì§ íŒŒì¼ê³¼ ê³µê¸‰ ì—…ì²´ íŒŒì¼ì„ êµ¬ë³„í•˜ì—¬ ê°ê°ì˜ ê¶Œí•œ ì§‘í•©ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì˜ ë‹¤ë¥¸ ìœ í˜•ì˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n\nì´ì œ RBAC ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í–ˆìœ¼ë‹ˆ Permify Local Serverë¥¼ ì„¤ì •í•˜ëŠ” ë‹¨ê³„ë¡œ ë„˜ì–´ê°ˆ ê²ƒì…ë‹ˆë‹¤.\n\n# ë‹¨ê³„ 2: Dockerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Local Server ì„¤ì •í•˜ê¸°\n\nDockerëŠ” ì»¨í…Œì´ë„ˆí™”ëœ í™˜ê²½ì„ ì œê³µí•¨ìœ¼ë¡œì¨ ìš°ë¦¬ì˜ ì„¤ì •ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ í™˜ê²½ì€ ëª¨ë“  ê¶Œí•œ ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì¸ Permifyì˜ íš¨ìœ¨ì ì¸ ì‘ë™ì„ ìœ„í•œ í•„ìˆ˜ ìš”ì†Œì…ë‹ˆë‹¤.\n\nì´ì œ Docker Containerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Serverë¥¼ ì„¤ì •í•˜ëŠ” í•„ìš”í•œ ë‹¨ê³„ë¥¼ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤:\n\n## Docker Containerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Server ì‹¤í–‰\n\n- í„°ë¯¸ë„ ì°½ì„ ì—´ê³  ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ Permify Server Docker ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê³  ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•©ë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\nsudo docker run -p 3476:3476 -p 3478:3478 ghcr.io/permify/permify serve\n\n\nì´ ëª…ë ¹ì–´ëŠ” GitHub Container Registryì—ì„œ Permify Server ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ë‹¤ìŒì˜ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ Permify, ì €í¬ì˜ ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:\n\n- REST APIëŠ” 3476 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.\n- gRPC ì„œë¹„ìŠ¤ëŠ” 3478 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.\n- ê¶Œí•œ ë°ì´í„°ëŠ” ì»´í“¨í„° ë©”ëª¨ë¦¬ì— ì €ì¥ë©ë‹ˆë‹¤.\n\në‹¤ìŒê³¼ ìœ ì‚¬í•œ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    Permify v0.9.5                      â”‚\r\nâ”‚          Fine-grained Authorization Service            â”‚\r\nâ”‚                                                        â”‚\r\nâ”‚    docs: ............... https://docs.permify.co       â”‚\r\nâ”‚    github: .. https://github.com/Permify/permify       â”‚\r\nâ”‚    blog: ............... https://permify.co/blog       â”‚\r\nâ”‚                                                        â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\ntime=2024-03-22T14:59:09.851Z level=INFO msg=\"ğŸš€ starting permify service...\"\r\ntime=2024-03-22T14:59:09.851Z level=ERROR msg=\"Account ID is not set. Please fill in the Account ID for better support. Get your Account ID from https://permify.co/account\"\r\ntime=2024-03-22T14:59:09.859Z level=INFO msg=\"ğŸš€ grpc server successfully started: 3478\"\r\ntime=2024-03-22T14:59:09.859Z level=INFO msg=\"ğŸš€ invoker grpc server successfully started: 5000\"\r\ntime=2024-03-22T14:59:09.867Z level=INFO msg=\"ğŸš€ http server successfully started: 3476\"\r\n\n\r\n## Permify ì„œë²„ í™•ì¸\r\n\r\nì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì´ë©´ health check endpointì— ì•¡ì„¸ìŠ¤í•˜ì—¬ Permify ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Postmanì„ ì—´ê³  http://localhost:3476/healthzë¡œ GET ìš”ì²­ì„ ë³´ë‚´ì„¸ìš”. Permify ì„œë²„ê°€ ì˜¬ë°”ë¥´ê²Œ ì‹¤í–‰ ì¤‘ì´ë©´ ì„œë¹„ìŠ¤ê°€ ê±´ê°•í•œ ê²ƒì„ ë‚˜íƒ€ë‚´ëŠ” ì‘ë‹µì„ ë³¼ ìˆ˜ ìˆì–´ìš”.\r\n\r\n\u003cimg src=\"/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_2.png\" /\u003e\r\n\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nìœ„ì˜ ì´ë¯¸ì§€ë¥¼ ë³´ë©´ Permify ì„œë²„ê°€ ì‘ë™ ì¤‘ì´ë¼ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ë‹¨ê³„ 3: Permify Node.js í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\n\nì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Permify Node í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê¶Œí•œ ë¶€ì—¬ë¥¼ ì œì–´í•©ë‹ˆë‹¤. Permify Swagger ë¬¸ì„œì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” Permifyì˜ ì ‘ê·¼ ì œì–´ ì²´í¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•  ê²ƒì…ë‹ˆë‹¤.\n\nì´ì œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ˆê¸°í™”í•´ ë´…ì‹œë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```javascript\n// create-tenant.js\nconst permify = require(\"@permify/permify-node\");\n\nconst client = new permify.grpc.newClient({\n    endpoint: \"localhost:3478\",\n})\n```\n\n# ë‹¨ê³„ 4: ê¶Œí•œ ëª¨ë¸ êµ¬ì„±\n\nì´ì œ Permify ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ë¯€ë¡œ ê¶Œí•œ ëª¨ë¸ì„ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´í›„ì— í…ŒìŠ¤íŠ¸ ì•¡ì„¸ìŠ¤ í™•ì¸ì„ ìˆ˜í–‰í•  ì¤€ë¹„ê°€ ë  ê²ƒì…ë‹ˆë‹¤.\n\nê¶Œí•œ ëª¨ë¸ì„ êµ¬ì„±í•˜ë ¤ë©´ ìƒì„±í•œ ìŠ¤í‚¤ë§ˆë¥¼ Permifyì—ê²Œ Permify schema.write ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì†¡í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n//create-schema.js\n\nconst permify = require(\"@permify/permify-node\");\n\nconst client = new permify.grpc.newClient({\n    endpoint: \"localhost:3478\",\n})\n\nclient.schema.write({\n    tenantId: \"t1\",\n    schema: \"entity user {} \\n\\nentity organization {\\n\\n    relation admin @user    \\n    relation member @user    \\n    relation manager @user    \\n    relation agent @user  \\n\\n    action view_files = admin or manager or (member not agent)\\n    action edit_files = admin or manager\\n    action delete_file = admin\\n    action view_vendor_files = admin or manager or agent\\n    action edit_vendor_files = admin or agent\\n    action delete_vendor_file = agent\\n\\n} \"\n}).then((response) =\u003e {\n    // handle response\n    console.log(response)\n})\n```\n\nìœ„ ì½”ë“œëŠ” Permify ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\nì´ ì½”ë“œëŠ” localhostì˜ 3478 í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Permify ì„œë²„ì— ì—°ê²°í•˜ë„ë¡ êµ¬ì¶•ë˜ì—ˆìœ¼ë©°, write ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ t1 í…Œë„ŒíŠ¸ë¥¼ ìœ„í•œ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\n\nì´ ìŠ¤í‚¤ë§ˆëŠ” ì‚¬ìš©ì ë° ì¡°ì§ê³¼ ê´€ë ¨ê´€ê³„ ë° ì‘ì—…ê³¼ ê°™ì€ ì—”í‹°í‹°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ì œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•´ ë³¼ê²Œìš”\n\n```js\nnode create-schema.js\n```\n\n![ìŠ¤í¬ë¦°ìƒ· ì´ë¯¸ì§€](/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_3.png)\n\nìœ„ ìŠ¤í¬ë¦°ìƒ·ì—ì„œ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆê°€ Permify Node Js Clientë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ê³µì ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në§Œì„¸! ğŸ¥³ Permify ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ ì„¤ì •ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆì³¤ì–´ìš”. ì´ì œ ê¶Œí•œ ëª¨ë¸ì´ ì„¤ì •ë˜ì—ˆê³  ì‚¬ìš©í•  ì¤€ë¹„ê°€ ëë‚¬ë‹µë‹ˆë‹¤!\n\në‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ ìœ„í•œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.\n\n# ë‹¨ê³„ 5: ì•¡ì„¸ìŠ¤ ì œì–´ ë¯¸ë“¤ì›¨ì–´ ìƒì„±\n\nì—¬ê¸°ì„œëŠ” Express ë¯¸ë“¤ì›¨ì–´ë¥¼ ê°œë°œí•´ì„œ ê²½ë¡œì— ê¸°ë°˜í•œ ì—­í•  ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ ê°•ì œí•˜ëŠ” ë°©ë²•ì„ í•œ ì˜ˆì œë¡œ ë³´ì—¬ì¤„ê²Œìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nPermify ì•¡ì„¸ìŠ¤ í™•ì¸ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë¯¸ë“¤ì›¨ì–´ì— êµ¬í˜„í•˜ì—¬ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ì „ì— ì‚¬ìš©ìì˜ ì—­í• ê³¼ ê¶Œí•œì„ í™•ì¸í•˜ëŠ” ë°©ë²•ë„ ë°°ìš¸ ê²ƒì…ë‹ˆë‹¤.\n\n```js\n// auth.js\n\n// Permify í´ë¼ì´ì–¸íŠ¸ ê°€ì ¸ì˜¤ê¸°\nconst permify = require('@permify/permify-node');\n\nconst client = new permify.grpc.newClient({\n  endpoint: \"localhost:3478\",\n});\n\n// ì‚¬ìš©ìì˜ ê¶Œí•œì„ í™•ì¸í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜\nconst checkPermissions = (permissionType) =\u003e {\n  return async (req, res, next) =\u003e {\n    try {\n      // req.params.idê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\n      if (!req.params.id) {\n        throw new Error('ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì‚¬ìš©ì IDê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤');\n      }\n\n      // í•„ìš”ì— ë”°ë¼ permissionTypeì„ ë¬¸ìì—´ë¡œ ë³€í™˜\n      const permTypeString = String(permissionType);\n\n      // Permify í™•ì¸ ìš”ì²­ì„ ìœ„í•œ ë°ì´í„° ì¤€ë¹„\n      const checkRes = await client.permission.check({\n        tenantId: 't1',\n        metadata: {\n          schemaVersion: '',\n          snapToken: '',\n          depth: 20,\n        },\n        entity: {\n          type: 'organization',\n          id: \"1\",\n        },\n        permission: permTypeString, // ë³€í™˜ëœ permissionType ì‚¬ìš©\n        subject: {\n          type: 'user',\n          id: req.params.id,\n        },\n      });\n\n      if (checkRes.can === 1) {\n        // ì‚¬ìš©ìê°€ ê¶Œí•œì´ ìˆëŠ” ê²½ìš°\n        req.authorized = 'authorized';\n        next();\n      } else {\n        // ì‚¬ìš©ìê°€ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°\n        req.authorized = 'not authorized';\n        next();\n      }\n    } catch (err) {\n      console.error('ê¶Œí•œ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', err.message); // ì‹¤ì œ ì˜¤ë¥˜ ë©”ì‹œì§€ ê¸°ë¡\n      res.status(500).send(err.message); // ë””ë²„ê¹…ì„ ìœ„í•´ ì‹¤ì œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ëƒ„\n    }\n  };\n};\n\nmodule.exports = checkPermissions;\n```\n\nìœ„ ì½”ë“œëŠ” ì‚¬ìš©ì ê¶Œí•œì„ í™•ì¸í•˜ê¸° ìœ„í•´ Permify ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œ checkPermission ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì‹¤í–‰ì‹œ ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì‚¬ìš©ì IDë¥¼ ì¶”ì¶œí•˜ê³ , í•„ìš”ì— ë”°ë¼ ê¶Œí•œ ìœ í˜•ì„ ë¬¸ìì—´ë¡œ ë³€í™˜í•œ í›„, Permifyì˜ \"permission.check\" ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Permify ì„œë²„ì— ê¶Œí•œ í™•ì¸ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. ê¶Œí•œì´ ë¶€ì—¬ëœ ê²½ìš° ìš”ì²­ ê°ì²´ì— \"authorized\"ë¥¼ ì¶”ê°€í•˜ë©°, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° \"not authorized\"ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì˜¤ë¥˜ëŠ” ë””ë²„ê¹…ì„ ìœ„í•´ ë” ìì„¸íˆ ê¸°ë¡ë˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜ë©ë‹ˆë‹¤.\n\në‹¤ìŒìœ¼ë¡œ, ì´ì „ì— ë§Œë“  ë¯¸ë“¤ì›¨ì–´ë¥¼ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•˜ì—¬ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)ë¥¼ ê°•ì œí•˜ê³  ì ì ˆí•œ ì—­í•  ë° ê¶Œí•œì´ ìˆëŠ” ì¸ì¦ëœ ì‚¬ìš©ìë§Œ íŠ¹ì • ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•  ê²ƒì…ë‹ˆë‹¤.\n\n# ë‹¨ê³„ 6: RBACë¡œ ê²½ë¡œ ë³´í˜¸í•˜ê¸°\n\nì´ì œ ë§Œë“  ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œë¥¼ ì•ˆì „í•˜ê²Œ ë§Œë“¤ì–´ë´…ì‹œë‹¤. ìš°ë¦¬ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‹¤ì–‘í•œ ê²½ë¡œë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•´ checkPermissions ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\r\n// app.js\n\n// í•„ìš”í•œ ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°\nconst express = require('express');\nconst permify = require(\"@permify/permify-node\");\nconst authMiddleware = require('./auth'); // ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ê°€ì ¸ì˜¤ê¸°\n\n// Express ì•± ìƒì„±\nconst app = express();\n\n// userInfoë¥¼ ì±„ìš°ëŠ” ì‚¬ìš©ì ì§€ì • ë¯¸ë“¤ì›¨ì–´ ì •ì˜\napp.use((req, res, next) =\u003e {\n  // ì‚¬ìš©ì ì¸ì¦ ì‹œë®¬ë ˆì´ì…˜ ë° userInfo ì±„ìš°ê¸°\n  req.userInfo = {\n    id: req.params.id // ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ id ì¶”ì¶œ\n    // í•„ìš”í•œ ê²½ìš° ë‹¤ë¥¸ ì‚¬ìš©ì ì •ë³´ ì¶”ê°€\n  };\n  next();\n});\n\n// ë¼ìš°íŠ¸ ì •ì˜\n\n// '/users/:id' ê²½ë¡œì— ëŒ€í•œ ê¶Œí•œ í™•ì¸ì„ ì ìš©í•˜ë ¤ëŠ” ê²½ìš°\napp.get('/users/viewFiles/:id', authMiddleware('view_files'), (req, res) =\u003e {\n  // ë¯¸ë“¤ì›¨ì–´ê°€ ìš”ì²­ì„ í†µê³¼ì‹œí‚¤ë©´ ë¼ìš°íŠ¸ ë¡œì§ ì²˜ë¦¬\n  if (req.authorized === 'authorized') {\n    res.send('ì´ ì‚¬ìš©ì ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');\n  } else {\n    res.status(403).send('ì´ ì‚¬ìš©ì ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤');\n  }\n});\n\n// '/admin/deleteVendorFiles/:id' ê²½ë¡œì— ëŒ€í•œ ê¶Œí•œ í™•ì¸ì„ ì ìš©í•˜ë ¤ëŠ” ê²½ìš°\napp.get('/admin/deleteVendorFiles/:id', authMiddleware('delete_vendor_file'), (req, res) =\u003e {\n  // ë¯¸ë“¤ì›¨ì–´ê°€ ìš”ì²­ì„ í†µê³¼ì‹œí‚¤ë©´ ë¼ìš°íŠ¸ ë¡œì§ ì²˜ë¦¬\n  if (req.authorized === 'authorized') {\n    res.send('ì´ ê´€ë¦¬ì ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');\n  } else {\n    res.status(403).send('ì´ ê´€ë¦¬ì ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤');\n  }\n});\n\n// ì„œë²„ ì‹œì‘\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () =\u003e {\n  console.log(`ì„œë²„ê°€ ${PORT}í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`);\n});\r\n```\n\nì´ ì½”ë“œëŠ” íŠ¹ì • ë¼ìš°íŠ¸ê°€ authMiddlewareë¼ëŠ” ì‚¬ìš©ì ì§€ì • ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´í˜¸ë˜ëŠ” Express ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í¬íŠ¸ 3000ì—ì„œ ì„¤ì •í•©ë‹ˆë‹¤.\n\nì´ authMiddlewareë¼ëŠ” ë¯¸ë“¤ì›¨ì–´ëŠ” auth.js íŒŒì¼ì—ì„œ ê°€ì ¸ì˜¨ Permifyì™€ í†µí•©í•˜ì—¬ ê¶Œí•œ í™•ì¸ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ë¯¸ë“¤ì›¨ì–´ì— ì˜í•´ ë³´í˜¸ë˜ëŠ” ë¼ìš°íŠ¸ì…ë‹ˆë‹¤;\n\nauthMiddlewareì— ì˜í•´ ë³´í˜¸ë˜ëŠ” ë¼ìš°íŠ¸:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- /users/viewFiles/:id ê²½ë¡œ: ì´ ê²½ë¡œëŠ” íŒŒì¼ì„ ë³¼ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\n- /admin/viewFiles/:id ê²½ë¡œ: ì´ ê²½ë¡œëŠ” ì—…ì²´ íŒŒì¼ì„ ì‚­ì œí•  ê¶Œí•œì„ ê°€ì§„ ê´€ë¦¬ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ ê²½ë¡œì— authMiddlewareë¥¼ ì ìš©í•˜ì—¬ Permifyê°€ ë¶€ì—¬í•œ ê¶Œí•œì— ë”°ë¼ ì ‘ê·¼ì´ ì œí•œë©ë‹ˆë‹¤.\n\nêµ¬í˜„ì„ í…ŒìŠ¤íŠ¸í•´ë´…ì‹œë‹¤!\n\n# RBAC êµ¬í˜„ í…ŒìŠ¤íŠ¸\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì•„ë˜ëŠ” Markdown í˜•ì‹ìœ¼ë¡œ í‘œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n\n| ì‚¬ìš©ìID | ì—­í•          | \n|--------|--------------|\n| alice  | ë©¤ë²„         | \n\n\nì´ í‘œëŠ” ì‚¬ìš©ì aliceì—ê²Œ ë©¤ë²„ ì—­í• ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•œ Permify Nodejs í´ë¼ì´ì–¸íŠ¸ì˜ data.write ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œ ì½”ë“œì…ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nê·¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  Postmanì„ ì‚¬ìš©í•˜ì—¬ /users/viewFiles/ API ì—”ë“œí¬ì¸íŠ¸ì— ë°©ë¬¸í•´ ë³´ì„¸ìš”.\n\n![image](/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_5.png)\n\nì´ì œ ì½”ë“œë¥¼ ì‹¤í–‰í•œ í›„ AliceëŠ” /users/viewFiles/ API ì—”ë“œí¬ì¸íŠ¸ì— ì„±ê³µì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ê²°ë¡ \n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì¸ê°€(authorization)ê°€ í•œ ë²ˆë§Œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê³„ì†ëœ ê³¼ì •ì´ë¼ëŠ” ê²ƒì„ ì¸ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\në”°ë¼ì„œ ëª¨ë¸ì„ ì •ê¸°ì ìœ¼ë¡œ ê²€í† í•˜ê³  ì² ì €í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°œì „í•¨ì— ë”°ë¼ ì ì‘ì‹œí‚¤ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\nì´ ê°€ì´ë“œëŠ” Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBAC(Role-Based Access Control)ì„ êµ¬í˜„í•˜ëŠ” ë° íŠ¼íŠ¼í•œ ê¸°ì´ˆ ì—­í• ì„ í•©ë‹ˆë‹¤.\n\nê·¸ëŸ¬ë‚˜ ê°œë³„ ìš”êµ¬ ì‚¬í•­ì— ì •í™•íˆ ë§ê²Œ RBAC ëª¨ë¸ì„ ë§ì¶¤í™”í•˜ëŠ” ë° ë” ì‹¬ì¸µì ìœ¼ë¡œ íŒŒê³ ë“¤ê³  ë§ì„¤ì´ì§€ ë§ˆì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nPermifyì˜ ê¸°ëŠ¥ì„ í™œìš©í•˜ë©´ ê¶Œí•œ ê´€ë¦¬ë¥¼ ìµœì í™”í•˜ê³  ê²¬ê³ í•˜ê³  ì•ˆì „í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì„ ìœ¡ì„±í•  ìˆ˜ ìˆì–´ìš”.","ogImage":{"url":"/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_0.png"},"coverImage":"/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_0.png","tag":["Tech"],"readingTime":21},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003eì´ ê¸°ì‚¬ì—ì„œëŠ” ë‹¨ ëª‡ ë¶„ ì•ˆì— Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— Role Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_0.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003eì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ íŠ¹ì • ê¸°ëŠ¥ ë° ë°ì´í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œì´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ Role-Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ê¸°ì‚¬ì—ì„œëŠ” Permifyë¥¼ ì‚¬ìš©í•˜ì—¬ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBACì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•´ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eNode.js Express í”„ë¡œì íŠ¸ ì„¤ì •í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eExpress.js í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¼ˆëŒ€ë¥¼ ë¹ ë¥´ê²Œ ìƒì„±í•˜ë ¤ë©´ express-generator ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹œì‘í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:\u003c/p\u003e\n\u003ch2\u003eë‹¨ê³„ 1. express-generator ì„¤ì¹˜í•˜ê¸°:\u003c/h2\u003e\n\u003cp\u003eNode.js ë²„ì „ 8.2.0 ì´ìƒì„ ì‚¬ìš© ì¤‘ì´ë¼ë©´ npx ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ê¸°ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpx express-generator\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì „ Node ë²„ì „ì˜ ê²½ìš°, ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ê¸°ë¥¼ ê¸€ë¡œë²Œ npm íŒ¨í‚¤ì§€ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆì–´ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install -g express-generator\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 2. Express ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±í•˜ê¸°:\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eexpress-generatorì„ ì„¤ì¹˜í•˜ì…¨ìœ¼ë©´ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•  ìˆ˜ ìˆì–´ìš”. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eexpress -h\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ë ‡ê²Œ í•˜ë©´ Express ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±ì„ ìœ„í•œ ê°€ëŠ¥í•œ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003cp\u003eì˜ˆë¥¼ ë“¤ì–´, Pug ë·° ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ permify-rbac-appì´ë¼ëŠ” Express ì•±ì„ ìƒì„±í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eexpress --view=pug permify-rbac-app\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ëª…ë ¹ì–´ëŠ” í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬ì— permify-rbac-appì´ë¼ëŠ” í´ë”ë¥¼ ìƒì„±í•˜ê³  Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ íŒŒì¼ê³¼ í´ë”ë¥¼ í•¨ê»˜ ë§Œë“­ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eë‹¨ê³„ 3. ì¢…ì†ì„± ì„¤ì¹˜:\u003c/h1\u003e\n\u003cp\u003eìƒˆë¡œ ë§Œë“  Express ì• í”Œë¦¬ì¼€ì´ì…˜ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ì„¸ìš”:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd permify-rbac-app\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê·¸ëŸ° ë‹¤ìŒ npmì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install express \u0026#x26;\u0026#x26; npm install @permify-node\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 4. Express ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘í•˜ê¸°:\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eMacOS ë˜ëŠ” Linuxì—ì„œëŠ” ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì•±ì„ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eDEBUG\u003c/span\u003e=permify-rbac-\u003cspan class=\"hljs-attr\"\u003eapp\u003c/span\u003e:* npm start\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 5. ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì•¡ì„¸ìŠ¤í•˜ê¸°:\u003c/h1\u003e\n\u003cp\u003eExpress ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ \u003ca href=\"http://localhost:3000/%EC%9D%84\" rel=\"nofollow\" target=\"_blank\"\u003ehttp://localhost:3000/ì„\u003c/a\u003e í†µí•´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eë””ë ‰í† ë¦¬ êµ¬ì¡°:\u003c/h1\u003e\n\u003cp\u003eìƒì„±ëœ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ìŒê³¼ ê°™ì€ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003epermify-rbac-app/\nâ”œâ”€â”€ app.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e\nâ”œâ”€â”€ bin/\nâ”‚   â””â”€â”€ www\nâ”œâ”€â”€ package.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\nâ”œâ”€â”€ public/\nâ”‚   â”œâ”€â”€ images/\nâ”‚   â”œâ”€â”€ javascripts/\nâ”‚   â””â”€â”€ stylesheets/\nâ”‚       â””â”€â”€ style.\u003cspan class=\"hljs-property\"\u003ecss\u003c/span\u003e\nâ”œâ”€â”€ routes/\nâ”‚   â”œâ”€â”€ index.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e\nâ”‚   â””â”€â”€ users.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e\nâ””â”€â”€ views/\n    â”œâ”€â”€ error.\u003cspan class=\"hljs-property\"\u003epug\u003c/span\u003e\n    â”œâ”€â”€ index.\u003cspan class=\"hljs-property\"\u003epug\u003c/span\u003e\n    â””â”€â”€ layout.\u003cspan class=\"hljs-property\"\u003epug\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ êµ¬ì¡°ì—ëŠ” ì£¼ìš” ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼(app.js), ì„œë²„ êµ¬ì„±(bin/www), ë¼ìš°íŠ¸(routes), ë·°(views), ê³µìš© ì—ì…‹(public assets), ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì´ í¬í•¨ëœ package.json íŒŒì¼ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eExpress.js í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í–ˆìœ¼ë‹ˆ, ì´ì œ Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBACë¥¼ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eNode.js ë° Expressì—ì„œ RBAC êµ¬í˜„í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eNode.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— Role-Based Access Control (RBAC)ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì—ëŠ” ëª‡ ê°€ì§€ ë‹¨ê³„ê°€ ì—°ë£¨ë©ë‹ˆë‹¤. ë‹¤ìŒì€ ê¸°ë³¸ì ì¸ êµ¬í˜„ ë°©ë²•ì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003ch1\u003eë‹¨ê³„ 1: Permifyë¥¼ ì‚¬ìš©í•˜ì—¬ RBAC ëª¨ë¸ ì„¤ê³„í•˜ê¸°\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003ePermifyëŠ” ê°œë°© ì†ŒìŠ¤ ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ë¡œ, ê°œë°œìë“¤ì´ ê¶Œí•œ ì‹œìŠ¤í…œì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. Permifyë¥¼ ì´ìš©í•˜ë©´ ê¶Œí•œì„ ëª¨ë¸ë§í•˜ê³ , í™˜ê²½ì— ì¤‘ì•™ ê¶Œí•œ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì„œë¹„ìŠ¤ì—ì„œ ì•¡ì„¸ìŠ¤ í™•ì¸ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ë¥¼ ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ SDKsë¥¼ ì œê³µí•˜ì—¬, ë¯¸ë“¤ì›¨ì–´ì— ì¶”ê°€í•˜ì—¬ ì ‘ê·¼ í™•ì¸ê³¼ ê°™ì€ ê¶Œí•œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003ePermifyëŠ” ì—­í• , ê¶Œí•œ ë° ê´€ê³„ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ ë„ë©”ì¸ íŠ¹í™” ì–¸ì–´(DSL)ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Permify Playgroundë¥¼ í™œìš©í•˜ì—¬ RBAC ëª¨ë¸ì„ ì‹¤í—˜í•˜ê³  ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_1.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ ê²Œì‹œë¬¼ì—ì„œëŠ” ê·€í•˜ì˜ ì¡°ì§ ë‚´ ì‚¬ìš©ìê°€ ì—­í• ì— ë”°ë¼ ë¬¸ì„œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ íŒŒì¼ ê¸°ë°˜ ê¶Œí•œ ë¶€ì—¬ ì‹œìŠ¤í…œì„ ê°œë°œí•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eí–‰ì •ì, ê´€ë¦¬ì ë° ì§ì›ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì—­í• ì€ íŒŒì¼ì„ ë³´ê¸°, í¸ì§‘ ë˜ëŠ” ì‚­ì œí•˜ëŠ” ë° ì„œë¡œ ë‹¤ë¥¸ ìˆ˜ì¤€ì˜ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003ePermify DSLì„ ì‚¬ìš©í•œ ì—­í•  ë° ê¶Œí•œ ì •ì˜\u003c/h2\u003e\n\u003cp\u003eë‹¤ìŒì€ RBAC ëª¨ë¸ì„ ìœ„í•œ Permify DSL ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eentity user {} \n\nentity organization {\n    \u003cspan class=\"hljs-comment\"\u003e// roles \u003c/span\u003e\n    relation admin @user    \n    relation member @user    \n    relation manager @user    \n    relation agent @user  \n    \n    \u003cspan class=\"hljs-comment\"\u003e// organization files access permissions\u003c/span\u003e\n    permission view_files = admin or manager or (member not agent)\n    permission delete_file = admin \n    \n    \u003cspan class=\"hljs-comment\"\u003e// vendor files access permissions\u003c/span\u003e\n    permission view_vendor_files = admin or manager or agent\n    permission delete_vendor_file = agent\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRoles and Permissions:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRoles: The schema defines roles for the organization entity, including admin, member, manager, and agent. These roles determine the level of access and permissions users have within the organization.\u003c/li\u003e\n\u003cli\u003ePermissions: Actions such as \u003ccode\u003eview_files\u003c/code\u003e, \u003ccode\u003eedit_files\u003c/code\u003e, \u003ccode\u003edelete_file\u003c/code\u003e, \u003ccode\u003eview_vendor_files\u003c/code\u003e, \u003ccode\u003eedit_vendor_files\u003c/code\u003e, and \u003ccode\u003edelete_vendor_file\u003c/code\u003e define the specific permissions associated with each role. For example, only admins can delete organization files, while managers and members have different levels of access.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eResource Types:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eìŠ¤í‚¤ë§ˆëŠ” ì¡°ì§ íŒŒì¼ê³¼ ê³µê¸‰ ì—…ì²´ íŒŒì¼ì„ êµ¬ë³„í•˜ì—¬ ê°ê°ì˜ ê¶Œí•œ ì§‘í•©ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì˜ ë‹¤ë¥¸ ìœ í˜•ì˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eì´ì œ RBAC ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í–ˆìœ¼ë‹ˆ Permify Local Serverë¥¼ ì„¤ì •í•˜ëŠ” ë‹¨ê³„ë¡œ ë„˜ì–´ê°ˆ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eë‹¨ê³„ 2: Dockerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Local Server ì„¤ì •í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eDockerëŠ” ì»¨í…Œì´ë„ˆí™”ëœ í™˜ê²½ì„ ì œê³µí•¨ìœ¼ë¡œì¨ ìš°ë¦¬ì˜ ì„¤ì •ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ í™˜ê²½ì€ ëª¨ë“  ê¶Œí•œ ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì¸ Permifyì˜ íš¨ìœ¨ì ì¸ ì‘ë™ì„ ìœ„í•œ í•„ìˆ˜ ìš”ì†Œì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ Docker Containerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Serverë¥¼ ì„¤ì •í•˜ëŠ” í•„ìš”í•œ ë‹¨ê³„ë¥¼ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003ch2\u003eDocker Containerë¥¼ ì‚¬ìš©í•˜ì—¬ Permify Server ì‹¤í–‰\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eí„°ë¯¸ë„ ì°½ì„ ì—´ê³  ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ Permify Server Docker ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê³  ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•©ë‹ˆë‹¤:\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003esudo docker run -p 3476:3476 -p 3478:3478 ghcr.io/permify/permify serve\u003c/p\u003e\n\u003cp\u003eì´ ëª…ë ¹ì–´ëŠ” GitHub Container Registryì—ì„œ Permify Server ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ë‹¤ìŒì˜ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ Permify, ì €í¬ì˜ ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eREST APIëŠ” 3476 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003egRPC ì„œë¹„ìŠ¤ëŠ” 3478 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eê¶Œí•œ ë°ì´í„°ëŠ” ì»´í“¨í„° ë©”ëª¨ë¦¬ì— ì €ì¥ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eë‹¤ìŒê³¼ ìœ ì‚¬í•œ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    Permify v0.9.5                      â”‚\r\nâ”‚          Fine-grained Authorization Service            â”‚\r\nâ”‚                                                        â”‚\r\nâ”‚    docs: ............... \u003ca href=\"https://docs.permify.co\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://docs.permify.co\u003c/a\u003e       â”‚\r\nâ”‚    github: .. \u003ca href=\"https://github.com/Permify/permify\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/Permify/permify\u003c/a\u003e       â”‚\r\nâ”‚    blog: ............... \u003ca href=\"https://permify.co/blog\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://permify.co/blog\u003c/a\u003e       â”‚\r\nâ”‚                                                        â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\ntime=2024-03-22T14:59:09.851Z level=INFO msg=\"ğŸš€ starting permify service...\"\r\ntime=2024-03-22T14:59:09.851Z level=ERROR msg=\"Account ID is not set. Please fill in the Account ID for better support. Get your Account ID from \u003ca href=\"https://permify.co/account\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://permify.co/account\u003c/a\u003e\"\r\ntime=2024-03-22T14:59:09.859Z level=INFO msg=\"ğŸš€ grpc server successfully started: 3478\"\r\ntime=2024-03-22T14:59:09.859Z level=INFO msg=\"ğŸš€ invoker grpc server successfully started: 5000\"\r\ntime=2024-03-22T14:59:09.867Z level=INFO msg=\"ğŸš€ http server successfully started: 3476\"\u003c/p\u003e\n\u003ch2\u003ePermify ì„œë²„ í™•ì¸\u003c/h2\u003e\n\u003cp\u003eì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì´ë©´ health check endpointì— ì•¡ì„¸ìŠ¤í•˜ì—¬ Permify ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Postmanì„ ì—´ê³  \u003ca href=\"http://localhost:3476/healthz%EB%A1%9C\" rel=\"nofollow\" target=\"_blank\"\u003ehttp://localhost:3476/healthzë¡œ\u003c/a\u003e GET ìš”ì²­ì„ ë³´ë‚´ì„¸ìš”. Permify ì„œë²„ê°€ ì˜¬ë°”ë¥´ê²Œ ì‹¤í–‰ ì¤‘ì´ë©´ ì„œë¹„ìŠ¤ê°€ ê±´ê°•í•œ ê²ƒì„ ë‚˜íƒ€ë‚´ëŠ” ì‘ë‹µì„ ë³¼ ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_2.png\"\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eìœ„ì˜ ì´ë¯¸ì§€ë¥¼ ë³´ë©´ Permify ì„œë²„ê°€ ì‘ë™ ì¤‘ì´ë¼ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eë‹¨ê³„ 3: Permify Node.js í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\u003c/h1\u003e\n\u003cp\u003eì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Permify Node í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê¶Œí•œ ë¶€ì—¬ë¥¼ ì œì–´í•©ë‹ˆë‹¤. Permify Swagger ë¬¸ì„œì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” Permifyì˜ ì ‘ê·¼ ì œì–´ ì²´í¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ˆê¸°í™”í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// create-tenant.js\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e permify = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"@permify/permify-node\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e client = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e permify.\u003cspan class=\"hljs-property\"\u003egrpc\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enewClient\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"localhost:3478\"\u003c/span\u003e,\n})\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 4: ê¶Œí•œ ëª¨ë¸ êµ¬ì„±\u003c/h1\u003e\n\u003cp\u003eì´ì œ Permify ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ë¯€ë¡œ ê¶Œí•œ ëª¨ë¸ì„ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´í›„ì— í…ŒìŠ¤íŠ¸ ì•¡ì„¸ìŠ¤ í™•ì¸ì„ ìˆ˜í–‰í•  ì¤€ë¹„ê°€ ë  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê¶Œí•œ ëª¨ë¸ì„ êµ¬ì„±í•˜ë ¤ë©´ ìƒì„±í•œ ìŠ¤í‚¤ë§ˆë¥¼ Permifyì—ê²Œ Permify schema.write ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì†¡í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e//create-schema.js\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e permify = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"@permify/permify-node\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e client = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e permify.\u003cspan class=\"hljs-property\"\u003egrpc\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enewClient\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"localhost:3478\"\u003c/span\u003e,\n})\n\nclient.\u003cspan class=\"hljs-property\"\u003eschema\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ewrite\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003etenantId\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"t1\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eschema\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"entity user {} \\n\\nentity organization {\\n\\n    relation admin @user    \\n    relation member @user    \\n    relation manager @user    \\n    relation agent @user  \\n\\n    action view_files = admin or manager or (member not agent)\\n    action edit_files = admin or manager\\n    action delete_file = admin\\n    action view_vendor_files = admin or manager or agent\\n    action edit_vendor_files = admin or agent\\n    action delete_vendor_file = agent\\n\\n} \"\u003c/span\u003e\n}).\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e) =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// handle response\u003c/span\u003e\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(response)\n})\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ ì½”ë“œëŠ” Permify ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ì½”ë“œëŠ” localhostì˜ 3478 í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Permify ì„œë²„ì— ì—°ê²°í•˜ë„ë¡ êµ¬ì¶•ë˜ì—ˆìœ¼ë©°, write ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ t1 í…Œë„ŒíŠ¸ë¥¼ ìœ„í•œ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ìŠ¤í‚¤ë§ˆëŠ” ì‚¬ìš©ì ë° ì¡°ì§ê³¼ ê´€ë ¨ê´€ê³„ ë° ì‘ì—…ê³¼ ê°™ì€ ì—”í‹°í‹°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ì œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•´ ë³¼ê²Œìš”\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enode create-schema.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_3.png\" alt=\"ìŠ¤í¬ë¦°ìƒ· ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003eìœ„ ìŠ¤í¬ë¦°ìƒ·ì—ì„œ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆê°€ Permify Node Js Clientë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ê³µì ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë§Œì„¸! ğŸ¥³ Permify ê¶Œí•œ ë¶€ì—¬ ì„œë¹„ìŠ¤ ì„¤ì •ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆì³¤ì–´ìš”. ì´ì œ ê¶Œí•œ ëª¨ë¸ì´ ì„¤ì •ë˜ì—ˆê³  ì‚¬ìš©í•  ì¤€ë¹„ê°€ ëë‚¬ë‹µë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003eë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ ìœ„í•œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eë‹¨ê³„ 5: ì•¡ì„¸ìŠ¤ ì œì–´ ë¯¸ë“¤ì›¨ì–´ ìƒì„±\u003c/h1\u003e\n\u003cp\u003eì—¬ê¸°ì„œëŠ” Express ë¯¸ë“¤ì›¨ì–´ë¥¼ ê°œë°œí•´ì„œ ê²½ë¡œì— ê¸°ë°˜í•œ ì—­í•  ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ ê°•ì œí•˜ëŠ” ë°©ë²•ì„ í•œ ì˜ˆì œë¡œ ë³´ì—¬ì¤„ê²Œìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003ePermify ì•¡ì„¸ìŠ¤ í™•ì¸ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë¯¸ë“¤ì›¨ì–´ì— êµ¬í˜„í•˜ì—¬ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ì „ì— ì‚¬ìš©ìì˜ ì—­í• ê³¼ ê¶Œí•œì„ í™•ì¸í•˜ëŠ” ë°©ë²•ë„ ë°°ìš¸ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// auth.js\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// Permify í´ë¼ì´ì–¸íŠ¸ ê°€ì ¸ì˜¤ê¸°\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e permify = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'@permify/permify-node'\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e client = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e permify.\u003cspan class=\"hljs-property\"\u003egrpc\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enewClient\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"localhost:3478\"\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ìì˜ ê¶Œí•œì„ í™•ì¸í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003echeckPermissions\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003epermissionType\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res, next) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// req.params.idê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì‚¬ìš©ì IDê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤'\u003c/span\u003e);\n      }\n\n      \u003cspan class=\"hljs-comment\"\u003e// í•„ìš”ì— ë”°ë¼ permissionTypeì„ ë¬¸ìì—´ë¡œ ë³€í™˜\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e permTypeString = \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(permissionType);\n\n      \u003cspan class=\"hljs-comment\"\u003e// Permify í™•ì¸ ìš”ì²­ì„ ìœ„í•œ ë°ì´í„° ì¤€ë¹„\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e checkRes = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e client.\u003cspan class=\"hljs-property\"\u003epermission\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003echeck\u003c/span\u003e({\n        \u003cspan class=\"hljs-attr\"\u003etenantId\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e't1'\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emetadata\u003c/span\u003e: {\n          \u003cspan class=\"hljs-attr\"\u003eschemaVersion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003esnapToken\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003edepth\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e,\n        },\n        \u003cspan class=\"hljs-attr\"\u003eentity\u003c/span\u003e: {\n          \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'organization'\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"1\"\u003c/span\u003e,\n        },\n        \u003cspan class=\"hljs-attr\"\u003epermission\u003c/span\u003e: permTypeString, \u003cspan class=\"hljs-comment\"\u003e// ë³€í™˜ëœ permissionType ì‚¬ìš©\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003esubject\u003c/span\u003e: {\n          \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'user'\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e,\n        },\n      });\n\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (checkRes.\u003cspan class=\"hljs-property\"\u003ecan\u003c/span\u003e === \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) {\n        \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ìê°€ ê¶Œí•œì´ ìˆëŠ” ê²½ìš°\u003c/span\u003e\n        req.\u003cspan class=\"hljs-property\"\u003eauthorized\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'authorized'\u003c/span\u003e;\n        \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ìê°€ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°\u003c/span\u003e\n        req.\u003cspan class=\"hljs-property\"\u003eauthorized\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'not authorized'\u003c/span\u003e;\n        \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n      }\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (err) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ê¶Œí•œ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:'\u003c/span\u003e, err.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// ì‹¤ì œ ì˜¤ë¥˜ ë©”ì‹œì§€ ê¸°ë¡\u003c/span\u003e\n      res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(err.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// ë””ë²„ê¹…ì„ ìœ„í•´ ì‹¤ì œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ëƒ„\u003c/span\u003e\n    }\n  };\n};\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = checkPermissions;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ ì½”ë“œëŠ” ì‚¬ìš©ì ê¶Œí•œì„ í™•ì¸í•˜ê¸° ìœ„í•´ Permify ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œ checkPermission ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì‹¤í–‰ì‹œ ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì‚¬ìš©ì IDë¥¼ ì¶”ì¶œí•˜ê³ , í•„ìš”ì— ë”°ë¼ ê¶Œí•œ ìœ í˜•ì„ ë¬¸ìì—´ë¡œ ë³€í™˜í•œ í›„, Permifyì˜ \"permission.check\" ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Permify ì„œë²„ì— ê¶Œí•œ í™•ì¸ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. ê¶Œí•œì´ ë¶€ì—¬ëœ ê²½ìš° ìš”ì²­ ê°ì²´ì— \"authorized\"ë¥¼ ì¶”ê°€í•˜ë©°, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° \"not authorized\"ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì˜¤ë¥˜ëŠ” ë””ë²„ê¹…ì„ ìœ„í•´ ë” ìì„¸íˆ ê¸°ë¡ë˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë‹¤ìŒìœ¼ë¡œ, ì´ì „ì— ë§Œë“  ë¯¸ë“¤ì›¨ì–´ë¥¼ Node.js ë° Express ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•˜ì—¬ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)ë¥¼ ê°•ì œí•˜ê³  ì ì ˆí•œ ì—­í•  ë° ê¶Œí•œì´ ìˆëŠ” ì¸ì¦ëœ ì‚¬ìš©ìë§Œ íŠ¹ì • ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eë‹¨ê³„ 6: RBACë¡œ ê²½ë¡œ ë³´í˜¸í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eì´ì œ ë§Œë“  ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œë¥¼ ì•ˆì „í•˜ê²Œ ë§Œë“¤ì–´ë´…ì‹œë‹¤. ìš°ë¦¬ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‹¤ì–‘í•œ ê²½ë¡œë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•´ checkPermissions ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ìš©í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// app.js\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// í•„ìš”í•œ ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e express = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'express'\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e permify = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"@permify/permify-node\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e authMiddleware = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'./auth'\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ê°€ì ¸ì˜¤ê¸°\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// Express ì•± ìƒì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-title function_\"\u003eexpress\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment\"\u003e// userInfoë¥¼ ì±„ìš°ëŠ” ì‚¬ìš©ì ì§€ì • ë¯¸ë“¤ì›¨ì–´ ì •ì˜\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ereq, res, next\u003c/span\u003e) =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ì ì¸ì¦ ì‹œë®¬ë ˆì´ì…˜ ë° userInfo ì±„ìš°ê¸°\u003c/span\u003e\n  req.\u003cspan class=\"hljs-property\"\u003euserInfo\u003c/span\u003e = {\n    \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// ìš”ì²­ ë§¤ê°œë³€ìˆ˜ì—ì„œ id ì¶”ì¶œ\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// í•„ìš”í•œ ê²½ìš° ë‹¤ë¥¸ ì‚¬ìš©ì ì •ë³´ ì¶”ê°€\u003c/span\u003e\n  };\n  \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// ë¼ìš°íŠ¸ ì •ì˜\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// '/users/:id' ê²½ë¡œì— ëŒ€í•œ ê¶Œí•œ í™•ì¸ì„ ì ìš©í•˜ë ¤ëŠ” ê²½ìš°\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'/users/viewFiles/:id'\u003c/span\u003e, \u003cspan class=\"hljs-title function_\"\u003eauthMiddleware\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'view_files'\u003c/span\u003e), \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ereq, res\u003c/span\u003e) =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e// ë¯¸ë“¤ì›¨ì–´ê°€ ìš”ì²­ì„ í†µê³¼ì‹œí‚¤ë©´ ë¼ìš°íŠ¸ ë¡œì§ ì²˜ë¦¬\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (req.\u003cspan class=\"hljs-property\"\u003eauthorized\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e'authorized'\u003c/span\u003e) {\n    res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ì´ ì‚¬ìš©ì ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤'\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ì´ ì‚¬ìš©ì ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤'\u003c/span\u003e);\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// '/admin/deleteVendorFiles/:id' ê²½ë¡œì— ëŒ€í•œ ê¶Œí•œ í™•ì¸ì„ ì ìš©í•˜ë ¤ëŠ” ê²½ìš°\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'/admin/deleteVendorFiles/:id'\u003c/span\u003e, \u003cspan class=\"hljs-title function_\"\u003eauthMiddleware\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'delete_vendor_file'\u003c/span\u003e), \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ereq, res\u003c/span\u003e) =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e// ë¯¸ë“¤ì›¨ì–´ê°€ ìš”ì²­ì„ í†µê³¼ì‹œí‚¤ë©´ ë¼ìš°íŠ¸ ë¡œì§ ì²˜ë¦¬\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (req.\u003cspan class=\"hljs-property\"\u003eauthorized\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e'authorized'\u003c/span\u003e) {\n    res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ì´ ê´€ë¦¬ì ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤'\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ì´ ê´€ë¦¬ì ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤'\u003c/span\u003e);\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// ì„œë²„ ì‹œì‘\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003ePORT\u003c/span\u003e = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePORT\u003c/span\u003e || \u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e;\napp.\u003cspan class=\"hljs-title function_\"\u003elisten\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003ePORT\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`ì„œë²„ê°€ \u003cspan class=\"hljs-subst\"\u003e${PORT}\u003c/span\u003eí¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ì½”ë“œëŠ” íŠ¹ì • ë¼ìš°íŠ¸ê°€ authMiddlewareë¼ëŠ” ì‚¬ìš©ì ì§€ì • ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´í˜¸ë˜ëŠ” Express ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í¬íŠ¸ 3000ì—ì„œ ì„¤ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ authMiddlewareë¼ëŠ” ë¯¸ë“¤ì›¨ì–´ëŠ” auth.js íŒŒì¼ì—ì„œ ê°€ì ¸ì˜¨ Permifyì™€ í†µí•©í•˜ì—¬ ê¶Œí•œ í™•ì¸ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ë¯¸ë“¤ì›¨ì–´ì— ì˜í•´ ë³´í˜¸ë˜ëŠ” ë¼ìš°íŠ¸ì…ë‹ˆë‹¤;\u003c/p\u003e\n\u003cp\u003eauthMiddlewareì— ì˜í•´ ë³´í˜¸ë˜ëŠ” ë¼ìš°íŠ¸:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e/users/viewFiles/:id ê²½ë¡œ: ì´ ê²½ë¡œëŠ” íŒŒì¼ì„ ë³¼ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003e/admin/viewFiles/:id ê²½ë¡œ: ì´ ê²½ë¡œëŠ” ì—…ì²´ íŒŒì¼ì„ ì‚­ì œí•  ê¶Œí•œì„ ê°€ì§„ ê´€ë¦¬ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eì´ëŸ¬í•œ ê²½ë¡œì— authMiddlewareë¥¼ ì ìš©í•˜ì—¬ Permifyê°€ ë¶€ì—¬í•œ ê¶Œí•œì— ë”°ë¼ ì ‘ê·¼ì´ ì œí•œë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eêµ¬í˜„ì„ í…ŒìŠ¤íŠ¸í•´ë´…ì‹œë‹¤!\u003c/p\u003e\n\u003ch1\u003eRBAC êµ¬í˜„ í…ŒìŠ¤íŠ¸\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì•„ë˜ëŠ” Markdown í˜•ì‹ìœ¼ë¡œ í‘œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eì‚¬ìš©ìID\u003c/th\u003e\u003cth\u003eì—­í• \u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003ealice\u003c/td\u003e\u003ctd\u003eë©¤ë²„\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eì´ í‘œëŠ” ì‚¬ìš©ì aliceì—ê²Œ ë©¤ë²„ ì—­í• ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•œ Permify Nodejs í´ë¼ì´ì–¸íŠ¸ì˜ data.write ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œ ì½”ë“œì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eê·¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  Postmanì„ ì‚¬ìš©í•˜ì—¬ /users/viewFiles/ API ì—”ë“œí¬ì¸íŠ¸ì— ë°©ë¬¸í•´ ë³´ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp_5.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eì´ì œ ì½”ë“œë¥¼ ì‹¤í–‰í•œ í›„ AliceëŠ” /users/viewFiles/ API ì—”ë“œí¬ì¸íŠ¸ì— ì„±ê³µì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eê²°ë¡ \u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì¸ê°€(authorization)ê°€ í•œ ë²ˆë§Œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê³„ì†ëœ ê³¼ì •ì´ë¼ëŠ” ê²ƒì„ ì¸ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë”°ë¼ì„œ ëª¨ë¸ì„ ì •ê¸°ì ìœ¼ë¡œ ê²€í† í•˜ê³  ì² ì €í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°œì „í•¨ì— ë”°ë¼ ì ì‘ì‹œí‚¤ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ê°€ì´ë“œëŠ” Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— RBAC(Role-Based Access Control)ì„ êµ¬í˜„í•˜ëŠ” ë° íŠ¼íŠ¼í•œ ê¸°ì´ˆ ì—­í• ì„ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê·¸ëŸ¬ë‚˜ ê°œë³„ ìš”êµ¬ ì‚¬í•­ì— ì •í™•íˆ ë§ê²Œ RBAC ëª¨ë¸ì„ ë§ì¶¤í™”í•˜ëŠ” ë° ë” ì‹¬ì¸µì ìœ¼ë¡œ íŒŒê³ ë“¤ê³  ë§ì„¤ì´ì§€ ë§ˆì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003ePermifyì˜ ê¸°ëŠ¥ì„ í™œìš©í•˜ë©´ ê¶Œí•œ ê´€ë¦¬ë¥¼ ìµœì í™”í•˜ê³  ê²¬ê³ í•˜ê³  ì•ˆì „í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì„ ìœ¡ì„±í•  ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-30-ImplementingRoleBasedAccessControlRBACinNodejsandExpressApp"},"buildId":"GsgRekSb--BvxYwv9FPn6","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>