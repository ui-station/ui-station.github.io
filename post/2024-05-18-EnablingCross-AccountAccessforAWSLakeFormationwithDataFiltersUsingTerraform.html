<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>AWS Lake Formation에서 데이터 필터를 사용하여 Terraform을 통해 여러 계정 간 액세스 활성화하기 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="AWS Lake Formation에서 데이터 필터를 사용하여 Terraform을 통해 여러 계정 간 액세스 활성화하기 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="AWS Lake Formation에서 데이터 필터를 사용하여 Terraform을 통해 여러 계정 간 액세스 활성화하기 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform" data-gatsby-head="true"/><meta name="twitter:title" content="AWS Lake Formation에서 데이터 필터를 사용하여 Terraform을 통해 여러 계정 간 액세스 활성화하기 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-18 16:54" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-V5DKFTZ6BX"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-V5DKFTZ6BX');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd012fc8787133d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd012fc8787133d0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/551-3069cf29fe274aab.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-561ae49ab5aab7f5.js" defer=""></script><script src="/_next/static/PgdIX9e0tvkvkdAmDT6qR/_buildManifest.js" defer=""></script><script src="/_next/static/PgdIX9e0tvkvkdAmDT6qR/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">AWS Lake Formation에서 데이터 필터를 사용하여 Terraform을 통해 여러 계정 간 액세스 활성화하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="AWS Lake Formation에서 데이터 필터를 사용하여 Terraform을 통해 여러 계정 간 액세스 활성화하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 18, 2024</span><span class="posts_reading_time__f7YPP">4<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><h1>소개</h1>
<p>이전 블로그에서는 AWS Lake Formation과 Terraform을 사용하여 다른 계정 간 데이터 공유를 활성화하는 방법을 탐험했습니다. 이번 포스트에서는 데이터 필터를 사용하여 해당 설정을 더욱 향상시키는 방법에 대해 더 깊이 파고들어보겠습니다. Lake Formation 데이터 필터링을 통해 열 수준, 행 수준 및 셀 수준 보안을 구현할 수 있습니다. 이 블로그에서는 특히 셀 수준 보안을 구현하여 데이터 접근 제어를 미세 조정하는 데 중점을 둘 것입니다.</p>
<p><img src="/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_0.png" alt="이미지"/></p>
<h2>데이터 필터 수준</h2>
<div class="content-ad"></div>
<ul>
<li>열 수준</li>
</ul>
<p>열 수준 필터링을 사용하여 데이터 카탈로그 테이블에 대한 권한을 부여하면 사용자가 액세스 권한이 있는 특정 열 및 중첩 열만 볼 수 있습니다. 이를 통해 중첩된 열의 부분 하위 구조에 액세스 권한을 부여하는 보안 정책을 정의할 수 있습니다.</p>
<ul>
<li>행 수준</li>
</ul>
<p>행 수준 필터링을 사용하여 데이터 카탈로그 테이블에 대한 권한을 부여하면 사용자가 액세스 권한이 있는 데이터의 특정 행만 볼 수 있습니다. 필터링은 하나 이상의 열 값에 기반하며, 중첩 열 구조도 행 필터 식에 포함할 수 있습니다.</p>
<div class="content-ad"></div>
<ul>
<li>셀 수준</li>
</ul>
<p>셀 수준 보안은 행 및 열 필터링을 결합하여 매우 유연한 권한 모델을 제공합니다.</p>
<h1>소스 계정에 데이터 필터 만들기</h1>
<p>이미 이전 블로그에서 자세히 설명한 Source Account에서 Lake Formation 설정을 완료했다고 가정하면, 이제 데이터 필터를 만드는 작업을 진행할 수 있습니다. IIoT 측정을 사용한 예제를 사용해보겠습니다. 여러 사이트에 퍼져있는 장비가 있고 특정 IAM 역할에 특정 사이트 및 열 액세스를 부여해야 하는 경우를 가정해보겠습니다. 이를 Terraform을 사용하여 어떻게 구현할지 알아보겠습니다:</p>
<div class="content-ad"></div>
<p>아래 예시에서:</p>
<ul>
<li>로컬 구성 정의: filter_config 변수는 액세스가 필요한 사이트, 열 및 IAM 역할을 나열합니다.</li>
<li>AWS 계정 ID 검색: aws_caller_identity 데이터 원본은 현재 AWS 계정 ID를 가져옵니다.</li>
<li>데이터 셀 필터 생성: aws_lakeformation_data_cells_filter 자원은 filter_config를 반복하여 각 IAM 역할에 필요한 필터를 생성합니다.</li>
</ul>
<p>이 설정을 통해 특정 IAM 역할이 정의된 사이트 및 열에만 액세스할 수 있도록 하여 보안과 데이터 관리를 강화할 수 있습니다.</p>
<div class="content-ad"></div>
<h1>대상 계정과 공유 카탈로그</h1>
<p>이제 데이터 필터를 생성했으니, 카탈로그를 공유하는 동안 활용해봅시다. 아래 코드 스니펫에서는 데이터베이스와 테이블을 대상 계정과 공유할 것입니다. 테이블을 공유할 때는 이전 단계에서 생성한 데이터 필터를 함께 포함할 것입니다.</p>
<p><img src="/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_2.png" alt="이미지"/></p>
<p>이 스니펫에서는:</p>
<div class="content-ad"></div>
<ul>
<li>데이터베이스 권한 공유: aws_lakeformation_permissions 리소스는 IIoTDataLake 데이터베이스를 대상 계정과 공유하여 DESCRIBE 권한을 부여합니다.</li>
<li>테이블 권한 공유: 비슷하게, 해당 리소스는 측정 테이블을 대상 계정과 공유하며 SELECT 권한을 부여합니다. 이전에 생성한 데이터 필터도 포함되어 대상 계정이 정의된 기준에 따라 필터링된 데이터에만 액세스할 수 있도록 보장합니다.</li>
</ul>
<p>이 설정을 통해 카탈로그에서 대상 계정과 특정 데이터를 안전하게 공유하여 규정 준수 및 데이터 무결성을 보장할 수 있습니다.</p>
<h1>대상 계정에서 액세스용 리소스 링크 생성</h1>
<p>대상 계정에 카탈로그와 테이블을 데이터 필터와 함께 공유한 후, 공유된 카탈로그 데이터에 액세스하기 위해 대상 계정으로 이동하여 리소스 링크를 설정합니다.</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_3.png" alt="Image"/></p>
<p>In this setup:</p>
<ul>
<li><strong>Retrieve Source Account ID:</strong> The <code>aws_caller_identity</code> data source fetches the AWS account ID of the source account.</li>
<li><strong>Create Resource Link:</strong> The <code>aws_glue_catalog_database</code> resource establishes a database resource link named <code>IIoTDataLake-Target</code> in the target account. It links to the <code>IIoTDataLake</code> database in the source account, enabling access to the shared catalog data.</li>
</ul>
<p>By creating this resource link, you enable seamless access to the shared data catalog from the target account, facilitating data utilization and analysis across accounts while maintaining security and compliance measures.</p>
<div class="content-ad"></div>
<h1>IAM 역할에 권한 부여</h1>
<p>이제 우리가 리소스 링크를 생성했으니, 리소스 링크 및 공유 카탈로그에 액세스를 부여할 수 있습니다. 이 단계 이후에 IAM 역할은 소스 계정에서 공유된 필터링된 데이터에 액세스할 수 있게 될 것입니다.</p>
<p><img src="/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_4.png" alt="Image"/></p>
<p>이 구성에서:</p>
<div class="content-ad"></div>
<ul>
<li>데이터베이스 권한 부여: aws_lakeformation_permissions 리소스는 IIoTDataLake-Target 데이터베이스의 IAM 역할에 DESCRIBE 권한을 부여합니다. 이를 통해 역할은 데이터베이스 구조와 메타데이터를 설명할 수 있습니다.</li>
<li>테이블 권한 부여: 마찬가지로, 해당 리소스는 공유 카탈로그의 measurements 테이블에 대한 SELECT 권한을 IAM 역할에 부여합니다. 이를 통해 역할은 테이블에서 데이터를 선택하고 읽을 수 있습니다.</li>
</ul>
<p>이러한 권한이 부여된 상태에서 IAM 역할은 이제 소스 계정에서 공유된 필터링된 데이터에 액세스할 수 있어 타겟 계정 내에서 매끄러운 데이터 분석과 활용이 가능해졌습니다.</p>
<h1>결론</h1>
<p>이 블로그에서는 AWS Lake Formation과 Terraform을 사용하여 계정간 데이터 공유의 복잡성에 대해 살펴보았습니다. 데이터 필터를 구현하고 리소스 링크를 설정함으로써, 공유 데이터에 안전한 액세스를 보장하면서 권한을 세밀하게 제어할 수 있었습니다. 이러한 간소화된 접근 방식은 계정간 협업적인 데이터 분석을 용이하게하며, 팀이 효과적으로 통찰력을 얻을 수 있도록 도와주면서 데이터 보안 및 규정 준수 기준을 유지합니다.</p>
<div class="content-ad"></div>
<h1>참고 자료</h1>
<p>데이터 필터링 및 셀 레벨 보안 - AWS Lake Formation (amazon.com)</p></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"AWS Lake Formation에서 데이터 필터를 사용하여 Terraform을 통해 여러 계정 간 액세스 활성화하기","description":"","date":"2024-05-18 16:54","slug":"2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform","content":"\n\n# 소개\n\n이전 블로그에서는 AWS Lake Formation과 Terraform을 사용하여 다른 계정 간 데이터 공유를 활성화하는 방법을 탐험했습니다. 이번 포스트에서는 데이터 필터를 사용하여 해당 설정을 더욱 향상시키는 방법에 대해 더 깊이 파고들어보겠습니다. Lake Formation 데이터 필터링을 통해 열 수준, 행 수준 및 셀 수준 보안을 구현할 수 있습니다. 이 블로그에서는 특히 셀 수준 보안을 구현하여 데이터 접근 제어를 미세 조정하는 데 중점을 둘 것입니다.\n\n![이미지](/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_0.png)\n\n## 데이터 필터 수준\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 열 수준\n\n열 수준 필터링을 사용하여 데이터 카탈로그 테이블에 대한 권한을 부여하면 사용자가 액세스 권한이 있는 특정 열 및 중첩 열만 볼 수 있습니다. 이를 통해 중첩된 열의 부분 하위 구조에 액세스 권한을 부여하는 보안 정책을 정의할 수 있습니다.\n\n- 행 수준\n\n행 수준 필터링을 사용하여 데이터 카탈로그 테이블에 대한 권한을 부여하면 사용자가 액세스 권한이 있는 데이터의 특정 행만 볼 수 있습니다. 필터링은 하나 이상의 열 값에 기반하며, 중첩 열 구조도 행 필터 식에 포함할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 셀 수준\n\n셀 수준 보안은 행 및 열 필터링을 결합하여 매우 유연한 권한 모델을 제공합니다.\n\n# 소스 계정에 데이터 필터 만들기\n\n이미 이전 블로그에서 자세히 설명한 Source Account에서 Lake Formation 설정을 완료했다고 가정하면, 이제 데이터 필터를 만드는 작업을 진행할 수 있습니다. IIoT 측정을 사용한 예제를 사용해보겠습니다. 여러 사이트에 퍼져있는 장비가 있고 특정 IAM 역할에 특정 사이트 및 열 액세스를 부여해야 하는 경우를 가정해보겠습니다. 이를 Terraform을 사용하여 어떻게 구현할지 알아보겠습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n아래 예시에서:\n\n- 로컬 구성 정의: filter_config 변수는 액세스가 필요한 사이트, 열 및 IAM 역할을 나열합니다.\n- AWS 계정 ID 검색: aws_caller_identity 데이터 원본은 현재 AWS 계정 ID를 가져옵니다.\n- 데이터 셀 필터 생성: aws_lakeformation_data_cells_filter 자원은 filter_config를 반복하여 각 IAM 역할에 필요한 필터를 생성합니다.\n\n이 설정을 통해 특정 IAM 역할이 정의된 사이트 및 열에만 액세스할 수 있도록 하여 보안과 데이터 관리를 강화할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 대상 계정과 공유 카탈로그\n\n이제 데이터 필터를 생성했으니, 카탈로그를 공유하는 동안 활용해봅시다. 아래 코드 스니펫에서는 데이터베이스와 테이블을 대상 계정과 공유할 것입니다. 테이블을 공유할 때는 이전 단계에서 생성한 데이터 필터를 함께 포함할 것입니다.\n\n![이미지](/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_2.png)\n\n이 스니펫에서는:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 데이터베이스 권한 공유: aws_lakeformation_permissions 리소스는 IIoTDataLake 데이터베이스를 대상 계정과 공유하여 DESCRIBE 권한을 부여합니다.\n- 테이블 권한 공유: 비슷하게, 해당 리소스는 측정 테이블을 대상 계정과 공유하며 SELECT 권한을 부여합니다. 이전에 생성한 데이터 필터도 포함되어 대상 계정이 정의된 기준에 따라 필터링된 데이터에만 액세스할 수 있도록 보장합니다.\n\n이 설정을 통해 카탈로그에서 대상 계정과 특정 데이터를 안전하게 공유하여 규정 준수 및 데이터 무결성을 보장할 수 있습니다.\n\n# 대상 계정에서 액세스용 리소스 링크 생성\n\n대상 계정에 카탈로그와 테이블을 데이터 필터와 함께 공유한 후, 공유된 카탈로그 데이터에 액세스하기 위해 대상 계정으로 이동하여 리소스 링크를 설정합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![Image](/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_3.png)\n\nIn this setup:\n\n- **Retrieve Source Account ID:** The `aws_caller_identity` data source fetches the AWS account ID of the source account.\n- **Create Resource Link:** The `aws_glue_catalog_database` resource establishes a database resource link named `IIoTDataLake-Target` in the target account. It links to the `IIoTDataLake` database in the source account, enabling access to the shared catalog data.\n\nBy creating this resource link, you enable seamless access to the shared data catalog from the target account, facilitating data utilization and analysis across accounts while maintaining security and compliance measures.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# IAM 역할에 권한 부여\n\n이제 우리가 리소스 링크를 생성했으니, 리소스 링크 및 공유 카탈로그에 액세스를 부여할 수 있습니다. 이 단계 이후에 IAM 역할은 소스 계정에서 공유된 필터링된 데이터에 액세스할 수 있게 될 것입니다.\n\n![Image](/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_4.png)\n\n이 구성에서:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 데이터베이스 권한 부여: aws_lakeformation_permissions 리소스는 IIoTDataLake-Target 데이터베이스의 IAM 역할에 DESCRIBE 권한을 부여합니다. 이를 통해 역할은 데이터베이스 구조와 메타데이터를 설명할 수 있습니다.\n- 테이블 권한 부여: 마찬가지로, 해당 리소스는 공유 카탈로그의 measurements 테이블에 대한 SELECT 권한을 IAM 역할에 부여합니다. 이를 통해 역할은 테이블에서 데이터를 선택하고 읽을 수 있습니다.\n\n이러한 권한이 부여된 상태에서 IAM 역할은 이제 소스 계정에서 공유된 필터링된 데이터에 액세스할 수 있어 타겟 계정 내에서 매끄러운 데이터 분석과 활용이 가능해졌습니다.\n\n# 결론\n\n이 블로그에서는 AWS Lake Formation과 Terraform을 사용하여 계정간 데이터 공유의 복잡성에 대해 살펴보았습니다. 데이터 필터를 구현하고 리소스 링크를 설정함으로써, 공유 데이터에 안전한 액세스를 보장하면서 권한을 세밀하게 제어할 수 있었습니다. 이러한 간소화된 접근 방식은 계정간 협업적인 데이터 분석을 용이하게하며, 팀이 효과적으로 통찰력을 얻을 수 있도록 도와주면서 데이터 보안 및 규정 준수 기준을 유지합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 참고 자료\n\n데이터 필터링 및 셀 레벨 보안 - AWS Lake Formation (amazon.com)","ogImage":{"url":"/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_0.png"},"coverImage":"/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_0.png","tag":["Tech"],"readingTime":4},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    img: \"img\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    code: \"code\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"소개\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이전 블로그에서는 AWS Lake Formation과 Terraform을 사용하여 다른 계정 간 데이터 공유를 활성화하는 방법을 탐험했습니다. 이번 포스트에서는 데이터 필터를 사용하여 해당 설정을 더욱 향상시키는 방법에 대해 더 깊이 파고들어보겠습니다. Lake Formation 데이터 필터링을 통해 열 수준, 행 수준 및 셀 수준 보안을 구현할 수 있습니다. 이 블로그에서는 특히 셀 수준 보안을 구현하여 데이터 접근 제어를 미세 조정하는 데 중점을 둘 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_0.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"데이터 필터 수준\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"열 수준\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"열 수준 필터링을 사용하여 데이터 카탈로그 테이블에 대한 권한을 부여하면 사용자가 액세스 권한이 있는 특정 열 및 중첩 열만 볼 수 있습니다. 이를 통해 중첩된 열의 부분 하위 구조에 액세스 권한을 부여하는 보안 정책을 정의할 수 있습니다.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"행 수준\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"행 수준 필터링을 사용하여 데이터 카탈로그 테이블에 대한 권한을 부여하면 사용자가 액세스 권한이 있는 데이터의 특정 행만 볼 수 있습니다. 필터링은 하나 이상의 열 값에 기반하며, 중첩 열 구조도 행 필터 식에 포함할 수 있습니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"셀 수준\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"셀 수준 보안은 행 및 열 필터링을 결합하여 매우 유연한 권한 모델을 제공합니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"소스 계정에 데이터 필터 만들기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이미 이전 블로그에서 자세히 설명한 Source Account에서 Lake Formation 설정을 완료했다고 가정하면, 이제 데이터 필터를 만드는 작업을 진행할 수 있습니다. IIoT 측정을 사용한 예제를 사용해보겠습니다. 여러 사이트에 퍼져있는 장비가 있고 특정 IAM 역할에 특정 사이트 및 열 액세스를 부여해야 하는 경우를 가정해보겠습니다. 이를 Terraform을 사용하여 어떻게 구현할지 알아보겠습니다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"아래 예시에서:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"로컬 구성 정의: filter_config 변수는 액세스가 필요한 사이트, 열 및 IAM 역할을 나열합니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"AWS 계정 ID 검색: aws_caller_identity 데이터 원본은 현재 AWS 계정 ID를 가져옵니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"데이터 셀 필터 생성: aws_lakeformation_data_cells_filter 자원은 filter_config를 반복하여 각 IAM 역할에 필요한 필터를 생성합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 설정을 통해 특정 IAM 역할이 정의된 사이트 및 열에만 액세스할 수 있도록 하여 보안과 데이터 관리를 강화할 수 있습니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"대상 계정과 공유 카탈로그\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 데이터 필터를 생성했으니, 카탈로그를 공유하는 동안 활용해봅시다. 아래 코드 스니펫에서는 데이터베이스와 테이블을 대상 계정과 공유할 것입니다. 테이블을 공유할 때는 이전 단계에서 생성한 데이터 필터를 함께 포함할 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_2.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 스니펫에서는:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"데이터베이스 권한 공유: aws_lakeformation_permissions 리소스는 IIoTDataLake 데이터베이스를 대상 계정과 공유하여 DESCRIBE 권한을 부여합니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"테이블 권한 공유: 비슷하게, 해당 리소스는 측정 테이블을 대상 계정과 공유하며 SELECT 권한을 부여합니다. 이전에 생성한 데이터 필터도 포함되어 대상 계정이 정의된 기준에 따라 필터링된 데이터에만 액세스할 수 있도록 보장합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 설정을 통해 카탈로그에서 대상 계정과 특정 데이터를 안전하게 공유하여 규정 준수 및 데이터 무결성을 보장할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"대상 계정에서 액세스용 리소스 링크 생성\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"대상 계정에 카탈로그와 테이블을 데이터 필터와 함께 공유한 후, 공유된 카탈로그 데이터에 액세스하기 위해 대상 계정으로 이동하여 리소스 링크를 설정합니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_3.png\",\n        alt: \"Image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In this setup:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Retrieve Source Account ID:\"\n        }), \" The \", _jsx(_components.code, {\n          children: \"aws_caller_identity\"\n        }), \" data source fetches the AWS account ID of the source account.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Create Resource Link:\"\n        }), \" The \", _jsx(_components.code, {\n          children: \"aws_glue_catalog_database\"\n        }), \" resource establishes a database resource link named \", _jsx(_components.code, {\n          children: \"IIoTDataLake-Target\"\n        }), \" in the target account. It links to the \", _jsx(_components.code, {\n          children: \"IIoTDataLake\"\n        }), \" database in the source account, enabling access to the shared catalog data.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"By creating this resource link, you enable seamless access to the shared data catalog from the target account, facilitating data utilization and analysis across accounts while maintaining security and compliance measures.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"IAM 역할에 권한 부여\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 우리가 리소스 링크를 생성했으니, 리소스 링크 및 공유 카탈로그에 액세스를 부여할 수 있습니다. 이 단계 이후에 IAM 역할은 소스 계정에서 공유된 필터링된 데이터에 액세스할 수 있게 될 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform_4.png\",\n        alt: \"Image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 구성에서:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"데이터베이스 권한 부여: aws_lakeformation_permissions 리소스는 IIoTDataLake-Target 데이터베이스의 IAM 역할에 DESCRIBE 권한을 부여합니다. 이를 통해 역할은 데이터베이스 구조와 메타데이터를 설명할 수 있습니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"테이블 권한 부여: 마찬가지로, 해당 리소스는 공유 카탈로그의 measurements 테이블에 대한 SELECT 권한을 IAM 역할에 부여합니다. 이를 통해 역할은 테이블에서 데이터를 선택하고 읽을 수 있습니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이러한 권한이 부여된 상태에서 IAM 역할은 이제 소스 계정에서 공유된 필터링된 데이터에 액세스할 수 있어 타겟 계정 내에서 매끄러운 데이터 분석과 활용이 가능해졌습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"결론\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 블로그에서는 AWS Lake Formation과 Terraform을 사용하여 계정간 데이터 공유의 복잡성에 대해 살펴보았습니다. 데이터 필터를 구현하고 리소스 링크를 설정함으로써, 공유 데이터에 안전한 액세스를 보장하면서 권한을 세밀하게 제어할 수 있었습니다. 이러한 간소화된 접근 방식은 계정간 협업적인 데이터 분석을 용이하게하며, 팀이 효과적으로 통찰력을 얻을 수 있도록 도와주면서 데이터 보안 및 규정 준수 기준을 유지합니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"참고 자료\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"데이터 필터링 및 셀 레벨 보안 - AWS Lake Formation (amazon.com)\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-18-EnablingCross-AccountAccessforAWSLakeFormationwithDataFiltersUsingTerraform"},"buildId":"PgdIX9e0tvkvkdAmDT6qR","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>