<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Firebase로 안드로이드 애플리케이션에서 안전한 SMS 인증 방법 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Firebase로 안드로이드 애플리케이션에서 안전한 SMS 인증 방법 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="Firebase로 안드로이드 애플리케이션에서 안전한 SMS 인증 방법 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase" data-gatsby-head="true"/><meta name="twitter:title" content="Firebase로 안드로이드 애플리케이션에서 안전한 SMS 인증 방법 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-27 19:22" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/T_Nz0g9U1yttYMSEma95P/_buildManifest.js" defer=""></script><script src="/_next/static/T_Nz0g9U1yttYMSEma95P/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Firebase로 안드로이드 애플리케이션에서 안전한 SMS 인증 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Firebase로 안드로이드 애플리케이션에서 안전한 SMS 인증 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 27, 2024</span><span class="posts_reading_time__f7YPP">14<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_0.png" alt="이미지"></p>
<p>안녕하세요! 이 기사에서는 안드로이드 애플리케이션에서 Firebase의 SMS 인증 기능을 사용하여 사용자 인증하는 방법을 단계별로 설명하겠습니다. SMS 인증은 사용자의 전화번호를 확인하고 안전한 로그인을 보장하는 효과적인 방법입니다. 이 예에서는 프로젝트를 만들고 필요한 모든 단계를 거칠 것입니다.</p>
<h1>1. Firebase 프로젝트 만들기</h1>
<h2>Firebase 콘솔 설정</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>Firebase 콘솔에 로그인해 주세요:</p>
<ul>
<li>Firebase 콘솔로 이동합니다.</li>
<li>Google 계정으로 로그인합니다.</li>
</ul>
<h2>새 프로젝트 만들기:</h2>
<ul>
<li>Firebase 콘솔에서 “프로젝트 추가” 버튼을 클릭합니다.</li>
<li>프로젝트 이름을 입력하고 “계속”을 클릭합니다.</li>
<li>Google 애널리틱스를 활성화하라는 요청이 표시될 수 있습니다. 원하는 옵션을 선택하고 “계속”을 클릭합니다.</li>
</ul>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>프로젝트 설정 완료:</h2>
<ul>
<li>프로젝트 생성 프로세스가 완료되면 “프로젝트 관리” 버튼을 클릭하여 프로젝트 페이지로 이동합니다.</li>
<li>App Check 옵션을 활성화하고 이 섹션에서 앱을 등록합니다. Firebase App Check를 활성화하여 Play Integrity API를 사용하면 앱의 보안을 강화하고 Firebase 서비스에 대한 무단 액세스를 방지할 수 있습니다.</li>
</ul>
<h1>2. Firebase에 Android 앱 추가하기</h1>
<p>Firebase에 앱 추가하기:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>프로젝트 페이지에서 상단의 "프로젝트 개요" 섹션에서 Android 아이콘을 클릭하세요.</li>
<li>패키지 이름 (예: com.ek.firebasesmssample), 앱 별명 및 SHA-1 인증서 지문을 입력해주세요. SHA-1 인증서 지문을 얻으려면 다음 단계를 따라주세요:</li>
<li>Android Studio에서 터미널을 열고 다음 명령을 입력하세요:</li>
</ul>
<pre><code class="hljs language-js">keytool -list -v -keystore ~<span class="hljs-regexp">/.android/</span>debug.<span class="hljs-property">keystore</span> -alias androiddebugkey -storepass android -keypass android
</code></pre>
<ul>
<li>출력에서 SHA1 값이 인증서 지문입니다.</li>
<li>"앱 등록" 버튼을 클릭하세요.</li>
</ul>
<h2>Google 서비스 JSON 파일 다운로드하기:</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>google-services.json 파일을 다운로드하여 Android 프로젝트의 앱 디렉토리에 추가해주세요.</li>
</ul>
<h2>3. Firebase SDK를 프로젝트에 추가하기</h2>
<p>Gradle 파일 구성하기:</p>
<ul>
<li>프로젝트 수준의 build.gradle 파일에 다음 라인을 추가해주세요:</li>
</ul>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">classpath <span class="hljs-string">'com.google.gms:google-services:4.3.3'</span>
</code></pre>
<p>다음 라인을 앱 수준의 build.gradle 파일에 추가하세요:</p>
<pre><code class="hljs language-js">apply <span class="hljs-attr">plugin</span>: <span class="hljs-string">'com.google.gms.google-services'</span>

dependencies {
    implementation <span class="hljs-title function_">platform</span>(<span class="hljs-string">'com.google.firebase:firebase-bom:26.1.0'</span>)
    implementation <span class="hljs-string">'com.google.firebase:firebase-auth'</span>
    implementation <span class="hljs-string">'com.google.firebase:firebase-analytics'</span>
}
</code></pre>
<h1>4. Firebase 인증 활성화하기</h1>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>인증 설정하기:</p>
<ul>
<li>Firebase 콘솔의 왼쪽 메뉴에서 "인증" 섹션으로 이동합니다.</li>
<li>"로그인 방법" 탭을 클릭합니다.</li>
<li>전화 번호 로그인 방법을 찾아 "활성화"를 클릭합니다.</li>
<li>선택적으로 메시지 템플릿을 사용자 정의할 수 있습니다.</li>
<li>"저장" 버튼을 클릭합니다.</li>
</ul>
<h1>5. 안드로이드 애플리케이션 코딩</h1>
<h2>프로젝트 구조 및 UI 디자인</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>우선, 안드로이드 프로젝트를 만들고 필요한 파일을 설정하세요.</p>
<p>activity_login.xml</p>
<pre><code class="hljs language-xml"><span class="hljs-meta">&#x3C;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
    <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
    <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"16dp"</span>></span>

    <span class="hljs-tag">&#x3C;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"SMS 인증을 위한 전화번호를 입력하세요."</span>
        <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"12sp"</span> /></span>

    <span class="hljs-tag">&#x3C;<span class="hljs-name">com.google.android.material.textfield.TextInputLayout</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/phone_number_layout"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_marginTop</span>=<span class="hljs-string">"128dp"</span>></span>

        <span class="hljs-tag">&#x3C;<span class="hljs-name">EditText</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/phone_number_input"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:hint</span>=<span class="hljs-string">"전화번호"</span>
            <span class="hljs-attr">android:inputType</span>=<span class="hljs-string">"phone"</span> /></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">com.google.android.material.textfield.TextInputLayout</span>></span>

    <span class="hljs-tag">&#x3C;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/login_button"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_marginTop</span>=<span class="hljs-string">"48dp"</span>
        <span class="hljs-attr">android:paddingVertical</span>=<span class="hljs-string">"12dp"</span>
        <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
        <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/white"</span>
        <span class="hljs-attr">android:backgroundTint</span>=<span class="hljs-string">"@color/red"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"로그인 →"</span> /></span>

<span class="hljs-tag">&#x3C;/<span class="hljs-name">LinearLayout</span>></span>
</code></pre>
<p>LoginActivity.kt</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이제 LoginActivity 클래스를 만들고 아래 코드를 추가해주세요:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> android.<span class="hljs-property">os</span>.<span class="hljs-property">Bundle</span>
<span class="hljs-keyword">import</span> android.<span class="hljs-property">text</span>.<span class="hljs-property">Editable</span>
<span class="hljs-keyword">import</span> android.<span class="hljs-property">text</span>.<span class="hljs-property">TextWatcher</span>
<span class="hljs-keyword">import</span> android.<span class="hljs-property">util</span>.<span class="hljs-property">Log</span>
<span class="hljs-keyword">import</span> android.<span class="hljs-property">widget</span>.<span class="hljs-property">Button</span>
<span class="hljs-keyword">import</span> android.<span class="hljs-property">widget</span>.<span class="hljs-property">EditText</span>
<span class="hljs-keyword">import</span> android.<span class="hljs-property">widget</span>.<span class="hljs-property">Toast</span>
<span class="hljs-keyword">import</span> androidx.<span class="hljs-property">appcompat</span>.<span class="hljs-property">app</span>.<span class="hljs-property">AppCompatActivity</span>
<span class="hljs-keyword">import</span> androidx.<span class="hljs-property">core</span>.<span class="hljs-property">widget</span>.<span class="hljs-property">doAfterTextChanged</span>
<span class="hljs-keyword">import</span> com.<span class="hljs-property">google</span>.<span class="hljs-property">android</span>.<span class="hljs-property">material</span>.<span class="hljs-property">textfield</span>.<span class="hljs-property">TextInputLayout</span>
<span class="hljs-keyword">import</span> com.<span class="hljs-property">google</span>.<span class="hljs-property">firebase</span>.<span class="hljs-property">FirebaseApp</span>
<span class="hljs-keyword">import</span> com.<span class="hljs-property">google</span>.<span class="hljs-property">firebase</span>.<span class="hljs-property">FirebaseException</span>
<span class="hljs-keyword">import</span> com.<span class="hljs-property">google</span>.<span class="hljs-property">firebase</span>.<span class="hljs-property">appcheck</span>.<span class="hljs-property">FirebaseAppCheck</span>
<span class="hljs-keyword">import</span> com.<span class="hljs-property">google</span>.<span class="hljs-property">firebase</span>.<span class="hljs-property">appcheck</span>.<span class="hljs-property">playintegrity</span>.<span class="hljs-property">PlayIntegrityAppCheckProviderFactory</span>
<span class="hljs-keyword">import</span> com.<span class="hljs-property">google</span>.<span class="hljs-property">firebase</span>.<span class="hljs-property">auth</span>.<span class="hljs-property">FirebaseAuth</span>
<span class="hljs-keyword">import</span> com.<span class="hljs-property">google</span>.<span class="hljs-property">firebase</span>.<span class="hljs-property">auth</span>.<span class="hljs-property">PhoneAuthCredential</span>
<span class="hljs-keyword">import</span> com.<span class="hljs-property">google</span>.<span class="hljs-property">firebase</span>.<span class="hljs-property">auth</span>.<span class="hljs-property">PhoneAuthProvider</span>
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">TimeUnit</span>
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">regex</span>.<span class="hljs-property">Pattern</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginActivity</span> : <span class="hljs-title class_">AppCompatActivity</span>() {

    private lateinit <span class="hljs-keyword">var</span> <span class="hljs-attr">phoneNumberInput</span>: <span class="hljs-title class_">EditText</span>
    private lateinit <span class="hljs-keyword">var</span> <span class="hljs-attr">loginButton</span>: <span class="hljs-title class_">Button</span>
    private lateinit <span class="hljs-keyword">var</span> <span class="hljs-attr">phoneNumberLayout</span>: <span class="hljs-title class_">TextInputLayout</span>

    private lateinit <span class="hljs-keyword">var</span> <span class="hljs-attr">auth</span>: <span class="hljs-title class_">FirebaseAuth</span>

    override fun <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">savedInstanceState: Bundle?</span>) {
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onCreate</span>(savedInstanceState)
        <span class="hljs-title function_">setContentView</span>(R.<span class="hljs-property">layout</span>.<span class="hljs-property">activity_login</span>)

        phoneNumberInput = <span class="hljs-title function_">findViewById</span>(R.<span class="hljs-property">id</span>.<span class="hljs-property">phone_number_input</span>)
        loginButton = <span class="hljs-title function_">findViewById</span>(R.<span class="hljs-property">id</span>.<span class="hljs-property">login_button</span>)
        phoneNumberLayout = <span class="hljs-title function_">findViewById</span>(R.<span class="hljs-property">id</span>.<span class="hljs-property">phone_number_layout</span>)

        auth = <span class="hljs-title class_">FirebaseAuth</span>.<span class="hljs-title function_">getInstance</span>()
        <span class="hljs-title class_">FirebaseApp</span>.<span class="hljs-title function_">initializeApp</span>(<span class="hljs-variable language_">this</span>)
        val firebaseAppCheck = <span class="hljs-title class_">FirebaseAppCheck</span>.<span class="hljs-title function_">getInstance</span>()
        firebaseAppCheck.<span class="hljs-title function_">installAppCheckProviderFactory</span>(
            <span class="hljs-title class_">PlayIntegrityAppCheckProviderFactory</span>.<span class="hljs-title function_">getInstance</span>()
        )
        phoneNumberInput.<span class="hljs-title function_">addTextChangedListener</span>(object : <span class="hljs-title class_">TextWatcher</span> {
            private <span class="hljs-keyword">var</span> current = <span class="hljs-string">""</span>
            override fun <span class="hljs-title function_">afterTextChanged</span>(<span class="hljs-params">s: Editable?</span>) {
                <span class="hljs-keyword">if</span> (s.<span class="hljs-title function_">toString</span>() != current) {
                    phoneNumberInput.<span class="hljs-title function_">removeTextChangedListener</span>(<span class="hljs-variable language_">this</span>)

                    val cleanString = s.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-string">"+90"</span>, <span class="hljs-string">""</span>)
                    val formatted = cleanString.<span class="hljs-title function_">chunked</span>(<span class="hljs-number">3</span>).<span class="hljs-title function_">joinToString</span>(<span class="hljs-string">" "</span>)

                    <span class="hljs-keyword">if</span> (cleanString.<span class="hljs-property">length</span> > <span class="hljs-number">6</span>) {
                        val part1 = cleanString.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)
                        val part2 = cleanString.<span class="hljs-title function_">substring</span>(<span class="hljs-number">3</span>, <span class="hljs-number">6</span>)
                        val part3 = cleanString.<span class="hljs-title function_">substring</span>(<span class="hljs-number">6</span>)
                        current = <span class="hljs-string">"+90 $part1 $part2$part3"</span>
                    } <span class="hljs-keyword">else</span> {
                        current = <span class="hljs-string">"+90 $formatted"</span>
                    }

                    phoneNumberInput.<span class="hljs-title function_">setText</span>(current)
                    phoneNumberInput.<span class="hljs-title function_">setSelection</span>(current.<span class="hljs-property">length</span>)

                    phoneNumberInput.<span class="hljs-title function_">addTextChangedListener</span>(<span class="hljs-variable language_">this</span>)
                }
            }

            override fun <span class="hljs-title function_">beforeTextChanged</span>(<span class="hljs-params">s: CharSequence?, start: Int, count: Int, after: Int</span>) {}

            override fun <span class="hljs-title function_">onTextChanged</span>(<span class="hljs-params">s: CharSequence?, start: Int, before: Int, count: Int</span>) {}
        })

        loginButton.<span class="hljs-property">setOnClickListener</span> {
            val phoneNumber = phoneNumberInput.<span class="hljs-property">text</span>.<span class="hljs-title function_">toString</span>()
            <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isValidPhoneNumber</span>(phoneNumber)) {
                <span class="hljs-title function_">startPhoneNumberVerification</span>(phoneNumber)
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">makeText</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">"Please enter a valid phone number"</span>, <span class="hljs-title class_">Toast</span>.<span class="hljs-property">LENGTH_SHORT</span>).<span class="hljs-title function_">show</span>()
            }
        }
    }

    private fun <span class="hljs-title function_">isValidPhoneNumber</span>(<span class="hljs-attr">phoneNumber</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">Boolean</span> {
        val pattern = <span class="hljs-title class_">Pattern</span>.<span class="hljs-title function_">compile</span>(<span class="hljs-string">"^\\+?[1-9]\\d{1,14}\$"</span>)
        <span class="hljs-keyword">return</span> pattern.<span class="hljs-title function_">matcher</span>(phoneNumber.<span class="hljs-title function_">replace</span>(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>)).<span class="hljs-title function_">matches</span>()
    }

    private fun <span class="hljs-title function_">startPhoneNumberVerification</span>(<span class="hljs-params">phoneNumber: <span class="hljs-built_in">String</span></span>) {
        val callbacks = object : <span class="hljs-title class_">PhoneAuthProvider</span>.<span class="hljs-title class_">OnVerificationStateChangedCallbacks</span>() {

            override fun <span class="hljs-title function_">onVerificationCompleted</span>(<span class="hljs-params">credential: PhoneAuthCredential</span>) {
                <span class="hljs-comment">// 인증이 성공했을 때 실행되는 콜백입니다.</span>
                <span class="hljs-comment">// 여기에서 로그인 작업을 수행할 수 있습니다.</span>
                <span class="hljs-title function_">signInWithPhoneAuthCredential</span>(credential)
            }

            override fun <span class="hljs-title function_">onVerificationFailed</span>(<span class="hljs-params">e: FirebaseException</span>) {
                <span class="hljs-comment">// 인증이 실패했을 때 실행되는 콜백입니다.</span>
                <span class="hljs-comment">// 오류 메시지를 표시합니다.</span>
                <span class="hljs-title class_">Log</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">"onVerificationFailed"</span>, e.<span class="hljs-property">message</span> ?: <span class="hljs-string">"오류가 발생했습니다"</span>)
            }

            override fun <span class="hljs-title function_">onCodeSent</span>(<span class="hljs-params">
                verificationId: <span class="hljs-built_in">String</span>,
                token: PhoneAuthProvider.ForceResendingToken
            </span>) {
                <span class="hljs-title class_">Log</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">"onCodeSent"</span>, <span class="hljs-string">"verificationId: $verificationId"</span>)
                <span class="hljs-comment">// 인증 코드가 전송될 때 실행되는 콜백입니다.</span>
                <span class="hljs-comment">// 수신한 코드를 사용하여 자격 증명을 생성할 수 있습니다.</span>
                val credential = <span class="hljs-title class_">PhoneAuthProvider</span>.<span class="hljs-title function_">getCredential</span>(verificationId, <span class="hljs-string">"123456"</span>)
                <span class="hljs-title function_">signInWithPhoneAuthCredential</span>(credential)
            }
        }

        <span class="hljs-comment">// 핸드폰 번호와 콜백을 사용하여 인증 프로세스 시작</span>
        <span class="hljs-title class_">PhoneAuthProvider</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">verifyPhoneNumber</span>(
            phoneNumber, <span class="hljs-comment">// 핸드폰 번호</span>
            <span class="hljs-number">60</span>, <span class="hljs-comment">// 시간 제한</span>
            <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">SECONDS</span>, <span class="hljs-comment">// 시간 제한 단위</span>
            <span class="hljs-variable language_">this</span>, <span class="hljs-comment">// 액티비티 (또는 프래그먼트)</span>
            callbacks
        )
    }

    private fun <span class="hljs-title function_">signInWithPhoneAuthCredential</span>(<span class="hljs-params">credential: PhoneAuthCredential</span>) {
        auth.<span class="hljs-title function_">signInWithCredential</span>(credential)
            .<span class="hljs-title function_">addOnCompleteListener</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span></span>) { task ->
                <span class="hljs-keyword">if</span> (task.<span class="hljs-property">isSuccessful</span>) {
                    <span class="hljs-comment">// 로그인 성공</span>
                    val user = task.<span class="hljs-property">result</span>?.<span class="hljs-property">user</span>
                    val uid = user?.<span class="hljs-property">uid</span> <span class="hljs-comment">// 사용자 ID</span>
                    val phoneNumber = user?.<span class="hljs-property">phoneNumber</span> <span class="hljs-comment">// 핸드폰 번호</span>
                    val providerId = user?.<span class="hljs-property">providerId</span> <span class="hljs-comment">// 제공자 ID</span>

                    <span class="hljs-title function_">sendUserToBackend</span>(uid)
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-title class_">Log</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">"signInWithCredential"</span>, <span class="hljs-string">"signInWithCredential:failure"</span>, task.<span class="hljs-property">exception</span>)
                    <span class="hljs-comment">// 로그인 실패</span>
                }
            }
    }

    private fun <span class="hljs-title function_">sendUserToBackend</span>(<span class="hljs-params">uid: <span class="hljs-built_in">String</span>?</span>) {
        <span class="hljs-title class_">Log</span>.<span class="hljs-title function_">e</span>(<span class="hljs-string">"sendUserToBackend"</span>, <span class="hljs-string">"UID: $uid"</span>)
        <span class="hljs-comment">// 이 함수는 사용자의 UID를 백엔드로 전송하는 데 사용할 수 있습니다.</span>
    }
}
</code></pre>
<p><code>startPhoneNumberVerification</code> 메서드에서 전화번호 확인 프로세스 중 발생하는 이벤트들이 <code>onVerificationCompleted</code>, <code>onVerificationFailed</code>, <code>onCodeSent</code>와 같은 콜백을 사용하여 정의되어 있습니다.</p>
<p><code>signInWithPhoneAuthCredential</code> 메서드는 Firebase 인증을 사용하여 로그인 작업을 수행합니다. 확인이 성공적일 경우, 사용자 정보를 가져와 백엔드로 전송할 수 있습니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_1.png" alt="Secure SMS Verification in Android Applications with Firebase"></p>
<p>위 모든 단계를 완료한 후에는 Firebase로부터 SMS를 수신할 것입니다. SMS를 통해 받은 코드를 입력하면 signInWithPhoneAuthCredential 메서드가 이를 확인하고 응용 프로그램 흐름이 계속됩니다.</p>
<h1>결론</h1>
<p>본 문서에서 안내한 단계를 따라 Android 애플리케이션에서 Firebase를 사용하여 안전한 SMS 확인을 구현할 수 있게 됩니다. 이 방법은 사용자 인증의 보안성을 향상시키는데 그치지 않고 사용자들에게 원활한 로그인 경험을 제공합니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>SMS 인증을 구현하면 무단 액세스가 크게 줄어들고, 앱에 로그인할 수 있는 것은 정당한 사용자뿐이라는 것을 보장할 수 있습니다. 또한 Firebase의 강력한 기능과 쉬운 통합을 통해, 인증 및 보안을 관리하는 강력한 도구로 활용할 수 있습니다.</p>
<h1>참고 자료</h1>
<ul>
<li>Firebase 문서</li>
<li>Google Play 무결성 API</li>
<li>SHA-1 인증서 지문</li>
<li>Firebase용 Gradle 구성</li>
</ul>
<p>참고: 개발 단계에서 Google이 자동으로 reCaptcha 서비스를 활성화할 수 있으며, SMS 인증을 수행하는 동안 reCaptcha 화면을 볼 수 있습니다. 주제에서 벗어나지 않도록 자세히 다루지 않았습니다. 더 자세한 정보는 여기에서 확인할 수 있습니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>Note-2: 현재 Firebase를 통해 보내는 메시지 템플릿을 사용자 정의하는 것은 불가능합니다. 사용자 정의 메시지 유형을 사용하려면 다른 공급업체를 사용해야 합니다.</p>
<p>이 기사가 안드로이드 애플리케이션에서 Firebase를 사용하여 SMS 인증을 구현하는 데 도움이 되기를 바랍니다. 궁금한 점이 있거나 추가 지원이 필요하면 아래에 댓글을 남기세요.</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1200/0*vvlpXIMRKoxTUlrJ.gif" alt="image"></p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Firebase로 안드로이드 애플리케이션에서 안전한 SMS 인증 방법","description":"","date":"2024-06-27 19:22","slug":"2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase","content":"\n![이미지](/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_0.png)\n\n안녕하세요! 이 기사에서는 안드로이드 애플리케이션에서 Firebase의 SMS 인증 기능을 사용하여 사용자 인증하는 방법을 단계별로 설명하겠습니다. SMS 인증은 사용자의 전화번호를 확인하고 안전한 로그인을 보장하는 효과적인 방법입니다. 이 예에서는 프로젝트를 만들고 필요한 모든 단계를 거칠 것입니다.\n\n# 1. Firebase 프로젝트 만들기\n\n## Firebase 콘솔 설정\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nFirebase 콘솔에 로그인해 주세요:\n\n- Firebase 콘솔로 이동합니다.\n- Google 계정으로 로그인합니다.\n\n## 새 프로젝트 만들기:\n\n- Firebase 콘솔에서 “프로젝트 추가” 버튼을 클릭합니다.\n- 프로젝트 이름을 입력하고 “계속”을 클릭합니다.\n- Google 애널리틱스를 활성화하라는 요청이 표시될 수 있습니다. 원하는 옵션을 선택하고 “계속”을 클릭합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 프로젝트 설정 완료:\n\n- 프로젝트 생성 프로세스가 완료되면 “프로젝트 관리” 버튼을 클릭하여 프로젝트 페이지로 이동합니다.\n- App Check 옵션을 활성화하고 이 섹션에서 앱을 등록합니다. Firebase App Check를 활성화하여 Play Integrity API를 사용하면 앱의 보안을 강화하고 Firebase 서비스에 대한 무단 액세스를 방지할 수 있습니다.\n\n# 2. Firebase에 Android 앱 추가하기\n\nFirebase에 앱 추가하기:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 프로젝트 페이지에서 상단의 \"프로젝트 개요\" 섹션에서 Android 아이콘을 클릭하세요.\n- 패키지 이름 (예: com.ek.firebasesmssample), 앱 별명 및 SHA-1 인증서 지문을 입력해주세요. SHA-1 인증서 지문을 얻으려면 다음 단계를 따라주세요:\n- Android Studio에서 터미널을 열고 다음 명령을 입력하세요:\n\n```js\nkeytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android\n```\n\n- 출력에서 SHA1 값이 인증서 지문입니다.\n- \"앱 등록\" 버튼을 클릭하세요.\n\n## Google 서비스 JSON 파일 다운로드하기:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- google-services.json 파일을 다운로드하여 Android 프로젝트의 앱 디렉토리에 추가해주세요.\n\n## 3. Firebase SDK를 프로젝트에 추가하기\n\nGradle 파일 구성하기:\n\n- 프로젝트 수준의 build.gradle 파일에 다음 라인을 추가해주세요:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nclasspath 'com.google.gms:google-services:4.3.3'\n```\n\n다음 라인을 앱 수준의 build.gradle 파일에 추가하세요:\n\n```js\napply plugin: 'com.google.gms.google-services'\n\ndependencies {\n    implementation platform('com.google.firebase:firebase-bom:26.1.0')\n    implementation 'com.google.firebase:firebase-auth'\n    implementation 'com.google.firebase:firebase-analytics'\n}\n```\n\n# 4. Firebase 인증 활성화하기\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n인증 설정하기:\n\n- Firebase 콘솔의 왼쪽 메뉴에서 \"인증\" 섹션으로 이동합니다.\n- \"로그인 방법\" 탭을 클릭합니다.\n- 전화 번호 로그인 방법을 찾아 \"활성화\"를 클릭합니다.\n- 선택적으로 메시지 템플릿을 사용자 정의할 수 있습니다.\n- \"저장\" 버튼을 클릭합니다.\n\n# 5. 안드로이드 애플리케이션 코딩\n\n## 프로젝트 구조 및 UI 디자인\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n우선, 안드로이드 프로젝트를 만들고 필요한 파일을 설정하세요.\n\nactivity_login.xml\n\n```xml\n\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\n\u003cLinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    android:gravity=\"center\"\n    android:padding=\"16dp\"\u003e\n\n    \u003cTextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"SMS 인증을 위한 전화번호를 입력하세요.\"\n        android:textSize=\"12sp\" /\u003e\n\n    \u003ccom.google.android.material.textfield.TextInputLayout\n        android:id=\"@+id/phone_number_layout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"128dp\"\u003e\n\n        \u003cEditText\n            android:id=\"@+id/phone_number_input\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"전화번호\"\n            android:inputType=\"phone\" /\u003e\n    \u003c/com.google.android.material.textfield.TextInputLayout\u003e\n\n    \u003cButton\n        android:id=\"@+id/login_button\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"48dp\"\n        android:paddingVertical=\"12dp\"\n        android:textSize=\"16sp\"\n        android:textColor=\"@color/white\"\n        android:backgroundTint=\"@color/red\"\n        android:text=\"로그인 →\" /\u003e\n\n\u003c/LinearLayout\u003e\n```\n\nLoginActivity.kt\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이제 LoginActivity 클래스를 만들고 아래 코드를 추가해주세요:\n\n```js\nimport android.os.Bundle\nimport android.text.Editable\nimport android.text.TextWatcher\nimport android.util.Log\nimport android.widget.Button\nimport android.widget.EditText\nimport android.widget.Toast\nimport androidx.appcompat.app.AppCompatActivity\nimport androidx.core.widget.doAfterTextChanged\nimport com.google.android.material.textfield.TextInputLayout\nimport com.google.firebase.FirebaseApp\nimport com.google.firebase.FirebaseException\nimport com.google.firebase.appcheck.FirebaseAppCheck\nimport com.google.firebase.appcheck.playintegrity.PlayIntegrityAppCheckProviderFactory\nimport com.google.firebase.auth.FirebaseAuth\nimport com.google.firebase.auth.PhoneAuthCredential\nimport com.google.firebase.auth.PhoneAuthProvider\nimport java.util.concurrent.TimeUnit\nimport java.util.regex.Pattern\n\nclass LoginActivity : AppCompatActivity() {\n\n    private lateinit var phoneNumberInput: EditText\n    private lateinit var loginButton: Button\n    private lateinit var phoneNumberLayout: TextInputLayout\n\n    private lateinit var auth: FirebaseAuth\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_login)\n\n        phoneNumberInput = findViewById(R.id.phone_number_input)\n        loginButton = findViewById(R.id.login_button)\n        phoneNumberLayout = findViewById(R.id.phone_number_layout)\n\n        auth = FirebaseAuth.getInstance()\n        FirebaseApp.initializeApp(this)\n        val firebaseAppCheck = FirebaseAppCheck.getInstance()\n        firebaseAppCheck.installAppCheckProviderFactory(\n            PlayIntegrityAppCheckProviderFactory.getInstance()\n        )\n        phoneNumberInput.addTextChangedListener(object : TextWatcher {\n            private var current = \"\"\n            override fun afterTextChanged(s: Editable?) {\n                if (s.toString() != current) {\n                    phoneNumberInput.removeTextChangedListener(this)\n\n                    val cleanString = s.toString().replace(\" \", \"\").replace(\"+90\", \"\")\n                    val formatted = cleanString.chunked(3).joinToString(\" \")\n\n                    if (cleanString.length \u003e 6) {\n                        val part1 = cleanString.substring(0, 3)\n                        val part2 = cleanString.substring(3, 6)\n                        val part3 = cleanString.substring(6)\n                        current = \"+90 $part1 $part2$part3\"\n                    } else {\n                        current = \"+90 $formatted\"\n                    }\n\n                    phoneNumberInput.setText(current)\n                    phoneNumberInput.setSelection(current.length)\n\n                    phoneNumberInput.addTextChangedListener(this)\n                }\n            }\n\n            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}\n\n            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {}\n        })\n\n        loginButton.setOnClickListener {\n            val phoneNumber = phoneNumberInput.text.toString()\n            if (isValidPhoneNumber(phoneNumber)) {\n                startPhoneNumberVerification(phoneNumber)\n            } else {\n                Toast.makeText(this, \"Please enter a valid phone number\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    private fun isValidPhoneNumber(phoneNumber: String): Boolean {\n        val pattern = Pattern.compile(\"^\\\\+?[1-9]\\\\d{1,14}\\$\")\n        return pattern.matcher(phoneNumber.replace(\" \", \"\")).matches()\n    }\n\n    private fun startPhoneNumberVerification(phoneNumber: String) {\n        val callbacks = object : PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\n\n            override fun onVerificationCompleted(credential: PhoneAuthCredential) {\n                // 인증이 성공했을 때 실행되는 콜백입니다.\n                // 여기에서 로그인 작업을 수행할 수 있습니다.\n                signInWithPhoneAuthCredential(credential)\n            }\n\n            override fun onVerificationFailed(e: FirebaseException) {\n                // 인증이 실패했을 때 실행되는 콜백입니다.\n                // 오류 메시지를 표시합니다.\n                Log.e(\"onVerificationFailed\", e.message ?: \"오류가 발생했습니다\")\n            }\n\n            override fun onCodeSent(\n                verificationId: String,\n                token: PhoneAuthProvider.ForceResendingToken\n            ) {\n                Log.e(\"onCodeSent\", \"verificationId: $verificationId\")\n                // 인증 코드가 전송될 때 실행되는 콜백입니다.\n                // 수신한 코드를 사용하여 자격 증명을 생성할 수 있습니다.\n                val credential = PhoneAuthProvider.getCredential(verificationId, \"123456\")\n                signInWithPhoneAuthCredential(credential)\n            }\n        }\n\n        // 핸드폰 번호와 콜백을 사용하여 인증 프로세스 시작\n        PhoneAuthProvider.getInstance().verifyPhoneNumber(\n            phoneNumber, // 핸드폰 번호\n            60, // 시간 제한\n            TimeUnit.SECONDS, // 시간 제한 단위\n            this, // 액티비티 (또는 프래그먼트)\n            callbacks\n        )\n    }\n\n    private fun signInWithPhoneAuthCredential(credential: PhoneAuthCredential) {\n        auth.signInWithCredential(credential)\n            .addOnCompleteListener(this) { task -\u003e\n                if (task.isSuccessful) {\n                    // 로그인 성공\n                    val user = task.result?.user\n                    val uid = user?.uid // 사용자 ID\n                    val phoneNumber = user?.phoneNumber // 핸드폰 번호\n                    val providerId = user?.providerId // 제공자 ID\n\n                    sendUserToBackend(uid)\n                } else {\n                    Log.e(\"signInWithCredential\", \"signInWithCredential:failure\", task.exception)\n                    // 로그인 실패\n                }\n            }\n    }\n\n    private fun sendUserToBackend(uid: String?) {\n        Log.e(\"sendUserToBackend\", \"UID: $uid\")\n        // 이 함수는 사용자의 UID를 백엔드로 전송하는 데 사용할 수 있습니다.\n    }\n}\n```\n\n`startPhoneNumberVerification` 메서드에서 전화번호 확인 프로세스 중 발생하는 이벤트들이 `onVerificationCompleted`, `onVerificationFailed`, `onCodeSent`와 같은 콜백을 사용하여 정의되어 있습니다.\n\n`signInWithPhoneAuthCredential` 메서드는 Firebase 인증을 사용하여 로그인 작업을 수행합니다. 확인이 성공적일 경우, 사용자 정보를 가져와 백엔드로 전송할 수 있습니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![Secure SMS Verification in Android Applications with Firebase](/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_1.png)\n\n위 모든 단계를 완료한 후에는 Firebase로부터 SMS를 수신할 것입니다. SMS를 통해 받은 코드를 입력하면 signInWithPhoneAuthCredential 메서드가 이를 확인하고 응용 프로그램 흐름이 계속됩니다.\n\n# 결론\n\n본 문서에서 안내한 단계를 따라 Android 애플리케이션에서 Firebase를 사용하여 안전한 SMS 확인을 구현할 수 있게 됩니다. 이 방법은 사용자 인증의 보안성을 향상시키는데 그치지 않고 사용자들에게 원활한 로그인 경험을 제공합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nSMS 인증을 구현하면 무단 액세스가 크게 줄어들고, 앱에 로그인할 수 있는 것은 정당한 사용자뿐이라는 것을 보장할 수 있습니다. 또한 Firebase의 강력한 기능과 쉬운 통합을 통해, 인증 및 보안을 관리하는 강력한 도구로 활용할 수 있습니다.\n\n# 참고 자료\n\n- Firebase 문서\n- Google Play 무결성 API\n- SHA-1 인증서 지문\n- Firebase용 Gradle 구성\n\n참고: 개발 단계에서 Google이 자동으로 reCaptcha 서비스를 활성화할 수 있으며, SMS 인증을 수행하는 동안 reCaptcha 화면을 볼 수 있습니다. 주제에서 벗어나지 않도록 자세히 다루지 않았습니다. 더 자세한 정보는 여기에서 확인할 수 있습니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nNote-2: 현재 Firebase를 통해 보내는 메시지 템플릿을 사용자 정의하는 것은 불가능합니다. 사용자 정의 메시지 유형을 사용하려면 다른 공급업체를 사용해야 합니다.\n\n이 기사가 안드로이드 애플리케이션에서 Firebase를 사용하여 SMS 인증을 구현하는 데 도움이 되기를 바랍니다. 궁금한 점이 있거나 추가 지원이 필요하면 아래에 댓글을 남기세요.\n\n![image](https://miro.medium.com/v2/resize:fit:1200/0*vvlpXIMRKoxTUlrJ.gif)\n","ogImage":{"url":"/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_0.png"},"coverImage":"/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_0.png","tag":["Tech"],"readingTime":14},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e안녕하세요! 이 기사에서는 안드로이드 애플리케이션에서 Firebase의 SMS 인증 기능을 사용하여 사용자 인증하는 방법을 단계별로 설명하겠습니다. SMS 인증은 사용자의 전화번호를 확인하고 안전한 로그인을 보장하는 효과적인 방법입니다. 이 예에서는 프로젝트를 만들고 필요한 모든 단계를 거칠 것입니다.\u003c/p\u003e\n\u003ch1\u003e1. Firebase 프로젝트 만들기\u003c/h1\u003e\n\u003ch2\u003eFirebase 콘솔 설정\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eFirebase 콘솔에 로그인해 주세요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFirebase 콘솔로 이동합니다.\u003c/li\u003e\n\u003cli\u003eGoogle 계정으로 로그인합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e새 프로젝트 만들기:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eFirebase 콘솔에서 “프로젝트 추가” 버튼을 클릭합니다.\u003c/li\u003e\n\u003cli\u003e프로젝트 이름을 입력하고 “계속”을 클릭합니다.\u003c/li\u003e\n\u003cli\u003eGoogle 애널리틱스를 활성화하라는 요청이 표시될 수 있습니다. 원하는 옵션을 선택하고 “계속”을 클릭합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e프로젝트 설정 완료:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e프로젝트 생성 프로세스가 완료되면 “프로젝트 관리” 버튼을 클릭하여 프로젝트 페이지로 이동합니다.\u003c/li\u003e\n\u003cli\u003eApp Check 옵션을 활성화하고 이 섹션에서 앱을 등록합니다. Firebase App Check를 활성화하여 Play Integrity API를 사용하면 앱의 보안을 강화하고 Firebase 서비스에 대한 무단 액세스를 방지할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e2. Firebase에 Android 앱 추가하기\u003c/h1\u003e\n\u003cp\u003eFirebase에 앱 추가하기:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e프로젝트 페이지에서 상단의 \"프로젝트 개요\" 섹션에서 Android 아이콘을 클릭하세요.\u003c/li\u003e\n\u003cli\u003e패키지 이름 (예: com.ek.firebasesmssample), 앱 별명 및 SHA-1 인증서 지문을 입력해주세요. SHA-1 인증서 지문을 얻으려면 다음 단계를 따라주세요:\u003c/li\u003e\n\u003cli\u003eAndroid Studio에서 터미널을 열고 다음 명령을 입력하세요:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekeytool -list -v -keystore ~\u003cspan class=\"hljs-regexp\"\u003e/.android/\u003c/span\u003edebug.\u003cspan class=\"hljs-property\"\u003ekeystore\u003c/span\u003e -alias androiddebugkey -storepass android -keypass android\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e출력에서 SHA1 값이 인증서 지문입니다.\u003c/li\u003e\n\u003cli\u003e\"앱 등록\" 버튼을 클릭하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eGoogle 서비스 JSON 파일 다운로드하기:\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003egoogle-services.json 파일을 다운로드하여 Android 프로젝트의 앱 디렉토리에 추가해주세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e3. Firebase SDK를 프로젝트에 추가하기\u003c/h2\u003e\n\u003cp\u003eGradle 파일 구성하기:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e프로젝트 수준의 build.gradle 파일에 다음 라인을 추가해주세요:\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eclasspath \u003cspan class=\"hljs-string\"\u003e'com.google.gms:google-services:4.3.3'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다음 라인을 앱 수준의 build.gradle 파일에 추가하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eapply \u003cspan class=\"hljs-attr\"\u003eplugin\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'com.google.gms.google-services'\u003c/span\u003e\n\ndependencies {\n    implementation \u003cspan class=\"hljs-title function_\"\u003eplatform\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'com.google.firebase:firebase-bom:26.1.0'\u003c/span\u003e)\n    implementation \u003cspan class=\"hljs-string\"\u003e'com.google.firebase:firebase-auth'\u003c/span\u003e\n    implementation \u003cspan class=\"hljs-string\"\u003e'com.google.firebase:firebase-analytics'\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e4. Firebase 인증 활성화하기\u003c/h1\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e인증 설정하기:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFirebase 콘솔의 왼쪽 메뉴에서 \"인증\" 섹션으로 이동합니다.\u003c/li\u003e\n\u003cli\u003e\"로그인 방법\" 탭을 클릭합니다.\u003c/li\u003e\n\u003cli\u003e전화 번호 로그인 방법을 찾아 \"활성화\"를 클릭합니다.\u003c/li\u003e\n\u003cli\u003e선택적으로 메시지 템플릿을 사용자 정의할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\"저장\" 버튼을 클릭합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e5. 안드로이드 애플리케이션 코딩\u003c/h1\u003e\n\u003ch2\u003e프로젝트 구조 및 UI 디자인\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e우선, 안드로이드 프로젝트를 만들고 필요한 파일을 설정하세요.\u003c/p\u003e\n\u003cp\u003eactivity_login.xml\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u0026#x3C;?xml version=\u003cspan class=\"hljs-string\"\u003e\"1.0\"\u003c/span\u003e encoding=\u003cspan class=\"hljs-string\"\u003e\"utf-8\"\u003c/span\u003e?\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eLinearLayout\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003exmlns:android\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"http://schemas.android.com/apk/res/android\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003exmlns:app\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"http://schemas.android.com/apk/res-auto\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eandroid:layout_width\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"match_parent\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eandroid:layout_height\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"match_parent\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eandroid:orientation\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"vertical\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eandroid:gravity\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"center\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eandroid:padding\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"16dp\"\u003c/span\u003e\u003e\u003c/span\u003e\n\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eTextView\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:layout_width\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"wrap_content\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:layout_height\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"wrap_content\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:text\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"SMS 인증을 위한 전화번호를 입력하세요.\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:textSize\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"12sp\"\u003c/span\u003e /\u003e\u003c/span\u003e\n\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ecom.google.android.material.textfield.TextInputLayout\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:id\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"@+id/phone_number_layout\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:layout_width\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"match_parent\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:layout_height\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"wrap_content\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:layout_marginTop\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"128dp\"\u003c/span\u003e\u003e\u003c/span\u003e\n\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eEditText\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eandroid:id\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"@+id/phone_number_input\"\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eandroid:layout_width\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"match_parent\"\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eandroid:layout_height\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"wrap_content\"\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eandroid:hint\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"전화번호\"\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eandroid:inputType\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"phone\"\u003c/span\u003e /\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ecom.google.android.material.textfield.TextInputLayout\u003c/span\u003e\u003e\u003c/span\u003e\n\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eButton\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:id\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"@+id/login_button\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:layout_width\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"match_parent\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:layout_height\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"wrap_content\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:layout_marginTop\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"48dp\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:paddingVertical\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"12dp\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:textSize\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"16sp\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:textColor\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"@color/white\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:backgroundTint\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"@color/red\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eandroid:text\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"로그인 →\"\u003c/span\u003e /\u003e\u003c/span\u003e\n\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eLinearLayout\u003c/span\u003e\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLoginActivity.kt\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이제 LoginActivity 클래스를 만들고 아래 코드를 추가해주세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e android.\u003cspan class=\"hljs-property\"\u003eos\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eBundle\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e android.\u003cspan class=\"hljs-property\"\u003etext\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eEditable\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e android.\u003cspan class=\"hljs-property\"\u003etext\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eTextWatcher\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e android.\u003cspan class=\"hljs-property\"\u003eutil\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLog\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e android.\u003cspan class=\"hljs-property\"\u003ewidget\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eButton\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e android.\u003cspan class=\"hljs-property\"\u003ewidget\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eEditText\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e android.\u003cspan class=\"hljs-property\"\u003ewidget\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eToast\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e androidx.\u003cspan class=\"hljs-property\"\u003eappcompat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eapp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eAppCompatActivity\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e androidx.\u003cspan class=\"hljs-property\"\u003ecore\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ewidget\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edoAfterTextChanged\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.\u003cspan class=\"hljs-property\"\u003egoogle\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eandroid\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ematerial\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etextfield\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eTextInputLayout\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.\u003cspan class=\"hljs-property\"\u003egoogle\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efirebase\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eFirebaseApp\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.\u003cspan class=\"hljs-property\"\u003egoogle\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efirebase\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eFirebaseException\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.\u003cspan class=\"hljs-property\"\u003egoogle\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efirebase\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eappcheck\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eFirebaseAppCheck\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.\u003cspan class=\"hljs-property\"\u003egoogle\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efirebase\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eappcheck\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eplayintegrity\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePlayIntegrityAppCheckProviderFactory\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.\u003cspan class=\"hljs-property\"\u003egoogle\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efirebase\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauth\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eFirebaseAuth\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.\u003cspan class=\"hljs-property\"\u003egoogle\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efirebase\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauth\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePhoneAuthCredential\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.\u003cspan class=\"hljs-property\"\u003egoogle\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efirebase\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauth\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePhoneAuthProvider\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e java.\u003cspan class=\"hljs-property\"\u003eutil\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econcurrent\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eTimeUnit\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e java.\u003cspan class=\"hljs-property\"\u003eutil\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eregex\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePattern\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLoginActivity\u003c/span\u003e : \u003cspan class=\"hljs-title class_\"\u003eAppCompatActivity\u003c/span\u003e() {\n\n    private lateinit \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ephoneNumberInput\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEditText\u003c/span\u003e\n    private lateinit \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eloginButton\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eButton\u003c/span\u003e\n    private lateinit \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ephoneNumberLayout\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eTextInputLayout\u003c/span\u003e\n\n    private lateinit \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eauth\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFirebaseAuth\u003c/span\u003e\n\n    override fun \u003cspan class=\"hljs-title function_\"\u003eonCreate\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003esavedInstanceState: Bundle?\u003c/span\u003e) {\n        \u003cspan class=\"hljs-variable language_\"\u003esuper\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eonCreate\u003c/span\u003e(savedInstanceState)\n        \u003cspan class=\"hljs-title function_\"\u003esetContentView\u003c/span\u003e(R.\u003cspan class=\"hljs-property\"\u003elayout\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eactivity_login\u003c/span\u003e)\n\n        phoneNumberInput = \u003cspan class=\"hljs-title function_\"\u003efindViewById\u003c/span\u003e(R.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ephone_number_input\u003c/span\u003e)\n        loginButton = \u003cspan class=\"hljs-title function_\"\u003efindViewById\u003c/span\u003e(R.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elogin_button\u003c/span\u003e)\n        phoneNumberLayout = \u003cspan class=\"hljs-title function_\"\u003efindViewById\u003c/span\u003e(R.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ephone_number_layout\u003c/span\u003e)\n\n        auth = \u003cspan class=\"hljs-title class_\"\u003eFirebaseAuth\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetInstance\u003c/span\u003e()\n        \u003cspan class=\"hljs-title class_\"\u003eFirebaseApp\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einitializeApp\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e)\n        val firebaseAppCheck = \u003cspan class=\"hljs-title class_\"\u003eFirebaseAppCheck\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetInstance\u003c/span\u003e()\n        firebaseAppCheck.\u003cspan class=\"hljs-title function_\"\u003einstallAppCheckProviderFactory\u003c/span\u003e(\n            \u003cspan class=\"hljs-title class_\"\u003ePlayIntegrityAppCheckProviderFactory\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetInstance\u003c/span\u003e()\n        )\n        phoneNumberInput.\u003cspan class=\"hljs-title function_\"\u003eaddTextChangedListener\u003c/span\u003e(object : \u003cspan class=\"hljs-title class_\"\u003eTextWatcher\u003c/span\u003e {\n            private \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e current = \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\n            override fun \u003cspan class=\"hljs-title function_\"\u003eafterTextChanged\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003es: Editable?\u003c/span\u003e) {\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (s.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e() != current) {\n                    phoneNumberInput.\u003cspan class=\"hljs-title function_\"\u003eremoveTextChangedListener\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e)\n\n                    val cleanString = s.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003ereplace\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ereplace\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"+90\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e)\n                    val formatted = cleanString.\u003cspan class=\"hljs-title function_\"\u003echunked\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejoinToString\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e)\n\n                    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (cleanString.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e \u003e \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e) {\n                        val part1 = cleanString.\u003cspan class=\"hljs-title function_\"\u003esubstring\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n                        val part2 = cleanString.\u003cspan class=\"hljs-title function_\"\u003esubstring\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e)\n                        val part3 = cleanString.\u003cspan class=\"hljs-title function_\"\u003esubstring\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e)\n                        current = \u003cspan class=\"hljs-string\"\u003e\"+90 $part1 $part2$part3\"\u003c/span\u003e\n                    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                        current = \u003cspan class=\"hljs-string\"\u003e\"+90 $formatted\"\u003c/span\u003e\n                    }\n\n                    phoneNumberInput.\u003cspan class=\"hljs-title function_\"\u003esetText\u003c/span\u003e(current)\n                    phoneNumberInput.\u003cspan class=\"hljs-title function_\"\u003esetSelection\u003c/span\u003e(current.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e)\n\n                    phoneNumberInput.\u003cspan class=\"hljs-title function_\"\u003eaddTextChangedListener\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e)\n                }\n            }\n\n            override fun \u003cspan class=\"hljs-title function_\"\u003ebeforeTextChanged\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003es: CharSequence?, start: Int, count: Int, after: Int\u003c/span\u003e) {}\n\n            override fun \u003cspan class=\"hljs-title function_\"\u003eonTextChanged\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003es: CharSequence?, start: Int, before: Int, count: Int\u003c/span\u003e) {}\n        })\n\n        loginButton.\u003cspan class=\"hljs-property\"\u003esetOnClickListener\u003c/span\u003e {\n            val phoneNumber = phoneNumberInput.\u003cspan class=\"hljs-property\"\u003etext\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e()\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (\u003cspan class=\"hljs-title function_\"\u003eisValidPhoneNumber\u003c/span\u003e(phoneNumber)) {\n                \u003cspan class=\"hljs-title function_\"\u003estartPhoneNumberVerification\u003c/span\u003e(phoneNumber)\n            } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                \u003cspan class=\"hljs-title class_\"\u003eToast\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emakeText\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"Please enter a valid phone number\"\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eToast\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLENGTH_SHORT\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n            }\n        }\n    }\n\n    private fun \u003cspan class=\"hljs-title function_\"\u003eisValidPhoneNumber\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003ephoneNumber\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eBoolean\u003c/span\u003e {\n        val pattern = \u003cspan class=\"hljs-title class_\"\u003ePattern\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecompile\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"^\\\\+?[1-9]\\\\d{1,14}\\$\"\u003c/span\u003e)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e pattern.\u003cspan class=\"hljs-title function_\"\u003ematcher\u003c/span\u003e(phoneNumber.\u003cspan class=\"hljs-title function_\"\u003ereplace\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e)).\u003cspan class=\"hljs-title function_\"\u003ematches\u003c/span\u003e()\n    }\n\n    private fun \u003cspan class=\"hljs-title function_\"\u003estartPhoneNumberVerification\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ephoneNumber: \u003cspan class=\"hljs-built_in\"\u003eString\u003c/span\u003e\u003c/span\u003e) {\n        val callbacks = object : \u003cspan class=\"hljs-title class_\"\u003ePhoneAuthProvider\u003c/span\u003e.\u003cspan class=\"hljs-title class_\"\u003eOnVerificationStateChangedCallbacks\u003c/span\u003e() {\n\n            override fun \u003cspan class=\"hljs-title function_\"\u003eonVerificationCompleted\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ecredential: PhoneAuthCredential\u003c/span\u003e) {\n                \u003cspan class=\"hljs-comment\"\u003e// 인증이 성공했을 때 실행되는 콜백입니다.\u003c/span\u003e\n                \u003cspan class=\"hljs-comment\"\u003e// 여기에서 로그인 작업을 수행할 수 있습니다.\u003c/span\u003e\n                \u003cspan class=\"hljs-title function_\"\u003esignInWithPhoneAuthCredential\u003c/span\u003e(credential)\n            }\n\n            override fun \u003cspan class=\"hljs-title function_\"\u003eonVerificationFailed\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ee: FirebaseException\u003c/span\u003e) {\n                \u003cspan class=\"hljs-comment\"\u003e// 인증이 실패했을 때 실행되는 콜백입니다.\u003c/span\u003e\n                \u003cspan class=\"hljs-comment\"\u003e// 오류 메시지를 표시합니다.\u003c/span\u003e\n                \u003cspan class=\"hljs-title class_\"\u003eLog\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ee\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"onVerificationFailed\"\u003c/span\u003e, e.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e ?: \u003cspan class=\"hljs-string\"\u003e\"오류가 발생했습니다\"\u003c/span\u003e)\n            }\n\n            override fun \u003cspan class=\"hljs-title function_\"\u003eonCodeSent\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n                verificationId: \u003cspan class=\"hljs-built_in\"\u003eString\u003c/span\u003e,\n                token: PhoneAuthProvider.ForceResendingToken\n            \u003c/span\u003e) {\n                \u003cspan class=\"hljs-title class_\"\u003eLog\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ee\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"onCodeSent\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"verificationId: $verificationId\"\u003c/span\u003e)\n                \u003cspan class=\"hljs-comment\"\u003e// 인증 코드가 전송될 때 실행되는 콜백입니다.\u003c/span\u003e\n                \u003cspan class=\"hljs-comment\"\u003e// 수신한 코드를 사용하여 자격 증명을 생성할 수 있습니다.\u003c/span\u003e\n                val credential = \u003cspan class=\"hljs-title class_\"\u003ePhoneAuthProvider\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetCredential\u003c/span\u003e(verificationId, \u003cspan class=\"hljs-string\"\u003e\"123456\"\u003c/span\u003e)\n                \u003cspan class=\"hljs-title function_\"\u003esignInWithPhoneAuthCredential\u003c/span\u003e(credential)\n            }\n        }\n\n        \u003cspan class=\"hljs-comment\"\u003e// 핸드폰 번호와 콜백을 사용하여 인증 프로세스 시작\u003c/span\u003e\n        \u003cspan class=\"hljs-title class_\"\u003ePhoneAuthProvider\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetInstance\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003everifyPhoneNumber\u003c/span\u003e(\n            phoneNumber, \u003cspan class=\"hljs-comment\"\u003e// 핸드폰 번호\u003c/span\u003e\n            \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// 시간 제한\u003c/span\u003e\n            \u003cspan class=\"hljs-title class_\"\u003eTimeUnit\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eSECONDS\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// 시간 제한 단위\u003c/span\u003e\n            \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// 액티비티 (또는 프래그먼트)\u003c/span\u003e\n            callbacks\n        )\n    }\n\n    private fun \u003cspan class=\"hljs-title function_\"\u003esignInWithPhoneAuthCredential\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ecredential: PhoneAuthCredential\u003c/span\u003e) {\n        auth.\u003cspan class=\"hljs-title function_\"\u003esignInWithCredential\u003c/span\u003e(credential)\n            .\u003cspan class=\"hljs-title function_\"\u003eaddOnCompleteListener\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e\u003c/span\u003e) { task -\u003e\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (task.\u003cspan class=\"hljs-property\"\u003eisSuccessful\u003c/span\u003e) {\n                    \u003cspan class=\"hljs-comment\"\u003e// 로그인 성공\u003c/span\u003e\n                    val user = task.\u003cspan class=\"hljs-property\"\u003eresult\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003euser\u003c/span\u003e\n                    val uid = user?.\u003cspan class=\"hljs-property\"\u003euid\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// 사용자 ID\u003c/span\u003e\n                    val phoneNumber = user?.\u003cspan class=\"hljs-property\"\u003ephoneNumber\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// 핸드폰 번호\u003c/span\u003e\n                    val providerId = user?.\u003cspan class=\"hljs-property\"\u003eproviderId\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// 제공자 ID\u003c/span\u003e\n\n                    \u003cspan class=\"hljs-title function_\"\u003esendUserToBackend\u003c/span\u003e(uid)\n                } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                    \u003cspan class=\"hljs-title class_\"\u003eLog\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ee\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"signInWithCredential\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"signInWithCredential:failure\"\u003c/span\u003e, task.\u003cspan class=\"hljs-property\"\u003eexception\u003c/span\u003e)\n                    \u003cspan class=\"hljs-comment\"\u003e// 로그인 실패\u003c/span\u003e\n                }\n            }\n    }\n\n    private fun \u003cspan class=\"hljs-title function_\"\u003esendUserToBackend\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003euid: \u003cspan class=\"hljs-built_in\"\u003eString\u003c/span\u003e?\u003c/span\u003e) {\n        \u003cspan class=\"hljs-title class_\"\u003eLog\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ee\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"sendUserToBackend\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"UID: $uid\"\u003c/span\u003e)\n        \u003cspan class=\"hljs-comment\"\u003e// 이 함수는 사용자의 UID를 백엔드로 전송하는 데 사용할 수 있습니다.\u003c/span\u003e\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003estartPhoneNumberVerification\u003c/code\u003e 메서드에서 전화번호 확인 프로세스 중 발생하는 이벤트들이 \u003ccode\u003eonVerificationCompleted\u003c/code\u003e, \u003ccode\u003eonVerificationFailed\u003c/code\u003e, \u003ccode\u003eonCodeSent\u003c/code\u003e와 같은 콜백을 사용하여 정의되어 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esignInWithPhoneAuthCredential\u003c/code\u003e 메서드는 Firebase 인증을 사용하여 로그인 작업을 수행합니다. 확인이 성공적일 경우, 사용자 정보를 가져와 백엔드로 전송할 수 있습니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase_1.png\" alt=\"Secure SMS Verification in Android Applications with Firebase\"\u003e\u003c/p\u003e\n\u003cp\u003e위 모든 단계를 완료한 후에는 Firebase로부터 SMS를 수신할 것입니다. SMS를 통해 받은 코드를 입력하면 signInWithPhoneAuthCredential 메서드가 이를 확인하고 응용 프로그램 흐름이 계속됩니다.\u003c/p\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003cp\u003e본 문서에서 안내한 단계를 따라 Android 애플리케이션에서 Firebase를 사용하여 안전한 SMS 확인을 구현할 수 있게 됩니다. 이 방법은 사용자 인증의 보안성을 향상시키는데 그치지 않고 사용자들에게 원활한 로그인 경험을 제공합니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eSMS 인증을 구현하면 무단 액세스가 크게 줄어들고, 앱에 로그인할 수 있는 것은 정당한 사용자뿐이라는 것을 보장할 수 있습니다. 또한 Firebase의 강력한 기능과 쉬운 통합을 통해, 인증 및 보안을 관리하는 강력한 도구로 활용할 수 있습니다.\u003c/p\u003e\n\u003ch1\u003e참고 자료\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eFirebase 문서\u003c/li\u003e\n\u003cli\u003eGoogle Play 무결성 API\u003c/li\u003e\n\u003cli\u003eSHA-1 인증서 지문\u003c/li\u003e\n\u003cli\u003eFirebase용 Gradle 구성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e참고: 개발 단계에서 Google이 자동으로 reCaptcha 서비스를 활성화할 수 있으며, SMS 인증을 수행하는 동안 reCaptcha 화면을 볼 수 있습니다. 주제에서 벗어나지 않도록 자세히 다루지 않았습니다. 더 자세한 정보는 여기에서 확인할 수 있습니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eNote-2: 현재 Firebase를 통해 보내는 메시지 템플릿을 사용자 정의하는 것은 불가능합니다. 사용자 정의 메시지 유형을 사용하려면 다른 공급업체를 사용해야 합니다.\u003c/p\u003e\n\u003cp\u003e이 기사가 안드로이드 애플리케이션에서 Firebase를 사용하여 SMS 인증을 구현하는 데 도움이 되기를 바랍니다. 궁금한 점이 있거나 추가 지원이 필요하면 아래에 댓글을 남기세요.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1200/0*vvlpXIMRKoxTUlrJ.gif\" alt=\"image\"\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-27-SecureSMSVerificationinAndroidApplicationswithFirebase"},"buildId":"T_Nz0g9U1yttYMSEma95P","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>