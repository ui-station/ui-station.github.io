<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>ë„ì»¤ì—ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œ NGINX | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-19-NGINXwithSelf-SignedCertificateonDocker" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="ë„ì»¤ì—ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œ NGINX | ui-station" data-gatsby-head="true"/><meta property="og:title" content="ë„ì»¤ì—ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œ NGINX | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-19-NGINXwithSelf-SignedCertificateonDocker" data-gatsby-head="true"/><meta name="twitter:title" content="ë„ì»¤ì—ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œ NGINX | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 12:57" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/GsgRekSb--BvxYwv9FPn6/_buildManifest.js" defer=""></script><script src="/_next/static/GsgRekSb--BvxYwv9FPn6/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">ë„ì»¤ì—ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œ NGINX</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="ë„ì»¤ì—ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œ NGINX" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">12<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-NGINXwithSelf-SignedCertificateonDocker&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_0.png">
<p>ì €í¬ ì½”ë“œë¥¼ ì‘ì—…í•˜ëŠ” ë™ì•ˆ HTTPSì—ì„œ ì‘ì—…ì´ ì˜ë˜ëŠ”ì§€ ë˜ëŠ” ë” ì¤‘ìš”í•œ ê²ƒì€ HTTPSì—ì„œ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ ë¹ ë¥´ê²Œ í™•ì¸í•´ì•¼í•  ë•Œê°€ ë§ìŠµë‹ˆë‹¤. ì˜¨ë¼ì¸ì—ì„œëŠ” CSR(Certificate Sign Request)ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ CSRì„ ìì²´ë¡œ ì„œëª…í•˜ê³  ì›¹ ì„œë²„ì˜ êµ¬ì„±ì„ ìˆ˜ë™ìœ¼ë¡œ ìˆ˜ì •í•˜ì—¬ í•´ë‹¹ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“œëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ê°€ì´ë“œê°€ ë§ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ ê¸°ì‚¬ì—ì„œëŠ” ì–´ë–¤ ê²ƒë„ ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ í¸ì§‘í•˜ì§€ ì•Šê³ ë„ ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìì²´ ì„œëª…ëœ ì¸ì¦ì„œê°€ ìˆëŠ” NGINX ì»¨í…Œì´ë„ˆë¥¼ ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ëŠ” ì™„ì „ ìë™í™”ëœ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œì‹œí•˜ê² ìŠµë‹ˆë‹¤!</p>
<h1>ë³´ì•ˆ ì£¼ì˜ì‚¬í•­ê³¼ ê²½ê³ </h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>ìì²´ ì„œëª…ëœ ì¸ì¦ì„œëŠ”... ë‹¹ì‹ ë§Œ ì‹ ë¢°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒì‚° í™˜ê²½ì—ì„œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ° ê²½ìš°ì—ëŠ” ì ì ˆí•œ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.</li>
<li>ì´ ê¸€ì—ì„œ ì œì‹œëœ HTTPSë¡œ ì½˜í…ì¸ ë¥¼ ì œê³µí•˜ê²Œë” NGINX êµ¬ì„±ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ê²ƒì…ë‹ˆë‹¤. ë³¸ê²©ì ì¸ TLSê°€ ì ìš©ëœ í”„ë¡œë•ì…˜ NGINXë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ ê³µì‹ ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</li>
</ul>
<p>ê³µê°œ í‚¤ ì•”í˜¸í™”ë¥¼ ì²˜ìŒ ì‹œì‘í•˜ëŠ” ê²½ìš°, ë„ì›€ì´ ë  ìˆ˜ ìˆëŠ” ì†Œê°œ ê¸°ì‚¬ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>
<h1>ì„¤ê³„ ë””ìì¸</h1>
<p>ë¹Œë“œëŠ” 2ë‹¨ê³„ Docker ë¹Œë“œë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_1.png">
<p>ì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œ Alpine Linux ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Alpineì˜ íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ APKë¥¼ ì‚¬ìš©í•˜ì—¬ OpenSSLì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ì—ì„œ OpenSSLì„ ì‚¬ìš©í•˜ì—¬ ì…€í”„ ì„œëª… ì¸ì¦ì„œì™€ ê´€ë ¨ ê°œì¸ í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
<p>ë‘ ë²ˆì§¸ ë‹¨ê³„ì—ì„œ NGINX ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¹Œë“œëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ì¸ì¦ì„œì™€ ê°œì¸ í‚¤ë¥¼ í¬í•¨í•˜ë„ë¡ ì´ë¯¸ì§€ë¥¼ ìˆ˜ì •í•˜ê³  HTTPSë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ NGINX êµ¬ì„±ì„ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<h1>Dockerfile</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># syntax=docker/<span class="hljs-attr">dockerfile</span>:<span class="hljs-number">1</span>
# ì´ <span class="hljs-title class_">Dockerfile</span>ì„ ë¹Œë“œí•˜ë ¤ë©´ <span class="hljs-title class_">Docker</span> <span class="hljs-title class_">BuildKit</span>ê°€ í™œì„±í™”ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

# ì‚¬ìš©í•  <span class="hljs-title class_">Alpine</span> ë° <span class="hljs-variable constant_">NGINX</span> ë²„ì „ì„ ì •ì˜í•©ë‹ˆë‹¤.
<span class="hljs-variable constant_">ARG</span> <span class="hljs-variable constant_">ALPINE_VERSION</span>=<span class="hljs-number">3.17</span><span class="hljs-number">.3</span>
<span class="hljs-variable constant_">ARG</span> <span class="hljs-variable constant_">NGINX_VERSION</span>=<span class="hljs-number">1.23</span><span class="hljs-number">.4</span>

# <span class="hljs-title class_">OpenSSL</span>ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ <span class="hljs-title class_">Alpine</span> ê¸°ë°˜ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.
<span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">alpine</span>:${<span class="hljs-variable constant_">ALPINE_VERSION</span>} <span class="hljs-keyword">as</span> alpine
<span class="hljs-variable constant_">ARG</span> <span class="hljs-variable constant_">DOMAIN_NAME</span>=localhost
<span class="hljs-variable constant_">ARG</span> <span class="hljs-variable constant_">DAYS_VALID</span>=<span class="hljs-number">30</span>

<span class="hljs-variable constant_">RUN</span> apk add --no-cache openssl
<span class="hljs-variable constant_">RUN</span> echo <span class="hljs-string">"${DAYS_VALID}ì¼ ë™ì•ˆ ìœ íš¨í•œ ${DOMAIN_NAME} ë„ë©”ì¸ì„ ìœ„í•œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤."</span> &#x26;&#x26; \
    openssl \
    req -x509 \
    -nodes \
    -subj <span class="hljs-string">"/CN=${DOMAIN_NAME}"</span> \
    -addext <span class="hljs-string">"subjectAltName=DNS:${DOMAIN_NAME}"</span> \
    -days ${<span class="hljs-variable constant_">DAYS_VALID</span>} \
    -newkey <span class="hljs-attr">rsa</span>:<span class="hljs-number">2048</span> -keyout /tmp/self-signed.<span class="hljs-property">key</span> \
    -out /tmp/self-signed.<span class="hljs-property">crt</span>

# ìœ„ì—ì„œ ìƒì„±í•œ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ <span class="hljs-variable constant_">NGINX</span> ê¸°ë°˜ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.
<span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">nginx</span>:${<span class="hljs-variable constant_">NGINX_VERSION</span>} <span class="hljs-keyword">as</span> nginx
<span class="hljs-variable constant_">COPY</span> --<span class="hljs-keyword">from</span>=alpine /tmp/self-signed.<span class="hljs-property">key</span> /etc/ssl/private
<span class="hljs-variable constant_">COPY</span> --<span class="hljs-keyword">from</span>=alpine /tmp/self-signed.<span class="hljs-property">crt</span> /etc/ssl/certs
<span class="hljs-variable constant_">COPY</span> &#x3C;&#x3C;<span class="hljs-variable constant_">EOF</span> /etc/nginx/conf.<span class="hljs-property">d</span>/<span class="hljs-keyword">default</span>.<span class="hljs-property">conf</span>
server {
    listen <span class="hljs-number">80</span>;
    listen [::]:<span class="hljs-number">80</span>;
    listen <span class="hljs-number">443</span> ssl;
    listen [::]:<span class="hljs-number">443</span> ssl;
    ssl_certificate /etc/ssl/certs/self-signed.<span class="hljs-property">crt</span>;
    ssl_certificate_key /etc/ssl/private/self-signed.<span class="hljs-property">key</span>;
    location / {
        root   /usr/share/nginx/html;
        index  index.<span class="hljs-property">html</span> index.<span class="hljs-property">htm</span>;
    }
    error_page   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.<span class="hljs-property">html</span>;
    location = /50x.<span class="hljs-property">html</span> {
        root   /usr/share/nginx/html;
    }
}
<span class="hljs-variable constant_">EOF</span>
</code></pre>
<p>ğŸ‘‰ ìœ„ì˜ Dockerfileì„ ì‹œë„í•˜ê¸° ì „ì— Docker BuildKitê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”. BuildKitëŠ” ë ˆê±°ì‹œ ë¹Œë”ë¥¼ ëŒ€ì²´í•˜ëŠ” ê°œì„ ëœ ë°±ì—”ë“œë¡œ, Docker ë°ìŠ¤í¬í†± ë° Docker Engine ë²„ì „ 23.0ë¶€í„° ì‚¬ìš©ìë“¤ì—ê²Œ ê¸°ë³¸ ë¹Œë”ë¡œ ì œê³µë©ë‹ˆë‹¤.</p>
<h2>Stage 1: ì¸ì¦ì„œ ìƒì„±</h2>
<p>ì¸ì¦ì„œ ë° ê°œì¸ í‚¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ OpenSSLì„ ì‚¬ìš©í•˜ë©° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ì—¬ ëŒ€í™”í˜• ëª¨ë“œê°€ ì•„ë‹Œ ëª¨ë“œì—ì„œ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ Docker ARGë¥¼ ì§€ì •í•˜ì—¬ ì´ ë‹¨ê³„ë¥¼ ìì‹ ì˜ ìš”êµ¬ì— ë§ê²Œ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>DOMAIN_NAME: ì´ëŠ” ì¸ì¦ì„œê°€ ìœ íš¨í•œ ë„ë©”ì¸ì…ë‹ˆë‹¤. ì´ëŠ” ìì²´ ì„œëª…ëœ ì¸ì¦ì„œì´ë¯€ë¡œ ì—¬ê¸°ì— ì§€ì •í•œ ë„ë©”ì¸ ì´ë¦„ì€ ì¤‘ìš”í•œ ì—­í• ì„ í•˜ì§€ ì•Šì§€ë§Œ, í•´ë‹¹ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì´ ìˆëŠ” ê²½ìš°, ì•¡ì„¸ìŠ¤í•  ë¦¬ì†ŒìŠ¤ì˜ ë„ë©”ì¸ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ë„ë¡ ë³€ê²½í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹Œë“œì— ì‚¬ìš©ëœ ê¸°ë³¸ ë„ë©”ì¸ì€ localhostì…ë‹ˆë‹¤.</li>
<li>DAYS_VALID: ì¸ì¦ì„œê°€ ìœ íš¨í•œ ì¼ìˆ˜ì…ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí•  ìˆ˜ ìˆë„ë¡ ì¶©ë¶„íˆ í° ìˆ«ìë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤. ë¹Œë“œì— ì‚¬ìš©ëœ ê¸°ë³¸ ìœ íš¨ ê¸°ê°„ì€ 30ì¼ì…ë‹ˆë‹¤.</li>
</ul>
<h2>ë‹¨ê³„ 2: ìˆ˜ì •ëœ NGINX ì´ë¯¸ì§€ ìƒì„±</h2>
<p>ì´ ë‹¨ê³„ì—ì„œëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ì¸ì¦ì„œì™€ ê°œì¸ í‚¤ë¥¼ ê°€ì ¸ì™€ ìƒˆë¡œ ìƒì„±ëœ ì´ë¯¸ì§€ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤. ë˜í•œ HTTPSë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•´ ê°„ë‹¨í•œ NGINX êµ¬ì„±ì„ ìƒì„±í•˜ê¸° ìœ„í•´ heredocë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<p>ì§ì ‘ ì´ë¯¸ì§€ ìƒì— ë‹¤ë¥¸ êµ¬ì„±ì„ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš°, heredocë¥¼ ìì²´ ì½˜í…ì¸ ë¡œ ëŒ€ì²´í•˜ê±°ë‚˜ ê²°ê³¼ ì´ë¯¸ì§€ë¥¼ í™•ì¥í•˜ì—¬ ìì²´ ì´ë¯¸ì§€ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ìì²´ êµ¬ì„± íŒŒì¼ë¡œ í™•ì¥í•˜ëŠ” ê²½ìš°, í•´ë‹¹ íŒŒì¼ì€ ë‹¤ìŒ ìœ„ì¹˜ì— ë°°ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
/etc/nginx/conf.d/default.conf.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>ì´ë¯¸ì§€ ë¹Œë“œí•˜ê¸°</h1>
<p>ì•ŒíŒŒì¸ ì´ë¯¸ì§€ì™€ NGINX ì´ë¯¸ì§€ëŠ” ë§¤ìš° ì‘ê¸° ë•Œë¬¸ì— ë¹Œë“œ ì†ë„ê°€ ì •ë§ ë¹ ë¦…ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ ë¹Œë“œë¥¼ ì‹œì‘í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-bash">docker build . -t nginx-self-signed
</code></pre>
<p><img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_2.png" alt="ì´ë¯¸ì§€"></p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°</h1>
<p>ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•  ë•Œ, Docker Engineì´ ì‹¤í–‰ ì¤‘ì¸ ì»´í“¨í„°ì—ì„œ 80ë²ˆ í¬íŠ¸ë¥¼ HTTPìš©, ê·¸ë¦¬ê³  443ë²ˆ í¬íŠ¸ë¥¼ HTTPSìš©ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ ì£¼ì„¸ìš”. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<p>docker run -p 80:80 -p 443:443 nginx-self-signed</p>
<p><img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_3.png" alt="NGINXwithSelf-SignedCertificateonDocker_3"></p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>ì´ë¯¸ì§€ í…ŒìŠ¤íŠ¸ ì¤‘</h1>
<p>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” curlì„ ì‚¬ìš©í•´ì„œ ëª‡ ê°€ì§€ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´…ì‹œë‹¤. ë§Œì•½ ë„ì»¤ ì—”ì§„ì´ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ localhostë¥¼ ì ì ˆí•œ ì£¼ì†Œë¡œ ë°”ê¿”ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.</p>
<h2>HTTP ì ‘ê·¼</h2>
<p>curl localhost</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_4.png" alt="Screenshot"></p>
<p>ì—¬ê¸°ì— ë³¼ ê±´ ë³„ê±° ì—†ì–´ìš”. HTTP ì ‘ê·¼ì€ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•©ë‹ˆë‹¤.</p>
<h2>HTTPS ì ‘ê·¼</h2>
<p>curl <a href="https://localhost" rel="nofollow" target="_blank">https://localhost</a></p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_5.png">
<p>ì—¬ê¸°ì„œ NGINXê°€ HTTPS ìš”ì²­ì— ì‘ë‹µí–ˆì§€ë§Œ curlì€ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ë¡œ ì²˜ë¦¬ë¥¼ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤:</p>
<p>curl: (60) SSL certificate problem: self signed certificate</p>
<p>ì´ê²ƒì€ HTTPSë¥¼ ìœ„í•œ ê¸°ë³¸ TLSë¥¼ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ëœ ìì²´ ì„œëª…ëœ ì¸ì¦ì„œê°€ ì»´í“¨í„°ì— ì˜í•´ ì‹ ë¢°ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ì—¬ê¸°ì—ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>ìì²´ ì„œëª…ëœ ì¸ì¦ì„œë¥¼ OSì˜ ì‹ ë¢°/ì¸ì¦ì„œ ì €ì¥ì†Œì— ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>curlì— ë³´ì•ˆ ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ë„ë¡ ì§€ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<p>ë³´ì•ˆ ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ë„ë¡ curlì— ìš”ì²­í•´ ë´…ì‹œë‹¤:</p>
<p>curl <a href="https://localhost" rel="nofollow" target="_blank">https://localhost</a> --insecure</p>
<p><img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_6.png" alt="ì´ë¯¸ì§€"></p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>curlì€ ì´ì œ ê¸°ì´ˆ ë¦¬ì†ŒìŠ¤ì˜ ë‚´ìš©ì„ ì¦ê²ê²Œ ì¶œë ¥í•©ë‹ˆë‹¤.</p>
<p>ë§ˆì°¬ê°€ì§€ë¡œ, HTTPS URLì„ ì¸í„°ë„· ë¸Œë¼ìš°ì €ë¡œ ì—´ì–´ë³´ë ¤ê³  í•˜ë©´ ë³´ì•ˆ ê²½ê³ ê°€ í‘œì‹œë©ë‹ˆë‹¤. ì‹¤ì œ ê²½ê³  ë©”ì‹œì§€ì™€ ì§„í–‰ ë°©ë²•ì€ ê°ê° ë‹¤ë¥¸ ì¸í„°ë„· ë¸Œë¼ìš°ì €ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Chromeì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:</p>
<p><img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_7.png" alt="Chromeì—ì„œì˜ ë³´ì•ˆ ê²½ê³ "></p>
<p>Chromeì—ì„œ 'ê³ ê¸‰' ë²„íŠ¼ì„ í´ë¦­í•œ ë‹¤ìŒ 'localhostë¡œ ì§„í–‰(ì•ˆì „í•˜ì§€ ì•ŠìŒ)' ì˜µì…˜ì„ í´ë¦­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_8.png">
<h1>ì¶”ê°€ ì½˜í…ì¸ </h1>
<p>ê°€ê¸° ì „ì—, ì—¬ê¸°ì„œ ìƒì„±í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ ìì‹ ì˜ ì½˜í…ì¸ ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ì¶”ê°€ íŒì´ ìˆìŠµë‹ˆë‹¤.</p>
<h2>1. ì—¬ëŸ¬ë¶„ ìì‹ ì˜ ì½˜í…ì¸  ì œê³µ</h2>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ê¸°ë³¸ NGINX í™˜ì˜ í˜ì´ì§€ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì€ ëˆ„êµ¬ì—ê²Œë‚˜ í° ê°€ì¹˜ê°€ ì—†ì„ ê²ƒ ê°™ì•„ìš”. ìì‹ ì˜ ì½˜í…ì¸ ë¡œ ì‚¬ìš©ì ì •ì˜ NGINX ì´ë¯¸ì§€ë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ìˆë„ë¡ ë¡œì»¬ í´ë”ë¥¼ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸í•˜ë©´ ë©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">docker run \
  -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> -p <span class="hljs-number">443</span>:<span class="hljs-number">443</span> \
  -v {<span class="hljs-variable constant_">YOUR</span>-<span class="hljs-variable constant_">PATH</span>}:<span class="hljs-regexp">/usr/</span>share/nginx/html \
nginx-self-signed
</code></pre>
<h2>2. ìì‹ ì˜ ì½˜í…ì¸ ì— ëŒ€í•œ ì—­ë°©í–¥ í”„ë¡ì‹œ êµ¬ì„±</h2>
<p>ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì½˜í…ì¸ ë¥¼ ë§ˆìš´íŠ¸í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²½ìš°, NGINXë¥¼ êµ¬ì„±í•˜ì—¬ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì„œë²„ì— ëŒ€í•œ ì—­ë°©í–¥ í”„ë¡ì‹œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì½”ë“œ ì¡°ê°ì€ ì´ëŸ¬í•œ êµ¬ì„±ì„ ì„¤ì •í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë‚˜ìš”. ê·¸ëŸ¬ë‚˜ ì—­ë°©í–¥ í”„ë¡ì‹œëŠ” ì•„ë˜ì˜ ê°„ë‹¨í•œ ì˜ˆì œë³´ë‹¤ ë” ë³µì¡í•œë°, ì‹¤ì œë¡œ í”„ë¡ì‹œí•˜ëŠ” ë‚´ìš©ì— ë”°ë¼ ë‹¤ì–‘í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>NGINX ì„¤ì • íŒŒì¼ì˜ ìƒë‹¨ì— upstream ì„œë²„ë¥¼ ì •ì˜í•´ì£¼ì„¸ìš”:</p>
<pre><code class="hljs language-js">upstream api-gateway {
  server <span class="hljs-attr">http</span>:<span class="hljs-comment">//some-server:80;</span>
}
</code></pre>
<p>NGINX ì„¤ì • íŒŒì¼ì˜ server ë¸”ë¡ì„ ë‹¤ìŒê³¼ ê°™ì´ ì—…ê·¸ë ˆì´ë“œí•´ì£¼ì„¸ìš”:</p>
<pre><code class="hljs language-js">location /api/ {
    proxy_pass                <span class="hljs-attr">http</span>:<span class="hljs-comment">//api-gateway;</span>
    proxy_redirect            off;
    proxy_set_header          X-<span class="hljs-title class_">Real</span>-<span class="hljs-variable constant_">IP</span> $remote_addr;
    proxy_set_header          X-<span class="hljs-title class_">Forwarded</span>-<span class="hljs-title class_">For</span> $proxy_add_x_forwarded_for;
    proxy_set_header          X-<span class="hljs-title class_">NginX</span>-<span class="hljs-title class_">Proxy</span> <span class="hljs-literal">true</span>;
    proxy_ssl_session_reuse   off;
    proxy_set_header <span class="hljs-title class_">Host</span>     $http_host;
    proxy_cache_bypass        $http_upgrade;
}
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>ê²°ë¡ </h1>
<p>ì´ ê¸€ì—ì„œëŠ” ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” NGINX ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ë¹ ë¥´ê²Œ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí–ˆìŠµë‹ˆë‹¤. ì»´í“¨í„°ì— OpenSSLì„ ì„¤ì¹˜í•  í•„ìš”ê°€ ì—†ìœ¼ë©° ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ openssl ëª…ë ¹ì„ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ì´ Docker ë¹Œë“œì˜ ì¼ë¶€ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>
<p>ë˜í•œ ê²°ê³¼ë¬¼ì¸ NGINX ì´ë¯¸ì§€ì— ìì‹ ì˜ ì½˜í…ì¸ ë¥¼ í†µí•©í•˜ëŠ” ë‘ ê°€ì§€ ì˜ˆì œë¥¼ ì œê³µí–ˆìŠµë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì½˜í…ì¸ ë¥¼ ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì„œë²„ë¡œ ì—­ë°©í–¥ í”„ë¡ì‹œí•˜ëŠ” ë°©ë²• ë“±ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ ê¸€ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œ ë‹¤ì‹œ ëµ™ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ğŸ”” ìƒˆ ì´ì•¼ê¸°ë¥¼ ë°œí–‰í•  ë•Œë§ˆë‹¤ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ìœ¼ì„¸ìš”? ì œ ì½˜í…ì¸ ëŠ” í•­ìƒ ì œê°€ ë³¸ ê²ƒì´ë‚˜ ì¼í–ˆë˜ ê²ƒì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì‹¤ìš©ì ì¸ ê¸°ìˆ  íŒê³¼ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§ ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤:
<a href="https://nmichas.medium.com/subscribe" rel="nofollow" target="_blank">https://nmichas.medium.com/subscribe</a></p>
<p>ğŸš€ ì•„ì§ Medium íšŒì›ì´ ì•„ë‹ˆì‹ ê°€ìš”? ì»¤í”¼ í•œ ì” ê°€ê²©ìœ¼ë¡œ ë§¤ì›” ì œ ì´ì•¼ê¸°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ê·¸ë¦¬ê³  Mediumì˜ ìˆ˜ì²œ ëª…ì˜ ë‹¤ë¥¸ ì‘ê°€ë“¤ì˜ ì´ì•¼ê¸°ì—ë„):
<a href="https://medium.com/@nmichas/membership" rel="nofollow" target="_blank">https://medium.com/@nmichas/membership</a></p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ë„ì»¤ì—ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œ NGINX","description":"","date":"2024-06-19 12:57","slug":"2024-06-19-NGINXwithSelf-SignedCertificateonDocker","content":"\n\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_0.png\" /\u003e\n\nì €í¬ ì½”ë“œë¥¼ ì‘ì—…í•˜ëŠ” ë™ì•ˆ HTTPSì—ì„œ ì‘ì—…ì´ ì˜ë˜ëŠ”ì§€ ë˜ëŠ” ë” ì¤‘ìš”í•œ ê²ƒì€ HTTPSì—ì„œ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ ë¹ ë¥´ê²Œ í™•ì¸í•´ì•¼í•  ë•Œê°€ ë§ìŠµë‹ˆë‹¤. ì˜¨ë¼ì¸ì—ì„œëŠ” CSR(Certificate Sign Request)ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ CSRì„ ìì²´ë¡œ ì„œëª…í•˜ê³  ì›¹ ì„œë²„ì˜ êµ¬ì„±ì„ ìˆ˜ë™ìœ¼ë¡œ ìˆ˜ì •í•˜ì—¬ í•´ë‹¹ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“œëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ê°€ì´ë“œê°€ ë§ì´ ìˆìŠµë‹ˆë‹¤.\n\nì´ ê¸°ì‚¬ì—ì„œëŠ” ì–´ë–¤ ê²ƒë„ ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ í¸ì§‘í•˜ì§€ ì•Šê³ ë„ ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìì²´ ì„œëª…ëœ ì¸ì¦ì„œê°€ ìˆëŠ” NGINX ì»¨í…Œì´ë„ˆë¥¼ ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ëŠ” ì™„ì „ ìë™í™”ëœ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œì‹œí•˜ê² ìŠµë‹ˆë‹¤!\n\n# ë³´ì•ˆ ì£¼ì˜ì‚¬í•­ê³¼ ê²½ê³ \n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- ìì²´ ì„œëª…ëœ ì¸ì¦ì„œëŠ”... ë‹¹ì‹ ë§Œ ì‹ ë¢°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒì‚° í™˜ê²½ì—ì„œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ° ê²½ìš°ì—ëŠ” ì ì ˆí•œ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n- ì´ ê¸€ì—ì„œ ì œì‹œëœ HTTPSë¡œ ì½˜í…ì¸ ë¥¼ ì œê³µí•˜ê²Œë” NGINX êµ¬ì„±ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ê²ƒì…ë‹ˆë‹¤. ë³¸ê²©ì ì¸ TLSê°€ ì ìš©ëœ í”„ë¡œë•ì…˜ NGINXë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ ê³µì‹ ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.\n\nê³µê°œ í‚¤ ì•”í˜¸í™”ë¥¼ ì²˜ìŒ ì‹œì‘í•˜ëŠ” ê²½ìš°, ë„ì›€ì´ ë  ìˆ˜ ìˆëŠ” ì†Œê°œ ê¸°ì‚¬ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n# ì„¤ê³„ ë””ìì¸\n\në¹Œë“œëŠ” 2ë‹¨ê³„ Docker ë¹Œë“œë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_1.png\" /\u003e\n\nì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œ Alpine Linux ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Alpineì˜ íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ APKë¥¼ ì‚¬ìš©í•˜ì—¬ OpenSSLì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ì—ì„œ OpenSSLì„ ì‚¬ìš©í•˜ì—¬ ì…€í”„ ì„œëª… ì¸ì¦ì„œì™€ ê´€ë ¨ ê°œì¸ í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\në‘ ë²ˆì§¸ ë‹¨ê³„ì—ì„œ NGINX ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¹Œë“œëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ì¸ì¦ì„œì™€ ê°œì¸ í‚¤ë¥¼ í¬í•¨í•˜ë„ë¡ ì´ë¯¸ì§€ë¥¼ ìˆ˜ì •í•˜ê³  HTTPSë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ NGINX êµ¬ì„±ì„ ì‘ì„±í•©ë‹ˆë‹¤.\n\n# Dockerfile\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# syntax=docker/dockerfile:1\n# ì´ Dockerfileì„ ë¹Œë“œí•˜ë ¤ë©´ Docker BuildKitê°€ í™œì„±í™”ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n\n# ì‚¬ìš©í•  Alpine ë° NGINX ë²„ì „ì„ ì •ì˜í•©ë‹ˆë‹¤.\nARG ALPINE_VERSION=3.17.3\nARG NGINX_VERSION=1.23.4\n\n# OpenSSLì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Alpine ê¸°ë°˜ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.\nFROM alpine:${ALPINE_VERSION} as alpine\nARG DOMAIN_NAME=localhost\nARG DAYS_VALID=30\n\nRUN apk add --no-cache openssl\nRUN echo \"${DAYS_VALID}ì¼ ë™ì•ˆ ìœ íš¨í•œ ${DOMAIN_NAME} ë„ë©”ì¸ì„ ìœ„í•œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\" \u0026\u0026 \\\n    openssl \\\n    req -x509 \\\n    -nodes \\\n    -subj \"/CN=${DOMAIN_NAME}\" \\\n    -addext \"subjectAltName=DNS:${DOMAIN_NAME}\" \\\n    -days ${DAYS_VALID} \\\n    -newkey rsa:2048 -keyout /tmp/self-signed.key \\\n    -out /tmp/self-signed.crt\n\n# ìœ„ì—ì„œ ìƒì„±í•œ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ NGINX ê¸°ë°˜ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.\nFROM nginx:${NGINX_VERSION} as nginx\nCOPY --from=alpine /tmp/self-signed.key /etc/ssl/private\nCOPY --from=alpine /tmp/self-signed.crt /etc/ssl/certs\nCOPY \u003c\u003cEOF /etc/nginx/conf.d/default.conf\nserver {\n    listen 80;\n    listen [::]:80;\n    listen 443 ssl;\n    listen [::]:443 ssl;\n    ssl_certificate /etc/ssl/certs/self-signed.crt;\n    ssl_certificate_key /etc/ssl/private/self-signed.key;\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\nEOF\n```\n\nğŸ‘‰ ìœ„ì˜ Dockerfileì„ ì‹œë„í•˜ê¸° ì „ì— Docker BuildKitê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”. BuildKitëŠ” ë ˆê±°ì‹œ ë¹Œë”ë¥¼ ëŒ€ì²´í•˜ëŠ” ê°œì„ ëœ ë°±ì—”ë“œë¡œ, Docker ë°ìŠ¤í¬í†± ë° Docker Engine ë²„ì „ 23.0ë¶€í„° ì‚¬ìš©ìë“¤ì—ê²Œ ê¸°ë³¸ ë¹Œë”ë¡œ ì œê³µë©ë‹ˆë‹¤.\n\n## Stage 1: ì¸ì¦ì„œ ìƒì„±\n\nì¸ì¦ì„œ ë° ê°œì¸ í‚¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ OpenSSLì„ ì‚¬ìš©í•˜ë©° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ì—¬ ëŒ€í™”í˜• ëª¨ë“œê°€ ì•„ë‹Œ ëª¨ë“œì—ì„œ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ Docker ARGë¥¼ ì§€ì •í•˜ì—¬ ì´ ë‹¨ê³„ë¥¼ ìì‹ ì˜ ìš”êµ¬ì— ë§ê²Œ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- DOMAIN_NAME: ì´ëŠ” ì¸ì¦ì„œê°€ ìœ íš¨í•œ ë„ë©”ì¸ì…ë‹ˆë‹¤. ì´ëŠ” ìì²´ ì„œëª…ëœ ì¸ì¦ì„œì´ë¯€ë¡œ ì—¬ê¸°ì— ì§€ì •í•œ ë„ë©”ì¸ ì´ë¦„ì€ ì¤‘ìš”í•œ ì—­í• ì„ í•˜ì§€ ì•Šì§€ë§Œ, í•´ë‹¹ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì´ ìˆëŠ” ê²½ìš°, ì•¡ì„¸ìŠ¤í•  ë¦¬ì†ŒìŠ¤ì˜ ë„ë©”ì¸ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ë„ë¡ ë³€ê²½í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹Œë“œì— ì‚¬ìš©ëœ ê¸°ë³¸ ë„ë©”ì¸ì€ localhostì…ë‹ˆë‹¤.\n- DAYS_VALID: ì¸ì¦ì„œê°€ ìœ íš¨í•œ ì¼ìˆ˜ì…ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí•  ìˆ˜ ìˆë„ë¡ ì¶©ë¶„íˆ í° ìˆ«ìë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤. ë¹Œë“œì— ì‚¬ìš©ëœ ê¸°ë³¸ ìœ íš¨ ê¸°ê°„ì€ 30ì¼ì…ë‹ˆë‹¤.\n\n## ë‹¨ê³„ 2: ìˆ˜ì •ëœ NGINX ì´ë¯¸ì§€ ìƒì„±\n\nì´ ë‹¨ê³„ì—ì„œëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ì¸ì¦ì„œì™€ ê°œì¸ í‚¤ë¥¼ ê°€ì ¸ì™€ ìƒˆë¡œ ìƒì„±ëœ ì´ë¯¸ì§€ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤. ë˜í•œ HTTPSë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•´ ê°„ë‹¨í•œ NGINX êµ¬ì„±ì„ ìƒì„±í•˜ê¸° ìœ„í•´ heredocë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\nì§ì ‘ ì´ë¯¸ì§€ ìƒì— ë‹¤ë¥¸ êµ¬ì„±ì„ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš°, heredocë¥¼ ìì²´ ì½˜í…ì¸ ë¡œ ëŒ€ì²´í•˜ê±°ë‚˜ ê²°ê³¼ ì´ë¯¸ì§€ë¥¼ í™•ì¥í•˜ì—¬ ìì²´ ì´ë¯¸ì§€ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ìì²´ êµ¬ì„± íŒŒì¼ë¡œ í™•ì¥í•˜ëŠ” ê²½ìš°, í•´ë‹¹ íŒŒì¼ì€ ë‹¤ìŒ ìœ„ì¹˜ì— ë°°ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.\n/etc/nginx/conf.d/default.conf.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ì´ë¯¸ì§€ ë¹Œë“œí•˜ê¸°\n\nì•ŒíŒŒì¸ ì´ë¯¸ì§€ì™€ NGINX ì´ë¯¸ì§€ëŠ” ë§¤ìš° ì‘ê¸° ë•Œë¬¸ì— ë¹Œë“œ ì†ë„ê°€ ì •ë§ ë¹ ë¦…ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ ë¹Œë“œë¥¼ ì‹œì‘í•˜ì„¸ìš”:\n\n```bash\ndocker build . -t nginx-self-signed\n```\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_2.png)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°\n\nì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•  ë•Œ, Docker Engineì´ ì‹¤í–‰ ì¤‘ì¸ ì»´í“¨í„°ì—ì„œ 80ë²ˆ í¬íŠ¸ë¥¼ HTTPìš©, ê·¸ë¦¬ê³  443ë²ˆ í¬íŠ¸ë¥¼ HTTPSìš©ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ ì£¼ì„¸ìš”. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\ndocker run -p 80:80 -p 443:443 nginx-self-signed\n\n![NGINXwithSelf-SignedCertificateonDocker_3](/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_3.png)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ì´ë¯¸ì§€ í…ŒìŠ¤íŠ¸ ì¤‘\n\nì‹ ë¢°í•  ìˆ˜ ìˆëŠ” curlì„ ì‚¬ìš©í•´ì„œ ëª‡ ê°€ì§€ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´…ì‹œë‹¤. ë§Œì•½ ë„ì»¤ ì—”ì§„ì´ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ localhostë¥¼ ì ì ˆí•œ ì£¼ì†Œë¡œ ë°”ê¿”ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.\n\n## HTTP ì ‘ê·¼\n\ncurl localhost\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![Screenshot](/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_4.png)\n\nì—¬ê¸°ì— ë³¼ ê±´ ë³„ê±° ì—†ì–´ìš”. HTTP ì ‘ê·¼ì€ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•©ë‹ˆë‹¤.\n\n## HTTPS ì ‘ê·¼\n\ncurl https://localhost\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_5.png\" /\u003e\n\nì—¬ê¸°ì„œ NGINXê°€ HTTPS ìš”ì²­ì— ì‘ë‹µí–ˆì§€ë§Œ curlì€ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ë¡œ ì²˜ë¦¬ë¥¼ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤:\n\ncurl: (60) SSL certificate problem: self signed certificate\n\nì´ê²ƒì€ HTTPSë¥¼ ìœ„í•œ ê¸°ë³¸ TLSë¥¼ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ëœ ìì²´ ì„œëª…ëœ ì¸ì¦ì„œê°€ ì»´í“¨í„°ì— ì˜í•´ ì‹ ë¢°ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ì—¬ê¸°ì—ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- ìì²´ ì„œëª…ëœ ì¸ì¦ì„œë¥¼ OSì˜ ì‹ ë¢°/ì¸ì¦ì„œ ì €ì¥ì†Œì— ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- curlì— ë³´ì•ˆ ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ë„ë¡ ì§€ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në³´ì•ˆ ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ë„ë¡ curlì— ìš”ì²­í•´ ë´…ì‹œë‹¤:\n\ncurl https://localhost --insecure\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_6.png)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\ncurlì€ ì´ì œ ê¸°ì´ˆ ë¦¬ì†ŒìŠ¤ì˜ ë‚´ìš©ì„ ì¦ê²ê²Œ ì¶œë ¥í•©ë‹ˆë‹¤.\n\në§ˆì°¬ê°€ì§€ë¡œ, HTTPS URLì„ ì¸í„°ë„· ë¸Œë¼ìš°ì €ë¡œ ì—´ì–´ë³´ë ¤ê³  í•˜ë©´ ë³´ì•ˆ ê²½ê³ ê°€ í‘œì‹œë©ë‹ˆë‹¤. ì‹¤ì œ ê²½ê³  ë©”ì‹œì§€ì™€ ì§„í–‰ ë°©ë²•ì€ ê°ê° ë‹¤ë¥¸ ì¸í„°ë„· ë¸Œë¼ìš°ì €ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Chromeì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:\n\n![Chromeì—ì„œì˜ ë³´ì•ˆ ê²½ê³ ](/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_7.png)\n\nChromeì—ì„œ 'ê³ ê¸‰' ë²„íŠ¼ì„ í´ë¦­í•œ ë‹¤ìŒ 'localhostë¡œ ì§„í–‰(ì•ˆì „í•˜ì§€ ì•ŠìŒ)' ì˜µì…˜ì„ í´ë¦­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_8.png\" /\u003e\n\n# ì¶”ê°€ ì½˜í…ì¸ \n\nê°€ê¸° ì „ì—, ì—¬ê¸°ì„œ ìƒì„±í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ ìì‹ ì˜ ì½˜í…ì¸ ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ì¶”ê°€ íŒì´ ìˆìŠµë‹ˆë‹¤.\n\n## 1. ì—¬ëŸ¬ë¶„ ìì‹ ì˜ ì½˜í…ì¸  ì œê³µ\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nê¸°ë³¸ NGINX í™˜ì˜ í˜ì´ì§€ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì€ ëˆ„êµ¬ì—ê²Œë‚˜ í° ê°€ì¹˜ê°€ ì—†ì„ ê²ƒ ê°™ì•„ìš”. ìì‹ ì˜ ì½˜í…ì¸ ë¡œ ì‚¬ìš©ì ì •ì˜ NGINX ì´ë¯¸ì§€ë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ìˆë„ë¡ ë¡œì»¬ í´ë”ë¥¼ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸í•˜ë©´ ë©ë‹ˆë‹¤:\n\n```js\ndocker run \\\n  -p 80:80 -p 443:443 \\\n  -v {YOUR-PATH}:/usr/share/nginx/html \\\nnginx-self-signed\n```\n\n## 2. ìì‹ ì˜ ì½˜í…ì¸ ì— ëŒ€í•œ ì—­ë°©í–¥ í”„ë¡ì‹œ êµ¬ì„±\n\nì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì½˜í…ì¸ ë¥¼ ë§ˆìš´íŠ¸í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²½ìš°, NGINXë¥¼ êµ¬ì„±í•˜ì—¬ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì„œë²„ì— ëŒ€í•œ ì—­ë°©í–¥ í”„ë¡ì‹œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì½”ë“œ ì¡°ê°ì€ ì´ëŸ¬í•œ êµ¬ì„±ì„ ì„¤ì •í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë‚˜ìš”. ê·¸ëŸ¬ë‚˜ ì—­ë°©í–¥ í”„ë¡ì‹œëŠ” ì•„ë˜ì˜ ê°„ë‹¨í•œ ì˜ˆì œë³´ë‹¤ ë” ë³µì¡í•œë°, ì‹¤ì œë¡œ í”„ë¡ì‹œí•˜ëŠ” ë‚´ìš©ì— ë”°ë¼ ë‹¤ì–‘í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nNGINX ì„¤ì • íŒŒì¼ì˜ ìƒë‹¨ì— upstream ì„œë²„ë¥¼ ì •ì˜í•´ì£¼ì„¸ìš”:\n\n```js\nupstream api-gateway {\n  server http://some-server:80;\n}\n```\n\nNGINX ì„¤ì • íŒŒì¼ì˜ server ë¸”ë¡ì„ ë‹¤ìŒê³¼ ê°™ì´ ì—…ê·¸ë ˆì´ë“œí•´ì£¼ì„¸ìš”:\n\n```js\nlocation /api/ {\n    proxy_pass                http://api-gateway;\n    proxy_redirect            off;\n    proxy_set_header          X-Real-IP $remote_addr;\n    proxy_set_header          X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header          X-NginX-Proxy true;\n    proxy_ssl_session_reuse   off;\n    proxy_set_header Host     $http_host;\n    proxy_cache_bypass        $http_upgrade;\n}\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ê²°ë¡ \n\nì´ ê¸€ì—ì„œëŠ” ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” NGINX ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ë¹ ë¥´ê²Œ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí–ˆìŠµë‹ˆë‹¤. ì»´í“¨í„°ì— OpenSSLì„ ì„¤ì¹˜í•  í•„ìš”ê°€ ì—†ìœ¼ë©° ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ openssl ëª…ë ¹ì„ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ì´ Docker ë¹Œë“œì˜ ì¼ë¶€ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.\n\në˜í•œ ê²°ê³¼ë¬¼ì¸ NGINX ì´ë¯¸ì§€ì— ìì‹ ì˜ ì½˜í…ì¸ ë¥¼ í†µí•©í•˜ëŠ” ë‘ ê°€ì§€ ì˜ˆì œë¥¼ ì œê³µí–ˆìŠµë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì½˜í…ì¸ ë¥¼ ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì„œë²„ë¡œ ì—­ë°©í–¥ í”„ë¡ì‹œí•˜ëŠ” ë°©ë²• ë“±ì´ ìˆìŠµë‹ˆë‹¤.\n\nì´ ê¸€ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œ ë‹¤ì‹œ ëµ™ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nğŸ”” ìƒˆ ì´ì•¼ê¸°ë¥¼ ë°œí–‰í•  ë•Œë§ˆë‹¤ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ìœ¼ì„¸ìš”? ì œ ì½˜í…ì¸ ëŠ” í•­ìƒ ì œê°€ ë³¸ ê²ƒì´ë‚˜ ì¼í–ˆë˜ ê²ƒì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì‹¤ìš©ì ì¸ ê¸°ìˆ  íŒê³¼ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§ ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤:\nhttps://nmichas.medium.com/subscribe\n\nğŸš€ ì•„ì§ Medium íšŒì›ì´ ì•„ë‹ˆì‹ ê°€ìš”? ì»¤í”¼ í•œ ì” ê°€ê²©ìœ¼ë¡œ ë§¤ì›” ì œ ì´ì•¼ê¸°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ê·¸ë¦¬ê³  Mediumì˜ ìˆ˜ì²œ ëª…ì˜ ë‹¤ë¥¸ ì‘ê°€ë“¤ì˜ ì´ì•¼ê¸°ì—ë„):\nhttps://medium.com/@nmichas/membership\n","ogImage":{"url":"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_0.png"},"coverImage":"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_0.png","tag":["Tech"],"readingTime":12},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_0.png\"\u003e\n\u003cp\u003eì €í¬ ì½”ë“œë¥¼ ì‘ì—…í•˜ëŠ” ë™ì•ˆ HTTPSì—ì„œ ì‘ì—…ì´ ì˜ë˜ëŠ”ì§€ ë˜ëŠ” ë” ì¤‘ìš”í•œ ê²ƒì€ HTTPSì—ì„œ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ ë¹ ë¥´ê²Œ í™•ì¸í•´ì•¼í•  ë•Œê°€ ë§ìŠµë‹ˆë‹¤. ì˜¨ë¼ì¸ì—ì„œëŠ” CSR(Certificate Sign Request)ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ CSRì„ ìì²´ë¡œ ì„œëª…í•˜ê³  ì›¹ ì„œë²„ì˜ êµ¬ì„±ì„ ìˆ˜ë™ìœ¼ë¡œ ìˆ˜ì •í•˜ì—¬ í•´ë‹¹ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“œëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ê°€ì´ë“œê°€ ë§ì´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ê¸°ì‚¬ì—ì„œëŠ” ì–´ë–¤ ê²ƒë„ ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ í¸ì§‘í•˜ì§€ ì•Šê³ ë„ ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìì²´ ì„œëª…ëœ ì¸ì¦ì„œê°€ ìˆëŠ” NGINX ì»¨í…Œì´ë„ˆë¥¼ ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ëŠ” ì™„ì „ ìë™í™”ëœ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œì‹œí•˜ê² ìŠµë‹ˆë‹¤!\u003c/p\u003e\n\u003ch1\u003eë³´ì•ˆ ì£¼ì˜ì‚¬í•­ê³¼ ê²½ê³ \u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eìì²´ ì„œëª…ëœ ì¸ì¦ì„œëŠ”... ë‹¹ì‹ ë§Œ ì‹ ë¢°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒì‚° í™˜ê²½ì—ì„œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ° ê²½ìš°ì—ëŠ” ì ì ˆí•œ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\u003c/li\u003e\n\u003cli\u003eì´ ê¸€ì—ì„œ ì œì‹œëœ HTTPSë¡œ ì½˜í…ì¸ ë¥¼ ì œê³µí•˜ê²Œë” NGINX êµ¬ì„±ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ê²ƒì…ë‹ˆë‹¤. ë³¸ê²©ì ì¸ TLSê°€ ì ìš©ëœ í”„ë¡œë•ì…˜ NGINXë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ ê³µì‹ ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eê³µê°œ í‚¤ ì•”í˜¸í™”ë¥¼ ì²˜ìŒ ì‹œì‘í•˜ëŠ” ê²½ìš°, ë„ì›€ì´ ë  ìˆ˜ ìˆëŠ” ì†Œê°œ ê¸°ì‚¬ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì„¤ê³„ ë””ìì¸\u003c/h1\u003e\n\u003cp\u003eë¹Œë“œëŠ” 2ë‹¨ê³„ Docker ë¹Œë“œë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_1.png\"\u003e\n\u003cp\u003eì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œ Alpine Linux ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Alpineì˜ íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ APKë¥¼ ì‚¬ìš©í•˜ì—¬ OpenSSLì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ì—ì„œ OpenSSLì„ ì‚¬ìš©í•˜ì—¬ ì…€í”„ ì„œëª… ì¸ì¦ì„œì™€ ê´€ë ¨ ê°œì¸ í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë‘ ë²ˆì§¸ ë‹¨ê³„ì—ì„œ NGINX ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¹Œë“œëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ì¸ì¦ì„œì™€ ê°œì¸ í‚¤ë¥¼ í¬í•¨í•˜ë„ë¡ ì´ë¯¸ì§€ë¥¼ ìˆ˜ì •í•˜ê³  HTTPSë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ NGINX êµ¬ì„±ì„ ì‘ì„±í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eDockerfile\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# syntax=docker/\u003cspan class=\"hljs-attr\"\u003edockerfile\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n# ì´ \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003eì„ ë¹Œë“œí•˜ë ¤ë©´ \u003cspan class=\"hljs-title class_\"\u003eDocker\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBuildKit\u003c/span\u003eê°€ í™œì„±í™”ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n\n# ì‚¬ìš©í•  \u003cspan class=\"hljs-title class_\"\u003eAlpine\u003c/span\u003e ë° \u003cspan class=\"hljs-variable constant_\"\u003eNGINX\u003c/span\u003e ë²„ì „ì„ ì •ì˜í•©ë‹ˆë‹¤.\n\u003cspan class=\"hljs-variable constant_\"\u003eARG\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eALPINE_VERSION\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e3.17\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eARG\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eNGINX_VERSION\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1.23\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003eOpenSSL\u003c/span\u003eì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ \u003cspan class=\"hljs-title class_\"\u003eAlpine\u003c/span\u003e ê¸°ë°˜ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ealpine\u003c/span\u003e:${\u003cspan class=\"hljs-variable constant_\"\u003eALPINE_VERSION\u003c/span\u003e} \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e alpine\n\u003cspan class=\"hljs-variable constant_\"\u003eARG\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDOMAIN_NAME\u003c/span\u003e=localhost\n\u003cspan class=\"hljs-variable constant_\"\u003eARG\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDAYS_VALID\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN\u003c/span\u003e apk add --no-cache openssl\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN\u003c/span\u003e echo \u003cspan class=\"hljs-string\"\u003e\"${DAYS_VALID}ì¼ ë™ì•ˆ ìœ íš¨í•œ ${DOMAIN_NAME} ë„ë©”ì¸ì„ ìœ„í•œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\"\u003c/span\u003e \u0026#x26;\u0026#x26; \\\n    openssl \\\n    req -x509 \\\n    -nodes \\\n    -subj \u003cspan class=\"hljs-string\"\u003e\"/CN=${DOMAIN_NAME}\"\u003c/span\u003e \\\n    -addext \u003cspan class=\"hljs-string\"\u003e\"subjectAltName=DNS:${DOMAIN_NAME}\"\u003c/span\u003e \\\n    -days ${\u003cspan class=\"hljs-variable constant_\"\u003eDAYS_VALID\u003c/span\u003e} \\\n    -newkey \u003cspan class=\"hljs-attr\"\u003ersa\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e2048\u003c/span\u003e -keyout /tmp/self-signed.\u003cspan class=\"hljs-property\"\u003ekey\u003c/span\u003e \\\n    -out /tmp/self-signed.\u003cspan class=\"hljs-property\"\u003ecrt\u003c/span\u003e\n\n# ìœ„ì—ì„œ ìƒì„±í•œ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ \u003cspan class=\"hljs-variable constant_\"\u003eNGINX\u003c/span\u003e ê¸°ë°˜ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003enginx\u003c/span\u003e:${\u003cspan class=\"hljs-variable constant_\"\u003eNGINX_VERSION\u003c/span\u003e} \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e nginx\n\u003cspan class=\"hljs-variable constant_\"\u003eCOPY\u003c/span\u003e --\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e=alpine /tmp/self-signed.\u003cspan class=\"hljs-property\"\u003ekey\u003c/span\u003e /etc/ssl/private\n\u003cspan class=\"hljs-variable constant_\"\u003eCOPY\u003c/span\u003e --\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e=alpine /tmp/self-signed.\u003cspan class=\"hljs-property\"\u003ecrt\u003c/span\u003e /etc/ssl/certs\n\u003cspan class=\"hljs-variable constant_\"\u003eCOPY\u003c/span\u003e \u0026#x3C;\u0026#x3C;\u003cspan class=\"hljs-variable constant_\"\u003eEOF\u003c/span\u003e /etc/nginx/conf.\u003cspan class=\"hljs-property\"\u003ed\u003c/span\u003e/\u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econf\u003c/span\u003e\nserver {\n    listen \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e;\n    listen [::]:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e;\n    listen \u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e ssl;\n    listen [::]:\u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e ssl;\n    ssl_certificate /etc/ssl/certs/self-signed.\u003cspan class=\"hljs-property\"\u003ecrt\u003c/span\u003e;\n    ssl_certificate_key /etc/ssl/private/self-signed.\u003cspan class=\"hljs-property\"\u003ekey\u003c/span\u003e;\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.\u003cspan class=\"hljs-property\"\u003ehtml\u003c/span\u003e index.\u003cspan class=\"hljs-property\"\u003ehtm\u003c/span\u003e;\n    }\n    error_page   \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e502\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e503\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e504\u003c/span\u003e  /50x.\u003cspan class=\"hljs-property\"\u003ehtml\u003c/span\u003e;\n    location = /50x.\u003cspan class=\"hljs-property\"\u003ehtml\u003c/span\u003e {\n        root   /usr/share/nginx/html;\n    }\n}\n\u003cspan class=\"hljs-variable constant_\"\u003eEOF\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eğŸ‘‰ ìœ„ì˜ Dockerfileì„ ì‹œë„í•˜ê¸° ì „ì— Docker BuildKitê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”. BuildKitëŠ” ë ˆê±°ì‹œ ë¹Œë”ë¥¼ ëŒ€ì²´í•˜ëŠ” ê°œì„ ëœ ë°±ì—”ë“œë¡œ, Docker ë°ìŠ¤í¬í†± ë° Docker Engine ë²„ì „ 23.0ë¶€í„° ì‚¬ìš©ìë“¤ì—ê²Œ ê¸°ë³¸ ë¹Œë”ë¡œ ì œê³µë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eStage 1: ì¸ì¦ì„œ ìƒì„±\u003c/h2\u003e\n\u003cp\u003eì¸ì¦ì„œ ë° ê°œì¸ í‚¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ OpenSSLì„ ì‚¬ìš©í•˜ë©° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ì—¬ ëŒ€í™”í˜• ëª¨ë“œê°€ ì•„ë‹Œ ëª¨ë“œì—ì„œ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ Docker ARGë¥¼ ì§€ì •í•˜ì—¬ ì´ ë‹¨ê³„ë¥¼ ìì‹ ì˜ ìš”êµ¬ì— ë§ê²Œ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eDOMAIN_NAME: ì´ëŠ” ì¸ì¦ì„œê°€ ìœ íš¨í•œ ë„ë©”ì¸ì…ë‹ˆë‹¤. ì´ëŠ” ìì²´ ì„œëª…ëœ ì¸ì¦ì„œì´ë¯€ë¡œ ì—¬ê¸°ì— ì§€ì •í•œ ë„ë©”ì¸ ì´ë¦„ì€ ì¤‘ìš”í•œ ì—­í• ì„ í•˜ì§€ ì•Šì§€ë§Œ, í•´ë‹¹ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì´ ìˆëŠ” ê²½ìš°, ì•¡ì„¸ìŠ¤í•  ë¦¬ì†ŒìŠ¤ì˜ ë„ë©”ì¸ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ë„ë¡ ë³€ê²½í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹Œë“œì— ì‚¬ìš©ëœ ê¸°ë³¸ ë„ë©”ì¸ì€ localhostì…ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eDAYS_VALID: ì¸ì¦ì„œê°€ ìœ íš¨í•œ ì¼ìˆ˜ì…ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí•  ìˆ˜ ìˆë„ë¡ ì¶©ë¶„íˆ í° ìˆ«ìë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤. ë¹Œë“œì— ì‚¬ìš©ëœ ê¸°ë³¸ ìœ íš¨ ê¸°ê°„ì€ 30ì¼ì…ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eë‹¨ê³„ 2: ìˆ˜ì •ëœ NGINX ì´ë¯¸ì§€ ìƒì„±\u003c/h2\u003e\n\u003cp\u003eì´ ë‹¨ê³„ì—ì„œëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ì¸ì¦ì„œì™€ ê°œì¸ í‚¤ë¥¼ ê°€ì ¸ì™€ ìƒˆë¡œ ìƒì„±ëœ ì´ë¯¸ì§€ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤. ë˜í•œ HTTPSë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•´ ê°„ë‹¨í•œ NGINX êµ¬ì„±ì„ ìƒì„±í•˜ê¸° ìœ„í•´ heredocë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì§ì ‘ ì´ë¯¸ì§€ ìƒì— ë‹¤ë¥¸ êµ¬ì„±ì„ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš°, heredocë¥¼ ìì²´ ì½˜í…ì¸ ë¡œ ëŒ€ì²´í•˜ê±°ë‚˜ ê²°ê³¼ ì´ë¯¸ì§€ë¥¼ í™•ì¥í•˜ì—¬ ìì²´ ì´ë¯¸ì§€ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ìì²´ êµ¬ì„± íŒŒì¼ë¡œ í™•ì¥í•˜ëŠ” ê²½ìš°, í•´ë‹¹ íŒŒì¼ì€ ë‹¤ìŒ ìœ„ì¹˜ì— ë°°ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.\n/etc/nginx/conf.d/default.conf.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eì´ë¯¸ì§€ ë¹Œë“œí•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eì•ŒíŒŒì¸ ì´ë¯¸ì§€ì™€ NGINX ì´ë¯¸ì§€ëŠ” ë§¤ìš° ì‘ê¸° ë•Œë¬¸ì— ë¹Œë“œ ì†ë„ê°€ ì •ë§ ë¹ ë¦…ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ ë¹Œë“œë¥¼ ì‹œì‘í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edocker build . -t nginx-self-signed\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_2.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•  ë•Œ, Docker Engineì´ ì‹¤í–‰ ì¤‘ì¸ ì»´í“¨í„°ì—ì„œ 80ë²ˆ í¬íŠ¸ë¥¼ HTTPìš©, ê·¸ë¦¬ê³  443ë²ˆ í¬íŠ¸ë¥¼ HTTPSìš©ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ ì£¼ì„¸ìš”. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003edocker run -p 80:80 -p 443:443 nginx-self-signed\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_3.png\" alt=\"NGINXwithSelf-SignedCertificateonDocker_3\"\u003e\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eì´ë¯¸ì§€ í…ŒìŠ¤íŠ¸ ì¤‘\u003c/h1\u003e\n\u003cp\u003eì‹ ë¢°í•  ìˆ˜ ìˆëŠ” curlì„ ì‚¬ìš©í•´ì„œ ëª‡ ê°€ì§€ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´…ì‹œë‹¤. ë§Œì•½ ë„ì»¤ ì—”ì§„ì´ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ localhostë¥¼ ì ì ˆí•œ ì£¼ì†Œë¡œ ë°”ê¿”ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eHTTP ì ‘ê·¼\u003c/h2\u003e\n\u003cp\u003ecurl localhost\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_4.png\" alt=\"Screenshot\"\u003e\u003c/p\u003e\n\u003cp\u003eì—¬ê¸°ì— ë³¼ ê±´ ë³„ê±° ì—†ì–´ìš”. HTTP ì ‘ê·¼ì€ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eHTTPS ì ‘ê·¼\u003c/h2\u003e\n\u003cp\u003ecurl \u003ca href=\"https://localhost\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://localhost\u003c/a\u003e\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_5.png\"\u003e\n\u003cp\u003eì—¬ê¸°ì„œ NGINXê°€ HTTPS ìš”ì²­ì— ì‘ë‹µí–ˆì§€ë§Œ curlì€ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ë¡œ ì²˜ë¦¬ë¥¼ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003ecurl: (60) SSL certificate problem: self signed certificate\u003c/p\u003e\n\u003cp\u003eì´ê²ƒì€ HTTPSë¥¼ ìœ„í•œ ê¸°ë³¸ TLSë¥¼ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ëœ ìì²´ ì„œëª…ëœ ì¸ì¦ì„œê°€ ì»´í“¨í„°ì— ì˜í•´ ì‹ ë¢°ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ì—¬ê¸°ì—ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eìì²´ ì„œëª…ëœ ì¸ì¦ì„œë¥¼ OSì˜ ì‹ ë¢°/ì¸ì¦ì„œ ì €ì¥ì†Œì— ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003ecurlì— ë³´ì•ˆ ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ë„ë¡ ì§€ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eë³´ì•ˆ ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ë„ë¡ curlì— ìš”ì²­í•´ ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cp\u003ecurl \u003ca href=\"https://localhost\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://localhost\u003c/a\u003e --insecure\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_6.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003ecurlì€ ì´ì œ ê¸°ì´ˆ ë¦¬ì†ŒìŠ¤ì˜ ë‚´ìš©ì„ ì¦ê²ê²Œ ì¶œë ¥í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë§ˆì°¬ê°€ì§€ë¡œ, HTTPS URLì„ ì¸í„°ë„· ë¸Œë¼ìš°ì €ë¡œ ì—´ì–´ë³´ë ¤ê³  í•˜ë©´ ë³´ì•ˆ ê²½ê³ ê°€ í‘œì‹œë©ë‹ˆë‹¤. ì‹¤ì œ ê²½ê³  ë©”ì‹œì§€ì™€ ì§„í–‰ ë°©ë²•ì€ ê°ê° ë‹¤ë¥¸ ì¸í„°ë„· ë¸Œë¼ìš°ì €ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Chromeì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_7.png\" alt=\"Chromeì—ì„œì˜ ë³´ì•ˆ ê²½ê³ \"\u003e\u003c/p\u003e\n\u003cp\u003eChromeì—ì„œ 'ê³ ê¸‰' ë²„íŠ¼ì„ í´ë¦­í•œ ë‹¤ìŒ 'localhostë¡œ ì§„í–‰(ì•ˆì „í•˜ì§€ ì•ŠìŒ)' ì˜µì…˜ì„ í´ë¦­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/assets/img/2024-06-19-NGINXwithSelf-SignedCertificateonDocker_8.png\"\u003e\n\u003ch1\u003eì¶”ê°€ ì½˜í…ì¸ \u003c/h1\u003e\n\u003cp\u003eê°€ê¸° ì „ì—, ì—¬ê¸°ì„œ ìƒì„±í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ ìì‹ ì˜ ì½˜í…ì¸ ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ì¶”ê°€ íŒì´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e1. ì—¬ëŸ¬ë¶„ ìì‹ ì˜ ì½˜í…ì¸  ì œê³µ\u003c/h2\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eê¸°ë³¸ NGINX í™˜ì˜ í˜ì´ì§€ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì€ ëˆ„êµ¬ì—ê²Œë‚˜ í° ê°€ì¹˜ê°€ ì—†ì„ ê²ƒ ê°™ì•„ìš”. ìì‹ ì˜ ì½˜í…ì¸ ë¡œ ì‚¬ìš©ì ì •ì˜ NGINX ì´ë¯¸ì§€ë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ìˆë„ë¡ ë¡œì»¬ í´ë”ë¥¼ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸í•˜ë©´ ë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edocker run \\\n  -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e -p \u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e \\\n  -v {\u003cspan class=\"hljs-variable constant_\"\u003eYOUR\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003ePATH\u003c/span\u003e}:\u003cspan class=\"hljs-regexp\"\u003e/usr/\u003c/span\u003eshare/nginx/html \\\nnginx-self-signed\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e2. ìì‹ ì˜ ì½˜í…ì¸ ì— ëŒ€í•œ ì—­ë°©í–¥ í”„ë¡ì‹œ êµ¬ì„±\u003c/h2\u003e\n\u003cp\u003eì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì½˜í…ì¸ ë¥¼ ë§ˆìš´íŠ¸í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²½ìš°, NGINXë¥¼ êµ¬ì„±í•˜ì—¬ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì„œë²„ì— ëŒ€í•œ ì—­ë°©í–¥ í”„ë¡ì‹œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì½”ë“œ ì¡°ê°ì€ ì´ëŸ¬í•œ êµ¬ì„±ì„ ì„¤ì •í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë‚˜ìš”. ê·¸ëŸ¬ë‚˜ ì—­ë°©í–¥ í”„ë¡ì‹œëŠ” ì•„ë˜ì˜ ê°„ë‹¨í•œ ì˜ˆì œë³´ë‹¤ ë” ë³µì¡í•œë°, ì‹¤ì œë¡œ í”„ë¡ì‹œí•˜ëŠ” ë‚´ìš©ì— ë”°ë¼ ë‹¤ì–‘í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eNGINX ì„¤ì • íŒŒì¼ì˜ ìƒë‹¨ì— upstream ì„œë²„ë¥¼ ì •ì˜í•´ì£¼ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eupstream api-gateway {\n  server \u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//some-server:80;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNGINX ì„¤ì • íŒŒì¼ì˜ server ë¸”ë¡ì„ ë‹¤ìŒê³¼ ê°™ì´ ì—…ê·¸ë ˆì´ë“œí•´ì£¼ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003elocation /api/ {\n    proxy_pass                \u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//api-gateway;\u003c/span\u003e\n    proxy_redirect            off;\n    proxy_set_header          X-\u003cspan class=\"hljs-title class_\"\u003eReal\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eIP\u003c/span\u003e $remote_addr;\n    proxy_set_header          X-\u003cspan class=\"hljs-title class_\"\u003eForwarded\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eFor\u003c/span\u003e $proxy_add_x_forwarded_for;\n    proxy_set_header          X-\u003cspan class=\"hljs-title class_\"\u003eNginX\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eProxy\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n    proxy_ssl_session_reuse   off;\n    proxy_set_header \u003cspan class=\"hljs-title class_\"\u003eHost\u003c/span\u003e     $http_host;\n    proxy_cache_bypass        $http_upgrade;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eê²°ë¡ \u003c/h1\u003e\n\u003cp\u003eì´ ê¸€ì—ì„œëŠ” ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” NGINX ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ë¹ ë¥´ê²Œ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí–ˆìŠµë‹ˆë‹¤. ì»´í“¨í„°ì— OpenSSLì„ ì„¤ì¹˜í•  í•„ìš”ê°€ ì—†ìœ¼ë©° ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ openssl ëª…ë ¹ì„ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ì´ Docker ë¹Œë“œì˜ ì¼ë¶€ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë˜í•œ ê²°ê³¼ë¬¼ì¸ NGINX ì´ë¯¸ì§€ì— ìì‹ ì˜ ì½˜í…ì¸ ë¥¼ í†µí•©í•˜ëŠ” ë‘ ê°€ì§€ ì˜ˆì œë¥¼ ì œê³µí–ˆìŠµë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì½˜í…ì¸ ë¥¼ ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì„œë²„ë¡œ ì—­ë°©í–¥ í”„ë¡ì‹œí•˜ëŠ” ë°©ë²• ë“±ì´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ê¸€ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œ ë‹¤ì‹œ ëµ™ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eğŸ”” ìƒˆ ì´ì•¼ê¸°ë¥¼ ë°œí–‰í•  ë•Œë§ˆë‹¤ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ìœ¼ì„¸ìš”? ì œ ì½˜í…ì¸ ëŠ” í•­ìƒ ì œê°€ ë³¸ ê²ƒì´ë‚˜ ì¼í–ˆë˜ ê²ƒì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì‹¤ìš©ì ì¸ ê¸°ìˆ  íŒê³¼ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§ ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤:\n\u003ca href=\"https://nmichas.medium.com/subscribe\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://nmichas.medium.com/subscribe\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eğŸš€ ì•„ì§ Medium íšŒì›ì´ ì•„ë‹ˆì‹ ê°€ìš”? ì»¤í”¼ í•œ ì” ê°€ê²©ìœ¼ë¡œ ë§¤ì›” ì œ ì´ì•¼ê¸°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ê·¸ë¦¬ê³  Mediumì˜ ìˆ˜ì²œ ëª…ì˜ ë‹¤ë¥¸ ì‘ê°€ë“¤ì˜ ì´ì•¼ê¸°ì—ë„):\n\u003ca href=\"https://medium.com/@nmichas/membership\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://medium.com/@nmichas/membership\u003c/a\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-NGINXwithSelf-SignedCertificateonDocker"},"buildId":"GsgRekSb--BvxYwv9FPn6","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>