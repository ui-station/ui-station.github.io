<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Ruby on Rails로 OCR 시스템 구축하는 방법 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-22-HowIbuiltanOCRSystemwithRails" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Ruby on Rails로 OCR 시스템 구축하는 방법 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="Ruby on Rails로 OCR 시스템 구축하는 방법 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-22-HowIbuiltanOCRSystemwithRails" data-gatsby-head="true"/><meta name="twitter:title" content="Ruby on Rails로 OCR 시스템 구축하는 방법 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 22:27" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-4f7b40c1114f0d09.js" defer=""></script><script src="/_next/static/bb_yO9GbCvdfc_n71SfUf/_buildManifest.js" defer=""></script><script src="/_next/static/bb_yO9GbCvdfc_n71SfUf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Ruby on Rails로 OCR 시스템 구축하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Ruby on Rails로 OCR 시스템 구축하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">12<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-HowIbuiltanOCRSystemwithRails&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>친구와의 대화 중에 이 아이디어가 떠올랐어요. 친구가 문서를 스캔하고 분석해야 할 일이 많다는데, 시간을 내기가 어려워한다는 걸 언급했더라구요. 그 일이 어려운 작업으로 들리고, 스트레스를 받고 있다는 걸 알 수 있었어요. 그래서 "어쩌면 해결책을 찾을 수도 있겠네요" 라고 말했죠. 그 순간, Ruby와 RTesseract를 사용하여 작은 스크립트를 만들기로 결심했어요. 이 스크립트는 그의 문서 스캔을 도와주는 것뿐만 아니라 이미지에서 텍스트를 추출하기 위한 OCR 작업도 수행했답니다. 이 작업은 상당히 유용했고, 다른 사람들도 이 아이디어의 더 강력한 버전에서 혜택을 받을 수 있을 거라 생각했어요. 그래서 이렇게 Rails 어플리케이션이 탄생했죠.</p>
<p><img src="/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_0.png" alt="OCR 시스템을 Rails로 어떻게 만들었는지"></p>
<h1>사용할 도구</h1>
<h2>이 프로젝트에서 사용할 도구는 다음과 같습니다:</h2>
<p></p>
<ul>
<li>루비 온 레일즈: 난 올드 스쿨이라서.</li>
<li>Active Storage: 빠르니까.</li>
<li>Tailwind CSS: 요즘 누가 안 하는가?</li>
<li>Tesseract OCR: 마술사처럼 사진을 단어로 바꿔주지.</li>
<li>RTesseract: 우리 앱과 친구되게 만들어 주는 루비 젬이야.</li>
</ul>
<h1>단계 1: 재료 준비하기</h1>
<p>먼저 레일즈 앱이 필요해. 하나 만들기 위해 다음 명령어를 실행해봐</p>
<pre><code class="hljs language-js">rails <span class="hljs-keyword">new</span> ocr
cd ocr
rails <span class="hljs-attr">active_storage</span>:install
rails <span class="hljs-attr">db</span>:migrate
</code></pre>
<p></p>
<p>다음으로, Tailwind가 필요합니다.</p>
<pre><code class="hljs language-js">bundle add tailwindcss-rails
rails <span class="hljs-attr">tailwindcss</span>:install
</code></pre>
<p>이걸로 대부분의 작업이 끝날 거예요. 더 자세히 알고 싶다면, Tailwind의 문서를 살펴보세요.</p>
<h1>단계 2: 모델 생성하기</h1>
<p></p>
<p>모델을 생성하여 파일 첨부 기능이 포함된 모델을 만들어봅시다. 예시를 위해 Document 모델을 생성해보겠습니다:
원하시는 다른 열을 포함시킬 수 있습니다. 저는 제목 열만을 포함하겠습니다.</p>
<pre><code class="hljs language-js">rails generate model <span class="hljs-title class_">Document</span> <span class="hljs-attr">title</span>:string
rails <span class="hljs-attr">db</span>:migrate
</code></pre>
<h1>단계 3: 모델 업데이트</h1>
<p>파일 첨부를 다루기 위해 Active Storage를 사용할 것입니다. 이를 통해 모델에 파일을 쉽게 첨부할 수 있습니다. Document 모델을 수정하여 파일 첨부를 포함하도록 해야 합니다.</p>
<p></p>
<p>다음은 단계별로 설명해 드리겠습니다:</p>
<ul>
<li>모델 생성: 이미 제목 속성이 있는 문서 모델을 생성했습니다.</li>
<li>Active Storage 관계 추가: 문서 모델을 업데이트하여 하나의 첨부 파일이 있다는 것을 나타냅니다. 이는 Active Storage가 제공하는 has_one_attached 메서드를 사용하여 수행됩니다.</li>
<li>모델 정의: app/models/document.rb에 있는 문서 모델 파일을 열고 다음 코드를 추가하세요:</li>
</ul>
<pre><code class="hljs language-ruby"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Document</span> &#x3C; <span class="hljs-title class_ inherited__">ApplicationRecord</span>
  has_one_attached <span class="hljs-symbol">:file</span>
<span class="hljs-keyword">end</span>
</code></pre>
<ul>
<li>has_one_attached :file: 이 코드는 Rails에게 각 문서 인스턴스가 첨부 파일을 하나 가질 수 있다고 알려줍니다. Active Storage가 첨부를 우리 대신 관리하며, 메타데이터는 데이터베이스에, 실제 파일은 구성된 저장 서비스(로컬 디스크, Amazon S3 등)에 저장됩니다.</li>
</ul>
<p></p>
<p>우리 모델에 has_one_attached :file를 추가함으로써, 이제 생성할 컴포넌트가 또 하나 생겼습니다: 컨트롤러.</p>
<h1>단계 4: 컨트롤러 생성</h1>
<p>이제 모델을 설정했으니, 문서를 관리하고 파일 업로드를 처리하는 컨트롤러를 생성할 때입니다.</p>
<pre><code class="hljs language-js">rails generate controller <span class="hljs-title class_">Documents</span>
</code></pre>
<p></p>
<p>다음으로, 문서를 업로드하고 표시하는 데 필요한 작업을 정의하겠습니다. app/controllers/documents_controller.rb에 위치한 DocumentsController 파일을 열어 다음 코드로 업데이트하세요:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentsController</span> &#x3C; <span class="hljs-title class_">ApplicationController</span>
  def <span class="hljs-keyword">new</span>
    @<span class="hljs-variable language_">document</span> = <span class="hljs-title class_">Document</span>.<span class="hljs-property">new</span>
  end

  def create
    @<span class="hljs-variable language_">document</span> = <span class="hljs-title class_">Document</span>.<span class="hljs-title function_">new</span>(document_params)
    <span class="hljs-keyword">if</span> @<span class="hljs-variable language_">document</span>.<span class="hljs-property">save</span>
      redirect_to @<span class="hljs-variable language_">document</span>, <span class="hljs-attr">notice</span>: <span class="hljs-string">'문서가 성공적으로 업로드되었습니다.'</span>
    <span class="hljs-keyword">else</span>
      render :<span class="hljs-keyword">new</span>
    end
  end

  def show
    @<span class="hljs-variable language_">document</span> = <span class="hljs-title class_">Document</span>.<span class="hljs-title function_">find</span>(params[:id])
  end

  private

  def document_params
    params.<span class="hljs-built_in">require</span>(:<span class="hljs-variable language_">document</span>).<span class="hljs-title function_">permit</span>(:title, :file)
  end
end
</code></pre>
<ul>
<li>new 액션: 이 액션은 새 Document 객체를 초기화합니다. 이것은 당신의 걸작을 위한 빈 캔버스를 설정하는 것과 같습니다. 여기서 미래의 OCR을 위해 파일을 업로드할 것입니다.</li>
<li>create 액션: 이 액션은 새 문서를 생성하는 작업을 처리합니다. 폼 (제목 및 파일)에서 매개변수를 가져와 새 Document 객체를 만들고 저장을 시도합니다. 저장에 성공하면 문서의 표시 페이지로 이동하여 성공 메시지가 표시됩니다. 실패한 경우 새 문서 양식을 다시 렌더링하여 실수를 수정할 수 있습니다. 이 액션에서 또한 파일 업로드를 처리합니다.</li>
<li>show 액션: 이 액션은 ID로 문서를 찾아서 표시합니다. 여기에서 마법이 일어날 것이지만, 현재는 파일을 표시만 합니다.</li>
</ul>
<h1>단계 5: 뷰 생성</h1>
<p></p>
<p>다음으로 뷰를 생성할 차례에요.</p>
<p>아래 내용을 app/views/documents/new.html.erb에 추가해주세요:</p>
<pre><code class="hljs language-js">&#x3C;!-- app/views/documents/<span class="hljs-keyword">new</span>.<span class="hljs-property">html</span>.<span class="hljs-property">erb</span> -->
<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"min-h-screen bg-gray-100 flex items-center justify-center"</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bg-white p-8 rounded-lg shadow-md w-full max-w-md"</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-2xl font-bold mb-6 text-center"</span>></span>새 문서 업로드<span class="hljs-tag">&#x3C;/<span class="hljs-name">h2</span>></span>

    &#x3C;%= form_with model: @document, local: true, class: "space-y-6" do |form| %>
      &#x3C;% if @document.errors.any? %>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bg-red-100 text-red-700 p-4 rounded-lg"</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"font-bold"</span>></span>제출 과정에 오류가 있습니다:<span class="hljs-tag">&#x3C;/<span class="hljs-name">h3</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-disc list-inside"</span>></span>
            &#x3C;% @document.errors.full_messages.each do |message| %>
              <span class="hljs-tag">&#x3C;<span class="hljs-name">li</span>></span>&#x3C;%= message %><span class="hljs-tag">&#x3C;/<span class="hljs-name">li</span>></span>
            &#x3C;% end %>
          <span class="hljs-tag">&#x3C;/<span class="hljs-name">ul</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
      &#x3C;% end %>

      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"space-y-2"</span>></span>
        &#x3C;%= form.label :title, class: "block font-medium text-gray-700" %>
        &#x3C;%= form.text_field :title, class: "block w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" %>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>

      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"space-y-2"</span>></span>
        &#x3C;%= form.label :file, class: "block font-medium text-gray-700" %>
        &#x3C;%= form.file_field :file, class: "block w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" %>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>

      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
        &#x3C;%= form.submit "문서 업로드", class: "w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
    &#x3C;% end %>
  <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
</code></pre>
<p>그리고 app/views/documents/show.html.erb에 다음 내용을 추가해주세요.</p>
<p></p>
<h1>Step 6: 라우트 추가</h1>
<p>이 부분은 Rails가 대부분 처리하기 때문에 작은 단계입니다. config/routes.rb에 다음을 추가해보세요:</p>
<pre><code class="hljs language-ruby"><span class="hljs-title class_">Rails</span>.application.routes.draw <span class="hljs-keyword">do</span>
  resources <span class="hljs-symbol">:documents</span>, <span class="hljs-symbol">only:</span> [<span class="hljs-symbol">:new</span>, <span class="hljs-symbol">:create</span>, <span class="hljs-symbol">:show</span>]
<span class="hljs-keyword">end</span>
</code></pre>
<p></p>
<h1>단계 7: 스토리지 서비스 구성하기</h1>
<p>기본적으로 Active Storage는 파일을 저장하기위해 로컬 디스크를 사용합니다. config/storage.yml에서 Amazon S3, Google Cloud Storage 및 Microsoft Azure Blob Storage와 같은 다른 스토리지 서비스를 구성할 수 있습니다.</p>
<p>Active Storage를 사용하면 구성 파일을 업데이트하여 이러한 스토리지 서비스 간에 쉽게 전환할 수 있습니다. 이 유연성을 통해 필요에 가장 적합한 스토리지 솔루션을 선택하고 애플리케이션이 성장함에 따라 확장할 수 있습니다.</p>
<p>여기 우리 앱에서 사용할 구성입니다.</p>
<p></p>
<pre><code class="hljs language-js">지금 이 작업을 해보세요. 터미널에 가서 앱을 시작해보세요.

./bin/dev

다음과 같은 내용이 나와야 합니다:
</code></pre>
<p></p>
<p></p>
<p>당신의 Gemfile에 Gem을 추가해보세요.</p>
<pre><code class="hljs language-js">gem <span class="hljs-string">'rtesseract'</span>
</code></pre>
<h1>단계 9: OCR 메소드 구현하기</h1>
<p>문서 모델에 OCR을 수행하는 메소드를 만들어보세요. 아래와 같이 할 수 있어요!</p>
<p></p>
<pre><code class="hljs language-rb"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Document</span> &#x3C; <span class="hljs-title class_ inherited__">ApplicationRecord</span>
  has_one_attached <span class="hljs-symbol">:file</span>

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">perform_ocr</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">unless</span> file.attached?

    file_path = <span class="hljs-title class_">ActiveStorage</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:Blob</span>.service.send(<span class="hljs-symbol">:path_for</span>, file.key)
    image = <span class="hljs-title class_">RTesseract</span>.new(file_path)
    image.to_s
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h1>단계 10: 컨트롤러 업데이트하여 OCR 사용</h1>
<p>OCR 수행을 위한 액션을 포함하도록 DocumentsController를 수정합니다:</p>
<pre><code class="hljs language-rb"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentsController</span> &#x3C; <span class="hljs-title class_ inherited__">ApplicationController</span>
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">new</span>
    <span class="hljs-variable">@document</span> = <span class="hljs-title class_">Document</span>.new
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">create</span>
    <span class="hljs-variable">@document</span> = <span class="hljs-title class_">Document</span>.new(document_params)
    <span class="hljs-keyword">if</span> <span class="hljs-variable">@document</span>.save
      redirect_to <span class="hljs-variable">@document</span>, <span class="hljs-symbol">notice:</span> <span class="hljs-string">'문서가 성공적으로 업로드되었습니다.'</span>
    <span class="hljs-keyword">else</span>
      render <span class="hljs-symbol">:new</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>
    <span class="hljs-variable">@document</span> = <span class="hljs-title class_">Document</span>.find(params[<span class="hljs-symbol">:id</span>])
    <span class="hljs-variable">@ocr_text</span> = <span class="hljs-variable">@document</span>.perform_ocr
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">private</span>

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">document_params</span>
    params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:document</span>).permit(<span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:file</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p></p>
<h1>단계 11: OCR 텍스트 표시를 위한 뷰 업데이트</h1>
<p>show.html.erb 뷰를 수정하여 OCR 텍스트를 표시합니다:</p>
<pre><code class="hljs language-js">&#x3C;p>
  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">strong</span>></span>제목:<span class="hljs-tag">&#x3C;/<span class="hljs-name">strong</span>></span></span>
  &#x3C;%= @<span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> %>
&#x3C;/p>

<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">p</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">strong</span>></span>파일:<span class="hljs-tag">&#x3C;/<span class="hljs-name">strong</span>></span>
  &#x3C;%= link_to @document.file.filename.to_s, rails_blob_path(@document.file, disposition: "attachment") %>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">p</span>></span></span>

&#x3C;% <span class="hljs-keyword">if</span> @ocr_text.<span class="hljs-property">present</span>? %>
  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">p</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">strong</span>></span>OCR 텍스트:<span class="hljs-tag">&#x3C;/<span class="hljs-name">strong</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">pre</span>></span>&#x3C;%= @ocr_text %><span class="hljs-tag">&#x3C;/<span class="hljs-name">pre</span>></span>
  <span class="hljs-tag">&#x3C;/<span class="hljs-name">p</span>></span></span>
&#x3C;% end %>
</code></pre>
<h1>단계 12: Tesseract가 설치되었는지 확인하기</h1>
<p></p>
<p>시스템에 Tesseract OCR이 설치되어 있는지 확인해주세요. 다음 명령어를 사용하여 운영 체제에 맞게 설치할 수 있습니다:</p>
<pre><code class="hljs language-js"><span class="hljs-attr">macOS</span>:
brew install tesseract

<span class="hljs-title class_">Ubuntu</span>:
sudo apt-get install tesseract-ocr
</code></pre>
<p>앱을 실행한 후에는 다음과 같은 결과가 나타납니다:</p>
<p><img src="/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_2.png" alt="OCR 결과"></p>
<p></p>
<p>텍스트에는 개선할 여지가 많이 있어요. 댓글로 의겢나 생각을 알려주세요.</p>
<p>또한, 제 Github에서 전체 소스 코드를 확인하세요: <a href="https://github.com/luizcg/ocr" rel="nofollow" target="_blank">https://github.com/luizcg/ocr</a></p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Ruby on Rails로 OCR 시스템 구축하는 방법","description":"","date":"2024-06-22 22:27","slug":"2024-06-22-HowIbuiltanOCRSystemwithRails","content":"\n친구와의 대화 중에 이 아이디어가 떠올랐어요. 친구가 문서를 스캔하고 분석해야 할 일이 많다는데, 시간을 내기가 어려워한다는 걸 언급했더라구요. 그 일이 어려운 작업으로 들리고, 스트레스를 받고 있다는 걸 알 수 있었어요. 그래서 \"어쩌면 해결책을 찾을 수도 있겠네요\" 라고 말했죠. 그 순간, Ruby와 RTesseract를 사용하여 작은 스크립트를 만들기로 결심했어요. 이 스크립트는 그의 문서 스캔을 도와주는 것뿐만 아니라 이미지에서 텍스트를 추출하기 위한 OCR 작업도 수행했답니다. 이 작업은 상당히 유용했고, 다른 사람들도 이 아이디어의 더 강력한 버전에서 혜택을 받을 수 있을 거라 생각했어요. 그래서 이렇게 Rails 어플리케이션이 탄생했죠.\n\n![OCR 시스템을 Rails로 어떻게 만들었는지](/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_0.png)\n\n# 사용할 도구\n\n## 이 프로젝트에서 사용할 도구는 다음과 같습니다:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 루비 온 레일즈: 난 올드 스쿨이라서.\n- Active Storage: 빠르니까.\n- Tailwind CSS: 요즘 누가 안 하는가?\n- Tesseract OCR: 마술사처럼 사진을 단어로 바꿔주지.\n- RTesseract: 우리 앱과 친구되게 만들어 주는 루비 젬이야.\n\n# 단계 1: 재료 준비하기\n\n먼저 레일즈 앱이 필요해. 하나 만들기 위해 다음 명령어를 실행해봐\n\n```js\nrails new ocr\ncd ocr\nrails active_storage:install\nrails db:migrate\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n다음으로, Tailwind가 필요합니다.\n\n```js\nbundle add tailwindcss-rails\nrails tailwindcss:install\n```\n\n이걸로 대부분의 작업이 끝날 거예요. 더 자세히 알고 싶다면, Tailwind의 문서를 살펴보세요.\n\n# 단계 2: 모델 생성하기\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n모델을 생성하여 파일 첨부 기능이 포함된 모델을 만들어봅시다. 예시를 위해 Document 모델을 생성해보겠습니다:\n원하시는 다른 열을 포함시킬 수 있습니다. 저는 제목 열만을 포함하겠습니다.\n\n```js\nrails generate model Document title:string\nrails db:migrate\n```\n\n# 단계 3: 모델 업데이트\n\n파일 첨부를 다루기 위해 Active Storage를 사용할 것입니다. 이를 통해 모델에 파일을 쉽게 첨부할 수 있습니다. Document 모델을 수정하여 파일 첨부를 포함하도록 해야 합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n다음은 단계별로 설명해 드리겠습니다:\n\n- 모델 생성: 이미 제목 속성이 있는 문서 모델을 생성했습니다.\n- Active Storage 관계 추가: 문서 모델을 업데이트하여 하나의 첨부 파일이 있다는 것을 나타냅니다. 이는 Active Storage가 제공하는 has_one_attached 메서드를 사용하여 수행됩니다.\n- 모델 정의: app/models/document.rb에 있는 문서 모델 파일을 열고 다음 코드를 추가하세요:\n\n```ruby\nclass Document \u003c ApplicationRecord\n  has_one_attached :file\nend\n```\n\n- has_one_attached :file: 이 코드는 Rails에게 각 문서 인스턴스가 첨부 파일을 하나 가질 수 있다고 알려줍니다. Active Storage가 첨부를 우리 대신 관리하며, 메타데이터는 데이터베이스에, 실제 파일은 구성된 저장 서비스(로컬 디스크, Amazon S3 등)에 저장됩니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n우리 모델에 has_one_attached :file를 추가함으로써, 이제 생성할 컴포넌트가 또 하나 생겼습니다: 컨트롤러.\n\n# 단계 4: 컨트롤러 생성\n\n이제 모델을 설정했으니, 문서를 관리하고 파일 업로드를 처리하는 컨트롤러를 생성할 때입니다.\n\n```js\nrails generate controller Documents\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n다음으로, 문서를 업로드하고 표시하는 데 필요한 작업을 정의하겠습니다. app/controllers/documents_controller.rb에 위치한 DocumentsController 파일을 열어 다음 코드로 업데이트하세요:\n\n```js\nclass DocumentsController \u003c ApplicationController\n  def new\n    @document = Document.new\n  end\n\n  def create\n    @document = Document.new(document_params)\n    if @document.save\n      redirect_to @document, notice: '문서가 성공적으로 업로드되었습니다.'\n    else\n      render :new\n    end\n  end\n\n  def show\n    @document = Document.find(params[:id])\n  end\n\n  private\n\n  def document_params\n    params.require(:document).permit(:title, :file)\n  end\nend\n```\n\n- new 액션: 이 액션은 새 Document 객체를 초기화합니다. 이것은 당신의 걸작을 위한 빈 캔버스를 설정하는 것과 같습니다. 여기서 미래의 OCR을 위해 파일을 업로드할 것입니다.\n- create 액션: 이 액션은 새 문서를 생성하는 작업을 처리합니다. 폼 (제목 및 파일)에서 매개변수를 가져와 새 Document 객체를 만들고 저장을 시도합니다. 저장에 성공하면 문서의 표시 페이지로 이동하여 성공 메시지가 표시됩니다. 실패한 경우 새 문서 양식을 다시 렌더링하여 실수를 수정할 수 있습니다. 이 액션에서 또한 파일 업로드를 처리합니다.\n- show 액션: 이 액션은 ID로 문서를 찾아서 표시합니다. 여기에서 마법이 일어날 것이지만, 현재는 파일을 표시만 합니다.\n\n# 단계 5: 뷰 생성\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n다음으로 뷰를 생성할 차례에요.\n\n아래 내용을 app/views/documents/new.html.erb에 추가해주세요:\n\n```js\n\u003c!-- app/views/documents/new.html.erb --\u003e\n\u003cdiv class=\"min-h-screen bg-gray-100 flex items-center justify-center\"\u003e\n  \u003cdiv class=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md\"\u003e\n    \u003ch2 class=\"text-2xl font-bold mb-6 text-center\"\u003e새 문서 업로드\u003c/h2\u003e\n\n    \u003c%= form_with model: @document, local: true, class: \"space-y-6\" do |form| %\u003e\n      \u003c% if @document.errors.any? %\u003e\n        \u003cdiv class=\"bg-red-100 text-red-700 p-4 rounded-lg\"\u003e\n          \u003ch3 class=\"font-bold\"\u003e제출 과정에 오류가 있습니다:\u003c/h3\u003e\n          \u003cul class=\"list-disc list-inside\"\u003e\n            \u003c% @document.errors.full_messages.each do |message| %\u003e\n              \u003cli\u003e\u003c%= message %\u003e\u003c/li\u003e\n            \u003c% end %\u003e\n          \u003c/ul\u003e\n        \u003c/div\u003e\n      \u003c% end %\u003e\n\n      \u003cdiv class=\"space-y-2\"\u003e\n        \u003c%= form.label :title, class: \"block font-medium text-gray-700\" %\u003e\n        \u003c%= form.text_field :title, class: \"block w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" %\u003e\n      \u003c/div\u003e\n\n      \u003cdiv class=\"space-y-2\"\u003e\n        \u003c%= form.label :file, class: \"block font-medium text-gray-700\" %\u003e\n        \u003c%= form.file_field :file, class: \"block w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" %\u003e\n      \u003c/div\u003e\n\n      \u003cdiv\u003e\n        \u003c%= form.submit \"문서 업로드\", class: \"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" %\u003e\n      \u003c/div\u003e\n    \u003c% end %\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n```\n\n그리고 app/views/documents/show.html.erb에 다음 내용을 추가해주세요.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cp\u003e\n  \u003cstrong\u003eTitle:\u003c/strong\u003e\n  \u003c%= @document.title %\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\n  \u003cstrong\u003eFile:\u003c/strong\u003e\n  \u003c%= link_to @document.file.filename.to_s, rails_blob_path(@document.file, disposition: \"attachment\") %\u003e\n\u003c/p\u003e\n\n# Step 6: 라우트 추가\n\n이 부분은 Rails가 대부분 처리하기 때문에 작은 단계입니다. config/routes.rb에 다음을 추가해보세요:\n\n```ruby\nRails.application.routes.draw do\n  resources :documents, only: [:new, :create, :show]\nend\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 단계 7: 스토리지 서비스 구성하기\n\n기본적으로 Active Storage는 파일을 저장하기위해 로컬 디스크를 사용합니다. config/storage.yml에서 Amazon S3, Google Cloud Storage 및 Microsoft Azure Blob Storage와 같은 다른 스토리지 서비스를 구성할 수 있습니다.\n\nActive Storage를 사용하면 구성 파일을 업데이트하여 이러한 스토리지 서비스 간에 쉽게 전환할 수 있습니다. 이 유연성을 통해 필요에 가장 적합한 스토리지 솔루션을 선택하고 애플리케이션이 성장함에 따라 확장할 수 있습니다.\n\n여기 우리 앱에서 사용할 구성입니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n지금 이 작업을 해보세요. 터미널에 가서 앱을 시작해보세요.\n\n./bin/dev\n\n다음과 같은 내용이 나와야 합니다:\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003ctable\u003e 태그를 Markdown 형식으로 변경하십시오.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n당신의 Gemfile에 Gem을 추가해보세요.\n\n```js\ngem 'rtesseract'\n```\n\n# 단계 9: OCR 메소드 구현하기\n\n문서 모델에 OCR을 수행하는 메소드를 만들어보세요. 아래와 같이 할 수 있어요!\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```rb\nclass Document \u003c ApplicationRecord\n  has_one_attached :file\n\n  def perform_ocr\n    return unless file.attached?\n\n    file_path = ActiveStorage::Blob.service.send(:path_for, file.key)\n    image = RTesseract.new(file_path)\n    image.to_s\n  end\nend\n```\n\n# 단계 10: 컨트롤러 업데이트하여 OCR 사용\n\nOCR 수행을 위한 액션을 포함하도록 DocumentsController를 수정합니다:\n\n```rb\nclass DocumentsController \u003c ApplicationController\n  def new\n    @document = Document.new\n  end\n\n  def create\n    @document = Document.new(document_params)\n    if @document.save\n      redirect_to @document, notice: '문서가 성공적으로 업로드되었습니다.'\n    else\n      render :new\n    end\n  end\n\n  def show\n    @document = Document.find(params[:id])\n    @ocr_text = @document.perform_ocr\n  end\n\n  private\n\n  def document_params\n    params.require(:document).permit(:title, :file)\n  end\nend\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 단계 11: OCR 텍스트 표시를 위한 뷰 업데이트\n\nshow.html.erb 뷰를 수정하여 OCR 텍스트를 표시합니다:\n\n```js\n\u003cp\u003e\n  \u003cstrong\u003e제목:\u003c/strong\u003e\n  \u003c%= @document.title %\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\n  \u003cstrong\u003e파일:\u003c/strong\u003e\n  \u003c%= link_to @document.file.filename.to_s, rails_blob_path(@document.file, disposition: \"attachment\") %\u003e\n\u003c/p\u003e\n\n\u003c% if @ocr_text.present? %\u003e\n  \u003cp\u003e\n    \u003cstrong\u003eOCR 텍스트:\u003c/strong\u003e\n    \u003cpre\u003e\u003c%= @ocr_text %\u003e\u003c/pre\u003e\n  \u003c/p\u003e\n\u003c% end %\u003e\n```\n\n# 단계 12: Tesseract가 설치되었는지 확인하기\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n시스템에 Tesseract OCR이 설치되어 있는지 확인해주세요. 다음 명령어를 사용하여 운영 체제에 맞게 설치할 수 있습니다:\n\n```js\nmacOS:\nbrew install tesseract\n\nUbuntu:\nsudo apt-get install tesseract-ocr\n```\n\n앱을 실행한 후에는 다음과 같은 결과가 나타납니다:\n\n![OCR 결과](/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_2.png)\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n텍스트에는 개선할 여지가 많이 있어요. 댓글로 의겢나 생각을 알려주세요.\n\n또한, 제 Github에서 전체 소스 코드를 확인하세요: https://github.com/luizcg/ocr\n","ogImage":{"url":"/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_0.png"},"coverImage":"/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_0.png","tag":["Tech"],"readingTime":12},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e친구와의 대화 중에 이 아이디어가 떠올랐어요. 친구가 문서를 스캔하고 분석해야 할 일이 많다는데, 시간을 내기가 어려워한다는 걸 언급했더라구요. 그 일이 어려운 작업으로 들리고, 스트레스를 받고 있다는 걸 알 수 있었어요. 그래서 \"어쩌면 해결책을 찾을 수도 있겠네요\" 라고 말했죠. 그 순간, Ruby와 RTesseract를 사용하여 작은 스크립트를 만들기로 결심했어요. 이 스크립트는 그의 문서 스캔을 도와주는 것뿐만 아니라 이미지에서 텍스트를 추출하기 위한 OCR 작업도 수행했답니다. 이 작업은 상당히 유용했고, 다른 사람들도 이 아이디어의 더 강력한 버전에서 혜택을 받을 수 있을 거라 생각했어요. 그래서 이렇게 Rails 어플리케이션이 탄생했죠.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_0.png\" alt=\"OCR 시스템을 Rails로 어떻게 만들었는지\"\u003e\u003c/p\u003e\n\u003ch1\u003e사용할 도구\u003c/h1\u003e\n\u003ch2\u003e이 프로젝트에서 사용할 도구는 다음과 같습니다:\u003c/h2\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e루비 온 레일즈: 난 올드 스쿨이라서.\u003c/li\u003e\n\u003cli\u003eActive Storage: 빠르니까.\u003c/li\u003e\n\u003cli\u003eTailwind CSS: 요즘 누가 안 하는가?\u003c/li\u003e\n\u003cli\u003eTesseract OCR: 마술사처럼 사진을 단어로 바꿔주지.\u003c/li\u003e\n\u003cli\u003eRTesseract: 우리 앱과 친구되게 만들어 주는 루비 젬이야.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e단계 1: 재료 준비하기\u003c/h1\u003e\n\u003cp\u003e먼저 레일즈 앱이 필요해. 하나 만들기 위해 다음 명령어를 실행해봐\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003erails \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ocr\ncd ocr\nrails \u003cspan class=\"hljs-attr\"\u003eactive_storage\u003c/span\u003e:install\nrails \u003cspan class=\"hljs-attr\"\u003edb\u003c/span\u003e:migrate\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e다음으로, Tailwind가 필요합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ebundle add tailwindcss-rails\nrails \u003cspan class=\"hljs-attr\"\u003etailwindcss\u003c/span\u003e:install\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이걸로 대부분의 작업이 끝날 거예요. 더 자세히 알고 싶다면, Tailwind의 문서를 살펴보세요.\u003c/p\u003e\n\u003ch1\u003e단계 2: 모델 생성하기\u003c/h1\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e모델을 생성하여 파일 첨부 기능이 포함된 모델을 만들어봅시다. 예시를 위해 Document 모델을 생성해보겠습니다:\n원하시는 다른 열을 포함시킬 수 있습니다. 저는 제목 열만을 포함하겠습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003erails generate model \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e:string\nrails \u003cspan class=\"hljs-attr\"\u003edb\u003c/span\u003e:migrate\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 3: 모델 업데이트\u003c/h1\u003e\n\u003cp\u003e파일 첨부를 다루기 위해 Active Storage를 사용할 것입니다. 이를 통해 모델에 파일을 쉽게 첨부할 수 있습니다. Document 모델을 수정하여 파일 첨부를 포함하도록 해야 합니다.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e다음은 단계별로 설명해 드리겠습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e모델 생성: 이미 제목 속성이 있는 문서 모델을 생성했습니다.\u003c/li\u003e\n\u003cli\u003eActive Storage 관계 추가: 문서 모델을 업데이트하여 하나의 첨부 파일이 있다는 것을 나타냅니다. 이는 Active Storage가 제공하는 has_one_attached 메서드를 사용하여 수행됩니다.\u003c/li\u003e\n\u003cli\u003e모델 정의: app/models/document.rb에 있는 문서 모델 파일을 열고 다음 코드를 추가하세요:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e \u0026#x3C; \u003cspan class=\"hljs-title class_ inherited__\"\u003eApplicationRecord\u003c/span\u003e\n  has_one_attached \u003cspan class=\"hljs-symbol\"\u003e:file\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ehas_one_attached :file: 이 코드는 Rails에게 각 문서 인스턴스가 첨부 파일을 하나 가질 수 있다고 알려줍니다. Active Storage가 첨부를 우리 대신 관리하며, 메타데이터는 데이터베이스에, 실제 파일은 구성된 저장 서비스(로컬 디스크, Amazon S3 등)에 저장됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e우리 모델에 has_one_attached :file를 추가함으로써, 이제 생성할 컴포넌트가 또 하나 생겼습니다: 컨트롤러.\u003c/p\u003e\n\u003ch1\u003e단계 4: 컨트롤러 생성\u003c/h1\u003e\n\u003cp\u003e이제 모델을 설정했으니, 문서를 관리하고 파일 업로드를 처리하는 컨트롤러를 생성할 때입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003erails generate controller \u003cspan class=\"hljs-title class_\"\u003eDocuments\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e다음으로, 문서를 업로드하고 표시하는 데 필요한 작업을 정의하겠습니다. app/controllers/documents_controller.rb에 위치한 DocumentsController 파일을 열어 다음 코드로 업데이트하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDocumentsController\u003c/span\u003e \u0026#x3C; \u003cspan class=\"hljs-title class_\"\u003eApplicationController\u003c/span\u003e\n  def \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e\n    @\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003enew\u003c/span\u003e\n  end\n\n  def create\n    @\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enew\u003c/span\u003e(document_params)\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e @\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003esave\u003c/span\u003e\n      redirect_to @\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003enotice\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'문서가 성공적으로 업로드되었습니다.'\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n      render :\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e\n    end\n  end\n\n  def show\n    @\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efind\u003c/span\u003e(params[:id])\n  end\n\n  private\n\n  def document_params\n    params.\u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(:\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003epermit\u003c/span\u003e(:title, :file)\n  end\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003enew 액션: 이 액션은 새 Document 객체를 초기화합니다. 이것은 당신의 걸작을 위한 빈 캔버스를 설정하는 것과 같습니다. 여기서 미래의 OCR을 위해 파일을 업로드할 것입니다.\u003c/li\u003e\n\u003cli\u003ecreate 액션: 이 액션은 새 문서를 생성하는 작업을 처리합니다. 폼 (제목 및 파일)에서 매개변수를 가져와 새 Document 객체를 만들고 저장을 시도합니다. 저장에 성공하면 문서의 표시 페이지로 이동하여 성공 메시지가 표시됩니다. 실패한 경우 새 문서 양식을 다시 렌더링하여 실수를 수정할 수 있습니다. 이 액션에서 또한 파일 업로드를 처리합니다.\u003c/li\u003e\n\u003cli\u003eshow 액션: 이 액션은 ID로 문서를 찾아서 표시합니다. 여기에서 마법이 일어날 것이지만, 현재는 파일을 표시만 합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e단계 5: 뷰 생성\u003c/h1\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e다음으로 뷰를 생성할 차례에요.\u003c/p\u003e\n\u003cp\u003e아래 내용을 app/views/documents/new.html.erb에 추가해주세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u0026#x3C;!-- app/views/documents/\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ehtml\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eerb\u003c/span\u003e --\u003e\n\u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"min-h-screen bg-gray-100 flex items-center justify-center\"\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"bg-white p-8 rounded-lg shadow-md w-full max-w-md\"\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eh2\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"text-2xl font-bold mb-6 text-center\"\u003c/span\u003e\u003e\u003c/span\u003e새 문서 업로드\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eh2\u003c/span\u003e\u003e\u003c/span\u003e\n\n    \u0026#x3C;%= form_with model: @document, local: true, class: \"space-y-6\" do |form| %\u003e\n      \u0026#x3C;% if @document.errors.any? %\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"bg-red-100 text-red-700 p-4 rounded-lg\"\u003c/span\u003e\u003e\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eh3\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"font-bold\"\u003c/span\u003e\u003e\u003c/span\u003e제출 과정에 오류가 있습니다:\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eh3\u003c/span\u003e\u003e\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eul\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"list-disc list-inside\"\u003c/span\u003e\u003e\u003c/span\u003e\n            \u0026#x3C;% @document.errors.full_messages.each do |message| %\u003e\n              \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e\u003e\u003c/span\u003e\u0026#x3C;%= message %\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e\u003e\u003c/span\u003e\n            \u0026#x3C;% end %\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eul\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n      \u0026#x3C;% end %\u003e\n\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"space-y-2\"\u003c/span\u003e\u003e\u003c/span\u003e\n        \u0026#x3C;%= form.label :title, class: \"block font-medium text-gray-700\" %\u003e\n        \u0026#x3C;%= form.text_field :title, class: \"block w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" %\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"space-y-2\"\u003c/span\u003e\u003e\u003c/span\u003e\n        \u0026#x3C;%= form.label :file, class: \"block font-medium text-gray-700\" %\u003e\n        \u0026#x3C;%= form.file_field :file, class: \"block w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" %\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n        \u0026#x3C;%= form.submit \"문서 업로드\", class: \"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" %\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n    \u0026#x3C;% end %\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그리고 app/views/documents/show.html.erb에 다음 내용을 추가해주세요.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003ch1\u003eStep 6: 라우트 추가\u003c/h1\u003e\n\u003cp\u003e이 부분은 Rails가 대부분 처리하기 때문에 작은 단계입니다. config/routes.rb에 다음을 추가해보세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ruby\"\u003e\u003cspan class=\"hljs-title class_\"\u003eRails\u003c/span\u003e.application.routes.draw \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  resources \u003cspan class=\"hljs-symbol\"\u003e:documents\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003eonly:\u003c/span\u003e [\u003cspan class=\"hljs-symbol\"\u003e:new\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003e:create\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003e:show\u003c/span\u003e]\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003ch1\u003e단계 7: 스토리지 서비스 구성하기\u003c/h1\u003e\n\u003cp\u003e기본적으로 Active Storage는 파일을 저장하기위해 로컬 디스크를 사용합니다. config/storage.yml에서 Amazon S3, Google Cloud Storage 및 Microsoft Azure Blob Storage와 같은 다른 스토리지 서비스를 구성할 수 있습니다.\u003c/p\u003e\n\u003cp\u003eActive Storage를 사용하면 구성 파일을 업데이트하여 이러한 스토리지 서비스 간에 쉽게 전환할 수 있습니다. 이 유연성을 통해 필요에 가장 적합한 스토리지 솔루션을 선택하고 애플리케이션이 성장함에 따라 확장할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e여기 우리 앱에서 사용할 구성입니다.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e지금 이 작업을 해보세요. 터미널에 가서 앱을 시작해보세요.\n\n./bin/dev\n\n다음과 같은 내용이 나와야 합니다:\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e당신의 Gemfile에 Gem을 추가해보세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003egem \u003cspan class=\"hljs-string\"\u003e'rtesseract'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 9: OCR 메소드 구현하기\u003c/h1\u003e\n\u003cp\u003e문서 모델에 OCR을 수행하는 메소드를 만들어보세요. 아래와 같이 할 수 있어요!\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-rb\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e \u0026#x3C; \u003cspan class=\"hljs-title class_ inherited__\"\u003eApplicationRecord\u003c/span\u003e\n  has_one_attached \u003cspan class=\"hljs-symbol\"\u003e:file\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eperform_ocr\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eunless\u003c/span\u003e file.attached?\n\n    file_path = \u003cspan class=\"hljs-title class_\"\u003eActiveStorage\u003c/span\u003e\u003cspan class=\"hljs-symbol\"\u003e:\u003c/span\u003e\u003cspan class=\"hljs-symbol\"\u003e:Blob\u003c/span\u003e.service.send(\u003cspan class=\"hljs-symbol\"\u003e:path_for\u003c/span\u003e, file.key)\n    image = \u003cspan class=\"hljs-title class_\"\u003eRTesseract\u003c/span\u003e.new(file_path)\n    image.to_s\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 10: 컨트롤러 업데이트하여 OCR 사용\u003c/h1\u003e\n\u003cp\u003eOCR 수행을 위한 액션을 포함하도록 DocumentsController를 수정합니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-rb\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDocumentsController\u003c/span\u003e \u0026#x3C; \u003cspan class=\"hljs-title class_ inherited__\"\u003eApplicationController\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003enew\u003c/span\u003e\n    \u003cspan class=\"hljs-variable\"\u003e@document\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e.new\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e\n    \u003cspan class=\"hljs-variable\"\u003e@document\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e.new(document_params)\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003e@document\u003c/span\u003e.save\n      redirect_to \u003cspan class=\"hljs-variable\"\u003e@document\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003enotice:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'문서가 성공적으로 업로드되었습니다.'\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n      render \u003cspan class=\"hljs-symbol\"\u003e:new\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e\n    \u003cspan class=\"hljs-variable\"\u003e@document\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eDocument\u003c/span\u003e.find(params[\u003cspan class=\"hljs-symbol\"\u003e:id\u003c/span\u003e])\n    \u003cspan class=\"hljs-variable\"\u003e@ocr_text\u003c/span\u003e = \u003cspan class=\"hljs-variable\"\u003e@document\u003c/span\u003e.perform_ocr\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edocument_params\u003c/span\u003e\n    params.\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-symbol\"\u003e:document\u003c/span\u003e).permit(\u003cspan class=\"hljs-symbol\"\u003e:title\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003e:file\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003ch1\u003e단계 11: OCR 텍스트 표시를 위한 뷰 업데이트\u003c/h1\u003e\n\u003cp\u003eshow.html.erb 뷰를 수정하여 OCR 텍스트를 표시합니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u0026#x3C;p\u003e\n  \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003estrong\u003c/span\u003e\u003e\u003c/span\u003e제목:\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003estrong\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u0026#x3C;%= @\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etitle\u003c/span\u003e %\u003e\n\u0026#x3C;/p\u003e\n\n\u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003estrong\u003c/span\u003e\u003e\u003c/span\u003e파일:\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003estrong\u003c/span\u003e\u003e\u003c/span\u003e\n  \u0026#x3C;%= link_to @document.file.filename.to_s, rails_blob_path(@document.file, disposition: \"attachment\") %\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\n\u0026#x3C;% \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e @ocr_text.\u003cspan class=\"hljs-property\"\u003epresent\u003c/span\u003e? %\u003e\n  \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003estrong\u003c/span\u003e\u003e\u003c/span\u003eOCR 텍스트:\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003estrong\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003epre\u003c/span\u003e\u003e\u003c/span\u003e\u0026#x3C;%= @ocr_text %\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003epre\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u0026#x3C;% end %\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 12: Tesseract가 설치되었는지 확인하기\u003c/h1\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e시스템에 Tesseract OCR이 설치되어 있는지 확인해주세요. 다음 명령어를 사용하여 운영 체제에 맞게 설치할 수 있습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003emacOS\u003c/span\u003e:\nbrew install tesseract\n\n\u003cspan class=\"hljs-title class_\"\u003eUbuntu\u003c/span\u003e:\nsudo apt-get install tesseract-ocr\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e앱을 실행한 후에는 다음과 같은 결과가 나타납니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-HowIbuiltanOCRSystemwithRails_2.png\" alt=\"OCR 결과\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e텍스트에는 개선할 여지가 많이 있어요. 댓글로 의겢나 생각을 알려주세요.\u003c/p\u003e\n\u003cp\u003e또한, 제 Github에서 전체 소스 코드를 확인하세요: \u003ca href=\"https://github.com/luizcg/ocr\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/luizcg/ocr\u003c/a\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-HowIbuiltanOCRSystemwithRails"},"buildId":"bb_yO9GbCvdfc_n71SfUf","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>