<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Android 개발에서 향상된 디버깅 품질 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-19-BetterDebuggingQualityinAndroidDevelopment" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Android 개발에서 향상된 디버깅 품질 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="Android 개발에서 향상된 디버깅 품질 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-19-BetterDebuggingQualityinAndroidDevelopment" data-gatsby-head="true"/><meta name="twitter:title" content="Android 개발에서 향상된 디버깅 품질 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 13:56" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-4f7b40c1114f0d09.js" defer=""></script><script src="/_next/static/-dPCbnM2yhdKNgXe92VJV/_buildManifest.js" defer=""></script><script src="/_next/static/-dPCbnM2yhdKNgXe92VJV/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Android 개발에서 향상된 디버깅 품질</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Android 개발에서 향상된 디버깅 품질" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">13<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-BetterDebuggingQualityinAndroidDevelopment&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_0.png" alt="Better Debugging Quality in Android Development"></p>
<p>개발 중에는 때때로, 이 검사 또는 등록 양식을 한 번 더 다시 쓰지 않으면 안 되는 상황이 발생합니다. 와락그러면서도 작은 버그를 찾기 위해 그 순응하지 않는 작은 고집스러운 버그를 발견하게 됩니다. 바로 이 점 때문에 우리에게 현저한 피해를 줄 수 있다는 것을 잊지 마세요. 그러므로 더 이상 그만 하기로 해야 합니다.</p>
<p>이 기사에서는 개발자로서 우리에게 매우 보편적인 보스 같은 여정을 겪어볼 것입니다. 지금 우리는 왼쪽, 오른쪽, 여기저기에 명령을 내리는 것을 좋아하는 우리 개발자들에게 익숙한 이야기죠 😀.</p>
<p>오늘 하루, 우리는 테스트 디바이스나 에뮬레이터를 제어하는 것뿐만 아니라 그 양식을 여러 번 작성하는 본능적 욕구도 제어할 것입니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>당신은 개발자로서. 위의 텍스트를 친근한 어조로 한국어로 번역해주세요.</p>
<p>"어떤가요??"라고 물을 수 있어요. 우리는 adbcommands를 사용할 거에요. ADB(Android Debug Bridge)라는 것은 안드로이드 장치나 에뮬레이터를 제어하기 위한 명령줄 도구에요. "안드로이드 디버그..." "커마..."만 듣고 어딘가로 가지 마세요. 약간 지루해 보일 수도 있지만, 제가 가능한 한 재미있게 만들어 드릴게요.</p>
<p>사실 마지막에는 이 명령을 한 번, 두 번, 세 번 정도만 사용할 거에요... 우리가 선택한 바로 가기로 이 명령들을 사용할 필요가 없게 할 거에요. (또는 경우에 따라 윈도우를 사용한다면 일명 하나의 명령만 남겨두게 할 거에요. 🙂).</p>
<h1>사용자 정의 가능한 입력 플로우 스크립트 생성</h1>
<p>우선, 장치/에뮬레이터와 상호작용할 명령어들이 여기 있어요:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># 호스트 안드로이드 장치의 터미널에서 명령을 열거나 실행합니다.
adb shell

# 현재 활성화된 <span class="hljs-title class_">TextField</span>에 지정된 문자열을 입력합니다.
adb shell input text <span class="hljs-string">"Hello World!"</span>

# 장치 화면의 지정된 좌표를 탭합니다.
adb shell input tap <span class="hljs-number">700</span> <span class="hljs-number">1500</span>
</code></pre>
<p>지금 당신은 아마 "정적 좌표를 사용하여 텍스트 필드를 찾을까?"라고 생각할 수 있습니다. 전혀, 그렇지 않습니다. 하지만 당신이 자신을 어렵게 만들고 싶다면 사용할 수 있습니다 :D. 화면에 기대되는 UI 요소의 좌표를 찾을 때, 우리는 uiautomator의 덤프를 사용할 것입니다. 이를 다운로드하려면 Python3가 필요합니다.</p>
<pre><code class="hljs language-js">adb exec-out uiautomator dump /dev/tty
</code></pre>
<p>이 명령어가 마법이 시작되는 곳입니다. UI Automator는 XML 형식의 현재 화면 보기 계층에 대한 덤프를 생성합니다. 이 명령을 입력하면 이 파일이 터미널에 표시될 것입니다. 그리고 우리가 관심 있는 부분은 실제로 이 파일의 각 요소의 [bounds] 태그이며, 다음은 그 노드 중 하나의 서식이 적용된 버전입니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_1.png">
<p>그렇게 말하니까 아마 이해가 가실 거에요. 우리는 각 요소의 경계를 가져오기 위한 파서를 만들어야 합니다. 물론 원하는 때마다 관련 요소에 접근 하는 방법은 그들의 이름을 호출하는 것입니다 :). 아래 스크립트에서 우리는 효과적으로 해당 목표를 달성하기 위해 터미널 명령을 사용합니다.</p>
<pre><code class="hljs language-js"># <span class="hljs-variable constant_">UI</span> 요소를 탭하는 함수 (요소가 존재하는 경우)
<span class="hljs-keyword">function</span> <span class="hljs-title function_">tapIfExists</span>(<span class="hljs-params"></span>) {
    # <span class="hljs-variable constant_">UI</span> 요소의 좌표 가져오기
    coords=$(getCoords <span class="hljs-string">"${1}"</span>)

    # 좌표가 찾아졌는지 확인
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"$coords"</span> != <span class="hljs-string">"-"</span> ]]; then
        # adb를 사용하여 좌표 탭하기
        adb shell input tap <span class="hljs-string">"$coords"</span>
    fi
}

# 텍스트를 기반으로 <span class="hljs-variable constant_">UI</span> 요소의 좌표를 가져오는 함수
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCoords</span>(<span class="hljs-params"></span>) {
    # <span class="hljs-variable constant_">UI</span> 계층 구조를 덤프하고 변수에 저장
    fastdump=$(/usr/bin/python3 -c <span class="hljs-string">"import uiautomator2 as u2;d=u2.connect(); out=d.dump_hierarchy(); print(out)"</span>)

    # 지정된 텍스트가 있는 요소가 있는지 확인
    present=$(echo <span class="hljs-string">"$fastdump"</span> | grep <span class="hljs-string">"text=\"${1}\""</span>)

    # 요소를 찾은 경우
    <span class="hljs-keyword">if</span> [[ $? -eq <span class="hljs-number">0</span> ]]; then
        # 덤프에서 좌표 추출
        arr=($(echo <span class="hljs-string">"$fastdump"</span> | sed <span class="hljs-string">'s/>&#x3C;/>\n&#x3C;/g'</span> | grep <span class="hljs-string">"text=\"${1}\""</span> | grep -o <span class="hljs-string">"\[.*\]"</span> | sed <span class="hljs-string">'s/\]\[/,/g'</span> | sed <span class="hljs-string">'s/\]//g;s/\[//g;s/,/\n/g'</span>))

        # 중앙 x좌표 계산
        x=$(echo <span class="hljs-string">"(${arr[0]}+${arr[2]})/2"</span> | bc)

        # 중앙 y좌표 계산
        y=$(echo <span class="hljs-string">"(${arr[1]}+${arr[3]})/2"</span> | bc)

        # 좌표 출력
        echo <span class="hljs-string">"$x $y"</span>
    <span class="hljs-keyword">else</span>
        # 요소를 찾지 못한 경우 <span class="hljs-string">"-"</span> 출력
        echo <span class="hljs-string">"-"</span>
    fi
}
</code></pre>
<p>이렇게 하면 모든 것이 훨씬 더 쉬워집니다. 예를 들어 로그인 플로우를 만들었습니다:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-javascript"># ...
# 파일 끝에 사용자 정의 로직을 추가하는 중...

tapIfExists <span class="hljs-string">"E-mail"</span>
adb shell input text <span class="hljs-string">"sevbanbuyer@gmail.com"</span>
tapIfExists <span class="hljs-string">"Password"</span>
adb shell input text <span class="hljs-string">"asdasdfasd"</span>
tapIfExists <span class="hljs-string">"SIGN IN"</span>
</code></pre>
<p>이 스크립트로 우리는 등록 과정을 단 한 개의 명령으로 줄였어요: ./<code>your-script-file-name</code> 하지만 아직 끝나지 않았습니다. 만약 Mac을 사용하고 계시다면 입력 과정에 대한 단축키를 만들 수 있어요. 이를 위해 먼저 Mac의 Automator 앱으로 Applescript 워크플로우를 만들어야 해요.</p>
<img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_2.png">
<img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_3.png">
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># <span class="hljs-title class_">Automator</span>의 applescript에 다음을 넣으세요
on run {input, parameters}
 <span class="hljs-keyword">do</span> shell script <span class="hljs-string">"&#x3C;path-to-your-script>"</span>
end run
</code></pre>
<pre><code class="hljs language-js">#!<span class="hljs-regexp">/bin/</span>bash

<span class="hljs-variable constant_">ADB_PATH</span>=<span class="hljs-string">"&#x3C;adb의 전체 경로>"</span> # 주의 !

<span class="hljs-keyword">function</span> <span class="hljs-title function_">tapIfExists</span>(<span class="hljs-params"></span>){
    coords=$(getCoords <span class="hljs-string">"${1}"</span>)
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"$coords"</span> != <span class="hljs-string">"-"</span> ]]; then
        $ADB_PATH shell input tap <span class="hljs-string">"$coords"</span> # 주의 !
    fi
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCoords</span>(<span class="hljs-params"></span>){
    fastdump=$(/usr/bin/python3 -c <span class="hljs-string">"import uiautomator2 as u2;d=u2.connect(); out=d.dump_hierarchy(); print(out)"</span>)
    present=$(echo <span class="hljs-string">"$fastdump"</span> | grep <span class="hljs-string">"text\=\"${1}\""</span>)
    <span class="hljs-keyword">if</span> [[ $? -eq <span class="hljs-number">0</span> ]]; then
        arr=($(echo <span class="hljs-string">"$fastdump"</span> | sed <span class="hljs-string">'s/>&#x3C;/>\n&#x3C;/g'</span> | grep <span class="hljs-string">"text\=\"${1}\""</span> | grep -o <span class="hljs-string">"\[.*\]"</span> | sed <span class="hljs-string">'s/\]\[/,/g'</span> | sed <span class="hljs-string">'s/\]//g;s/\[//g;s/,/\n/g'</span>))
        x=$(echo <span class="hljs-string">"(${arr[0]}+${arr[2]})/2"</span> | bc)
        y=$(echo <span class="hljs-string">"(${arr[1]}+${arr[3]})/2"</span> | bc)
        echo <span class="hljs-string">"$x $y"</span>
    <span class="hljs-keyword">else</span>
        echo <span class="hljs-string">"-"</span>
    fi
}

tapIfExists <span class="hljs-string">"이메일"</span>
$ADB_PATH shell input text <span class="hljs-string">"sevbanbuyer@gmail.com"</span> # 주의 !
tapIfExists <span class="hljs-string">"암호"</span>
$ADB_PATH input text <span class="hljs-string">"asdasdfasd"</span>  # 주의 !
tapIfExists <span class="hljs-string">"로그인"</span>
</code></pre>
<p>Applescript에 완전한 경로가 포함된 스크립트를 제공하면, Settings에서 <code>Keyboard</code> Keyboard Shortcuts <code>Services</code> General로 이동하고 그 섹션에 스크립트가 표시됩니다. 이제 원하는 단축키를 할당할 수 있습니다.</p>
<img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_4.png">
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>여기 출력물이 있어요:</p>
<p><img src="https://miro.medium.com/v2/resize:fit:784/1*OA1yF70mPJNjQ78lzlFoDg.gif" alt="Dumpsys"></p>
<h1>Dumpsys</h1>
<p>dumpsys 명령어는 장치에서 실행 중인 모든 시스템 서비스에 대한 진단 정보를 제공합니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>위의 표를 다음과 같이 변경해 주세요:</p>





























<table><thead><tr><th>주제</th><th>설명</th></tr></thead><tbody><tr><td>활동 및 프래그먼트</td><td>- 활동 및 프래그먼트에 대한 정보</td></tr><tr><td>배터리</td><td>- 배터리 상태 및 관리에 관한 정보</td></tr><tr><td>알람</td><td>- 알람 설정 및 관리에 관한 정보</td></tr><tr><td>패키지 정보</td><td>- 앱 패키지 정보에 대한 정보</td></tr><tr><td>작업 스케줄러</td><td>- 작업 스케줄러 사용법과 정보에 대한 정보</td></tr></tbody></table>
<p>이 서비스들과 상호작용하면서 코드를 통해 어떤 일이 벌어지는지를 알아내므로 버그에 대한 효율적인 추측이 가능합니다.</p>
<p>"AlarmManager를 사용하여 알람을 설정했는데, 정말 설정되었을까요?"</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>"조각을 확장했지만 아무것도 보이지 않아요. 제가 제대로 한 걸까요?"</p>
<ul>
<li>리뷰 중인 앱을 분석하고 실제로 무엇을 보고 있는지 확인하기 위해 dumpsysis를 사용하는 것이 좋습니다.</li>
</ul>
<p>다음은 명령어입니다:</p>
<pre><code class="hljs language-js">adb shell dumpsys &#x3C;service>

adb shell dumpsys battery
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_5.png" alt="이미지"></p>
<p>덤프시스에서 grep을 사용하여 검색할 수 있습니다. 예를 들어:</p>
<pre><code class="hljs language-js">adb shell dumpsys | grep <span class="hljs-string">"ACTIVITY"</span>

adb shell dumpsys | grep <span class="hljs-string">"BottomNavigationItemView"</span>
</code></pre>
<h1>로컬 파일의 내용 보기/변경</h1>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>로컬 스토리지를 다룰 때 종종 어려움을 겪곤 합니다.</p>
<ul>
<li>스토리지 데이터를 쿼리하기 위해 중단점을 설정하거나</li>
<li>printlines 또는 로그를 추가하는 것은 수정 및 빌드가 필요하여 시간이 많이 소요됩니다.</li>
</ul>
<p>우리는 이 디버깅 프로세스를 최적화할 수 있는 기회가 있습니다.</p>
<ul>
<li>앱의 내부 데이터는 data/path에 저장됩니다.</li>
<li>이론적으로 우리는 cd, ls, echo, nano 등의 일반 터미널 명령어를 사용하여 기기에서 이 데이터를 볼 수 있지만 실제로는 이와 같은 문제가 발생합니다.</li>
</ul>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_6.png" alt="Image"></p>
<p>안드로이드는 앱의 리소스에 쉽게 액세스할 수 없도록 허용하지 않는다는 점이 좋은 것 같아요.</p>
<p>그런데 앱의 내부 데이터의 정확한 경로는 다음과 같아요: /data/user/0/<code>your.package.name</code> 그래도 저 정확한 경로를 알아도 들어가지 못하는 걸 보면 다른 방법이 필요할 걸요.</p>
<p>이를 위해 안드로이드의 각 앱이 사실 별칭으로 패키지 이름을 가진 사용자라는 사실을 활용할 거에요:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_7.png" alt="Screenshot 1"></p>
<p>우리는 run-as 명령어를 사용하여 앱이 셀프인 것처럼 속이는 데 사용했습니다. 이제 우리는 앱의 내부 저장소를 lsin 할 수 있고, sharedPref, 데이터베이스 또는 파일과 같은 데이터를 볼 수 있습니다. 이 데이터들은 코드베이스 내에서 파일 API를 사용하여 생성된 것입니다.</p>
<p><img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_8.png" alt="Screenshot 2"></p>
<p>그리고 BUM! 여기가 제 앱의 공유 프리퍼런스 파일이고, onboarding_key와 해당 값을 볼 수 있습니다:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>&#x3C;img src="/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_9.png" /></p>
<p>이제 이 선호 값을 어떻게 편집할 수 있어서 앱을 다시 빌드하지 않고 변경 사항을 확실히 적용하는 데 시간을 낭비하지 않을 수 있는지 묻게 될 것입니다. 일반적으로 터미널에서 사용하는 텍스트 편집기를 adb 쉘에서 사용할 수는 없지만 여기에 대한 해결책이 있습니다: sedcommand. -iflag로 파일을 직접 덮어쓸 수 있으므로 여기 제 앱의 온보딩 키에 대한 적용입니다:</p>
<pre><code class="hljs language-js"><span class="hljs-attr">emu64a</span>:<span class="hljs-regexp">/data/u</span>ser/<span class="hljs-number">0</span>/com.<span class="hljs-property">sevban</span>.<span class="hljs-property">tradejournal</span>/shared_prefs $ grep <span class="hljs-string">"onboarding_key"</span> presentation.<span class="hljs-property">MainActivity</span>.<span class="hljs-property">xml</span>
    &#x3C;boolean name=<span class="hljs-string">"onboarding_key"</span> value=<span class="hljs-string">"true"</span> />
<span class="hljs-attr">emu64a</span>:<span class="hljs-regexp">/data/u</span>ser/<span class="hljs-number">0</span>/com.<span class="hljs-property">sevban</span>.<span class="hljs-property">tradejournal</span>/shared_prefs $

cat presentation.<span class="hljs-property">MainActivity</span>.<span class="hljs-property">xml</span> |
grep <span class="hljs-string">"onboarding_key"</span> |
sed -i <span class="hljs-string">"s/true/false/g"</span> presentation.<span class="hljs-property">MainActivity</span>.<span class="hljs-property">xml</span>

<span class="hljs-attr">emu64a</span>:<span class="hljs-regexp">/data/u</span>ser/<span class="hljs-number">0</span>/com.<span class="hljs-property">sevban</span>.<span class="hljs-property">tradejournal</span>/shared_prefs $ grep <span class="hljs-string">"onboarding_key"</span> presentation.<span class="hljs-property">MainActivity</span>.<span class="hljs-property">xml</span>
    &#x3C;boolean name=<span class="hljs-string">"onboarding_key"</span> value=<span class="hljs-string">"false"</span> />
</code></pre>
<h1>결론</h1>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>안드로이드 개발에서 디버깅 프로세스를 개선하는 과정은 어렵지 않을 수 있어요. ADB 및 uiautomator와 같은 도구를 활용하여 양식 작성과 같은 반복적인 작업을 자동화하고 앱의 동작에 대한 깊은 통찰력을 얻을 수 있어요.</p>
<p>사용자 정의 입력 흐름 스크립트를 생성하면 UI 상호작용을 자동화하여 디버깅을 더 효율적이고 단조로운 일이 줄어들어요. dumpsys를 사용하고 run-as 및 sed 명령어를 사용하여 로컬 파일에 액세스하면 문제를 진단하고 효과적으로 해결할 수 있어요.</p>
<p>이러한 기술을 활용하면 디버깅 프로세스를 변화시킬 수 있어요. 가능한 경우 자동화 도구를 적극적으로 활용하고 더욱 원활하고 생산적인 개발 경험을 누려보세요.</p>
<p>참고 문헌:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><a href="https://www.youtube.com/watch?v=DcU1czPxQ10&#x26;t=1326s" rel="nofollow" target="_blank">https://www.youtube.com/watch?v=DcU1czPxQ10&#x26;t=1326s</a></p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Android 개발에서 향상된 디버깅 품질","description":"","date":"2024-06-19 13:56","slug":"2024-06-19-BetterDebuggingQualityinAndroidDevelopment","content":"\n![Better Debugging Quality in Android Development](/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_0.png)\n\n개발 중에는 때때로, 이 검사 또는 등록 양식을 한 번 더 다시 쓰지 않으면 안 되는 상황이 발생합니다. 와락그러면서도 작은 버그를 찾기 위해 그 순응하지 않는 작은 고집스러운 버그를 발견하게 됩니다. 바로 이 점 때문에 우리에게 현저한 피해를 줄 수 있다는 것을 잊지 마세요. 그러므로 더 이상 그만 하기로 해야 합니다.\n\n이 기사에서는 개발자로서 우리에게 매우 보편적인 보스 같은 여정을 겪어볼 것입니다. 지금 우리는 왼쪽, 오른쪽, 여기저기에 명령을 내리는 것을 좋아하는 우리 개발자들에게 익숙한 이야기죠 😀.\n\n오늘 하루, 우리는 테스트 디바이스나 에뮬레이터를 제어하는 것뿐만 아니라 그 양식을 여러 번 작성하는 본능적 욕구도 제어할 것입니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n당신은 개발자로서. 위의 텍스트를 친근한 어조로 한국어로 번역해주세요.\n\n\"어떤가요??\"라고 물을 수 있어요. 우리는 adbcommands를 사용할 거에요. ADB(Android Debug Bridge)라는 것은 안드로이드 장치나 에뮬레이터를 제어하기 위한 명령줄 도구에요. \"안드로이드 디버그...\" \"커마...\"만 듣고 어딘가로 가지 마세요. 약간 지루해 보일 수도 있지만, 제가 가능한 한 재미있게 만들어 드릴게요.\n\n사실 마지막에는 이 명령을 한 번, 두 번, 세 번 정도만 사용할 거에요... 우리가 선택한 바로 가기로 이 명령들을 사용할 필요가 없게 할 거에요. (또는 경우에 따라 윈도우를 사용한다면 일명 하나의 명령만 남겨두게 할 거에요. 🙂).\n\n# 사용자 정의 가능한 입력 플로우 스크립트 생성\n\n우선, 장치/에뮬레이터와 상호작용할 명령어들이 여기 있어요:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# 호스트 안드로이드 장치의 터미널에서 명령을 열거나 실행합니다.\nadb shell\n\n# 현재 활성화된 TextField에 지정된 문자열을 입력합니다.\nadb shell input text \"Hello World!\"\n\n# 장치 화면의 지정된 좌표를 탭합니다.\nadb shell input tap 700 1500\n```\n\n지금 당신은 아마 \"정적 좌표를 사용하여 텍스트 필드를 찾을까?\"라고 생각할 수 있습니다. 전혀, 그렇지 않습니다. 하지만 당신이 자신을 어렵게 만들고 싶다면 사용할 수 있습니다 :D. 화면에 기대되는 UI 요소의 좌표를 찾을 때, 우리는 uiautomator의 덤프를 사용할 것입니다. 이를 다운로드하려면 Python3가 필요합니다.\n\n```js\nadb exec-out uiautomator dump /dev/tty\n```\n\n이 명령어가 마법이 시작되는 곳입니다. UI Automator는 XML 형식의 현재 화면 보기 계층에 대한 덤프를 생성합니다. 이 명령을 입력하면 이 파일이 터미널에 표시될 것입니다. 그리고 우리가 관심 있는 부분은 실제로 이 파일의 각 요소의 [bounds] 태그이며, 다음은 그 노드 중 하나의 서식이 적용된 버전입니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_1.png\" /\u003e\n\n그렇게 말하니까 아마 이해가 가실 거에요. 우리는 각 요소의 경계를 가져오기 위한 파서를 만들어야 합니다. 물론 원하는 때마다 관련 요소에 접근 하는 방법은 그들의 이름을 호출하는 것입니다 :). 아래 스크립트에서 우리는 효과적으로 해당 목표를 달성하기 위해 터미널 명령을 사용합니다.\n\n```js\n# UI 요소를 탭하는 함수 (요소가 존재하는 경우)\nfunction tapIfExists() {\n    # UI 요소의 좌표 가져오기\n    coords=$(getCoords \"${1}\")\n\n    # 좌표가 찾아졌는지 확인\n    if [[ \"$coords\" != \"-\" ]]; then\n        # adb를 사용하여 좌표 탭하기\n        adb shell input tap \"$coords\"\n    fi\n}\n\n# 텍스트를 기반으로 UI 요소의 좌표를 가져오는 함수\nfunction getCoords() {\n    # UI 계층 구조를 덤프하고 변수에 저장\n    fastdump=$(/usr/bin/python3 -c \"import uiautomator2 as u2;d=u2.connect(); out=d.dump_hierarchy(); print(out)\")\n\n    # 지정된 텍스트가 있는 요소가 있는지 확인\n    present=$(echo \"$fastdump\" | grep \"text=\\\"${1}\\\"\")\n\n    # 요소를 찾은 경우\n    if [[ $? -eq 0 ]]; then\n        # 덤프에서 좌표 추출\n        arr=($(echo \"$fastdump\" | sed 's/\u003e\u003c/\u003e\\n\u003c/g' | grep \"text=\\\"${1}\\\"\" | grep -o \"\\[.*\\]\" | sed 's/\\]\\[/,/g' | sed 's/\\]//g;s/\\[//g;s/,/\\n/g'))\n\n        # 중앙 x좌표 계산\n        x=$(echo \"(${arr[0]}+${arr[2]})/2\" | bc)\n\n        # 중앙 y좌표 계산\n        y=$(echo \"(${arr[1]}+${arr[3]})/2\" | bc)\n\n        # 좌표 출력\n        echo \"$x $y\"\n    else\n        # 요소를 찾지 못한 경우 \"-\" 출력\n        echo \"-\"\n    fi\n}\n```\n\n이렇게 하면 모든 것이 훨씬 더 쉬워집니다. 예를 들어 로그인 플로우를 만들었습니다:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```javascript\n# ...\n# 파일 끝에 사용자 정의 로직을 추가하는 중...\n\ntapIfExists \"E-mail\"\nadb shell input text \"sevbanbuyer@gmail.com\"\ntapIfExists \"Password\"\nadb shell input text \"asdasdfasd\"\ntapIfExists \"SIGN IN\"\n```\n\n이 스크립트로 우리는 등록 과정을 단 한 개의 명령으로 줄였어요: ./`your-script-file-name` 하지만 아직 끝나지 않았습니다. 만약 Mac을 사용하고 계시다면 입력 과정에 대한 단축키를 만들 수 있어요. 이를 위해 먼저 Mac의 Automator 앱으로 Applescript 워크플로우를 만들어야 해요.\n\n\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_2.png\" /\u003e\n\n\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_3.png\" /\u003e\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# Automator의 applescript에 다음을 넣으세요\non run {input, parameters}\n do shell script \"\u003cpath-to-your-script\u003e\"\nend run\n```\n\n```js\n#!/bin/bash\n\nADB_PATH=\"\u003cadb의 전체 경로\u003e\" # 주의 !\n\nfunction tapIfExists(){\n    coords=$(getCoords \"${1}\")\n    if [[ \"$coords\" != \"-\" ]]; then\n        $ADB_PATH shell input tap \"$coords\" # 주의 !\n    fi\n}\n\nfunction getCoords(){\n    fastdump=$(/usr/bin/python3 -c \"import uiautomator2 as u2;d=u2.connect(); out=d.dump_hierarchy(); print(out)\")\n    present=$(echo \"$fastdump\" | grep \"text\\=\\\"${1}\\\"\")\n    if [[ $? -eq 0 ]]; then\n        arr=($(echo \"$fastdump\" | sed 's/\u003e\u003c/\u003e\\n\u003c/g' | grep \"text\\=\\\"${1}\\\"\" | grep -o \"\\[.*\\]\" | sed 's/\\]\\[/,/g' | sed 's/\\]//g;s/\\[//g;s/,/\\n/g'))\n        x=$(echo \"(${arr[0]}+${arr[2]})/2\" | bc)\n        y=$(echo \"(${arr[1]}+${arr[3]})/2\" | bc)\n        echo \"$x $y\"\n    else\n        echo \"-\"\n    fi\n}\n\ntapIfExists \"이메일\"\n$ADB_PATH shell input text \"sevbanbuyer@gmail.com\" # 주의 !\ntapIfExists \"암호\"\n$ADB_PATH input text \"asdasdfasd\"  # 주의 !\ntapIfExists \"로그인\"\n```\n\nApplescript에 완전한 경로가 포함된 스크립트를 제공하면, Settings에서 `Keyboard` Keyboard Shortcuts `Services` General로 이동하고 그 섹션에 스크립트가 표시됩니다. 이제 원하는 단축키를 할당할 수 있습니다.\n\n\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_4.png\" /\u003e\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n여기 출력물이 있어요:\n\n![Dumpsys](https://miro.medium.com/v2/resize:fit:784/1*OA1yF70mPJNjQ78lzlFoDg.gif)\n\n# Dumpsys\n\ndumpsys 명령어는 장치에서 실행 중인 모든 시스템 서비스에 대한 진단 정보를 제공합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n위의 표를 다음과 같이 변경해 주세요:\n\n| 주제               | 설명                                      |\n| ------------------ | ----------------------------------------- |\n| 활동 및 프래그먼트 | - 활동 및 프래그먼트에 대한 정보          |\n| 배터리             | - 배터리 상태 및 관리에 관한 정보         |\n| 알람               | - 알람 설정 및 관리에 관한 정보           |\n| 패키지 정보        | - 앱 패키지 정보에 대한 정보              |\n| 작업 스케줄러      | - 작업 스케줄러 사용법과 정보에 대한 정보 |\n\n이 서비스들과 상호작용하면서 코드를 통해 어떤 일이 벌어지는지를 알아내므로 버그에 대한 효율적인 추측이 가능합니다.\n\n\"AlarmManager를 사용하여 알람을 설정했는데, 정말 설정되었을까요?\"\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\"조각을 확장했지만 아무것도 보이지 않아요. 제가 제대로 한 걸까요?\"\n\n- 리뷰 중인 앱을 분석하고 실제로 무엇을 보고 있는지 확인하기 위해 dumpsysis를 사용하는 것이 좋습니다.\n\n다음은 명령어입니다:\n\n```js\nadb shell dumpsys \u003cservice\u003e\n\nadb shell dumpsys battery\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![이미지](/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_5.png)\n\n덤프시스에서 grep을 사용하여 검색할 수 있습니다. 예를 들어:\n\n```js\nadb shell dumpsys | grep \"ACTIVITY\"\n\nadb shell dumpsys | grep \"BottomNavigationItemView\"\n```\n\n# 로컬 파일의 내용 보기/변경\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n로컬 스토리지를 다룰 때 종종 어려움을 겪곤 합니다.\n\n- 스토리지 데이터를 쿼리하기 위해 중단점을 설정하거나\n- printlines 또는 로그를 추가하는 것은 수정 및 빌드가 필요하여 시간이 많이 소요됩니다.\n\n우리는 이 디버깅 프로세스를 최적화할 수 있는 기회가 있습니다.\n\n- 앱의 내부 데이터는 data/path에 저장됩니다.\n- 이론적으로 우리는 cd, ls, echo, nano 등의 일반 터미널 명령어를 사용하여 기기에서 이 데이터를 볼 수 있지만 실제로는 이와 같은 문제가 발생합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![Image](/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_6.png)\n\n안드로이드는 앱의 리소스에 쉽게 액세스할 수 없도록 허용하지 않는다는 점이 좋은 것 같아요.\n\n그런데 앱의 내부 데이터의 정확한 경로는 다음과 같아요: /data/user/0/`your.package.name` 그래도 저 정확한 경로를 알아도 들어가지 못하는 걸 보면 다른 방법이 필요할 걸요.\n\n이를 위해 안드로이드의 각 앱이 사실 별칭으로 패키지 이름을 가진 사용자라는 사실을 활용할 거에요:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![Screenshot 1](/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_7.png)\n\n우리는 run-as 명령어를 사용하여 앱이 셀프인 것처럼 속이는 데 사용했습니다. 이제 우리는 앱의 내부 저장소를 lsin 할 수 있고, sharedPref, 데이터베이스 또는 파일과 같은 데이터를 볼 수 있습니다. 이 데이터들은 코드베이스 내에서 파일 API를 사용하여 생성된 것입니다.\n\n![Screenshot 2](/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_8.png)\n\n그리고 BUM! 여기가 제 앱의 공유 프리퍼런스 파일이고, onboarding_key와 해당 값을 볼 수 있습니다:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\\\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_9.png\" /\u003e\n\n이제 이 선호 값을 어떻게 편집할 수 있어서 앱을 다시 빌드하지 않고 변경 사항을 확실히 적용하는 데 시간을 낭비하지 않을 수 있는지 묻게 될 것입니다. 일반적으로 터미널에서 사용하는 텍스트 편집기를 adb 쉘에서 사용할 수는 없지만 여기에 대한 해결책이 있습니다: sedcommand. -iflag로 파일을 직접 덮어쓸 수 있으므로 여기 제 앱의 온보딩 키에 대한 적용입니다:\n\n```js\nemu64a:/data/user/0/com.sevban.tradejournal/shared_prefs $ grep \"onboarding_key\" presentation.MainActivity.xml\n    \u003cboolean name=\"onboarding_key\" value=\"true\" /\u003e\nemu64a:/data/user/0/com.sevban.tradejournal/shared_prefs $\n\ncat presentation.MainActivity.xml |\ngrep \"onboarding_key\" |\nsed -i \"s/true/false/g\" presentation.MainActivity.xml\n\nemu64a:/data/user/0/com.sevban.tradejournal/shared_prefs $ grep \"onboarding_key\" presentation.MainActivity.xml\n    \u003cboolean name=\"onboarding_key\" value=\"false\" /\u003e\n```\n\n# 결론\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n안드로이드 개발에서 디버깅 프로세스를 개선하는 과정은 어렵지 않을 수 있어요. ADB 및 uiautomator와 같은 도구를 활용하여 양식 작성과 같은 반복적인 작업을 자동화하고 앱의 동작에 대한 깊은 통찰력을 얻을 수 있어요.\n\n사용자 정의 입력 흐름 스크립트를 생성하면 UI 상호작용을 자동화하여 디버깅을 더 효율적이고 단조로운 일이 줄어들어요. dumpsys를 사용하고 run-as 및 sed 명령어를 사용하여 로컬 파일에 액세스하면 문제를 진단하고 효과적으로 해결할 수 있어요.\n\n이러한 기술을 활용하면 디버깅 프로세스를 변화시킬 수 있어요. 가능한 경우 자동화 도구를 적극적으로 활용하고 더욱 원활하고 생산적인 개발 경험을 누려보세요.\n\n참고 문헌:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nhttps://www.youtube.com/watch?v=DcU1czPxQ10\u0026t=1326s\n","ogImage":{"url":"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_0.png"},"coverImage":"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_0.png","tag":["Tech"],"readingTime":13},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_0.png\" alt=\"Better Debugging Quality in Android Development\"\u003e\u003c/p\u003e\n\u003cp\u003e개발 중에는 때때로, 이 검사 또는 등록 양식을 한 번 더 다시 쓰지 않으면 안 되는 상황이 발생합니다. 와락그러면서도 작은 버그를 찾기 위해 그 순응하지 않는 작은 고집스러운 버그를 발견하게 됩니다. 바로 이 점 때문에 우리에게 현저한 피해를 줄 수 있다는 것을 잊지 마세요. 그러므로 더 이상 그만 하기로 해야 합니다.\u003c/p\u003e\n\u003cp\u003e이 기사에서는 개발자로서 우리에게 매우 보편적인 보스 같은 여정을 겪어볼 것입니다. 지금 우리는 왼쪽, 오른쪽, 여기저기에 명령을 내리는 것을 좋아하는 우리 개발자들에게 익숙한 이야기죠 😀.\u003c/p\u003e\n\u003cp\u003e오늘 하루, 우리는 테스트 디바이스나 에뮬레이터를 제어하는 것뿐만 아니라 그 양식을 여러 번 작성하는 본능적 욕구도 제어할 것입니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e당신은 개발자로서. 위의 텍스트를 친근한 어조로 한국어로 번역해주세요.\u003c/p\u003e\n\u003cp\u003e\"어떤가요??\"라고 물을 수 있어요. 우리는 adbcommands를 사용할 거에요. ADB(Android Debug Bridge)라는 것은 안드로이드 장치나 에뮬레이터를 제어하기 위한 명령줄 도구에요. \"안드로이드 디버그...\" \"커마...\"만 듣고 어딘가로 가지 마세요. 약간 지루해 보일 수도 있지만, 제가 가능한 한 재미있게 만들어 드릴게요.\u003c/p\u003e\n\u003cp\u003e사실 마지막에는 이 명령을 한 번, 두 번, 세 번 정도만 사용할 거에요... 우리가 선택한 바로 가기로 이 명령들을 사용할 필요가 없게 할 거에요. (또는 경우에 따라 윈도우를 사용한다면 일명 하나의 명령만 남겨두게 할 거에요. 🙂).\u003c/p\u003e\n\u003ch1\u003e사용자 정의 가능한 입력 플로우 스크립트 생성\u003c/h1\u003e\n\u003cp\u003e우선, 장치/에뮬레이터와 상호작용할 명령어들이 여기 있어요:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 호스트 안드로이드 장치의 터미널에서 명령을 열거나 실행합니다.\nadb shell\n\n# 현재 활성화된 \u003cspan class=\"hljs-title class_\"\u003eTextField\u003c/span\u003e에 지정된 문자열을 입력합니다.\nadb shell input text \u003cspan class=\"hljs-string\"\u003e\"Hello World!\"\u003c/span\u003e\n\n# 장치 화면의 지정된 좌표를 탭합니다.\nadb shell input tap \u003cspan class=\"hljs-number\"\u003e700\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1500\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e지금 당신은 아마 \"정적 좌표를 사용하여 텍스트 필드를 찾을까?\"라고 생각할 수 있습니다. 전혀, 그렇지 않습니다. 하지만 당신이 자신을 어렵게 만들고 싶다면 사용할 수 있습니다 :D. 화면에 기대되는 UI 요소의 좌표를 찾을 때, 우리는 uiautomator의 덤프를 사용할 것입니다. 이를 다운로드하려면 Python3가 필요합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eadb exec-out uiautomator dump /dev/tty\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 명령어가 마법이 시작되는 곳입니다. UI Automator는 XML 형식의 현재 화면 보기 계층에 대한 덤프를 생성합니다. 이 명령을 입력하면 이 파일이 터미널에 표시될 것입니다. 그리고 우리가 관심 있는 부분은 실제로 이 파일의 각 요소의 [bounds] 태그이며, 다음은 그 노드 중 하나의 서식이 적용된 버전입니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_1.png\"\u003e\n\u003cp\u003e그렇게 말하니까 아마 이해가 가실 거에요. 우리는 각 요소의 경계를 가져오기 위한 파서를 만들어야 합니다. 물론 원하는 때마다 관련 요소에 접근 하는 방법은 그들의 이름을 호출하는 것입니다 :). 아래 스크립트에서 우리는 효과적으로 해당 목표를 달성하기 위해 터미널 명령을 사용합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-variable constant_\"\u003eUI\u003c/span\u003e 요소를 탭하는 함수 (요소가 존재하는 경우)\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etapIfExists\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    # \u003cspan class=\"hljs-variable constant_\"\u003eUI\u003c/span\u003e 요소의 좌표 가져오기\n    coords=$(getCoords \u003cspan class=\"hljs-string\"\u003e\"${1}\"\u003c/span\u003e)\n\n    # 좌표가 찾아졌는지 확인\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"hljs-string\"\u003e\"$coords\"\u003c/span\u003e != \u003cspan class=\"hljs-string\"\u003e\"-\"\u003c/span\u003e ]]; then\n        # adb를 사용하여 좌표 탭하기\n        adb shell input tap \u003cspan class=\"hljs-string\"\u003e\"$coords\"\u003c/span\u003e\n    fi\n}\n\n# 텍스트를 기반으로 \u003cspan class=\"hljs-variable constant_\"\u003eUI\u003c/span\u003e 요소의 좌표를 가져오는 함수\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetCoords\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    # \u003cspan class=\"hljs-variable constant_\"\u003eUI\u003c/span\u003e 계층 구조를 덤프하고 변수에 저장\n    fastdump=$(/usr/bin/python3 -c \u003cspan class=\"hljs-string\"\u003e\"import uiautomator2 as u2;d=u2.connect(); out=d.dump_hierarchy(); print(out)\"\u003c/span\u003e)\n\n    # 지정된 텍스트가 있는 요소가 있는지 확인\n    present=$(echo \u003cspan class=\"hljs-string\"\u003e\"$fastdump\"\u003c/span\u003e | grep \u003cspan class=\"hljs-string\"\u003e\"text=\\\"${1}\\\"\"\u003c/span\u003e)\n\n    # 요소를 찾은 경우\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ $? -eq \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e ]]; then\n        # 덤프에서 좌표 추출\n        arr=($(echo \u003cspan class=\"hljs-string\"\u003e\"$fastdump\"\u003c/span\u003e | sed \u003cspan class=\"hljs-string\"\u003e's/\u003e\u0026#x3C;/\u003e\\n\u0026#x3C;/g'\u003c/span\u003e | grep \u003cspan class=\"hljs-string\"\u003e\"text=\\\"${1}\\\"\"\u003c/span\u003e | grep -o \u003cspan class=\"hljs-string\"\u003e\"\\[.*\\]\"\u003c/span\u003e | sed \u003cspan class=\"hljs-string\"\u003e's/\\]\\[/,/g'\u003c/span\u003e | sed \u003cspan class=\"hljs-string\"\u003e's/\\]//g;s/\\[//g;s/,/\\n/g'\u003c/span\u003e))\n\n        # 중앙 x좌표 계산\n        x=$(echo \u003cspan class=\"hljs-string\"\u003e\"(${arr[0]}+${arr[2]})/2\"\u003c/span\u003e | bc)\n\n        # 중앙 y좌표 계산\n        y=$(echo \u003cspan class=\"hljs-string\"\u003e\"(${arr[1]}+${arr[3]})/2\"\u003c/span\u003e | bc)\n\n        # 좌표 출력\n        echo \u003cspan class=\"hljs-string\"\u003e\"$x $y\"\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n        # 요소를 찾지 못한 경우 \u003cspan class=\"hljs-string\"\u003e\"-\"\u003c/span\u003e 출력\n        echo \u003cspan class=\"hljs-string\"\u003e\"-\"\u003c/span\u003e\n    fi\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이렇게 하면 모든 것이 훨씬 더 쉬워집니다. 예를 들어 로그인 플로우를 만들었습니다:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e# ...\n# 파일 끝에 사용자 정의 로직을 추가하는 중...\n\ntapIfExists \u003cspan class=\"hljs-string\"\u003e\"E-mail\"\u003c/span\u003e\nadb shell input text \u003cspan class=\"hljs-string\"\u003e\"sevbanbuyer@gmail.com\"\u003c/span\u003e\ntapIfExists \u003cspan class=\"hljs-string\"\u003e\"Password\"\u003c/span\u003e\nadb shell input text \u003cspan class=\"hljs-string\"\u003e\"asdasdfasd\"\u003c/span\u003e\ntapIfExists \u003cspan class=\"hljs-string\"\u003e\"SIGN IN\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 스크립트로 우리는 등록 과정을 단 한 개의 명령으로 줄였어요: ./\u003ccode\u003eyour-script-file-name\u003c/code\u003e 하지만 아직 끝나지 않았습니다. 만약 Mac을 사용하고 계시다면 입력 과정에 대한 단축키를 만들 수 있어요. 이를 위해 먼저 Mac의 Automator 앱으로 Applescript 워크플로우를 만들어야 해요.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_2.png\"\u003e\n\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_3.png\"\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-title class_\"\u003eAutomator\u003c/span\u003e의 applescript에 다음을 넣으세요\non run {input, parameters}\n \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e shell script \u003cspan class=\"hljs-string\"\u003e\"\u0026#x3C;path-to-your-script\u003e\"\u003c/span\u003e\nend run\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e#!\u003cspan class=\"hljs-regexp\"\u003e/bin/\u003c/span\u003ebash\n\n\u003cspan class=\"hljs-variable constant_\"\u003eADB_PATH\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"\u0026#x3C;adb의 전체 경로\u003e\"\u003c/span\u003e # 주의 !\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etapIfExists\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n    coords=$(getCoords \u003cspan class=\"hljs-string\"\u003e\"${1}\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"hljs-string\"\u003e\"$coords\"\u003c/span\u003e != \u003cspan class=\"hljs-string\"\u003e\"-\"\u003c/span\u003e ]]; then\n        $ADB_PATH shell input tap \u003cspan class=\"hljs-string\"\u003e\"$coords\"\u003c/span\u003e # 주의 !\n    fi\n}\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetCoords\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n    fastdump=$(/usr/bin/python3 -c \u003cspan class=\"hljs-string\"\u003e\"import uiautomator2 as u2;d=u2.connect(); out=d.dump_hierarchy(); print(out)\"\u003c/span\u003e)\n    present=$(echo \u003cspan class=\"hljs-string\"\u003e\"$fastdump\"\u003c/span\u003e | grep \u003cspan class=\"hljs-string\"\u003e\"text\\=\\\"${1}\\\"\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ $? -eq \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e ]]; then\n        arr=($(echo \u003cspan class=\"hljs-string\"\u003e\"$fastdump\"\u003c/span\u003e | sed \u003cspan class=\"hljs-string\"\u003e's/\u003e\u0026#x3C;/\u003e\\n\u0026#x3C;/g'\u003c/span\u003e | grep \u003cspan class=\"hljs-string\"\u003e\"text\\=\\\"${1}\\\"\"\u003c/span\u003e | grep -o \u003cspan class=\"hljs-string\"\u003e\"\\[.*\\]\"\u003c/span\u003e | sed \u003cspan class=\"hljs-string\"\u003e's/\\]\\[/,/g'\u003c/span\u003e | sed \u003cspan class=\"hljs-string\"\u003e's/\\]//g;s/\\[//g;s/,/\\n/g'\u003c/span\u003e))\n        x=$(echo \u003cspan class=\"hljs-string\"\u003e\"(${arr[0]}+${arr[2]})/2\"\u003c/span\u003e | bc)\n        y=$(echo \u003cspan class=\"hljs-string\"\u003e\"(${arr[1]}+${arr[3]})/2\"\u003c/span\u003e | bc)\n        echo \u003cspan class=\"hljs-string\"\u003e\"$x $y\"\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n        echo \u003cspan class=\"hljs-string\"\u003e\"-\"\u003c/span\u003e\n    fi\n}\n\ntapIfExists \u003cspan class=\"hljs-string\"\u003e\"이메일\"\u003c/span\u003e\n$ADB_PATH shell input text \u003cspan class=\"hljs-string\"\u003e\"sevbanbuyer@gmail.com\"\u003c/span\u003e # 주의 !\ntapIfExists \u003cspan class=\"hljs-string\"\u003e\"암호\"\u003c/span\u003e\n$ADB_PATH input text \u003cspan class=\"hljs-string\"\u003e\"asdasdfasd\"\u003c/span\u003e  # 주의 !\ntapIfExists \u003cspan class=\"hljs-string\"\u003e\"로그인\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eApplescript에 완전한 경로가 포함된 스크립트를 제공하면, Settings에서 \u003ccode\u003eKeyboard\u003c/code\u003e Keyboard Shortcuts \u003ccode\u003eServices\u003c/code\u003e General로 이동하고 그 섹션에 스크립트가 표시됩니다. 이제 원하는 단축키를 할당할 수 있습니다.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_4.png\"\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e여기 출력물이 있어요:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:784/1*OA1yF70mPJNjQ78lzlFoDg.gif\" alt=\"Dumpsys\"\u003e\u003c/p\u003e\n\u003ch1\u003eDumpsys\u003c/h1\u003e\n\u003cp\u003edumpsys 명령어는 장치에서 실행 중인 모든 시스템 서비스에 대한 진단 정보를 제공합니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e위의 표를 다음과 같이 변경해 주세요:\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e주제\u003c/th\u003e\u003cth\u003e설명\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e활동 및 프래그먼트\u003c/td\u003e\u003ctd\u003e- 활동 및 프래그먼트에 대한 정보\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e배터리\u003c/td\u003e\u003ctd\u003e- 배터리 상태 및 관리에 관한 정보\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e알람\u003c/td\u003e\u003ctd\u003e- 알람 설정 및 관리에 관한 정보\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e패키지 정보\u003c/td\u003e\u003ctd\u003e- 앱 패키지 정보에 대한 정보\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e작업 스케줄러\u003c/td\u003e\u003ctd\u003e- 작업 스케줄러 사용법과 정보에 대한 정보\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e이 서비스들과 상호작용하면서 코드를 통해 어떤 일이 벌어지는지를 알아내므로 버그에 대한 효율적인 추측이 가능합니다.\u003c/p\u003e\n\u003cp\u003e\"AlarmManager를 사용하여 알람을 설정했는데, 정말 설정되었을까요?\"\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\"조각을 확장했지만 아무것도 보이지 않아요. 제가 제대로 한 걸까요?\"\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e리뷰 중인 앱을 분석하고 실제로 무엇을 보고 있는지 확인하기 위해 dumpsysis를 사용하는 것이 좋습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e다음은 명령어입니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eadb shell dumpsys \u0026#x3C;service\u003e\n\nadb shell dumpsys battery\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_5.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e덤프시스에서 grep을 사용하여 검색할 수 있습니다. 예를 들어:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eadb shell dumpsys | grep \u003cspan class=\"hljs-string\"\u003e\"ACTIVITY\"\u003c/span\u003e\n\nadb shell dumpsys | grep \u003cspan class=\"hljs-string\"\u003e\"BottomNavigationItemView\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e로컬 파일의 내용 보기/변경\u003c/h1\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e로컬 스토리지를 다룰 때 종종 어려움을 겪곤 합니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e스토리지 데이터를 쿼리하기 위해 중단점을 설정하거나\u003c/li\u003e\n\u003cli\u003eprintlines 또는 로그를 추가하는 것은 수정 및 빌드가 필요하여 시간이 많이 소요됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e우리는 이 디버깅 프로세스를 최적화할 수 있는 기회가 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e앱의 내부 데이터는 data/path에 저장됩니다.\u003c/li\u003e\n\u003cli\u003e이론적으로 우리는 cd, ls, echo, nano 등의 일반 터미널 명령어를 사용하여 기기에서 이 데이터를 볼 수 있지만 실제로는 이와 같은 문제가 발생합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_6.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cp\u003e안드로이드는 앱의 리소스에 쉽게 액세스할 수 없도록 허용하지 않는다는 점이 좋은 것 같아요.\u003c/p\u003e\n\u003cp\u003e그런데 앱의 내부 데이터의 정확한 경로는 다음과 같아요: /data/user/0/\u003ccode\u003eyour.package.name\u003c/code\u003e 그래도 저 정확한 경로를 알아도 들어가지 못하는 걸 보면 다른 방법이 필요할 걸요.\u003c/p\u003e\n\u003cp\u003e이를 위해 안드로이드의 각 앱이 사실 별칭으로 패키지 이름을 가진 사용자라는 사실을 활용할 거에요:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_7.png\" alt=\"Screenshot 1\"\u003e\u003c/p\u003e\n\u003cp\u003e우리는 run-as 명령어를 사용하여 앱이 셀프인 것처럼 속이는 데 사용했습니다. 이제 우리는 앱의 내부 저장소를 lsin 할 수 있고, sharedPref, 데이터베이스 또는 파일과 같은 데이터를 볼 수 있습니다. 이 데이터들은 코드베이스 내에서 파일 API를 사용하여 생성된 것입니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_8.png\" alt=\"Screenshot 2\"\u003e\u003c/p\u003e\n\u003cp\u003e그리고 BUM! 여기가 제 앱의 공유 프리퍼런스 파일이고, onboarding_key와 해당 값을 볼 수 있습니다:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u0026#x3C;img src=\"/assets/img/2024-06-19-BetterDebuggingQualityinAndroidDevelopment_9.png\" /\u003e\u003c/p\u003e\n\u003cp\u003e이제 이 선호 값을 어떻게 편집할 수 있어서 앱을 다시 빌드하지 않고 변경 사항을 확실히 적용하는 데 시간을 낭비하지 않을 수 있는지 묻게 될 것입니다. 일반적으로 터미널에서 사용하는 텍스트 편집기를 adb 쉘에서 사용할 수는 없지만 여기에 대한 해결책이 있습니다: sedcommand. -iflag로 파일을 직접 덮어쓸 수 있으므로 여기 제 앱의 온보딩 키에 대한 적용입니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003eemu64a\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/data/u\u003c/span\u003eser/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e/com.\u003cspan class=\"hljs-property\"\u003esevban\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etradejournal\u003c/span\u003e/shared_prefs $ grep \u003cspan class=\"hljs-string\"\u003e\"onboarding_key\"\u003c/span\u003e presentation.\u003cspan class=\"hljs-property\"\u003eMainActivity\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003exml\u003c/span\u003e\n    \u0026#x3C;boolean name=\u003cspan class=\"hljs-string\"\u003e\"onboarding_key\"\u003c/span\u003e value=\u003cspan class=\"hljs-string\"\u003e\"true\"\u003c/span\u003e /\u003e\n\u003cspan class=\"hljs-attr\"\u003eemu64a\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/data/u\u003c/span\u003eser/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e/com.\u003cspan class=\"hljs-property\"\u003esevban\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etradejournal\u003c/span\u003e/shared_prefs $\n\ncat presentation.\u003cspan class=\"hljs-property\"\u003eMainActivity\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003exml\u003c/span\u003e |\ngrep \u003cspan class=\"hljs-string\"\u003e\"onboarding_key\"\u003c/span\u003e |\nsed -i \u003cspan class=\"hljs-string\"\u003e\"s/true/false/g\"\u003c/span\u003e presentation.\u003cspan class=\"hljs-property\"\u003eMainActivity\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003exml\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eemu64a\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/data/u\u003c/span\u003eser/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e/com.\u003cspan class=\"hljs-property\"\u003esevban\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etradejournal\u003c/span\u003e/shared_prefs $ grep \u003cspan class=\"hljs-string\"\u003e\"onboarding_key\"\u003c/span\u003e presentation.\u003cspan class=\"hljs-property\"\u003eMainActivity\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003exml\u003c/span\u003e\n    \u0026#x3C;boolean name=\u003cspan class=\"hljs-string\"\u003e\"onboarding_key\"\u003c/span\u003e value=\u003cspan class=\"hljs-string\"\u003e\"false\"\u003c/span\u003e /\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e안드로이드 개발에서 디버깅 프로세스를 개선하는 과정은 어렵지 않을 수 있어요. ADB 및 uiautomator와 같은 도구를 활용하여 양식 작성과 같은 반복적인 작업을 자동화하고 앱의 동작에 대한 깊은 통찰력을 얻을 수 있어요.\u003c/p\u003e\n\u003cp\u003e사용자 정의 입력 흐름 스크립트를 생성하면 UI 상호작용을 자동화하여 디버깅을 더 효율적이고 단조로운 일이 줄어들어요. dumpsys를 사용하고 run-as 및 sed 명령어를 사용하여 로컬 파일에 액세스하면 문제를 진단하고 효과적으로 해결할 수 있어요.\u003c/p\u003e\n\u003cp\u003e이러한 기술을 활용하면 디버깅 프로세스를 변화시킬 수 있어요. 가능한 경우 자동화 도구를 적극적으로 활용하고 더욱 원활하고 생산적인 개발 경험을 누려보세요.\u003c/p\u003e\n\u003cp\u003e참고 문헌:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003ca href=\"https://www.youtube.com/watch?v=DcU1czPxQ10\u0026#x26;t=1326s\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://www.youtube.com/watch?v=DcU1czPxQ10\u0026#x26;t=1326s\u003c/a\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-BetterDebuggingQualityinAndroidDevelopment"},"buildId":"-dPCbnM2yhdKNgXe92VJV","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>