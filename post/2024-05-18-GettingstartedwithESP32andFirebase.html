<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>ESP32와 Firebase 시작하기 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-05-18-GettingstartedwithESP32andFirebase" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="ESP32와 Firebase 시작하기 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="ESP32와 Firebase 시작하기 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-05-18-GettingstartedwithESP32andFirebase" data-gatsby-head="true"/><meta name="twitter:title" content="ESP32와 Firebase 시작하기 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-18 18:42" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-V5DKFTZ6BX"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-V5DKFTZ6BX');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd012fc8787133d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd012fc8787133d0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/551-3069cf29fe274aab.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-561ae49ab5aab7f5.js" defer=""></script><script src="/_next/static/ll1cGyplNwh83dpggeai1/_buildManifest.js" defer=""></script><script src="/_next/static/ll1cGyplNwh83dpggeai1/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">ESP32와 Firebase 시작하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="ESP32와 Firebase 시작하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 18, 2024</span><span class="posts_reading_time__f7YPP">18<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-18-GettingstartedwithESP32andFirebase&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><h2>IOT</h2>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_0.png" alt="Getting started with ESP32 and Firebase"/></p>
<p>이 튜토리얼에서는 ESP32를 Google의 Firebase 백엔드에 가장 빠르게 연결하는 방법을 보여드리겠습니다. Firebase는 개발자들이 아이디어를 신속하게 프로토타이핑할 수 있는 매우 편리한 옵션으로 자리 잡았습니다. 본 튜토리얼에서는 Apple 워치를 위한 실시간 온도 모니터링 솔루션 개발을 위한 기초 작업을 다루며, 이 기사는 ESP32와 Firebase 간의 링크 설정에 중점을 두고 있습니다. 이후 기사에서는 watchOS 애플리케이션에 중점을 둘 것입니다.</p>
<h1>하드웨어 요구사항</h1>
<div class="content-ad"></div>
<p>이 튜토리얼을 완료하기 위해 다음 하드웨어가 필요합니다:</p>
<ul>
<li>ESP32 개발 보드 (어떤 ESP32 보드든 상관없습니다. 이 튜토리얼에서는 ESP32 DevKit v3를 사용할 것입니다).</li>
<li>DHT11 온도 및 습도 센서.</li>
</ul>
<h1>백엔드 설정</h1>
<p>백엔드로 Google의 Firebase를 사용할 것이며, 시작하려면 Firebase로 이동하여 Google 계정으로 로그인하십시오.</p>
<div class="content-ad"></div>
<p>새 프로젝트를 생성하려면 추가 프로젝트 옵션을 선택하세요. 프로젝트 이름을 입력하고 적절한 이름을 선택한 후 파란색 계속 버튼을 선택하세요. 내 프로젝트를 &quot;스마트 홈이&quot;라고 부르겠어요.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_1.png" alt="이미지"/></p>
<p>이 프로젝트에 대해 구글 애널리틱스를 사용 안 함으로 설정하세요. 이 프로젝트에는 필요하지 않습니다. 마지막으로, 프로젝트를 만들기 위해 &quot;프로젝트 만들기&quot;를 선택하세요.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_2.png" alt="이미지"/></p>
<div class="content-ad"></div>
<p>Firebase에서 프로젝트 설정을 시작합니다. 완료되면 계속 선택하고 Firebase 콘솔의 프로젝트 개요 페이지로 이동됩니다.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_3.png" alt="프로젝트 개요 페이지"/></p>
<p>첫 번째로 할 일은 프로젝트의 인증 옵션을 설정하는 것입니다. 왼쪽 상단의 인증 메뉴 옵션을 선택하면 인증 페이지로 이동합니다. &#x27;시작하기&#x27; 버튼을 선택하세요.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_4.png" alt="인증 페이지"/></p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_5.png" alt="ESP32 Firebase Tutorial Step 1"/></p>
<p>첫 번째 단계로 ESP32 장치에 대해 익명 로그인을 사용할 것입니다. 이후 자습서에서 더 똑똑한 로그인 방법을 만들 것입니다. 아래와 같이 익명 로그인을 활성화하고 저장 옵션을 선택하세요.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_6.png" alt="ESP32 Firebase Tutorial Step 2"/></p>
<p>다음으로 모든 센서 데이터를 저장할 데이터베이스를 만들어야 합니다. 이를 위해 좌측 상단에 있는 Realtime Database 메뉴 옵션을 선택하고 Realtime Database 페이지로 이동합니다. 데이터베이스 생성 메뉴를 초기화하려면 데이터베이스 생성 버튼을 선택하세요.</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_7.png" alt="image"/></p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_8.png" alt="image"/></p>
<p>데이터베이스 생성 메뉴에서 가장 가까운 위치를 선택한 다음, &quot;다음&quot;을 선택하세요. 데이터베이스를 잠긴 모드 또는 테스트 모드로 초기화할 수 있는 옵션이 표시됩니다. 현재는 테스트 모드를 선택하세요. 주요 차이점은 테스트 모드에서는 30일 동안 데이터베이스에 무단 액세스를 허용하는 데이터베이스 액세스 규칙이 적용됩니다. 프로젝트를 제품으로 이동할 예정이라면 향후 이 기능을 비활성화해야 합니다. &quot;활성화&quot; 버튼을 선택하세요.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_9.png" alt="image"/></p>
<div class="content-ad"></div>
<p>마지막으로 새로운 빈 데이터베이스가 있는 새 페이지가 나타날 것입니다. 이제 모든 준비가 끝났어요!</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_10.png" alt="이미지"/></p>
<p>계속 진행하기 전에 임베디드 애플리케이션에서 나중에 사용할 두 가지 항목을 복사하여 보관해야 합니다. 먼저 필요한 것은 실시간 데이터베이스 URL입니다. 실시간 데이터베이스 페이지의 URL을 복사하여 찾을 수 있으며, 이 경우에는 https://smart-hommie-default-rtdb.firebaseio.com 입니다.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_11.png" alt="이미지"/></p>
<div class="content-ad"></div>
<p>프로젝트를 API 키를 저장해야 할 두 번째 항목입니다. API 키를 얻으려면 페이지 상단 오른쪽에 있는 설정 아이콘을 선택한 다음 프로젝트 설정 메뉴 항목을 선택하여 프로젝트 설정 페이지로 이동하세요.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_12.png" alt="프로젝트 설정 페이지"/></p>
<p>프로젝트 설정 페이지에서 Web API 키가 표시됩니다. 이를 복사하여 저장하세요.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_13.png" alt="Web API 키"/></p>
<div class="content-ad"></div>
<p>저희들은 임베디드 애플리케이션을 시작할 준비가 되었습니다.</p>
<h2>개발 환경 설정</h2>
<p>가장 먼저 해야 할 일은 ESP32 개발 환경을 설정하는 것입니다. 이 튜토리얼에서는 Visual Studio Code 및 PlatformIO 플러그인을 사용할 것입니다.</p>
<p>만약 아직 VSCode를 설치하지 않았다면, 여기서 다운로드하고 설치해주세요.</p>
<div class="content-ad"></div>
<p>아래 지침에 따라 PlatformIO를 설치해야 합니다. 모든 것이 잘 진행되었다면 아래 첨부된 이미지처럼 오른쪽 메뉴에 PlatformIO가 나타날 것입니다.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_14.png" alt="PlatformIO Menu"/></p>
<p>먼저 우리가 해야 할 일은 PlatformIO용 ESP32 플랫폼을 설치하는 것입니다. PlatformIO 메뉴 아이콘을 선택하여 PlatformIO 홈페이지에 들어가십시오.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_15.png" alt="PlatformIO Home Page"/></p>
<div class="content-ad"></div>
<p>플랫폼 메뉴 옵션을 선택하고 임베디드 페이지를 선택합니다. &quot;Esp&quot;를 입력하여 Espressif 프레임워크를 찾은 다음 Espressif 32 옵션을 선택합니다. 설치 버튼을 선택하여 플랫폼을 설치합니다.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_16.png" alt="이미지"/></p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_17.png" alt="이미지"/></p>
<p>이제 임베디드 어플리케이션을 위한 새 프로젝트를 만들어 봅시다. 홈페이지로 돌아가서 &quot;새 프로젝트 만들기&quot; 메뉴를 선택합니다. 프로젝트 위저드가 표시되며, 프로젝트에 이름을 지정하고 EPS32 보드를 선택해야 합니다. 이 프로젝트에서는 Arduino 라이브러리를 사용할 예정이므로 기본 설정을 유지하고 &#x27;완료&#x27;를 선택하세요.</p>
<div class="content-ad"></div>
<img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_18.png"/>
<p>마지막으로 프로젝트에서 사용할 mobizt의 라이브러리를 추가해야 합니다. 홈페이지에서 라이브러리 페이지로 이동하고 아래 그림과 같이 FirebaseESP32 라이브러리를 검색하십시오.</p>
<img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_19.png"/>
<p>마지막으로 아래 그림과 같이 라이브러리를 프로젝트에 추가하십시오.</p>
<div class="content-ad"></div>
<img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_20.png"/>
<h1>임베디드 어플리케이션</h1>
<p>프로젝트 탐색기에서 main.cpp 파일을 엽니다.</p>
<img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_21.png"/>
<div class="content-ad"></div>
<p>우리 애플리케이션에서 필요한 모든 라이브러리를 불러와야 해요. Arduino 라이브러리는 기본적으로 이미 있어야 합니다:</p>
<pre><code class="hljs language-js">#include &lt;<span class="hljs-title class_">Arduino</span>.<span class="hljs-property">h</span>&gt;
#include &lt;<span class="hljs-title class_">WiFi</span>.<span class="hljs-property">h</span>&gt;
#include &lt;<span class="hljs-title class_">FirebaseESP32</span>.<span class="hljs-property">h</span>&gt;
</code></pre>
<p>다음으로 FirebaseESP32 라이브러리에서 사용되는 몇 가지 도우미 라이브러리를 추가해야 해요. TokenHelper 라이브러리는 토큰 생성 프로세스를 관리하는 데 사용되고, RTDBHelper 라이브러리는 Firebase Realtime Database에서 오는 데이터를 출력하기 위한 도우미 함수를 제공해요:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">//토큰 생성 프로세스 정보를 제공합니다.</span>
#include <span class="hljs-string">&quot;addons/TokenHelper.h&quot;</span>
<span class="hljs-comment">//RTDB payload 출력 정보 및 다른 도우미 함수를 제공합니다.</span>
#include <span class="hljs-string">&quot;addons/RTDBHelper.h&quot;</span>
</code></pre>
<div class="content-ad"></div>
<p>여러 센서에서 오는 데이터를 구분하는 데 사용할 수 있는 고유한 장치 ID를 정의해야 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// 장치 ID</span>
#define <span class="hljs-variable constant_">DEVICE_UID</span> <span class="hljs-string">&quot;1X&quot;</span>
</code></pre>
<p>다음으로 WiFi 자격 증명을 입력해야 합니다. WIFI_AP를 WiFi 식별자로, WIFI_PASSWORD를 WiFi 비밀번호로 대체하세요.</p>
<p>참고: 임베디드 애플리케이션에 암호 정보를 하드코딩하는 것은 좋지 않은 생각입니다. 제품 케이스에서는 안전한 장치 등록 프로세스를 포함하는 장치 프로비저닝 전략을 적용해야 합니다.</p>
<div class="content-ad"></div>
<p>// Wi-Fi 인증 정보
#define WIFI_SSID &quot;WIFI_AP&quot;
#define WIFI_PASSWORD &quot;WIFI_PASSWORD&quot;</p>
<p>다음으로, Firebase 프로젝트 API 키를 저장하는 상수를 추가해야 합니다. 앞서 언급했듯이 Firebase 프로젝트 설정 페이지에서 API 키를 얻을 수 있습니다. API_KEY를 여러분의 API 키로 대체해주세요. 비슷하게 Firebase 실시간 데이터베이스 URL을 포함하여 본인의 URL로 대체해야 합니다.</p>
<p>// 여러분의 Firebase 프로젝트 웹 API 키
#define API_KEY &quot;API_KEY&quot;
// 여러분의 Firebase 실시간 데이터베이스 URL
#define DATABASE_URL &quot;https://smart-hommie-default-rtdb.firebaseio.com&quot;</p>
<p>그 다음으로, FirebaseESP32 라이브러리의 3개 객체를 초기화해야 합니다. 이 객체는 애플리케이션을 Firebase에 연결하는 데 중요합니다.</p>
<div class="content-ad"></div>
<p>먼저 유용한 몇 가지 전역 변수를 정의합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// 장치 위치 설정</span>
<span class="hljs-title class_">String</span> device_location = <span class="hljs-string">&quot;거실&quot;</span>; 
<span class="hljs-comment">// Firebase 실시간 데이터베이스 객체</span>
<span class="hljs-title class_">FirebaseData</span> fbdo; 
<span class="hljs-comment">// Firebase 인증 객체</span>
<span class="hljs-title class_">FirebaseAuth</span> auth; 
<span class="hljs-comment">// Firebase 구성 객체</span>
<span class="hljs-title class_">FirebaseConfig</span> config; 
<span class="hljs-comment">// Firebase 데이터베이스 경로</span>
<span class="hljs-title class_">String</span> databasePath = <span class="hljs-string">&quot;&quot;</span>; 
<span class="hljs-comment">// Firebase 고유 식별자</span>
<span class="hljs-title class_">String</span> fuid = <span class="hljs-string">&quot;&quot;</span>; 
<span class="hljs-comment">// 장치 부팅 후 경과된 시간을 저장합니다.</span>
unsigned long elapsedMillis = <span class="hljs-number">0</span>; 
<span class="hljs-comment">// 센서 업데이트 주기를 10초로 설정합니다.</span>
unsigned long update_interval = <span class="hljs-number">10000</span>; 
<span class="hljs-comment">// 초기 Firebase 업데이트를 테스트하기 위한 더미 카운터</span>
int count = <span class="hljs-number">0</span>; 
<span class="hljs-comment">// 장치 인증 상태를 저장합니다.</span>
bool isAuthenticated = <span class="hljs-literal">false</span>;
</code></pre>
<p>첫 번째 필요한 함수는 WiFi 설정입니다. WiFi_Init()이라는 함수를 정의합니다. Arduino 프레임워크에서 제공하는 내장 WiFi API를 사용합니다. WiFi.begin() 함수를 사용하여 자격 증명을 사용하여 WiFi 연결을 초기화한 후, WiFi.status() 함수를 사용하여 연결이 성공적인지 300ms마다 확인한 후, WiFi.localIP() 함수를 사용하여 로컬 IP 주소를 출력합니다. 사용하고 싶을 수 있는 다른 WiFi 관련 기능은 Arduino WiFi API 설명서를 확인해주세요.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">void</span> <span class="hljs-title class_">Wifi</span>_Init() {
  <span class="hljs-title class_">WiFi</span>.<span class="hljs-title function_">begin</span>(<span class="hljs-variable constant_">WIFI_SSID</span>, <span class="hljs-variable constant_">WIFI_PASSWORD</span>);
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">&quot;Wi-Fi에 연결 중입니다&quot;</span>);
  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">WiFi</span>.<span class="hljs-title function_">status</span>() != <span class="hljs-variable constant_">WL_CONNECTED</span>){
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">&quot;.&quot;</span>);
    <span class="hljs-title function_">delay</span>(<span class="hljs-number">300</span>);
  }
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">&quot;IP 주소로 연결됨: &quot;</span>);
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-title class_">WiFi</span>.<span class="hljs-title function_">localIP</span>());
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
}
</code></pre>
<p>이제 Firebase 초기화 함수를 구현해야 합니다. 이 함수는 Firebase 백엔드에 연결하고 디바이스를 인증하며 Firebase 라이브러리를 초기화합니다. 먼저 API 키와 데이터베이스 URL을 구성 객체에 전달하고 설정 시 WiFi 재연결을 활성화합니다. 그런 다음 익명으로 디바이스를 가입하려고 시도합니다. 가입이 성공하면 모든 디바이스 데이터가 기록될 데이터베이스 경로(Temp_Sensor라고 합니다.)를 정의하고, 가입이 성공하면 auth 객체에서 얻은 Firebase 고유 식별자를 통해 Firebase 식별자를 추가합니다. Firebase 인증 기능을 더 자세히 알아보려면 여기에서 라이브러리 문서를 확인하세요. 가입을 완료한 후 Firebase.begin() 함수로 Firebase 라이브러리를 초기화합니다.</p>
<p>참고: Firebase.signUp()을 실행할 때마다 백엔드에 새로운 익명 사용자가 생성됩니다. 이는 디바이스를 켜고 끌 때마다 새로운 사용자가 생성된다는 것을 의미합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">void</span> <span class="hljs-title function_">firebase_init</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// firebase API Key 구성</span>
  config.<span class="hljs-property">api_key</span> = <span class="hljs-variable constant_">API_KEY</span>;
  <span class="hljs-comment">// firebase 실시간 데이터베이스 URL 구성</span>
  config.<span class="hljs-property">database_url</span> = <span class="hljs-variable constant_">DATABASE_URL</span>;
  <span class="hljs-comment">// WiFi 재연결 활성화 </span>
  <span class="hljs-title class_">Firebase</span>.<span class="hljs-title function_">reconnectWiFi</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;새 사용자 가입 중...&quot;</span>);
  <span class="hljs-comment">// 익명으로 Firebase에 로그인</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Firebase</span>.<span class="hljs-title function_">signUp</span>(&amp;config, &amp;auth, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;&quot;</span>))
  {
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;성공&quot;</span>);
    isAuthenticated = <span class="hljs-literal">true</span>;
    <span class="hljs-comment">// 이 디바이스에 대해 업데이트가 로드될 데이터베이스 경로 설정</span>
    databasePath = <span class="hljs-string">&quot;/&quot;</span> + device_location;
    fuid = auth.<span class="hljs-property">token</span>.<span class="hljs-property">uid</span>.<span class="hljs-title function_">c_str</span>();
  }
  <span class="hljs-keyword">else</span>
  {
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">&quot;실패, %s\n&quot;</span>, config.<span class="hljs-property">signer</span>.<span class="hljs-property">signupError</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">c_str</span>());
    isAuthenticated = <span class="hljs-literal">false</span>;
  }
  <span class="hljs-comment">// 장기적인 토큰 생성 작업에 대한 콜백 함수 할당, addons/TokenHelper.h 참조</span>
  config.<span class="hljs-property">token_status_callback</span> = tokenStatusCallback;
  <span class="hljs-comment">// Firebase 라이브러리 초기화</span>
  <span class="hljs-title class_">Firebase</span>.<span class="hljs-title function_">begin</span>(&amp;config, &amp;auth);
}
</code></pre>
<div class="content-ad"></div>
<p>위의 모든 것을 종합하면, 우리의 설정 함수는 다음과 같이 보일 것입니다:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">void</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
<span class="hljs-comment">// 로컬 진단을 위한 시리얼 통신 초기화</span>
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">begin</span>(<span class="hljs-number">115200</span>);
<span class="hljs-comment">// 위치 WiFi와의 연결 초기화</span>
<span class="hljs-title class_">Wifi</span>_Init();
<span class="hljs-comment">// Firebase 구성 및 익명으로 가입</span>
<span class="hljs-title function_">firebase_init</span>();
}
</code></pre>
<p>마지막으로, 모든 것이 올바르게 설정되었는지 테스트하는 샘플 데이터를 Firebase 데이터베이스에 업로드하는 테스트 함수를 구현해 봅시다. database_test()라는 새 함수를 만들겠습니다. 업데이트를 수행하기 전에 10초가 경과했는지 확인하고, 장치가 인증되었는지, 마지막으로 Firebase 라이브러리가 준비되었는지 확인합니다. 업데이트하기 전에 값을 설정하려는 실시간 데이터베이스의 노드 경로를 지정하고, 그 값으로 더미 카운터를 업데이트합니다. 10초마다 Firebase.set() 함수를 사용하여 이전 값들을 새로운 업데이트된 값으로 덮어씁니다. 기타 Firebase 함수는 여기에서 FirebaseESP32 API 문서를 참조하십시오.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">void</span> <span class="hljs-title function_">database_test</span>(<span class="hljs-params"></span>) {
<span class="hljs-comment">// 10초가 경과하고, 장치가 인증되었으며 Firebase 서비스가 준비되었는지 확인</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">millis</span>() - elapsedMillis &gt; update_interval &amp;&amp; isAuthenticated &amp;&amp; <span class="hljs-title class_">Firebase</span>.<span class="hljs-title function_">ready</span>())
{
elapsedMillis = <span class="hljs-title function_">millis</span>();
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;Set int test...&quot;</span>);
<span class="hljs-comment">// 데이터의 키 값을 지정하고 경로에 추가</span>
<span class="hljs-title class_">String</span> node = path + <span class="hljs-string">&quot;/value&quot;</span>;
<span class="hljs-comment">// 카운트 값을 Firebase 실시간 데이터베이스에 보내기</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title class_">Firebase</span>.<span class="hljs-title function_">set</span>(fbdo, node.<span class="hljs-title function_">c_str</span>(), count++))
{
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;PASSED&quot;</span>);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;PATH: &quot;</span> + fbdo.<span class="hljs-title function_">dataPath</span>());
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;TYPE: &quot;</span> + fbdo.<span class="hljs-title function_">dataType</span>());
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;ETag: &quot;</span> + fbdo.<span class="hljs-title class_">ETag</span>());
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">&quot;VALUE: &quot;</span>);
<span class="hljs-title function_">printResult</span>(fbdo); <span class="hljs-comment">//addons/RTDBHelper.h 참조</span>
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
}
<span class="hljs-keyword">else</span>
{
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;FAILED&quot;</span>);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;REASON: &quot;</span> + fbdo.<span class="hljs-title function_">errorReason</span>());
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
}
}
}
</code></pre>
<div class="content-ad"></div>
<p>마침내 함수를 메인 루프에 다음과 같이 배치하십시오:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">void</span> <span class="hljs-title function_">loop</span>(<span class="hljs-params"></span>) {
    <span class="hljs-title function_">database_test</span>();
}
</code></pre>
<p>우리의 코드는 더미 테스트를 수행할 준비가 완료되었습니다. ESP32 보드를 USB 포트에 연결하고 아래에 표시된 하단 패널의 컴파일 버튼을 눌러 코드를 컴파일하십시오:</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_22.png" alt="이미지"/></p>
<div class="content-ad"></div>
<p>빌드가 성공하면, 컴파일 버튼 오른쪽에 있는 업로드 버튼을 사용하여 코드를 ESP32 장치에 업로드합니다.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_23.png" alt="upload button"/></p>
<p>모든 것이 잘 진행되었다면, Firebase 콘솔의 Realtime Database 브라우저로 돌아가서 아래 그림과 같이 10초마다 업데이트가 오는 것을 확인할 수 있습니다:</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_24.png" alt="database browser"/></p>
<div class="content-ad"></div>
<p>시리얼 통신 인터페이스를 사용하여 10초마다 전송되는 다음 출력값을 확인할 수도 있습니다.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_25.png" alt="Image"/></p>
<h1>DHT11 온도 센서 통합</h1>
<p>마지막으로 온도 센서를 통합해 봅시다.</p>
<div class="content-ad"></div>
<p>먼저, 하드웨어 연결이 올바른지 확인해야 합니다. DHT11 센서는 I2C 주변 장치를 사용하며 두 개의 핀이 필요합니다. DHT11 핀 할당을 검토해 봅시다:</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_26.png" alt="DHT11 Pin Allocation"/></p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_27.png" alt="DHT11 Pinout"/></p>
<p>다음 표는 DHT22/DHT11 핀 배치를 보여줍니다. 센서가 당신을 향하고 있을 때, 핀 번호는 왼쪽부터 오른쪽까지 1부터 시작합니다. 이 예제에서는 GPIO4를 사용할 것이므로, 하드웨어 배선은 다음과 같이 될 것입니다:</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_28.png" alt="image"/></p>
<p>Now that we have our hardware configuration setup, let’s update our embedded application to utilise the DHT11 sensor. Let’s start by adding the DHT library from Adafruit to our project:</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_29.png" alt="image"/></p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_30.png" alt="image"/></p>
<div class="content-ad"></div>
<p>DHT 라이브러리를 imports에 추가해 보겠습니다.</p>
<pre><code class="hljs language-js">#include &lt;<span class="hljs-title class_">Arduino</span>.<span class="hljs-property">h</span>&gt;
#include &lt;<span class="hljs-title class_">WiFi</span>.<span class="hljs-property">h</span>&gt;
#include &lt;<span class="hljs-title class_">FirebaseESP32</span>.<span class="hljs-property">h</span>&gt;
#include <span class="hljs-string">&quot;DHT.h&quot;</span>
</code></pre>
<p>그러고 나서 DHT11 라이브러리를 설정해야 합니다. 이를 위해 센서 업데이트를 받을 GPIO 핀을 지정하고, DHT 센서 종류도 명시해야 합니다. 라이브러리는 DHT22 센서와도 호환되므로 사용 중인 DHT 센서를 지정해 주어야 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// DHT 센서와 연결된 디지털 핀</span>
#define <span class="hljs-variable constant_">DHTPIN</span> <span class="hljs-number">4</span>
#define <span class="hljs-variable constant_">DHTTYPE</span> <span class="hljs-title class_">DHT11</span>
<span class="hljs-comment">// DHT 센서 초기화</span>
<span class="hljs-variable constant_">DHT</span> <span class="hljs-title function_">dht</span>(<span class="hljs-variable constant_">DHTPIN</span>, <span class="hljs-variable constant_">DHTTYPE</span>);
</code></pre>
<div class="content-ad"></div>
<p>그럼 온도를 저장할 전역 변수를 정의해야 합니다.</p>
<p>참고: DHT11은 습도를 추적하기도 하지만, 이 튜토리얼에서는 온도 측정만 다루겠습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// 센서 측정값을 저장할 변수</span>
float temperature = <span class="hljs-number">0</span>;
float humidity = <span class="hljs-number">0</span>;
<span class="hljs-comment">// 업데이트된 센서 값 저장을 위한 JSON 객체(Firebase로 전송할 값)</span>
<span class="hljs-title class_">FirebaseJson</span> temperature_json;
<span class="hljs-title class_">FirebaseJson</span> humidity_json;
</code></pre>
<p>그리고 setup() 함수를 업데이트하여 DHT 라이브러리를 초기화해야 합니다. 이 라이브러리는 I2C 설정을 다룰 것입니다:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">void</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
<span class="hljs-comment">// 로컬 진단을 위한 시리얼 통신을 초기화합니다</span>
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">begin</span>(<span class="hljs-number">115200</span>);
<span class="hljs-comment">// 위치 WiFi 연결을 초기화합니다</span>
<span class="hljs-title class_">Wifi</span>_Init();
<span class="hljs-comment">// Firebase 구성 및 익명으로 가입을 초기화합니다</span>
<span class="hljs-title function_">firebase_init</span>();
<span class="hljs-comment">// DHT 라이브러리를 초기화합니다</span>
dht.<span class="hljs-title function_">begin</span>();
<span class="hljs-comment">// 온도 및 습도 JSON 데이터를 초기화합니다</span>
temperature_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;deviceuid&quot;</span>, <span class="hljs-variable constant_">DEVICE_UID</span>);
temperature_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;DHT11-Temp&quot;</span>);
temperature_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;type&quot;</span>, <span class="hljs-string">&quot;Temperature&quot;</span>);
temperature_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;location&quot;</span>, device_location);
temperature_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;value&quot;</span>, temperature);
<span class="hljs-comment">// 초기 온도 값을 출력합니다</span>
<span class="hljs-title class_">String</span> jsonStr;
temperature_json.<span class="hljs-title function_">toString</span>(jsonStr, <span class="hljs-literal">true</span>);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(jsonStr);
humidity_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;deviceuid&quot;</span>, <span class="hljs-variable constant_">DEVICE_UID</span>);
humidity_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;DHT11-Hum&quot;</span>);
humidity_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;type&quot;</span>, <span class="hljs-string">&quot;Humidity&quot;</span>);
humidity_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;location&quot;</span>, device_location);
humidity_json.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;value&quot;</span>, humidity);
<span class="hljs-comment">// 초기 습도 값을 출력합니다</span>
<span class="hljs-title class_">String</span> jsonStr2;
humidity_json.<span class="hljs-title function_">toString</span>(jsonStr2, <span class="hljs-literal">true</span>);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(jsonStr2);
}
</code></pre>
<p>그런 다음 센서 데이터를 업데이트하고 후에 Firebase로 보낼 글로벌 JSON 객체 변수에 저장할 updateSensorReadings() 함수를 도입합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">void</span> <span class="hljs-title function_">updateSensorReadings</span>(<span class="hljs-params"></span>) {
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;센서 데이터를 읽는 중...&quot;</span>);
temperature = dht.<span class="hljs-title function_">readTemperature</span>();
humidity = dht.<span class="hljs-title function_">readHumidity</span>();
<span class="hljs-comment">// 읽기 실패 여부를 확인하고 조기에 종료합니다.</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">isnan</span>(temperature) || <span class="hljs-title function_">isnan</span>(humidity)) {
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">&quot;DHT 센서에서 읽기 실패!&quot;</span>));
 <span class="hljs-keyword">return</span>;
}
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">&quot;온도 읽기: %.2f \n&quot;</span>, temperature);
<span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">&quot;습도 읽기: %.2f \n&quot;</span>, humidity);
temperature_json.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;value&quot;</span>, temperature);
humidity_json.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;value&quot;</span>, humidity);
}
</code></pre>
<p>다음으로 예전의 database_test() 함수를 삭제하고 새로운 uploadSensorData() 함수로 교체해야 합니다. 노드 설명을 온도와 습도로 변경했습니다. 마지막으로 Firebase.set() 대신 Firebase.setJSON() 함수를 사용하여 온도와 습도 정보를 가진 두 개의 JSON 객체를 전달합니다. 마지막으로 main while 루프에서 database_test() 함수를 새로운 uploadSensorData() 함수로 교체합니다. 최종 코드 버전은 Github에서 확인할 수 있습니다.```</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">void</span> <span class="hljs-title function_">uploadSensorData</span>(<span class="hljs-params"></span>) {
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">millis</span>() - elapsedMillis &gt; update_interval &amp;&amp; isAuthenticated &amp;&amp; <span class="hljs-title class_">Firebase</span>.<span class="hljs-title function_">ready</span>())
{
 elapsedMillis = <span class="hljs-title function_">millis</span>();
 <span class="hljs-title function_">updateSensorReadings</span>();
 <span class="hljs-title class_">String</span> temperature_node = databasePath + <span class="hljs-string">&quot;/temperature&quot;</span>; 
 <span class="hljs-title class_">String</span> humidity_node = databasePath + <span class="hljs-string">&quot;/humidity&quot;</span>;
 <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Firebase</span>.<span class="hljs-title function_">setJSON</span>(fbdo, temperature_node.<span class="hljs-title function_">c_str</span>(), temperature_json))
 {
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;PASSED&quot;</span>); 
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;PATH: &quot;</span> + fbdo.<span class="hljs-title function_">dataPath</span>());
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;TYPE: &quot;</span> + fbdo.<span class="hljs-title function_">dataType</span>());
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;ETag: &quot;</span> + fbdo.<span class="hljs-title class_">ETag</span>());
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">&quot;VALUE: &quot;</span>);
 <span class="hljs-title function_">printResult</span>(fbdo); <span class="hljs-comment">//see addons/RTDBHelper.h</span>
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
 }
 <span class="hljs-keyword">else</span>
 {
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;FAILED&quot;</span>);
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;REASON: &quot;</span> + fbdo.<span class="hljs-title function_">errorReason</span>());
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
 }
<span class="hljs-keyword">if</span> (<span class="hljs-title class_">Firebase</span>.<span class="hljs-title function_">setJSON</span>(fbdo, humidity_node.<span class="hljs-title function_">c_str</span>(), humidity_json))
{
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;PASSED&quot;</span>);
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;PATH: &quot;</span> + fbdo.<span class="hljs-title function_">dataPath</span>());
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;TYPE: &quot;</span> + fbdo.<span class="hljs-title function_">dataType</span>());
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;ETag: &quot;</span> + fbdo.<span class="hljs-title class_">ETag</span>()); 
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">&quot;VALUE: &quot;</span>);
 <span class="hljs-title function_">printResult</span>(fbdo); <span class="hljs-comment">//see addons/RTDBHelper.h</span>
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
 }
 <span class="hljs-keyword">else</span>
 {
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;FAILED&quot;</span>);
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;REASON: &quot;</span> + fbdo.<span class="hljs-title function_">errorReason</span>());
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;------------------------------------&quot;</span>);
 <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
  }
 }
}
<span class="hljs-keyword">void</span> <span class="hljs-title function_">loop</span>(<span class="hljs-params"></span>) {
 <span class="hljs-title function_">uploadSensorData</span>();
 }
</code></pre>
<p>이 새로운 버전을 컴파일하고 업로드하십시오. Firebase 데이터베이스를 확인하여 방 온도의 실시간 온도 값을 표시합니다.</p>
<img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_31.png"/>
<p>애플리케이션을 더 현실적으로 만들기 위해 데이터베이스에 흥미로운 센서 데이터를 채워 넣어야 합니다.```</p>
<div class="content-ad"></div>
<p>향후 튜토리얼을 따랐다면, 장치의 위치와 장치 UID를 변경하여 서로 다른 방에서 오는 다양한 센서 데이터를 시뮬레이션할 수 있습니다. 만약 4개의 ESP32와 4개의 DHT11 센서를 가지고 있다면, 각각을 별도의 방에 설치할 수도 있습니다. 이 튜토리얼에서는 다음과 같은 접근 방식을 취했습니다.</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_32.png" alt="image"/></p>
<p>최종 결과는 이제 실시간 데이터베이스에 각 방에서 온 센서 데이터가 포함될 것입니다:</p>
<p><img src="/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_33.png" alt="image"/></p>
<div class="content-ad"></div>
<p>대박이다! 당신은 ESP32 장치를 Firebase와 성공적으로 통합했어요.</p>
<h1>결론</h1>
<p>마무리하면, 우리는 어떠한 ESP32 장치도 익명으로 가입하고 10초마다 온도 측정을 Realtime Database로 전송할 수 있는 새로운 Firebase 프로젝트를 설정했어요. 다음 튜토리얼에서는 모든 방에서의 실시간 업데이트를 제공해주는 watchOS 애플리케이션을 만들 것이에요.</p>
<p>이 튜토리얼의 최종 코드는 여기의 Github에서 찾을 수 있어요.</p>
<div class="content-ad"></div>
<p>마지막으로, mobizt 팀원들에게 무한한 감사와 사랑을 전합니다. 이 멋진 FirebaseESP32 라이브러리를 우리에게 제공해줘서 정말 감사합니다. 그 안에는 Firebase Cloud Messages를 보낼 수 있는 능력을 비롯한 다양한 기능이 있습니다. 다음 IoT 프로젝트 중 하나에 매우 유용할 수 있을 거에요.</p>
<h1>자료들</h1></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ESP32와 Firebase 시작하기","description":"","date":"2024-05-18 18:42","slug":"2024-05-18-GettingstartedwithESP32andFirebase","content":"\n\n## IOT\n\n![Getting started with ESP32 and Firebase](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_0.png)\n\n이 튜토리얼에서는 ESP32를 Google의 Firebase 백엔드에 가장 빠르게 연결하는 방법을 보여드리겠습니다. Firebase는 개발자들이 아이디어를 신속하게 프로토타이핑할 수 있는 매우 편리한 옵션으로 자리 잡았습니다. 본 튜토리얼에서는 Apple 워치를 위한 실시간 온도 모니터링 솔루션 개발을 위한 기초 작업을 다루며, 이 기사는 ESP32와 Firebase 간의 링크 설정에 중점을 두고 있습니다. 이후 기사에서는 watchOS 애플리케이션에 중점을 둘 것입니다.\n\n# 하드웨어 요구사항\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 튜토리얼을 완료하기 위해 다음 하드웨어가 필요합니다:\n\n- ESP32 개발 보드 (어떤 ESP32 보드든 상관없습니다. 이 튜토리얼에서는 ESP32 DevKit v3를 사용할 것입니다).\n- DHT11 온도 및 습도 센서.\n\n# 백엔드 설정\n\n백엔드로 Google의 Firebase를 사용할 것이며, 시작하려면 Firebase로 이동하여 Google 계정으로 로그인하십시오.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n새 프로젝트를 생성하려면 추가 프로젝트 옵션을 선택하세요. 프로젝트 이름을 입력하고 적절한 이름을 선택한 후 파란색 계속 버튼을 선택하세요. 내 프로젝트를 \"스마트 홈이\"라고 부르겠어요.\n\n![이미지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_1.png)\n\n이 프로젝트에 대해 구글 애널리틱스를 사용 안 함으로 설정하세요. 이 프로젝트에는 필요하지 않습니다. 마지막으로, 프로젝트를 만들기 위해 \"프로젝트 만들기\"를 선택하세요.\n\n![이미지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_2.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nFirebase에서 프로젝트 설정을 시작합니다. 완료되면 계속 선택하고 Firebase 콘솔의 프로젝트 개요 페이지로 이동됩니다.\n\n![프로젝트 개요 페이지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_3.png)\n\n첫 번째로 할 일은 프로젝트의 인증 옵션을 설정하는 것입니다. 왼쪽 상단의 인증 메뉴 옵션을 선택하면 인증 페이지로 이동합니다. '시작하기' 버튼을 선택하세요.\n\n![인증 페이지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_4.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![ESP32 Firebase Tutorial Step 1](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_5.png)\n\n첫 번째 단계로 ESP32 장치에 대해 익명 로그인을 사용할 것입니다. 이후 자습서에서 더 똑똑한 로그인 방법을 만들 것입니다. 아래와 같이 익명 로그인을 활성화하고 저장 옵션을 선택하세요.\n\n![ESP32 Firebase Tutorial Step 2](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_6.png)\n\n다음으로 모든 센서 데이터를 저장할 데이터베이스를 만들어야 합니다. 이를 위해 좌측 상단에 있는 Realtime Database 메뉴 옵션을 선택하고 Realtime Database 페이지로 이동합니다. 데이터베이스 생성 메뉴를 초기화하려면 데이터베이스 생성 버튼을 선택하세요.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_7.png)\n\n![image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_8.png)\n\n데이터베이스 생성 메뉴에서 가장 가까운 위치를 선택한 다음, \"다음\"을 선택하세요. 데이터베이스를 잠긴 모드 또는 테스트 모드로 초기화할 수 있는 옵션이 표시됩니다. 현재는 테스트 모드를 선택하세요. 주요 차이점은 테스트 모드에서는 30일 동안 데이터베이스에 무단 액세스를 허용하는 데이터베이스 액세스 규칙이 적용됩니다. 프로젝트를 제품으로 이동할 예정이라면 향후 이 기능을 비활성화해야 합니다. \"활성화\" 버튼을 선택하세요.\n\n![image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_9.png)\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n마지막으로 새로운 빈 데이터베이스가 있는 새 페이지가 나타날 것입니다. 이제 모든 준비가 끝났어요!\n\n![이미지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_10.png)\n\n계속 진행하기 전에 임베디드 애플리케이션에서 나중에 사용할 두 가지 항목을 복사하여 보관해야 합니다. 먼저 필요한 것은 실시간 데이터베이스 URL입니다. 실시간 데이터베이스 페이지의 URL을 복사하여 찾을 수 있으며, 이 경우에는 https://smart-hommie-default-rtdb.firebaseio.com 입니다.\n\n![이미지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_11.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n프로젝트를 API 키를 저장해야 할 두 번째 항목입니다. API 키를 얻으려면 페이지 상단 오른쪽에 있는 설정 아이콘을 선택한 다음 프로젝트 설정 메뉴 항목을 선택하여 프로젝트 설정 페이지로 이동하세요.\n\n![프로젝트 설정 페이지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_12.png)\n\n프로젝트 설정 페이지에서 Web API 키가 표시됩니다. 이를 복사하여 저장하세요.\n\n![Web API 키](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_13.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n저희들은 임베디드 애플리케이션을 시작할 준비가 되었습니다.\n\n## 개발 환경 설정\n\n가장 먼저 해야 할 일은 ESP32 개발 환경을 설정하는 것입니다. 이 튜토리얼에서는 Visual Studio Code 및 PlatformIO 플러그인을 사용할 것입니다.\n\n만약 아직 VSCode를 설치하지 않았다면, 여기서 다운로드하고 설치해주세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n아래 지침에 따라 PlatformIO를 설치해야 합니다. 모든 것이 잘 진행되었다면 아래 첨부된 이미지처럼 오른쪽 메뉴에 PlatformIO가 나타날 것입니다.\n\n![PlatformIO Menu](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_14.png)\n\n먼저 우리가 해야 할 일은 PlatformIO용 ESP32 플랫폼을 설치하는 것입니다. PlatformIO 메뉴 아이콘을 선택하여 PlatformIO 홈페이지에 들어가십시오.\n\n![PlatformIO Home Page](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_15.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n플랫폼 메뉴 옵션을 선택하고 임베디드 페이지를 선택합니다. \"Esp\"를 입력하여 Espressif 프레임워크를 찾은 다음 Espressif 32 옵션을 선택합니다. 설치 버튼을 선택하여 플랫폼을 설치합니다.\n\n![이미지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_16.png)\n\n![이미지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_17.png)\n\n이제 임베디드 어플리케이션을 위한 새 프로젝트를 만들어 봅시다. 홈페이지로 돌아가서 \"새 프로젝트 만들기\" 메뉴를 선택합니다. 프로젝트 위저드가 표시되며, 프로젝트에 이름을 지정하고 EPS32 보드를 선택해야 합니다. 이 프로젝트에서는 Arduino 라이브러리를 사용할 예정이므로 기본 설정을 유지하고 '완료'를 선택하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_18.png\" /\u003e\n\n마지막으로 프로젝트에서 사용할 mobizt의 라이브러리를 추가해야 합니다. 홈페이지에서 라이브러리 페이지로 이동하고 아래 그림과 같이 FirebaseESP32 라이브러리를 검색하십시오.\n\n\u003cimg src=\"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_19.png\" /\u003e\n\n마지막으로 아래 그림과 같이 라이브러리를 프로젝트에 추가하십시오.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_20.png\" /\u003e\n\n# 임베디드 어플리케이션\n\n프로젝트 탐색기에서 main.cpp 파일을 엽니다.\n\n\u003cimg src=\"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_21.png\" /\u003e\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n우리 애플리케이션에서 필요한 모든 라이브러리를 불러와야 해요. Arduino 라이브러리는 기본적으로 이미 있어야 합니다:\n\n```js\n#include \u003cArduino.h\u003e\n#include \u003cWiFi.h\u003e\n#include \u003cFirebaseESP32.h\u003e\n```\n\n다음으로 FirebaseESP32 라이브러리에서 사용되는 몇 가지 도우미 라이브러리를 추가해야 해요. TokenHelper 라이브러리는 토큰 생성 프로세스를 관리하는 데 사용되고, RTDBHelper 라이브러리는 Firebase Realtime Database에서 오는 데이터를 출력하기 위한 도우미 함수를 제공해요:\n\n```js\n//토큰 생성 프로세스 정보를 제공합니다.\n#include \"addons/TokenHelper.h\"\n//RTDB payload 출력 정보 및 다른 도우미 함수를 제공합니다.\n#include \"addons/RTDBHelper.h\"\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n여러 센서에서 오는 데이터를 구분하는 데 사용할 수 있는 고유한 장치 ID를 정의해야 합니다.\n\n```js\n// 장치 ID\n#define DEVICE_UID \"1X\"\n```\n\n다음으로 WiFi 자격 증명을 입력해야 합니다. WIFI_AP를 WiFi 식별자로, WIFI_PASSWORD를 WiFi 비밀번호로 대체하세요.\n\n참고: 임베디드 애플리케이션에 암호 정보를 하드코딩하는 것은 좋지 않은 생각입니다. 제품 케이스에서는 안전한 장치 등록 프로세스를 포함하는 장치 프로비저닝 전략을 적용해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n// Wi-Fi 인증 정보\n#define WIFI_SSID \"WIFI_AP\"\n#define WIFI_PASSWORD \"WIFI_PASSWORD\"\n\n\n다음으로, Firebase 프로젝트 API 키를 저장하는 상수를 추가해야 합니다. 앞서 언급했듯이 Firebase 프로젝트 설정 페이지에서 API 키를 얻을 수 있습니다. API_KEY를 여러분의 API 키로 대체해주세요. 비슷하게 Firebase 실시간 데이터베이스 URL을 포함하여 본인의 URL로 대체해야 합니다.\n\n\n// 여러분의 Firebase 프로젝트 웹 API 키\n#define API_KEY \"API_KEY\"\n// 여러분의 Firebase 실시간 데이터베이스 URL\n#define DATABASE_URL \"https://smart-hommie-default-rtdb.firebaseio.com\"\n\n\n그 다음으로, FirebaseESP32 라이브러리의 3개 객체를 초기화해야 합니다. 이 객체는 애플리케이션을 Firebase에 연결하는 데 중요합니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n먼저 유용한 몇 가지 전역 변수를 정의합니다.\n\n```js\n// 장치 위치 설정\nString device_location = \"거실\"; \n// Firebase 실시간 데이터베이스 객체\nFirebaseData fbdo; \n// Firebase 인증 객체\nFirebaseAuth auth; \n// Firebase 구성 객체\nFirebaseConfig config; \n// Firebase 데이터베이스 경로\nString databasePath = \"\"; \n// Firebase 고유 식별자\nString fuid = \"\"; \n// 장치 부팅 후 경과된 시간을 저장합니다.\nunsigned long elapsedMillis = 0; \n// 센서 업데이트 주기를 10초로 설정합니다.\nunsigned long update_interval = 10000; \n// 초기 Firebase 업데이트를 테스트하기 위한 더미 카운터\nint count = 0; \n// 장치 인증 상태를 저장합니다.\nbool isAuthenticated = false;\n```\n\n첫 번째 필요한 함수는 WiFi 설정입니다. WiFi_Init()이라는 함수를 정의합니다. Arduino 프레임워크에서 제공하는 내장 WiFi API를 사용합니다. WiFi.begin() 함수를 사용하여 자격 증명을 사용하여 WiFi 연결을 초기화한 후, WiFi.status() 함수를 사용하여 연결이 성공적인지 300ms마다 확인한 후, WiFi.localIP() 함수를 사용하여 로컬 IP 주소를 출력합니다. 사용하고 싶을 수 있는 다른 WiFi 관련 기능은 Arduino WiFi API 설명서를 확인해주세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nvoid Wifi_Init() {\n  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);\n  Serial.print(\"Wi-Fi에 연결 중입니다\");\n  while (WiFi.status() != WL_CONNECTED){\n    Serial.print(\".\");\n    delay(300);\n  }\n  Serial.println();\n  Serial.print(\"IP 주소로 연결됨: \");\n  Serial.println(WiFi.localIP());\n  Serial.println();\n}\n```\n\n이제 Firebase 초기화 함수를 구현해야 합니다. 이 함수는 Firebase 백엔드에 연결하고 디바이스를 인증하며 Firebase 라이브러리를 초기화합니다. 먼저 API 키와 데이터베이스 URL을 구성 객체에 전달하고 설정 시 WiFi 재연결을 활성화합니다. 그런 다음 익명으로 디바이스를 가입하려고 시도합니다. 가입이 성공하면 모든 디바이스 데이터가 기록될 데이터베이스 경로(Temp_Sensor라고 합니다.)를 정의하고, 가입이 성공하면 auth 객체에서 얻은 Firebase 고유 식별자를 통해 Firebase 식별자를 추가합니다. Firebase 인증 기능을 더 자세히 알아보려면 여기에서 라이브러리 문서를 확인하세요. 가입을 완료한 후 Firebase.begin() 함수로 Firebase 라이브러리를 초기화합니다.\n\n참고: Firebase.signUp()을 실행할 때마다 백엔드에 새로운 익명 사용자가 생성됩니다. 이는 디바이스를 켜고 끌 때마다 새로운 사용자가 생성된다는 것을 의미합니다.\n\n```js\nvoid firebase_init() {\n  // firebase API Key 구성\n  config.api_key = API_KEY;\n  // firebase 실시간 데이터베이스 URL 구성\n  config.database_url = DATABASE_URL;\n  // WiFi 재연결 활성화 \n  Firebase.reconnectWiFi(true);\n  Serial.println(\"------------------------------------\");\n  Serial.println(\"새 사용자 가입 중...\");\n  // 익명으로 Firebase에 로그인\n  if (Firebase.signUp(\u0026config, \u0026auth, \"\", \"\"))\n  {\n    Serial.println(\"성공\");\n    isAuthenticated = true;\n    // 이 디바이스에 대해 업데이트가 로드될 데이터베이스 경로 설정\n    databasePath = \"/\" + device_location;\n    fuid = auth.token.uid.c_str();\n  }\n  else\n  {\n    Serial.printf(\"실패, %s\\n\", config.signer.signupError.message.c_str());\n    isAuthenticated = false;\n  }\n  // 장기적인 토큰 생성 작업에 대한 콜백 함수 할당, addons/TokenHelper.h 참조\n  config.token_status_callback = tokenStatusCallback;\n  // Firebase 라이브러리 초기화\n  Firebase.begin(\u0026config, \u0026auth);\n}\n```  \n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n위의 모든 것을 종합하면, 우리의 설정 함수는 다음과 같이 보일 것입니다:\n\n```js\nvoid setup() {\n// 로컬 진단을 위한 시리얼 통신 초기화\nSerial.begin(115200);\n// 위치 WiFi와의 연결 초기화\nWifi_Init();\n// Firebase 구성 및 익명으로 가입\nfirebase_init();\n}\n```\n\n마지막으로, 모든 것이 올바르게 설정되었는지 테스트하는 샘플 데이터를 Firebase 데이터베이스에 업로드하는 테스트 함수를 구현해 봅시다. database_test()라는 새 함수를 만들겠습니다. 업데이트를 수행하기 전에 10초가 경과했는지 확인하고, 장치가 인증되었는지, 마지막으로 Firebase 라이브러리가 준비되었는지 확인합니다. 업데이트하기 전에 값을 설정하려는 실시간 데이터베이스의 노드 경로를 지정하고, 그 값으로 더미 카운터를 업데이트합니다. 10초마다 Firebase.set() 함수를 사용하여 이전 값들을 새로운 업데이트된 값으로 덮어씁니다. 기타 Firebase 함수는 여기에서 FirebaseESP32 API 문서를 참조하십시오.\n\n```js\nvoid database_test() {\n// 10초가 경과하고, 장치가 인증되었으며 Firebase 서비스가 준비되었는지 확인\nif (millis() - elapsedMillis \u003e update_interval \u0026\u0026 isAuthenticated \u0026\u0026 Firebase.ready())\n{\nelapsedMillis = millis();\nSerial.println(\"------------------------------------\");\nSerial.println(\"Set int test...\");\n// 데이터의 키 값을 지정하고 경로에 추가\nString node = path + \"/value\";\n// 카운트 값을 Firebase 실시간 데이터베이스에 보내기\nif (Firebase.set(fbdo, node.c_str(), count++))\n{\nSerial.println(\"PASSED\");\nSerial.println(\"PATH: \" + fbdo.dataPath());\nSerial.println(\"TYPE: \" + fbdo.dataType());\nSerial.println(\"ETag: \" + fbdo.ETag());\nSerial.print(\"VALUE: \");\nprintResult(fbdo); //addons/RTDBHelper.h 참조\nSerial.println(\"------------------------------------\");\nSerial.println();\n}\nelse\n{\nSerial.println(\"FAILED\");\nSerial.println(\"REASON: \" + fbdo.errorReason());\nSerial.println(\"------------------------------------\");\nSerial.println();\n}\n}\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n마침내 함수를 메인 루프에 다음과 같이 배치하십시오:\n\n```js\nvoid loop() {\n    database_test();\n}\n```\n\n우리의 코드는 더미 테스트를 수행할 준비가 완료되었습니다. ESP32 보드를 USB 포트에 연결하고 아래에 표시된 하단 패널의 컴파일 버튼을 눌러 코드를 컴파일하십시오:\n\n![이미지](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_22.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n빌드가 성공하면, 컴파일 버튼 오른쪽에 있는 업로드 버튼을 사용하여 코드를 ESP32 장치에 업로드합니다.\n\n![upload button](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_23.png)\n\n모든 것이 잘 진행되었다면, Firebase 콘솔의 Realtime Database 브라우저로 돌아가서 아래 그림과 같이 10초마다 업데이트가 오는 것을 확인할 수 있습니다:\n\n![database browser](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_24.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n시리얼 통신 인터페이스를 사용하여 10초마다 전송되는 다음 출력값을 확인할 수도 있습니다.\n\n![Image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_25.png)\n\n# DHT11 온도 센서 통합\n\n마지막으로 온도 센서를 통합해 봅시다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n먼저, 하드웨어 연결이 올바른지 확인해야 합니다. DHT11 센서는 I2C 주변 장치를 사용하며 두 개의 핀이 필요합니다. DHT11 핀 할당을 검토해 봅시다:\n\n![DHT11 Pin Allocation](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_26.png)\n\n![DHT11 Pinout](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_27.png)\n\n다음 표는 DHT22/DHT11 핀 배치를 보여줍니다. 센서가 당신을 향하고 있을 때, 핀 번호는 왼쪽부터 오른쪽까지 1부터 시작합니다. 이 예제에서는 GPIO4를 사용할 것이므로, 하드웨어 배선은 다음과 같이 될 것입니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_28.png)\n\nNow that we have our hardware configuration setup, let’s update our embedded application to utilise the DHT11 sensor. Let’s start by adding the DHT library from Adafruit to our project:\n\n![image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_29.png)\n\n![image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_30.png)\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nDHT 라이브러리를 imports에 추가해 보겠습니다.\n\n```js\n#include \u003cArduino.h\u003e\n#include \u003cWiFi.h\u003e\n#include \u003cFirebaseESP32.h\u003e\n#include \"DHT.h\"\n```\n\n그러고 나서 DHT11 라이브러리를 설정해야 합니다. 이를 위해 센서 업데이트를 받을 GPIO 핀을 지정하고, DHT 센서 종류도 명시해야 합니다. 라이브러리는 DHT22 센서와도 호환되므로 사용 중인 DHT 센서를 지정해 주어야 합니다.\n\n```js\n// DHT 센서와 연결된 디지털 핀\n#define DHTPIN 4\n#define DHTTYPE DHT11\n// DHT 센서 초기화\nDHT dht(DHTPIN, DHTTYPE);\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n그럼 온도를 저장할 전역 변수를 정의해야 합니다.\n\n참고: DHT11은 습도를 추적하기도 하지만, 이 튜토리얼에서는 온도 측정만 다루겠습니다.\n\n```js\n// 센서 측정값을 저장할 변수\nfloat temperature = 0;\nfloat humidity = 0;\n// 업데이트된 센서 값 저장을 위한 JSON 객체(Firebase로 전송할 값)\nFirebaseJson temperature_json;\nFirebaseJson humidity_json;\n```\n\n그리고 setup() 함수를 업데이트하여 DHT 라이브러리를 초기화해야 합니다. 이 라이브러리는 I2C 설정을 다룰 것입니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nvoid setup() {\n// 로컬 진단을 위한 시리얼 통신을 초기화합니다\nSerial.begin(115200);\n// 위치 WiFi 연결을 초기화합니다\nWifi_Init();\n// Firebase 구성 및 익명으로 가입을 초기화합니다\nfirebase_init();\n// DHT 라이브러리를 초기화합니다\ndht.begin();\n// 온도 및 습도 JSON 데이터를 초기화합니다\ntemperature_json.add(\"deviceuid\", DEVICE_UID);\ntemperature_json.add(\"name\", \"DHT11-Temp\");\ntemperature_json.add(\"type\", \"Temperature\");\ntemperature_json.add(\"location\", device_location);\ntemperature_json.add(\"value\", temperature);\n// 초기 온도 값을 출력합니다\nString jsonStr;\ntemperature_json.toString(jsonStr, true);\nSerial.println(jsonStr);\nhumidity_json.add(\"deviceuid\", DEVICE_UID);\nhumidity_json.add(\"name\", \"DHT11-Hum\");\nhumidity_json.add(\"type\", \"Humidity\");\nhumidity_json.add(\"location\", device_location);\nhumidity_json.add(\"value\", humidity);\n// 초기 습도 값을 출력합니다\nString jsonStr2;\nhumidity_json.toString(jsonStr2, true);\nSerial.println(jsonStr2);\n}\n```\n\n그런 다음 센서 데이터를 업데이트하고 후에 Firebase로 보낼 글로벌 JSON 객체 변수에 저장할 updateSensorReadings() 함수를 도입합니다.\n\n```js\nvoid updateSensorReadings() {\nSerial.println(\"------------------------------------\");\nSerial.println(\"센서 데이터를 읽는 중...\");\ntemperature = dht.readTemperature();\nhumidity = dht.readHumidity();\n// 읽기 실패 여부를 확인하고 조기에 종료합니다.\nif (isnan(temperature) || isnan(humidity)) {\n Serial.println(F(\"DHT 센서에서 읽기 실패!\"));\n return;\n}\nSerial.printf(\"온도 읽기: %.2f \\n\", temperature);\nSerial.printf(\"습도 읽기: %.2f \\n\", humidity);\ntemperature_json.set(\"value\", temperature);\nhumidity_json.set(\"value\", humidity);\n}\n```\n\n다음으로 예전의 database_test() 함수를 삭제하고 새로운 uploadSensorData() 함수로 교체해야 합니다. 노드 설명을 온도와 습도로 변경했습니다. 마지막으로 Firebase.set() 대신 Firebase.setJSON() 함수를 사용하여 온도와 습도 정보를 가진 두 개의 JSON 객체를 전달합니다. 마지막으로 main while 루프에서 database_test() 함수를 새로운 uploadSensorData() 함수로 교체합니다. 최종 코드 버전은 Github에서 확인할 수 있습니다.```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nvoid uploadSensorData() {\nif (millis() - elapsedMillis \u003e update_interval \u0026\u0026 isAuthenticated \u0026\u0026 Firebase.ready())\n{\n elapsedMillis = millis();\n updateSensorReadings();\n String temperature_node = databasePath + \"/temperature\"; \n String humidity_node = databasePath + \"/humidity\";\n if (Firebase.setJSON(fbdo, temperature_node.c_str(), temperature_json))\n {\n Serial.println(\"PASSED\"); \n Serial.println(\"PATH: \" + fbdo.dataPath());\n Serial.println(\"TYPE: \" + fbdo.dataType());\n Serial.println(\"ETag: \" + fbdo.ETag());\n Serial.print(\"VALUE: \");\n printResult(fbdo); //see addons/RTDBHelper.h\n Serial.println(\"------------------------------------\");\n Serial.println();\n }\n else\n {\n Serial.println(\"FAILED\");\n Serial.println(\"REASON: \" + fbdo.errorReason());\n Serial.println(\"------------------------------------\");\n Serial.println();\n }\nif (Firebase.setJSON(fbdo, humidity_node.c_str(), humidity_json))\n{\n Serial.println(\"PASSED\");\n Serial.println(\"PATH: \" + fbdo.dataPath());\n Serial.println(\"TYPE: \" + fbdo.dataType());\n Serial.println(\"ETag: \" + fbdo.ETag()); \n Serial.print(\"VALUE: \");\n printResult(fbdo); //see addons/RTDBHelper.h\n Serial.println(\"------------------------------------\");\n Serial.println();\n }\n else\n {\n Serial.println(\"FAILED\");\n Serial.println(\"REASON: \" + fbdo.errorReason());\n Serial.println(\"------------------------------------\");\n Serial.println();\n  }\n }\n}\nvoid loop() {\n uploadSensorData();\n }\n```\n\n이 새로운 버전을 컴파일하고 업로드하십시오. Firebase 데이터베이스를 확인하여 방 온도의 실시간 온도 값을 표시합니다.\n\n\u003cimg src=\"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_31.png\" /\u003e\n\n애플리케이션을 더 현실적으로 만들기 위해 데이터베이스에 흥미로운 센서 데이터를 채워 넣어야 합니다.```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n향후 튜토리얼을 따랐다면, 장치의 위치와 장치 UID를 변경하여 서로 다른 방에서 오는 다양한 센서 데이터를 시뮬레이션할 수 있습니다. 만약 4개의 ESP32와 4개의 DHT11 센서를 가지고 있다면, 각각을 별도의 방에 설치할 수도 있습니다. 이 튜토리얼에서는 다음과 같은 접근 방식을 취했습니다.\n\n![image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_32.png)\n\n최종 결과는 이제 실시간 데이터베이스에 각 방에서 온 센서 데이터가 포함될 것입니다:\n\n![image](/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_33.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n대박이다! 당신은 ESP32 장치를 Firebase와 성공적으로 통합했어요.\n\n# 결론\n\n마무리하면, 우리는 어떠한 ESP32 장치도 익명으로 가입하고 10초마다 온도 측정을 Realtime Database로 전송할 수 있는 새로운 Firebase 프로젝트를 설정했어요. 다음 튜토리얼에서는 모든 방에서의 실시간 업데이트를 제공해주는 watchOS 애플리케이션을 만들 것이에요.\n\n이 튜토리얼의 최종 코드는 여기의 Github에서 찾을 수 있어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n마지막으로, mobizt 팀원들에게 무한한 감사와 사랑을 전합니다. 이 멋진 FirebaseESP32 라이브러리를 우리에게 제공해줘서 정말 감사합니다. 그 안에는 Firebase Cloud Messages를 보낼 수 있는 능력을 비롯한 다양한 기능이 있습니다. 다음 IoT 프로젝트 중 하나에 매우 유용할 수 있을 거에요.\n\n# 자료들","ogImage":{"url":"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_0.png"},"coverImage":"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_0.png","tag":["Tech"],"readingTime":18},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    p: \"p\",\n    img: \"img\",\n    h1: \"h1\",\n    ul: \"ul\",\n    li: \"li\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h2, {\n      children: \"IOT\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_0.png\",\n        alt: \"Getting started with ESP32 and Firebase\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 튜토리얼에서는 ESP32를 Google의 Firebase 백엔드에 가장 빠르게 연결하는 방법을 보여드리겠습니다. Firebase는 개발자들이 아이디어를 신속하게 프로토타이핑할 수 있는 매우 편리한 옵션으로 자리 잡았습니다. 본 튜토리얼에서는 Apple 워치를 위한 실시간 온도 모니터링 솔루션 개발을 위한 기초 작업을 다루며, 이 기사는 ESP32와 Firebase 간의 링크 설정에 중점을 두고 있습니다. 이후 기사에서는 watchOS 애플리케이션에 중점을 둘 것입니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"하드웨어 요구사항\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 튜토리얼을 완료하기 위해 다음 하드웨어가 필요합니다:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ESP32 개발 보드 (어떤 ESP32 보드든 상관없습니다. 이 튜토리얼에서는 ESP32 DevKit v3를 사용할 것입니다).\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"DHT11 온도 및 습도 센서.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"백엔드 설정\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"백엔드로 Google의 Firebase를 사용할 것이며, 시작하려면 Firebase로 이동하여 Google 계정으로 로그인하십시오.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"새 프로젝트를 생성하려면 추가 프로젝트 옵션을 선택하세요. 프로젝트 이름을 입력하고 적절한 이름을 선택한 후 파란색 계속 버튼을 선택하세요. 내 프로젝트를 \\\"스마트 홈이\\\"라고 부르겠어요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_1.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 프로젝트에 대해 구글 애널리틱스를 사용 안 함으로 설정하세요. 이 프로젝트에는 필요하지 않습니다. 마지막으로, 프로젝트를 만들기 위해 \\\"프로젝트 만들기\\\"를 선택하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_2.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Firebase에서 프로젝트 설정을 시작합니다. 완료되면 계속 선택하고 Firebase 콘솔의 프로젝트 개요 페이지로 이동됩니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_3.png\",\n        alt: \"프로젝트 개요 페이지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"첫 번째로 할 일은 프로젝트의 인증 옵션을 설정하는 것입니다. 왼쪽 상단의 인증 메뉴 옵션을 선택하면 인증 페이지로 이동합니다. '시작하기' 버튼을 선택하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_4.png\",\n        alt: \"인증 페이지\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_5.png\",\n        alt: \"ESP32 Firebase Tutorial Step 1\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"첫 번째 단계로 ESP32 장치에 대해 익명 로그인을 사용할 것입니다. 이후 자습서에서 더 똑똑한 로그인 방법을 만들 것입니다. 아래와 같이 익명 로그인을 활성화하고 저장 옵션을 선택하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_6.png\",\n        alt: \"ESP32 Firebase Tutorial Step 2\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음으로 모든 센서 데이터를 저장할 데이터베이스를 만들어야 합니다. 이를 위해 좌측 상단에 있는 Realtime Database 메뉴 옵션을 선택하고 Realtime Database 페이지로 이동합니다. 데이터베이스 생성 메뉴를 초기화하려면 데이터베이스 생성 버튼을 선택하세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_7.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_8.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"데이터베이스 생성 메뉴에서 가장 가까운 위치를 선택한 다음, \\\"다음\\\"을 선택하세요. 데이터베이스를 잠긴 모드 또는 테스트 모드로 초기화할 수 있는 옵션이 표시됩니다. 현재는 테스트 모드를 선택하세요. 주요 차이점은 테스트 모드에서는 30일 동안 데이터베이스에 무단 액세스를 허용하는 데이터베이스 액세스 규칙이 적용됩니다. 프로젝트를 제품으로 이동할 예정이라면 향후 이 기능을 비활성화해야 합니다. \\\"활성화\\\" 버튼을 선택하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_9.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마지막으로 새로운 빈 데이터베이스가 있는 새 페이지가 나타날 것입니다. 이제 모든 준비가 끝났어요!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_10.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"계속 진행하기 전에 임베디드 애플리케이션에서 나중에 사용할 두 가지 항목을 복사하여 보관해야 합니다. 먼저 필요한 것은 실시간 데이터베이스 URL입니다. 실시간 데이터베이스 페이지의 URL을 복사하여 찾을 수 있으며, 이 경우에는 https://smart-hommie-default-rtdb.firebaseio.com 입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_11.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로젝트를 API 키를 저장해야 할 두 번째 항목입니다. API 키를 얻으려면 페이지 상단 오른쪽에 있는 설정 아이콘을 선택한 다음 프로젝트 설정 메뉴 항목을 선택하여 프로젝트 설정 페이지로 이동하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_12.png\",\n        alt: \"프로젝트 설정 페이지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로젝트 설정 페이지에서 Web API 키가 표시됩니다. 이를 복사하여 저장하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_13.png\",\n        alt: \"Web API 키\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"저희들은 임베디드 애플리케이션을 시작할 준비가 되었습니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"개발 환경 설정\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"가장 먼저 해야 할 일은 ESP32 개발 환경을 설정하는 것입니다. 이 튜토리얼에서는 Visual Studio Code 및 PlatformIO 플러그인을 사용할 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"만약 아직 VSCode를 설치하지 않았다면, 여기서 다운로드하고 설치해주세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"아래 지침에 따라 PlatformIO를 설치해야 합니다. 모든 것이 잘 진행되었다면 아래 첨부된 이미지처럼 오른쪽 메뉴에 PlatformIO가 나타날 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_14.png\",\n        alt: \"PlatformIO Menu\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"먼저 우리가 해야 할 일은 PlatformIO용 ESP32 플랫폼을 설치하는 것입니다. PlatformIO 메뉴 아이콘을 선택하여 PlatformIO 홈페이지에 들어가십시오.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_15.png\",\n        alt: \"PlatformIO Home Page\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"플랫폼 메뉴 옵션을 선택하고 임베디드 페이지를 선택합니다. \\\"Esp\\\"를 입력하여 Espressif 프레임워크를 찾은 다음 Espressif 32 옵션을 선택합니다. 설치 버튼을 선택하여 플랫폼을 설치합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_16.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_17.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 임베디드 어플리케이션을 위한 새 프로젝트를 만들어 봅시다. 홈페이지로 돌아가서 \\\"새 프로젝트 만들기\\\" 메뉴를 선택합니다. 프로젝트 위저드가 표시되며, 프로젝트에 이름을 지정하고 EPS32 보드를 선택해야 합니다. 이 프로젝트에서는 Arduino 라이브러리를 사용할 예정이므로 기본 설정을 유지하고 '완료'를 선택하세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_18.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마지막으로 프로젝트에서 사용할 mobizt의 라이브러리를 추가해야 합니다. 홈페이지에서 라이브러리 페이지로 이동하고 아래 그림과 같이 FirebaseESP32 라이브러리를 검색하십시오.\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_19.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마지막으로 아래 그림과 같이 라이브러리를 프로젝트에 추가하십시오.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_20.png\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"임베디드 어플리케이션\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로젝트 탐색기에서 main.cpp 파일을 엽니다.\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_21.png\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리 애플리케이션에서 필요한 모든 라이브러리를 불러와야 해요. Arduino 라이브러리는 기본적으로 이미 있어야 합니다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"#include \u003c\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Arduino\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"h\"\n        }), \"\u003e\\n#include \u003c\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WiFi\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"h\"\n        }), \"\u003e\\n#include \u003c\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"FirebaseESP32\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"h\"\n        }), \"\u003e\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음으로 FirebaseESP32 라이브러리에서 사용되는 몇 가지 도우미 라이브러리를 추가해야 해요. TokenHelper 라이브러리는 토큰 생성 프로세스를 관리하는 데 사용되고, RTDBHelper 라이브러리는 Firebase Realtime Database에서 오는 데이터를 출력하기 위한 도우미 함수를 제공해요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//토큰 생성 프로세스 정보를 제공합니다.\"\n        }), \"\\n#include \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"addons/TokenHelper.h\\\"\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//RTDB payload 출력 정보 및 다른 도우미 함수를 제공합니다.\"\n        }), \"\\n#include \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"addons/RTDBHelper.h\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"여러 센서에서 오는 데이터를 구분하는 데 사용할 수 있는 고유한 장치 ID를 정의해야 합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 장치 ID\"\n        }), \"\\n#define \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DEVICE_UID\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"1X\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음으로 WiFi 자격 증명을 입력해야 합니다. WIFI_AP를 WiFi 식별자로, WIFI_PASSWORD를 WiFi 비밀번호로 대체하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"참고: 임베디드 애플리케이션에 암호 정보를 하드코딩하는 것은 좋지 않은 생각입니다. 제품 케이스에서는 안전한 장치 등록 프로세스를 포함하는 장치 프로비저닝 전략을 적용해야 합니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"// Wi-Fi 인증 정보\\n#define WIFI_SSID \\\"WIFI_AP\\\"\\n#define WIFI_PASSWORD \\\"WIFI_PASSWORD\\\"\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음으로, Firebase 프로젝트 API 키를 저장하는 상수를 추가해야 합니다. 앞서 언급했듯이 Firebase 프로젝트 설정 페이지에서 API 키를 얻을 수 있습니다. API_KEY를 여러분의 API 키로 대체해주세요. 비슷하게 Firebase 실시간 데이터베이스 URL을 포함하여 본인의 URL로 대체해야 합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"// 여러분의 Firebase 프로젝트 웹 API 키\\n#define API_KEY \\\"API_KEY\\\"\\n// 여러분의 Firebase 실시간 데이터베이스 URL\\n#define DATABASE_URL \\\"https://smart-hommie-default-rtdb.firebaseio.com\\\"\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그 다음으로, FirebaseESP32 라이브러리의 3개 객체를 초기화해야 합니다. 이 객체는 애플리케이션을 Firebase에 연결하는 데 중요합니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"먼저 유용한 몇 가지 전역 변수를 정의합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 장치 위치 설정\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"String\"\n        }), \" device_location = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"거실\\\"\"\n        }), \"; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Firebase 실시간 데이터베이스 객체\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"FirebaseData\"\n        }), \" fbdo; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Firebase 인증 객체\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"FirebaseAuth\"\n        }), \" auth; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Firebase 구성 객체\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"FirebaseConfig\"\n        }), \" config; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Firebase 데이터베이스 경로\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"String\"\n        }), \" databasePath = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"\\\"\"\n        }), \"; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Firebase 고유 식별자\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"String\"\n        }), \" fuid = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"\\\"\"\n        }), \"; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 장치 부팅 후 경과된 시간을 저장합니다.\"\n        }), \"\\nunsigned long elapsedMillis = \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 센서 업데이트 주기를 10초로 설정합니다.\"\n        }), \"\\nunsigned long update_interval = \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"10000\"\n        }), \"; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 초기 Firebase 업데이트를 테스트하기 위한 더미 카운터\"\n        }), \"\\nint count = \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"; \\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 장치 인증 상태를 저장합니다.\"\n        }), \"\\nbool isAuthenticated = \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"false\"\n        }), \";\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"첫 번째 필요한 함수는 WiFi 설정입니다. WiFi_Init()이라는 함수를 정의합니다. Arduino 프레임워크에서 제공하는 내장 WiFi API를 사용합니다. WiFi.begin() 함수를 사용하여 자격 증명을 사용하여 WiFi 연결을 초기화한 후, WiFi.status() 함수를 사용하여 연결이 성공적인지 300ms마다 확인한 후, WiFi.localIP() 함수를 사용하여 로컬 IP 주소를 출력합니다. 사용하고 싶을 수 있는 다른 WiFi 관련 기능은 Arduino WiFi API 설명서를 확인해주세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Wifi\"\n        }), \"_Init() {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WiFi\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"begin\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"WIFI_SSID\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"WIFI_PASSWORD\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"print\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Wi-Fi에 연결 중입니다\\\"\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"while\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WiFi\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"status\"\n        }), \"() != \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"WL_CONNECTED\"\n        }), \"){\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"print\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\".\\\"\"\n        }), \");\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"delay\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"300\"\n        }), \");\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"();\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"print\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"IP 주소로 연결됨: \\\"\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WiFi\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"localIP\"\n        }), \"());\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"();\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 Firebase 초기화 함수를 구현해야 합니다. 이 함수는 Firebase 백엔드에 연결하고 디바이스를 인증하며 Firebase 라이브러리를 초기화합니다. 먼저 API 키와 데이터베이스 URL을 구성 객체에 전달하고 설정 시 WiFi 재연결을 활성화합니다. 그런 다음 익명으로 디바이스를 가입하려고 시도합니다. 가입이 성공하면 모든 디바이스 데이터가 기록될 데이터베이스 경로(Temp_Sensor라고 합니다.)를 정의하고, 가입이 성공하면 auth 객체에서 얻은 Firebase 고유 식별자를 통해 Firebase 식별자를 추가합니다. Firebase 인증 기능을 더 자세히 알아보려면 여기에서 라이브러리 문서를 확인하세요. 가입을 완료한 후 Firebase.begin() 함수로 Firebase 라이브러리를 초기화합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"참고: Firebase.signUp()을 실행할 때마다 백엔드에 새로운 익명 사용자가 생성됩니다. 이는 디바이스를 켜고 끌 때마다 새로운 사용자가 생성된다는 것을 의미합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"firebase_init\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// firebase API Key 구성\"\n        }), \"\\n  config.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"api_key\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"API_KEY\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// firebase 실시간 데이터베이스 URL 구성\"\n        }), \"\\n  config.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"database_url\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DATABASE_URL\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// WiFi 재연결 활성화 \"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Firebase\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"reconnectWiFi\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"새 사용자 가입 중...\\\"\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 익명으로 Firebase에 로그인\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Firebase\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"signUp\"\n        }), \"(\u0026config, \u0026auth, \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"\\\"\"\n        }), \"))\\n  {\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"성공\\\"\"\n        }), \");\\n    isAuthenticated = \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 이 디바이스에 대해 업데이트가 로드될 데이터베이스 경로 설정\"\n        }), \"\\n    databasePath = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"/\\\"\"\n        }), \" + device_location;\\n    fuid = auth.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"token\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"uid\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"c_str\"\n        }), \"();\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"else\"\n        }), \"\\n  {\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"printf\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"실패, %s\\\\n\\\"\"\n        }), \", config.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"signer\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"signupError\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"message\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"c_str\"\n        }), \"());\\n    isAuthenticated = \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"false\"\n        }), \";\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 장기적인 토큰 생성 작업에 대한 콜백 함수 할당, addons/TokenHelper.h 참조\"\n        }), \"\\n  config.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"token_status_callback\"\n        }), \" = tokenStatusCallback;\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Firebase 라이브러리 초기화\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Firebase\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"begin\"\n        }), \"(\u0026config, \u0026auth);\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"위의 모든 것을 종합하면, 우리의 설정 함수는 다음과 같이 보일 것입니다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setup\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 로컬 진단을 위한 시리얼 통신 초기화\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"begin\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"115200\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 위치 WiFi와의 연결 초기화\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Wifi\"\n        }), \"_Init();\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Firebase 구성 및 익명으로 가입\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"firebase_init\"\n        }), \"();\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마지막으로, 모든 것이 올바르게 설정되었는지 테스트하는 샘플 데이터를 Firebase 데이터베이스에 업로드하는 테스트 함수를 구현해 봅시다. database_test()라는 새 함수를 만들겠습니다. 업데이트를 수행하기 전에 10초가 경과했는지 확인하고, 장치가 인증되었는지, 마지막으로 Firebase 라이브러리가 준비되었는지 확인합니다. 업데이트하기 전에 값을 설정하려는 실시간 데이터베이스의 노드 경로를 지정하고, 그 값으로 더미 카운터를 업데이트합니다. 10초마다 Firebase.set() 함수를 사용하여 이전 값들을 새로운 업데이트된 값으로 덮어씁니다. 기타 Firebase 함수는 여기에서 FirebaseESP32 API 문서를 참조하십시오.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"database_test\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 10초가 경과하고, 장치가 인증되었으며 Firebase 서비스가 준비되었는지 확인\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"millis\"\n        }), \"() - elapsedMillis \u003e update_interval \u0026\u0026 isAuthenticated \u0026\u0026 \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Firebase\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"ready\"\n        }), \"())\\n{\\nelapsedMillis = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"millis\"\n        }), \"();\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Set int test...\\\"\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 데이터의 키 값을 지정하고 경로에 추가\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"String\"\n        }), \" node = path + \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"/value\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 카운트 값을 Firebase 실시간 데이터베이스에 보내기\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Firebase\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"set\"\n        }), \"(fbdo, node.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"c_str\"\n        }), \"(), count++))\\n{\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"PASSED\\\"\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"PATH: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"dataPath\"\n        }), \"());\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"TYPE: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"dataType\"\n        }), \"());\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"ETag: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ETag\"\n        }), \"());\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"print\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"VALUE: \\\"\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"printResult\"\n        }), \"(fbdo); \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//addons/RTDBHelper.h 참조\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"();\\n}\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"else\"\n        }), \"\\n{\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"FAILED\\\"\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"REASON: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"errorReason\"\n        }), \"());\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"();\\n}\\n}\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마침내 함수를 메인 루프에 다음과 같이 배치하십시오:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"loop\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"database_test\"\n        }), \"();\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리의 코드는 더미 테스트를 수행할 준비가 완료되었습니다. ESP32 보드를 USB 포트에 연결하고 아래에 표시된 하단 패널의 컴파일 버튼을 눌러 코드를 컴파일하십시오:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_22.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"빌드가 성공하면, 컴파일 버튼 오른쪽에 있는 업로드 버튼을 사용하여 코드를 ESP32 장치에 업로드합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_23.png\",\n        alt: \"upload button\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"모든 것이 잘 진행되었다면, Firebase 콘솔의 Realtime Database 브라우저로 돌아가서 아래 그림과 같이 10초마다 업데이트가 오는 것을 확인할 수 있습니다:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_24.png\",\n        alt: \"database browser\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"시리얼 통신 인터페이스를 사용하여 10초마다 전송되는 다음 출력값을 확인할 수도 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_25.png\",\n        alt: \"Image\"\n      })\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"DHT11 온도 센서 통합\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마지막으로 온도 센서를 통합해 봅시다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"먼저, 하드웨어 연결이 올바른지 확인해야 합니다. DHT11 센서는 I2C 주변 장치를 사용하며 두 개의 핀이 필요합니다. DHT11 핀 할당을 검토해 봅시다:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_26.png\",\n        alt: \"DHT11 Pin Allocation\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_27.png\",\n        alt: \"DHT11 Pinout\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음 표는 DHT22/DHT11 핀 배치를 보여줍니다. 센서가 당신을 향하고 있을 때, 핀 번호는 왼쪽부터 오른쪽까지 1부터 시작합니다. 이 예제에서는 GPIO4를 사용할 것이므로, 하드웨어 배선은 다음과 같이 될 것입니다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_28.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now that we have our hardware configuration setup, let’s update our embedded application to utilise the DHT11 sensor. Let’s start by adding the DHT library from Adafruit to our project:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_29.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_30.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"DHT 라이브러리를 imports에 추가해 보겠습니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"#include \u003c\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Arduino\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"h\"\n        }), \"\u003e\\n#include \u003c\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WiFi\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"h\"\n        }), \"\u003e\\n#include \u003c\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"FirebaseESP32\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"h\"\n        }), \"\u003e\\n#include \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"DHT.h\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그러고 나서 DHT11 라이브러리를 설정해야 합니다. 이를 위해 센서 업데이트를 받을 GPIO 핀을 지정하고, DHT 센서 종류도 명시해야 합니다. 라이브러리는 DHT22 센서와도 호환되므로 사용 중인 DHT 센서를 지정해 주어야 합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// DHT 센서와 연결된 디지털 핀\"\n        }), \"\\n#define \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DHTPIN\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"4\"\n        }), \"\\n#define \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DHTTYPE\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DHT11\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// DHT 센서 초기화\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DHT\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"dht\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DHTPIN\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DHTTYPE\"\n        }), \");\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그럼 온도를 저장할 전역 변수를 정의해야 합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"참고: DHT11은 습도를 추적하기도 하지만, 이 튜토리얼에서는 온도 측정만 다루겠습니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 센서 측정값을 저장할 변수\"\n        }), \"\\nfloat temperature = \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \";\\nfloat humidity = \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 업데이트된 센서 값 저장을 위한 JSON 객체(Firebase로 전송할 값)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"FirebaseJson\"\n        }), \" temperature_json;\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"FirebaseJson\"\n        }), \" humidity_json;\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그리고 setup() 함수를 업데이트하여 DHT 라이브러리를 초기화해야 합니다. 이 라이브러리는 I2C 설정을 다룰 것입니다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setup\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 로컬 진단을 위한 시리얼 통신을 초기화합니다\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"begin\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"115200\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 위치 WiFi 연결을 초기화합니다\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Wifi\"\n        }), \"_Init();\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Firebase 구성 및 익명으로 가입을 초기화합니다\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"firebase_init\"\n        }), \"();\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// DHT 라이브러리를 초기화합니다\"\n        }), \"\\ndht.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"begin\"\n        }), \"();\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 온도 및 습도 JSON 데이터를 초기화합니다\"\n        }), \"\\ntemperature_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"deviceuid\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DEVICE_UID\"\n        }), \");\\ntemperature_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"name\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"DHT11-Temp\\\"\"\n        }), \");\\ntemperature_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"type\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Temperature\\\"\"\n        }), \");\\ntemperature_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"location\\\"\"\n        }), \", device_location);\\ntemperature_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"value\\\"\"\n        }), \", temperature);\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 초기 온도 값을 출력합니다\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"String\"\n        }), \" jsonStr;\\ntemperature_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"toString\"\n        }), \"(jsonStr, \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(jsonStr);\\nhumidity_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"deviceuid\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"DEVICE_UID\"\n        }), \");\\nhumidity_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"name\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"DHT11-Hum\\\"\"\n        }), \");\\nhumidity_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"type\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Humidity\\\"\"\n        }), \");\\nhumidity_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"location\\\"\"\n        }), \", device_location);\\nhumidity_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"add\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"value\\\"\"\n        }), \", humidity);\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 초기 습도 값을 출력합니다\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"String\"\n        }), \" jsonStr2;\\nhumidity_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"toString\"\n        }), \"(jsonStr2, \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(jsonStr2);\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그런 다음 센서 데이터를 업데이트하고 후에 Firebase로 보낼 글로벌 JSON 객체 변수에 저장할 updateSensorReadings() 함수를 도입합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"updateSensorReadings\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"센서 데이터를 읽는 중...\\\"\"\n        }), \");\\ntemperature = dht.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"readTemperature\"\n        }), \"();\\nhumidity = dht.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"readHumidity\"\n        }), \"();\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 읽기 실패 여부를 확인하고 조기에 종료합니다.\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"isnan\"\n        }), \"(temperature) || \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"isnan\"\n        }), \"(humidity)) {\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"F\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"DHT 센서에서 읽기 실패!\\\"\"\n        }), \"));\\n \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \";\\n}\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"printf\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"온도 읽기: %.2f \\\\n\\\"\"\n        }), \", temperature);\\n\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"printf\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"습도 읽기: %.2f \\\\n\\\"\"\n        }), \", humidity);\\ntemperature_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"set\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"value\\\"\"\n        }), \", temperature);\\nhumidity_json.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"set\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"value\\\"\"\n        }), \", humidity);\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음으로 예전의 database_test() 함수를 삭제하고 새로운 uploadSensorData() 함수로 교체해야 합니다. 노드 설명을 온도와 습도로 변경했습니다. 마지막으로 Firebase.set() 대신 Firebase.setJSON() 함수를 사용하여 온도와 습도 정보를 가진 두 개의 JSON 객체를 전달합니다. 마지막으로 main while 루프에서 database_test() 함수를 새로운 uploadSensorData() 함수로 교체합니다. 최종 코드 버전은 Github에서 확인할 수 있습니다.```\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"uploadSensorData\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"millis\"\n        }), \"() - elapsedMillis \u003e update_interval \u0026\u0026 isAuthenticated \u0026\u0026 \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Firebase\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"ready\"\n        }), \"())\\n{\\n elapsedMillis = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"millis\"\n        }), \"();\\n \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"updateSensorReadings\"\n        }), \"();\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"String\"\n        }), \" temperature_node = databasePath + \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"/temperature\\\"\"\n        }), \"; \\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"String\"\n        }), \" humidity_node = databasePath + \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"/humidity\\\"\"\n        }), \";\\n \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Firebase\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setJSON\"\n        }), \"(fbdo, temperature_node.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"c_str\"\n        }), \"(), temperature_json))\\n {\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"PASSED\\\"\"\n        }), \"); \\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"PATH: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"dataPath\"\n        }), \"());\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"TYPE: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"dataType\"\n        }), \"());\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"ETag: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ETag\"\n        }), \"());\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"print\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"VALUE: \\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"printResult\"\n        }), \"(fbdo); \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//see addons/RTDBHelper.h\"\n        }), \"\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"();\\n }\\n \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"else\"\n        }), \"\\n {\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"FAILED\\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"REASON: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"errorReason\"\n        }), \"());\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"();\\n }\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Firebase\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setJSON\"\n        }), \"(fbdo, humidity_node.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"c_str\"\n        }), \"(), humidity_json))\\n{\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"PASSED\\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"PATH: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"dataPath\"\n        }), \"());\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"TYPE: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"dataType\"\n        }), \"());\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"ETag: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ETag\"\n        }), \"()); \\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"print\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"VALUE: \\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"printResult\"\n        }), \"(fbdo); \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//see addons/RTDBHelper.h\"\n        }), \"\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"();\\n }\\n \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"else\"\n        }), \"\\n {\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"FAILED\\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"REASON: \\\"\"\n        }), \" + fbdo.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"errorReason\"\n        }), \"());\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"------------------------------------\\\"\"\n        }), \");\\n \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Serial\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"println\"\n        }), \"();\\n  }\\n }\\n}\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"loop\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"uploadSensorData\"\n        }), \"();\\n }\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 새로운 버전을 컴파일하고 업로드하십시오. Firebase 데이터베이스를 확인하여 방 온도의 실시간 온도 값을 표시합니다.\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_31.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"애플리케이션을 더 현실적으로 만들기 위해 데이터베이스에 흥미로운 센서 데이터를 채워 넣어야 합니다.```\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"향후 튜토리얼을 따랐다면, 장치의 위치와 장치 UID를 변경하여 서로 다른 방에서 오는 다양한 센서 데이터를 시뮬레이션할 수 있습니다. 만약 4개의 ESP32와 4개의 DHT11 센서를 가지고 있다면, 각각을 별도의 방에 설치할 수도 있습니다. 이 튜토리얼에서는 다음과 같은 접근 방식을 취했습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_32.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"최종 결과는 이제 실시간 데이터베이스에 각 방에서 온 센서 데이터가 포함될 것입니다:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-GettingstartedwithESP32andFirebase_33.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"대박이다! 당신은 ESP32 장치를 Firebase와 성공적으로 통합했어요.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"결론\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마무리하면, 우리는 어떠한 ESP32 장치도 익명으로 가입하고 10초마다 온도 측정을 Realtime Database로 전송할 수 있는 새로운 Firebase 프로젝트를 설정했어요. 다음 튜토리얼에서는 모든 방에서의 실시간 업데이트를 제공해주는 watchOS 애플리케이션을 만들 것이에요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 튜토리얼의 최종 코드는 여기의 Github에서 찾을 수 있어요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마지막으로, mobizt 팀원들에게 무한한 감사와 사랑을 전합니다. 이 멋진 FirebaseESP32 라이브러리를 우리에게 제공해줘서 정말 감사합니다. 그 안에는 Firebase Cloud Messages를 보낼 수 있는 능력을 비롯한 다양한 기능이 있습니다. 다음 IoT 프로젝트 중 하나에 매우 유용할 수 있을 거에요.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"자료들\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-18-GettingstartedwithESP32andFirebase"},"buildId":"ll1cGyplNwh83dpggeai1","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>