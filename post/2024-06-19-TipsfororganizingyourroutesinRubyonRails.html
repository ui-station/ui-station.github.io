<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>루비 온 레일즈에서 라우트를 구성하는 팁 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-19-TipsfororganizingyourroutesinRubyonRails" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="루비 온 레일즈에서 라우트를 구성하는 팁 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="루비 온 레일즈에서 라우트를 구성하는 팁 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-TipsfororganizingyourroutesinRubyonRails_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-19-TipsfororganizingyourroutesinRubyonRails" data-gatsby-head="true"/><meta name="twitter:title" content="루비 온 레일즈에서 라우트를 구성하는 팁 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-TipsfororganizingyourroutesinRubyonRails_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 22:19" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/T_Nz0g9U1yttYMSEma95P/_buildManifest.js" defer=""></script><script src="/_next/static/T_Nz0g9U1yttYMSEma95P/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">루비 온 레일즈에서 라우트를 구성하는 팁</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="루비 온 레일즈에서 라우트를 구성하는 팁" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">10<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-TipsfororganizingyourroutesinRubyonRails&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-19-TipsfororganizingyourroutesinRubyonRails_0.png" alt="Route Organization Tips"></p>
<p>routes.rb 파일은 Ruby on Rails 개발 프로젝트의 중요한 부분입니다. 이 파일은 사실상 우리 애플리케이션의 지도 역할을 합니다. 따라서 이를 잘 구성하는 것이 중요합니다. 보통 모듈로 라우트를 구성하거나 알파벳 순으로 정리하여 시작하지만, 시간이 지남에 따라 이 파일은 종종 길들이기 어려운 정글로 변할 수 있습니다.</p>
<p>이는 집 안의 창고와 비슷합니다. 정리되지 않은 물건들을 보관하는 곳으로, 처음에는 무엇이 어디에 있는지 알 수 있지만 언젠가는 들어가서 무언가를 찾으려 하면, 과거에 사용한 스케이트보드와 할머니가 남긴 썩은 나무 상자 위에 오래된 사진과 첫 번째 애왔던 Tony의 목줄이 있는 전쟁터 같아집니다.</p>
<p>나는 그런 혼돈을 좋아하지 않기 때문에, 이 글에서는 routes.rb라는 그 창고를 잘 정리하는 데 매우 유용했던 몇 가지 실천 방법을 공유하겠습니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>프로젝트에 미친 영향에 따른 팁 목록이에요. 각 팁은 독립적으로 적용할 수 있어, 모두 읽을 필요 없이 가장 관심 있는 부분으로 바로 이동해도 돼요.</p>
<ul>
<li>알파벳 순으로 정리된 라우트</li>
<li>Resource 및 resources</li>
<li>only, not except</li>
<li>네임스페이스</li>
<li>제약 조건</li>
<li>관련 사항</li>
</ul>
<h1>1. 알파벳 순으로 정리된 라우트</h1>
<p>이 팁은 우연이 아니라 제일 앞에 있어요; 저는 이것을 가장 중요하게 생각해요. 알파벳 순으로 라우트를 정리하는 것만으로가 아니라 팀 간 합의를 수립하는 중요성 때문에 최상의 결과를 가져다 주었어요.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>개인적으로 나는 루비 온 레일즈의 가장 중요한 전제 중 하나는 Convention over Configuration이라고 생각해. 프레임워크가 제안한 규칙을 따르면 대개 좋은 결과를 얻을 수 있어. 이는 개발팀의 누구나 코드 조각을 찾거나 새로운 지시사항을 추가할 위치를 잘 알 수 있기 때문에 중요한데, 이것은 시간을 절약할 뿐만 아니라 결정을 내릴 부담을 덜어줘. 결국 스티브 잡스가 매일 같은 옷을 입은 이유가 있었을 테니까.</p>
<p>우리 라우트에도 동일한 원칙을 적용해야 해: 유지보수를 가능한 간단하고 깔끔하게 유지하기 위해 팀의 규칙을 확립해야 돼.</p>
<p>다양한 프로젝트에서 우리는 여러가지 규칙을 준수해왔어: 모듈별로 구성, 다른 파일로 분리, 알파벳 순으로 정렬 등. 의심의 여지없이 가장 간단하고 실용적인 접근 방식은 라우트 파일을 알파벳 순으로 정렬하는 것이었어. 라우트가 많다면 파일을 분리하는 것도 도움이 될 수 있지만, 절대적으로 필요하지 않은 한 그것은 피하는 편이 좋을 거야.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>어떤 프로젝트의 비즈니스 레이어가 서로 통신하고 상호작용하는 객체로 표현되는 것과 같이, 저는 라우트를 리소스의 동작으로 보는 것을 좋아해요. 이러한 이유로, 저희 프로젝트에서 정의하는 거의 모든 라우트들은 일반적으로 특정 리소스와 연관되어 있습니다.</p>
<p>레일즈는 이를 처리하기 위해 다양한 메커니즘을 제공하지만, 기본적으로는 resources와 resource를 사용하는 것이 일반적입니다. 또한, 필요한 경우 리소스 라우트를 중첩시킬 수 있어서 아래와 같은 결과를 얻을 수 있습니다:</p>
<pre><code class="hljs language-js">resources :articles <span class="hljs-keyword">do</span>
  resources :comments
end
</code></pre>
<p>⚠️ 중첩은 매우 유용할 수 있지만, 복잡성을 도입할 수 있으므로 조심해야 합니다. 한 단계 이상 중첩을 사용하지 않는 것을 권장합니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>얕은 중첩</h2>
<p>중첩의 한 가지 문제는 중첩된 리소스의 멤버 라우트가 부모 안에 포함된다는 것입니다.</p>
<p>이전 예제에서, 댓글에 대한 라우트는 다음과 같이 article 내에 중첩될 것입니다:</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">GET</span> /articles/:article_id/comments
<span class="hljs-variable constant_">GET</span> /articles/:article_id/comments/<span class="hljs-keyword">new</span>
<span class="hljs-variable constant_">POST</span> /articles/:article_id/comments

<span class="hljs-variable constant_">GET</span> /articles/:article_id/comments/:id &#x3C;===== ⚠️
<span class="hljs-variable constant_">GET</span> /articles/:article_id/comments/:id/edit &#x3C;===== ⚠️
<span class="hljs-variable constant_">DELETE</span> /articles/:article_id/comments/:id &#x3C;===== ⚠️
<span class="hljs-variable constant_">PUT</span>/<span class="hljs-variable constant_">PATCH</span> /articles/:article_id/comments/:id &#x3C;===== ⚠️
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>첫 세 개의 루트는 괜찮아 보이지만 특정 댓글을 포함하는 루트는 기사 안에서 어색해 보입니다.</p>
<p>이 문제를 해결하기 위해 우리는 다음과 같이 루트를 정의할 수 있습니다:</p>
<pre><code class="hljs language-js">resources :articles <span class="hljs-keyword">do</span>
  resources :comments, <span class="hljs-attr">only</span>: [:index, :<span class="hljs-keyword">new</span>, :create]
end
resources :comments, <span class="hljs-attr">only</span>: [:show, :edit, :update, :destroy]
</code></pre>
<p>이렇게 정의하면 다음과 같은 루트가 생성되는데, 내 의견으로는 훨씬 더 의미가 있다고 생각합니다:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">GET</span> /articles/:article_id/comments
<span class="hljs-variable constant_">GET</span> /articles/:article_id/comments/<span class="hljs-keyword">new</span>
<span class="hljs-variable constant_">POST</span> /articles/:article_id/comments

<span class="hljs-variable constant_">GET</span> /comments/:id &#x3C;===== ✅
<span class="hljs-variable constant_">GET</span> /comments/:id/edit &#x3C;===== ✅
<span class="hljs-variable constant_">DELETE</span> /comments/:id &#x3C;===== ✅
<span class="hljs-variable constant_">PUT</span>/<span class="hljs-variable constant_">PATCH</span> /comments/:id &#x3C;===== ✅
</code></pre>
<p>이 같은 결과를 얻으려면 shallow 매개변수를 사용할 수 있습니다:</p>
<pre><code class="hljs language-js">resources :articles <span class="hljs-keyword">do</span>
 resources :comments, <span class="hljs-attr">shallow</span>: <span class="hljs-literal">true</span>
end
</code></pre>
<h2>리소스와 관련이 없는 라우트는 어떻게 처리해야 합니까?</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이건 좀 이상한 냄새가 난다고 봐요. 이런 경로 뒤에는 숨겨진 자원이 있을 가능성이 높습니다.</p>
<p>하지만 여전히 routes.rb에는 독립적인 경로가 있습니다. 예를 들어 로그인, 로그아웃 그리고 아마도 헬스체크 등이 떠오를 거예요.</p>
<pre><code class="hljs language-js">post <span class="hljs-string">'login'</span> => <span class="hljs-string">'sessions#login'</span>, <span class="hljs-attr">as</span>: :login
<span class="hljs-keyword">delete</span> <span class="hljs-string">'logout'</span> => <span class="hljs-string">'sessions#logout'</span>, <span class="hljs-attr">as</span>: :logout
get <span class="hljs-string">'up'</span> => <span class="hljs-string">'rails/health#show'</span>, <span class="hljs-attr">as</span>: :rails_health_check
</code></pre>
<h1>3. Only, not except</h1>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>저는 개발자로서 "암시하는 것보다 명확히 표현하는 것이 항상 낫다"는 규칙을 따릅니다. 몇 마디나 한 줄의 코드, 심지어 주석을 절약하려는 우리의 시도에서는 종종 응용 프로그램에서 문제를 발생시키거나 미래 개발자가 우리의 작업을 상속할 때 어렵게 만들 수 있습니다. (네, 제가 주석을 선호합니다.)</p>
<p>저는 라우트에도 같은 규칙을 적용하며 only를 except 대신 선호합니다. except를 사용하는 것이 편리할 수 있지만, 사용하지 않을 라우트를 생성할 가능성이 있습니다.</p>
<p>그래서 라우트에서 리소스를 생성할 때 처음으로 하는 일은 only 매개변수를 추가하는 것입니다.</p>
<pre><code class="hljs language-js">resources :products, <span class="hljs-attr">only</span>: %i[index <span class="hljs-keyword">new</span> create show]
resources :users, <span class="hljs-attr">only</span>: %i[index <span class="hljs-keyword">new</span> create destroy]
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>4. 네임스페이스</h1>
<p>네임스페이스를 통해 라우트를 컨트롤러 그룹으로 구분하여 로직을 모듈화하는 데 도움이 됩니다.</p>
<p>다음과 같은 상황에서 특히 유용합니다:</p>
<ol>
<li>명확히 분리된 하위 시스템이 있는 경우. 예를 들어 백오피스와 프론트엔드.</li>
</ol>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ol start="2">
<li>어플리케이션이 발전하면서 복잡도가 증가하고, 컨트롤러를 그룹/모듈로 분리하고 싶을 때 아래와 같이 코드를 작성할 수 있습니다.</li>
</ol>
<pre><code class="hljs language-js">namespace :admin <span class="hljs-keyword">do</span>
  resources :payments
  resources :users
end

namespace :ads <span class="hljs-keyword">do</span>
  resource :report, <span class="hljs-attr">only</span>: %i[show]
end

namespace :finance <span class="hljs-keyword">do</span>
  resource :report, <span class="hljs-attr">only</span>: %i[show]
</code></pre>
<p>이렇게 하면 다음과 같은 컨트롤러가 생기게 됩니다:</p>
<pre><code class="hljs language-js"><span class="hljs-title class_">Admin</span>::<span class="hljs-title class_">PaymentsController</span> # app/controllers/admin/payments_controller.<span class="hljs-property">rb</span>
<span class="hljs-title class_">Admin</span>::<span class="hljs-title class_">UsersController</span> # app/controllers/admin/users_controller.<span class="hljs-property">rb</span>
<span class="hljs-title class_">Ads</span>::<span class="hljs-title class_">ReportController</span> # app/controllers/ads/report_controller.<span class="hljs-property">rb</span>
<span class="hljs-title class_">Finance</span>::<span class="hljs-title class_">ReportController</span> # app/controllers/finance/report_controller.<span class="hljs-property">rb</span>
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>5. 제약 조건</h1>
<p>제약 조건은 경로에 할당할 수 있는 제한 사항입니다. 제약 조건을 정의할 때는 요청 객체에서 지정된 메서드가 호출되고 반환된 값이 매개변수 값과 비교됩니다.</p>
<p>대표적인 예로 하위 도메인 제약 조건이 있습니다. 예를 들어 어드민을 위한 경로를 위한 제약 조건을 정의할 수 있습니다.</p>
<pre><code class="hljs language-js">namespace :admin <span class="hljs-keyword">do</span>
  constraints <span class="hljs-attr">subdomain</span>: <span class="hljs-string">'admin'</span> <span class="hljs-keyword">do</span>
    resources :users
  end
end
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>6. 고려 사항</h1>
<p>또 다른 유용한 도구는 concerns 입니다. 이를 사용하면 일반적인 경로를 정의하고 이후 서로 다른 리소스에 사용할 수 있습니다.</p>
<p>예를 들어 최근 프로젝트에서 사용한 하나의 concern을 공유하겠습니다. 애플리케이션에는 다양한 리소스가 있었고, 이러한 리소스는 목록 내에서 순서를 변경할 수 있었 즉, 위치를 변경할 수 있었습니다. 이 위치를 변경하는 라우트는 코드베이스 전체에서 반복되어 사용되었기 때문에 이를 concern으로 추출했습니다:</p>
<pre><code class="hljs language-js">concern :positionable <span class="hljs-keyword">do</span>
  patch :update_position, <span class="hljs-attr">on</span>: :member
end

resources :categories, <span class="hljs-attr">only</span>: %i[index <span class="hljs-keyword">new</span> create], <span class="hljs-attr">concerns</span>: %i[positionable]
resources :category_groups, <span class="hljs-attr">concerns</span>: %i[positionable]
resources :sections, <span class="hljs-attr">only</span>: %i[index <span class="hljs-keyword">new</span> create destroy], <span class="hljs-attr">concerns</span>: %i[positionable]
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>⚠️ 주의점은 코드에서 간접성을 소개합니다. 공통 경로를 추출할 가치가 있는지 여쭤보는 것이 중요합니다. 때로는 간접성을 소개하는 것보다 코드를 반복하는 것이 나을 수 있습니다.</p>
<p>저희가 루트 파일을 작성하는 데 따르는 몇 가지 관례입니다. 팀원과 동일한 규칙을 따를 필요는 없습니다. 이는 우리에게 효과가 있었던 사례입니다.</p>
<p>가장 중요한 것은 팀과 공통 규칙에 동의하여 루트 파일이 가장 깔끔하고 유지 관리가 가능하도록 하는 것입니다.</p>
<p>Unagi는 Ruby on Rails에서 12년 이상 선택한 스택을 사용하는 소프트웨어 부티크입니다. 자세한 내용은 소셜 미디어를 확인해보세요.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"루비 온 레일즈에서 라우트를 구성하는 팁","description":"","date":"2024-06-19 22:19","slug":"2024-06-19-TipsfororganizingyourroutesinRubyonRails","content":"\n![Route Organization Tips](/assets/img/2024-06-19-TipsfororganizingyourroutesinRubyonRails_0.png)\n\nroutes.rb 파일은 Ruby on Rails 개발 프로젝트의 중요한 부분입니다. 이 파일은 사실상 우리 애플리케이션의 지도 역할을 합니다. 따라서 이를 잘 구성하는 것이 중요합니다. 보통 모듈로 라우트를 구성하거나 알파벳 순으로 정리하여 시작하지만, 시간이 지남에 따라 이 파일은 종종 길들이기 어려운 정글로 변할 수 있습니다.\n\n이는 집 안의 창고와 비슷합니다. 정리되지 않은 물건들을 보관하는 곳으로, 처음에는 무엇이 어디에 있는지 알 수 있지만 언젠가는 들어가서 무언가를 찾으려 하면, 과거에 사용한 스케이트보드와 할머니가 남긴 썩은 나무 상자 위에 오래된 사진과 첫 번째 애왔던 Tony의 목줄이 있는 전쟁터 같아집니다.\n\n나는 그런 혼돈을 좋아하지 않기 때문에, 이 글에서는 routes.rb라는 그 창고를 잘 정리하는 데 매우 유용했던 몇 가지 실천 방법을 공유하겠습니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n프로젝트에 미친 영향에 따른 팁 목록이에요. 각 팁은 독립적으로 적용할 수 있어, 모두 읽을 필요 없이 가장 관심 있는 부분으로 바로 이동해도 돼요.\n\n- 알파벳 순으로 정리된 라우트\n- Resource 및 resources\n- only, not except\n- 네임스페이스\n- 제약 조건\n- 관련 사항\n\n# 1. 알파벳 순으로 정리된 라우트\n\n이 팁은 우연이 아니라 제일 앞에 있어요; 저는 이것을 가장 중요하게 생각해요. 알파벳 순으로 라우트를 정리하는 것만으로가 아니라 팀 간 합의를 수립하는 중요성 때문에 최상의 결과를 가져다 주었어요.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n개인적으로 나는 루비 온 레일즈의 가장 중요한 전제 중 하나는 Convention over Configuration이라고 생각해. 프레임워크가 제안한 규칙을 따르면 대개 좋은 결과를 얻을 수 있어. 이는 개발팀의 누구나 코드 조각을 찾거나 새로운 지시사항을 추가할 위치를 잘 알 수 있기 때문에 중요한데, 이것은 시간을 절약할 뿐만 아니라 결정을 내릴 부담을 덜어줘. 결국 스티브 잡스가 매일 같은 옷을 입은 이유가 있었을 테니까.\n\n우리 라우트에도 동일한 원칙을 적용해야 해: 유지보수를 가능한 간단하고 깔끔하게 유지하기 위해 팀의 규칙을 확립해야 돼.\n\n다양한 프로젝트에서 우리는 여러가지 규칙을 준수해왔어: 모듈별로 구성, 다른 파일로 분리, 알파벳 순으로 정렬 등. 의심의 여지없이 가장 간단하고 실용적인 접근 방식은 라우트 파일을 알파벳 순으로 정렬하는 것이었어. 라우트가 많다면 파일을 분리하는 것도 도움이 될 수 있지만, 절대적으로 필요하지 않은 한 그것은 피하는 편이 좋을 거야.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n어떤 프로젝트의 비즈니스 레이어가 서로 통신하고 상호작용하는 객체로 표현되는 것과 같이, 저는 라우트를 리소스의 동작으로 보는 것을 좋아해요. 이러한 이유로, 저희 프로젝트에서 정의하는 거의 모든 라우트들은 일반적으로 특정 리소스와 연관되어 있습니다.\n\n레일즈는 이를 처리하기 위해 다양한 메커니즘을 제공하지만, 기본적으로는 resources와 resource를 사용하는 것이 일반적입니다. 또한, 필요한 경우 리소스 라우트를 중첩시킬 수 있어서 아래와 같은 결과를 얻을 수 있습니다:\n\n```js\nresources :articles do\n  resources :comments\nend\n```\n\n⚠️ 중첩은 매우 유용할 수 있지만, 복잡성을 도입할 수 있으므로 조심해야 합니다. 한 단계 이상 중첩을 사용하지 않는 것을 권장합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 얕은 중첩\n\n중첩의 한 가지 문제는 중첩된 리소스의 멤버 라우트가 부모 안에 포함된다는 것입니다.\n\n이전 예제에서, 댓글에 대한 라우트는 다음과 같이 article 내에 중첩될 것입니다:\n\n```js\nGET /articles/:article_id/comments\nGET /articles/:article_id/comments/new\nPOST /articles/:article_id/comments\n\nGET /articles/:article_id/comments/:id \u003c===== ⚠️\nGET /articles/:article_id/comments/:id/edit \u003c===== ⚠️\nDELETE /articles/:article_id/comments/:id \u003c===== ⚠️\nPUT/PATCH /articles/:article_id/comments/:id \u003c===== ⚠️\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n첫 세 개의 루트는 괜찮아 보이지만 특정 댓글을 포함하는 루트는 기사 안에서 어색해 보입니다.\n\n이 문제를 해결하기 위해 우리는 다음과 같이 루트를 정의할 수 있습니다:\n\n```js\nresources :articles do\n  resources :comments, only: [:index, :new, :create]\nend\nresources :comments, only: [:show, :edit, :update, :destroy]\n```\n\n이렇게 정의하면 다음과 같은 루트가 생성되는데, 내 의견으로는 훨씬 더 의미가 있다고 생각합니다:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nGET /articles/:article_id/comments\nGET /articles/:article_id/comments/new\nPOST /articles/:article_id/comments\n\nGET /comments/:id \u003c===== ✅\nGET /comments/:id/edit \u003c===== ✅\nDELETE /comments/:id \u003c===== ✅\nPUT/PATCH /comments/:id \u003c===== ✅\n```\n\n이 같은 결과를 얻으려면 shallow 매개변수를 사용할 수 있습니다:\n\n```js\nresources :articles do\n resources :comments, shallow: true\nend\n```\n\n## 리소스와 관련이 없는 라우트는 어떻게 처리해야 합니까?\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이건 좀 이상한 냄새가 난다고 봐요. 이런 경로 뒤에는 숨겨진 자원이 있을 가능성이 높습니다.\n\n하지만 여전히 routes.rb에는 독립적인 경로가 있습니다. 예를 들어 로그인, 로그아웃 그리고 아마도 헬스체크 등이 떠오를 거예요.\n\n```js\npost 'login' =\u003e 'sessions#login', as: :login\ndelete 'logout' =\u003e 'sessions#logout', as: :logout\nget 'up' =\u003e 'rails/health#show', as: :rails_health_check\n```\n\n# 3. Only, not except\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n저는 개발자로서 \"암시하는 것보다 명확히 표현하는 것이 항상 낫다\"는 규칙을 따릅니다. 몇 마디나 한 줄의 코드, 심지어 주석을 절약하려는 우리의 시도에서는 종종 응용 프로그램에서 문제를 발생시키거나 미래 개발자가 우리의 작업을 상속할 때 어렵게 만들 수 있습니다. (네, 제가 주석을 선호합니다.)\n\n저는 라우트에도 같은 규칙을 적용하며 only를 except 대신 선호합니다. except를 사용하는 것이 편리할 수 있지만, 사용하지 않을 라우트를 생성할 가능성이 있습니다.\n\n그래서 라우트에서 리소스를 생성할 때 처음으로 하는 일은 only 매개변수를 추가하는 것입니다.\n\n```js\nresources :products, only: %i[index new create show]\nresources :users, only: %i[index new create destroy]\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 4. 네임스페이스\n\n네임스페이스를 통해 라우트를 컨트롤러 그룹으로 구분하여 로직을 모듈화하는 데 도움이 됩니다.\n\n다음과 같은 상황에서 특히 유용합니다:\n\n1. 명확히 분리된 하위 시스템이 있는 경우. 예를 들어 백오피스와 프론트엔드.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n2. 어플리케이션이 발전하면서 복잡도가 증가하고, 컨트롤러를 그룹/모듈로 분리하고 싶을 때 아래와 같이 코드를 작성할 수 있습니다.\n\n```js\nnamespace :admin do\n  resources :payments\n  resources :users\nend\n\nnamespace :ads do\n  resource :report, only: %i[show]\nend\n\nnamespace :finance do\n  resource :report, only: %i[show]\n```\n\n이렇게 하면 다음과 같은 컨트롤러가 생기게 됩니다:\n\n```js\nAdmin::PaymentsController # app/controllers/admin/payments_controller.rb\nAdmin::UsersController # app/controllers/admin/users_controller.rb\nAds::ReportController # app/controllers/ads/report_controller.rb\nFinance::ReportController # app/controllers/finance/report_controller.rb\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 5. 제약 조건\n\n제약 조건은 경로에 할당할 수 있는 제한 사항입니다. 제약 조건을 정의할 때는 요청 객체에서 지정된 메서드가 호출되고 반환된 값이 매개변수 값과 비교됩니다.\n\n대표적인 예로 하위 도메인 제약 조건이 있습니다. 예를 들어 어드민을 위한 경로를 위한 제약 조건을 정의할 수 있습니다.\n\n```js\nnamespace :admin do\n  constraints subdomain: 'admin' do\n    resources :users\n  end\nend\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 6. 고려 사항\n\n또 다른 유용한 도구는 concerns 입니다. 이를 사용하면 일반적인 경로를 정의하고 이후 서로 다른 리소스에 사용할 수 있습니다.\n\n예를 들어 최근 프로젝트에서 사용한 하나의 concern을 공유하겠습니다. 애플리케이션에는 다양한 리소스가 있었고, 이러한 리소스는 목록 내에서 순서를 변경할 수 있었 즉, 위치를 변경할 수 있었습니다. 이 위치를 변경하는 라우트는 코드베이스 전체에서 반복되어 사용되었기 때문에 이를 concern으로 추출했습니다:\n\n```js\nconcern :positionable do\n  patch :update_position, on: :member\nend\n\nresources :categories, only: %i[index new create], concerns: %i[positionable]\nresources :category_groups, concerns: %i[positionable]\nresources :sections, only: %i[index new create destroy], concerns: %i[positionable]\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n⚠️ 주의점은 코드에서 간접성을 소개합니다. 공통 경로를 추출할 가치가 있는지 여쭤보는 것이 중요합니다. 때로는 간접성을 소개하는 것보다 코드를 반복하는 것이 나을 수 있습니다.\n\n저희가 루트 파일을 작성하는 데 따르는 몇 가지 관례입니다. 팀원과 동일한 규칙을 따를 필요는 없습니다. 이는 우리에게 효과가 있었던 사례입니다.\n\n가장 중요한 것은 팀과 공통 규칙에 동의하여 루트 파일이 가장 깔끔하고 유지 관리가 가능하도록 하는 것입니다.\n\nUnagi는 Ruby on Rails에서 12년 이상 선택한 스택을 사용하는 소프트웨어 부티크입니다. 자세한 내용은 소셜 미디어를 확인해보세요.\n","ogImage":{"url":"/assets/img/2024-06-19-TipsfororganizingyourroutesinRubyonRails_0.png"},"coverImage":"/assets/img/2024-06-19-TipsfororganizingyourroutesinRubyonRails_0.png","tag":["Tech"],"readingTime":10},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-TipsfororganizingyourroutesinRubyonRails_0.png\" alt=\"Route Organization Tips\"\u003e\u003c/p\u003e\n\u003cp\u003eroutes.rb 파일은 Ruby on Rails 개발 프로젝트의 중요한 부분입니다. 이 파일은 사실상 우리 애플리케이션의 지도 역할을 합니다. 따라서 이를 잘 구성하는 것이 중요합니다. 보통 모듈로 라우트를 구성하거나 알파벳 순으로 정리하여 시작하지만, 시간이 지남에 따라 이 파일은 종종 길들이기 어려운 정글로 변할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이는 집 안의 창고와 비슷합니다. 정리되지 않은 물건들을 보관하는 곳으로, 처음에는 무엇이 어디에 있는지 알 수 있지만 언젠가는 들어가서 무언가를 찾으려 하면, 과거에 사용한 스케이트보드와 할머니가 남긴 썩은 나무 상자 위에 오래된 사진과 첫 번째 애왔던 Tony의 목줄이 있는 전쟁터 같아집니다.\u003c/p\u003e\n\u003cp\u003e나는 그런 혼돈을 좋아하지 않기 때문에, 이 글에서는 routes.rb라는 그 창고를 잘 정리하는 데 매우 유용했던 몇 가지 실천 방법을 공유하겠습니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e프로젝트에 미친 영향에 따른 팁 목록이에요. 각 팁은 독립적으로 적용할 수 있어, 모두 읽을 필요 없이 가장 관심 있는 부분으로 바로 이동해도 돼요.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e알파벳 순으로 정리된 라우트\u003c/li\u003e\n\u003cli\u003eResource 및 resources\u003c/li\u003e\n\u003cli\u003eonly, not except\u003c/li\u003e\n\u003cli\u003e네임스페이스\u003c/li\u003e\n\u003cli\u003e제약 조건\u003c/li\u003e\n\u003cli\u003e관련 사항\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e1. 알파벳 순으로 정리된 라우트\u003c/h1\u003e\n\u003cp\u003e이 팁은 우연이 아니라 제일 앞에 있어요; 저는 이것을 가장 중요하게 생각해요. 알파벳 순으로 라우트를 정리하는 것만으로가 아니라 팀 간 합의를 수립하는 중요성 때문에 최상의 결과를 가져다 주었어요.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e개인적으로 나는 루비 온 레일즈의 가장 중요한 전제 중 하나는 Convention over Configuration이라고 생각해. 프레임워크가 제안한 규칙을 따르면 대개 좋은 결과를 얻을 수 있어. 이는 개발팀의 누구나 코드 조각을 찾거나 새로운 지시사항을 추가할 위치를 잘 알 수 있기 때문에 중요한데, 이것은 시간을 절약할 뿐만 아니라 결정을 내릴 부담을 덜어줘. 결국 스티브 잡스가 매일 같은 옷을 입은 이유가 있었을 테니까.\u003c/p\u003e\n\u003cp\u003e우리 라우트에도 동일한 원칙을 적용해야 해: 유지보수를 가능한 간단하고 깔끔하게 유지하기 위해 팀의 규칙을 확립해야 돼.\u003c/p\u003e\n\u003cp\u003e다양한 프로젝트에서 우리는 여러가지 규칙을 준수해왔어: 모듈별로 구성, 다른 파일로 분리, 알파벳 순으로 정렬 등. 의심의 여지없이 가장 간단하고 실용적인 접근 방식은 라우트 파일을 알파벳 순으로 정렬하는 것이었어. 라우트가 많다면 파일을 분리하는 것도 도움이 될 수 있지만, 절대적으로 필요하지 않은 한 그것은 피하는 편이 좋을 거야.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e어떤 프로젝트의 비즈니스 레이어가 서로 통신하고 상호작용하는 객체로 표현되는 것과 같이, 저는 라우트를 리소스의 동작으로 보는 것을 좋아해요. 이러한 이유로, 저희 프로젝트에서 정의하는 거의 모든 라우트들은 일반적으로 특정 리소스와 연관되어 있습니다.\u003c/p\u003e\n\u003cp\u003e레일즈는 이를 처리하기 위해 다양한 메커니즘을 제공하지만, 기본적으로는 resources와 resource를 사용하는 것이 일반적입니다. 또한, 필요한 경우 리소스 라우트를 중첩시킬 수 있어서 아래와 같은 결과를 얻을 수 있습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eresources :articles \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  resources :comments\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e⚠️ 중첩은 매우 유용할 수 있지만, 복잡성을 도입할 수 있으므로 조심해야 합니다. 한 단계 이상 중첩을 사용하지 않는 것을 권장합니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e얕은 중첩\u003c/h2\u003e\n\u003cp\u003e중첩의 한 가지 문제는 중첩된 리소스의 멤버 라우트가 부모 안에 포함된다는 것입니다.\u003c/p\u003e\n\u003cp\u003e이전 예제에서, 댓글에 대한 라우트는 다음과 같이 article 내에 중첩될 것입니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e /articles/:article_id/comments\n\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e /articles/:article_id/comments/\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003ePOST\u003c/span\u003e /articles/:article_id/comments\n\n\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e /articles/:article_id/comments/:id \u0026#x3C;===== ⚠️\n\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e /articles/:article_id/comments/:id/edit \u0026#x3C;===== ⚠️\n\u003cspan class=\"hljs-variable constant_\"\u003eDELETE\u003c/span\u003e /articles/:article_id/comments/:id \u0026#x3C;===== ⚠️\n\u003cspan class=\"hljs-variable constant_\"\u003ePUT\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003ePATCH\u003c/span\u003e /articles/:article_id/comments/:id \u0026#x3C;===== ⚠️\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e첫 세 개의 루트는 괜찮아 보이지만 특정 댓글을 포함하는 루트는 기사 안에서 어색해 보입니다.\u003c/p\u003e\n\u003cp\u003e이 문제를 해결하기 위해 우리는 다음과 같이 루트를 정의할 수 있습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eresources :articles \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  resources :comments, \u003cspan class=\"hljs-attr\"\u003eonly\u003c/span\u003e: [:index, :\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e, :create]\nend\nresources :comments, \u003cspan class=\"hljs-attr\"\u003eonly\u003c/span\u003e: [:show, :edit, :update, :destroy]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이렇게 정의하면 다음과 같은 루트가 생성되는데, 내 의견으로는 훨씬 더 의미가 있다고 생각합니다:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e /articles/:article_id/comments\n\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e /articles/:article_id/comments/\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003ePOST\u003c/span\u003e /articles/:article_id/comments\n\n\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e /comments/:id \u0026#x3C;===== ✅\n\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e /comments/:id/edit \u0026#x3C;===== ✅\n\u003cspan class=\"hljs-variable constant_\"\u003eDELETE\u003c/span\u003e /comments/:id \u0026#x3C;===== ✅\n\u003cspan class=\"hljs-variable constant_\"\u003ePUT\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003ePATCH\u003c/span\u003e /comments/:id \u0026#x3C;===== ✅\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 같은 결과를 얻으려면 shallow 매개변수를 사용할 수 있습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eresources :articles \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n resources :comments, \u003cspan class=\"hljs-attr\"\u003eshallow\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e리소스와 관련이 없는 라우트는 어떻게 처리해야 합니까?\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이건 좀 이상한 냄새가 난다고 봐요. 이런 경로 뒤에는 숨겨진 자원이 있을 가능성이 높습니다.\u003c/p\u003e\n\u003cp\u003e하지만 여전히 routes.rb에는 독립적인 경로가 있습니다. 예를 들어 로그인, 로그아웃 그리고 아마도 헬스체크 등이 떠오를 거예요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003epost \u003cspan class=\"hljs-string\"\u003e'login'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'sessions#login'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eas\u003c/span\u003e: :login\n\u003cspan class=\"hljs-keyword\"\u003edelete\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'logout'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'sessions#logout'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eas\u003c/span\u003e: :logout\nget \u003cspan class=\"hljs-string\"\u003e'up'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'rails/health#show'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eas\u003c/span\u003e: :rails_health_check\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e3. Only, not except\u003c/h1\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e저는 개발자로서 \"암시하는 것보다 명확히 표현하는 것이 항상 낫다\"는 규칙을 따릅니다. 몇 마디나 한 줄의 코드, 심지어 주석을 절약하려는 우리의 시도에서는 종종 응용 프로그램에서 문제를 발생시키거나 미래 개발자가 우리의 작업을 상속할 때 어렵게 만들 수 있습니다. (네, 제가 주석을 선호합니다.)\u003c/p\u003e\n\u003cp\u003e저는 라우트에도 같은 규칙을 적용하며 only를 except 대신 선호합니다. except를 사용하는 것이 편리할 수 있지만, 사용하지 않을 라우트를 생성할 가능성이 있습니다.\u003c/p\u003e\n\u003cp\u003e그래서 라우트에서 리소스를 생성할 때 처음으로 하는 일은 only 매개변수를 추가하는 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eresources :products, \u003cspan class=\"hljs-attr\"\u003eonly\u003c/span\u003e: %i[index \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e create show]\nresources :users, \u003cspan class=\"hljs-attr\"\u003eonly\u003c/span\u003e: %i[index \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e create destroy]\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003e4. 네임스페이스\u003c/h1\u003e\n\u003cp\u003e네임스페이스를 통해 라우트를 컨트롤러 그룹으로 구분하여 로직을 모듈화하는 데 도움이 됩니다.\u003c/p\u003e\n\u003cp\u003e다음과 같은 상황에서 특히 유용합니다:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e명확히 분리된 하위 시스템이 있는 경우. 예를 들어 백오피스와 프론트엔드.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e어플리케이션이 발전하면서 복잡도가 증가하고, 컨트롤러를 그룹/모듈로 분리하고 싶을 때 아래와 같이 코드를 작성할 수 있습니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enamespace :admin \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  resources :payments\n  resources :users\nend\n\nnamespace :ads \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  resource :report, \u003cspan class=\"hljs-attr\"\u003eonly\u003c/span\u003e: %i[show]\nend\n\nnamespace :finance \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  resource :report, \u003cspan class=\"hljs-attr\"\u003eonly\u003c/span\u003e: %i[show]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이렇게 하면 다음과 같은 컨트롤러가 생기게 됩니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eAdmin\u003c/span\u003e::\u003cspan class=\"hljs-title class_\"\u003ePaymentsController\u003c/span\u003e # app/controllers/admin/payments_controller.\u003cspan class=\"hljs-property\"\u003erb\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eAdmin\u003c/span\u003e::\u003cspan class=\"hljs-title class_\"\u003eUsersController\u003c/span\u003e # app/controllers/admin/users_controller.\u003cspan class=\"hljs-property\"\u003erb\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eAds\u003c/span\u003e::\u003cspan class=\"hljs-title class_\"\u003eReportController\u003c/span\u003e # app/controllers/ads/report_controller.\u003cspan class=\"hljs-property\"\u003erb\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eFinance\u003c/span\u003e::\u003cspan class=\"hljs-title class_\"\u003eReportController\u003c/span\u003e # app/controllers/finance/report_controller.\u003cspan class=\"hljs-property\"\u003erb\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003e5. 제약 조건\u003c/h1\u003e\n\u003cp\u003e제약 조건은 경로에 할당할 수 있는 제한 사항입니다. 제약 조건을 정의할 때는 요청 객체에서 지정된 메서드가 호출되고 반환된 값이 매개변수 값과 비교됩니다.\u003c/p\u003e\n\u003cp\u003e대표적인 예로 하위 도메인 제약 조건이 있습니다. 예를 들어 어드민을 위한 경로를 위한 제약 조건을 정의할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enamespace :admin \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  constraints \u003cspan class=\"hljs-attr\"\u003esubdomain\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'admin'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n    resources :users\n  end\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003e6. 고려 사항\u003c/h1\u003e\n\u003cp\u003e또 다른 유용한 도구는 concerns 입니다. 이를 사용하면 일반적인 경로를 정의하고 이후 서로 다른 리소스에 사용할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e예를 들어 최근 프로젝트에서 사용한 하나의 concern을 공유하겠습니다. 애플리케이션에는 다양한 리소스가 있었고, 이러한 리소스는 목록 내에서 순서를 변경할 수 있었 즉, 위치를 변경할 수 있었습니다. 이 위치를 변경하는 라우트는 코드베이스 전체에서 반복되어 사용되었기 때문에 이를 concern으로 추출했습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003econcern :positionable \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  patch :update_position, \u003cspan class=\"hljs-attr\"\u003eon\u003c/span\u003e: :member\nend\n\nresources :categories, \u003cspan class=\"hljs-attr\"\u003eonly\u003c/span\u003e: %i[index \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e create], \u003cspan class=\"hljs-attr\"\u003econcerns\u003c/span\u003e: %i[positionable]\nresources :category_groups, \u003cspan class=\"hljs-attr\"\u003econcerns\u003c/span\u003e: %i[positionable]\nresources :sections, \u003cspan class=\"hljs-attr\"\u003eonly\u003c/span\u003e: %i[index \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e create destroy], \u003cspan class=\"hljs-attr\"\u003econcerns\u003c/span\u003e: %i[positionable]\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e⚠️ 주의점은 코드에서 간접성을 소개합니다. 공통 경로를 추출할 가치가 있는지 여쭤보는 것이 중요합니다. 때로는 간접성을 소개하는 것보다 코드를 반복하는 것이 나을 수 있습니다.\u003c/p\u003e\n\u003cp\u003e저희가 루트 파일을 작성하는 데 따르는 몇 가지 관례입니다. 팀원과 동일한 규칙을 따를 필요는 없습니다. 이는 우리에게 효과가 있었던 사례입니다.\u003c/p\u003e\n\u003cp\u003e가장 중요한 것은 팀과 공통 규칙에 동의하여 루트 파일이 가장 깔끔하고 유지 관리가 가능하도록 하는 것입니다.\u003c/p\u003e\n\u003cp\u003eUnagi는 Ruby on Rails에서 12년 이상 선택한 스택을 사용하는 소프트웨어 부티크입니다. 자세한 내용은 소셜 미디어를 확인해보세요.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-TipsfororganizingyourroutesinRubyonRails"},"buildId":"T_Nz0g9U1yttYMSEma95P","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>