<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>SwiftData로 원격 API에서 데이터 저장하는 방법 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="SwiftData로 원격 API에서 데이터 저장하는 방법 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="SwiftData로 원격 API에서 데이터 저장하는 방법 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI" data-gatsby-head="true"/><meta name="twitter:title" content="SwiftData로 원격 API에서 데이터 저장하는 방법 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 23:10" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-4f7b40c1114f0d09.js" defer=""></script><script src="/_next/static/YUMR4jSyk_WlOHHc7UfOk/_buildManifest.js" defer=""></script><script src="/_next/static/YUMR4jSyk_WlOHHc7UfOk/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">SwiftData로 원격 API에서 데이터 저장하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="SwiftData로 원격 API에서 데이터 저장하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">9<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>앱 사용자에게 오프라인 기능을 제공하고 앱 운영 비용을 줄이는 데 중요한 로컬 데이터 저장은 매우 중요합니다.</p>
<p><a href="//" rel="nofollow" target="_blank"><img src="/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png" alt="Image"></a></p>
<p>시작하기 전에 몇 초 동안 제 게시물을 팔로우하고 👏 클랩(clap)하여 더 많은 사람들이 이 유용한 내용을 배울 수 있도록 도와주세요.</p>
<h1>API 호출로부터 SwiftData를 사용하여 로컬로 데이터 저장하기</h1>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>코드로 넘어가기로 하겠습니다. SwiftData에 익숙하지 않으신 경우, 새로운 내용을 익히시려면 이 기사를 확인해보세요.</p>
<p>우리는 구조체의 이름 뒤에 약어 DTO(Data Transfer Object)를 추가하기로 결정했습니다. DTO는 한 시스템에서 다른 시스템으로 데이터를 전송하는 데 사용됩니다. 우리의 예제에서는 API 응답의 데이터를 JSON에서 SwiftData entity로 전송하려고 합니다. DTO는 JSON 응답을 일시적으로 보유하여 해당 데이터를 파싱하고 Swift 객체로 변환할 수 있게 합니다. 앞으로 몇 개의 코드 블록에서는 해당 Swift 객체를 SwiftData entity로 변환할 것입니다.</p>
<pre><code class="hljs language-swift"><span class="hljs-comment">// PhotoDTO.swift</span>
<span class="hljs-keyword">import</span> Foundation

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoDTO</span>: <span class="hljs-title class_">Identifiable</span>, <span class="hljs-title class_">Codable</span> {
    <span class="hljs-keyword">let</span> albumId: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> url: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> thumbnailUrl: <span class="hljs-type">String</span>
}
</code></pre>
<p>SwiftData로 시작하는 기사를 읽으신 경우, 이 내용은 익숙하게 느껴질 것입니다. 클래스에 새로운 코드 조각을 추가했는데, 그것은 편의 이니셜라이저입니다. 이를 통해 DTO를 직접 전달하여 SwiftData entity를 생성할 수 있습니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-swift"><span class="hljs-comment">//  PhotoObject.swift</span>
<span class="hljs-keyword">import</span> Foundation
<span class="hljs-keyword">import</span> SwiftData

<span class="hljs-meta">@Model</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoObject</span> {
    <span class="hljs-keyword">var</span> albumId: <span class="hljs-type">Int</span>
    <span class="hljs-meta">@Attribute</span>(.unique) <span class="hljs-keyword">var</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">var</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">var</span> url: <span class="hljs-type">String</span>
    <span class="hljs-keyword">var</span> thumbnailUrl: <span class="hljs-type">String</span>

    <span class="hljs-keyword">init</span>(<span class="hljs-params">albumId</span>: <span class="hljs-type">Int</span>, <span class="hljs-params">id</span>: <span class="hljs-type">Int</span>, <span class="hljs-params">title</span>: <span class="hljs-type">String</span>, <span class="hljs-params">url</span>: <span class="hljs-type">String</span>, <span class="hljs-params">thumbnailUrl</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.albumId <span class="hljs-operator">=</span> albumId
        <span class="hljs-keyword">self</span>.id <span class="hljs-operator">=</span> id
        <span class="hljs-keyword">self</span>.title <span class="hljs-operator">=</span> title
        <span class="hljs-keyword">self</span>.url <span class="hljs-operator">=</span> url
        <span class="hljs-keyword">self</span>.thumbnailUrl <span class="hljs-operator">=</span> thumbnailUrl
    }

    <span class="hljs-keyword">convenience</span> <span class="hljs-keyword">init</span>(<span class="hljs-params">item</span>: <span class="hljs-type">PhotoDTO</span>) {
        <span class="hljs-keyword">self</span>.<span class="hljs-keyword">init</span>(
            albumId: item.albumId,
            id: item.id,
            title: item.title,
            url: item.url,
            thumbnailUrl: item.thumbnailUrl
        )
    }
}
</code></pre>
<p>웹 서비스도 만약 SwiftUI에서 API 호출을 만들고 파싱한 적이 있다면 익숙할 것입니다. 웹 서비스를 살펴보면, 그 기사에서 살짝 수정하여 새로운 기능을 보유한 웹 서비스를 가지고 있다는 것을 알 수 있습니다. updateDataInDatabase를 이용해 API 호출에서 데이터를 파싱할 때마다 데이터를 데이터베이스에 저장할 수 있도록 새 기능을 추가했습니다. updateDataInDatabase 함수는 PhotoDTO를 SwiftData 엔티티로 변환하고 각 레코드를 데이터베이스에 저장하는 메서드입니다. 또한, ID로 찾을 수 없는 경우 새 레코드를 생성할지 또는 기존 레코드를 업데이트할지 결정하기 위해 insert 메서드를 사용하고 있음을 알 수 있습니다.</p>
<pre><code class="hljs language-swift"><span class="hljs-comment">//  WebService.swift</span>
<span class="hljs-keyword">import</span> Foundation
<span class="hljs-keyword">import</span> SwiftData

<span class="hljs-keyword">enum</span> <span class="hljs-title class_">NetworkError</span>: <span class="hljs-title class_">Error</span> {
    <span class="hljs-keyword">case</span> badUrl
    <span class="hljs-keyword">case</span> invalidRequest
    <span class="hljs-keyword">case</span> badResponse
    <span class="hljs-keyword">case</span> badStatus
    <span class="hljs-keyword">case</span> failedToDecodeResponse
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebService</span> {
    <span class="hljs-meta">@MainActor</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateDataInDatabase</span>(<span class="hljs-params">modelContext</span>: <span class="hljs-type">ModelContext</span>) <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">let</span> itemData: [<span class="hljs-type">PhotoDTO</span>] <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> fetchData(fromUrl: <span class="hljs-string">"https://jsonplaceholder.typicode.com/albums/1/photos"</span>)
            <span class="hljs-keyword">for</span> eachItem <span class="hljs-keyword">in</span> itemData {
                <span class="hljs-keyword">let</span> itemToStore <span class="hljs-operator">=</span> <span class="hljs-type">PhotoObject</span>(item: eachItem)
                modelContext.insert(itemToStore)
            }
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error fetching data"</span>)
            <span class="hljs-built_in">print</span>(error.localizedDescription)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchData</span>&#x3C;<span class="hljs-type">T</span>: <span class="hljs-type">Codable</span>>(<span class="hljs-params">fromUrl</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -> [<span class="hljs-type">T</span>] {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> downloadedData: [<span class="hljs-type">T</span>] <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-type">WebService</span>().downloadData(fromURL: fromUrl) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> [] }

        <span class="hljs-keyword">return</span> downloadedData
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">downloadData</span>&#x3C;<span class="hljs-type">T</span>: <span class="hljs-type">Codable</span>>(<span class="hljs-params">fromURL</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> -> <span class="hljs-type">T</span>? {
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: fromURL) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.badUrl }
            <span class="hljs-keyword">let</span> (data, response) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> response <span class="hljs-keyword">as?</span> <span class="hljs-type">HTTPURLResponse</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.badResponse }
            <span class="hljs-keyword">guard</span> response.statusCode <span class="hljs-operator">>=</span> <span class="hljs-number">200</span> <span class="hljs-operator">&#x26;&#x26;</span> response.statusCode <span class="hljs-operator">&#x3C;</span> <span class="hljs-number">300</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.badStatus }
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> decodedResponse <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>, from: data) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.failedToDecodeResponse }

            <span class="hljs-keyword">return</span> decodedResponse
        } <span class="hljs-keyword">catch</span> <span class="hljs-type">NetworkError</span>.badUrl {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"There was an error creating the URL"</span>)
        } <span class="hljs-keyword">catch</span> <span class="hljs-type">NetworkError</span>.badResponse {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Did not get a valid response"</span>)
        } <span class="hljs-keyword">catch</span> <span class="hljs-type">NetworkError</span>.badStatus {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Did not get a 2xx status code from the response"</span>)
        } <span class="hljs-keyword">catch</span> <span class="hljs-type">NetworkError</span>.failedToDecodeResponse {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Failed to decode response into the given type"</span>)
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"An error occured downloading the data"</span>)
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}
</code></pre>
<p>뷰 레이어에서는 데이터베이스에서 PhotoObjects를 읽어와 목록으로 표시합니다. 목록 내에서는 AsyncImage 구성 요소를 사용해 API에서 이미지를 표시하고 해당 항목의 ID를 이미지 옆에 표시합니다. 목록의 하단에는 몇 가지 다른 변형을 추가했습니다. overlay 변형은 목록이 비어 있을 때 진행 스피너를 표시합니다. task 변형은 목록이 비어 있으면 API에서 데이터를 자동으로 가져오도록 합니다. 또한, refreshable 변형을 사용해 목록 구성 요소에 pull to refresh를 추가했습니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>"task" 및 "refreshable" 수정자를 사용하면 사용자가 업데이트된 데이터를 확인하려고 할 때만 API가 호출되도록 보장합니다(API를 실행하는 비용을 줄임). 이는 앱을 런칭할 때마다 API에서 데이터를 가져오는 대신 두 번째로 데이터가 데이터베이스에서 가져와지게 함을 의미합니다.</p>
<p>또한 미리보기가 일반적인 경우보다 코드가 더 많이 보일 수 있습니다. SwiftData에서 데이터를 미리보는 것은 일반적인 뷰에서 데이터를 표시하는 것보다 조금 더 복잡하기 때문입니다. 미리보기에서는 데이터가 임시로 저장되는 새 컨테이너를 만들고(미리보기 장치에 데이터를 영구적으로 저장하지 않기 위함), 그런 다음 객체를 만들어 그 컨테이너에 저장합니다. 미리보기 데이터를 저장하는 별도의 파일을 생성하는 다른 자습서도 볼 수 있지만 이는 작동하며 전혀 문제가 없습니다. 저는 미리보기에 대한 코드를 미리보기 자체에 가까이 유지하고 싶어하여 별도의 파일을 생성하지 않았습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">//  ContentView.swift</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">SwiftData</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">SwiftUI</span>

struct <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    @<span class="hljs-title class_">Environment</span>(\.<span class="hljs-property">modelContext</span>) <span class="hljs-keyword">var</span> modelContext
    @<span class="hljs-title class_">Query</span>(<span class="hljs-attr">sort</span>: \<span class="hljs-title class_">PhotoObject</span>.<span class="hljs-property">id</span>) <span class="hljs-keyword">var</span> <span class="hljs-attr">photos</span>: [<span class="hljs-title class_">PhotoObject</span>]

    <span class="hljs-keyword">var</span> <span class="hljs-attr">body</span>: some <span class="hljs-title class_">View</span> {
        <span class="hljs-title class_">List</span>(photos) { item <span class="hljs-keyword">in</span>
            <span class="hljs-title class_">HStack</span> {
                <span class="hljs-title class_">Text</span>(item.<span class="hljs-property">id</span>, <span class="hljs-attr">format</span>: .<span class="hljs-property">number</span>)
                <span class="hljs-title class_">Spacer</span>()

                <span class="hljs-title class_">AsyncImage</span>(<span class="hljs-attr">url</span>: <span class="hljs-title function_">URL</span>(<span class="hljs-attr">string</span>: item.<span class="hljs-property">url</span>)!) { imagePhase <span class="hljs-keyword">in</span>
                    <span class="hljs-keyword">switch</span> imagePhase {
                    <span class="hljs-keyword">case</span> .<span class="hljs-property">empty</span>:
                        <span class="hljs-title class_">Image</span>(<span class="hljs-attr">systemName</span>: <span class="hljs-string">"ellipsis"</span>)
                    <span class="hljs-keyword">case</span> .<span class="hljs-title function_">success</span>(<span class="hljs-keyword">let</span> returnedImage):
                        returnedImage
                            .<span class="hljs-title function_">resizable</span>()
                            .<span class="hljs-title function_">scaledToFit</span>()
                    <span class="hljs-keyword">case</span> .<span class="hljs-property">failure</span>:
                        <span class="hljs-title class_">Image</span>(<span class="hljs-attr">systemName</span>: <span class="hljs-string">"xmark.circle"</span>)
                            .<span class="hljs-title function_">font</span>(.<span class="hljs-property">headline</span>)
                            .<span class="hljs-title function_">foregroundColor</span>(.<span class="hljs-property">red</span>)
                    @unknown <span class="hljs-attr">default</span>:
                        <span class="hljs-title class_">Image</span>(<span class="hljs-attr">systemName</span>: <span class="hljs-string">"ellipsis"</span>)
                    }
                }
            }
        }
        .<span class="hljs-property">overlay</span> {
            <span class="hljs-keyword">if</span> photos.<span class="hljs-property">isEmpty</span> {
                <span class="hljs-title class_">ProgressView</span>()
            }
        }
        .<span class="hljs-property">task</span> {
            <span class="hljs-keyword">if</span> photos.<span class="hljs-property">isEmpty</span> {
                <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebService</span>().<span class="hljs-title function_">updateDataInDatabase</span>(<span class="hljs-attr">modelContext</span>: modelContext)
            }
        }
        .<span class="hljs-property">refreshable</span> {
            <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebService</span>().<span class="hljs-title function_">updateDataInDatabase</span>(<span class="hljs-attr">modelContext</span>: modelContext)
        }
    }
}

#<span class="hljs-title class_">Preview</span> {
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">let</span> config = <span class="hljs-title class_">ModelConfiguration</span>(<span class="hljs-attr">isStoredInMemoryOnly</span>: <span class="hljs-literal">true</span>)
        <span class="hljs-keyword">let</span> container = <span class="hljs-keyword">try</span> <span class="hljs-title class_">ModelContainer</span>(<span class="hljs-attr">for</span>: <span class="hljs-title class_">PhotoObject</span>.<span class="hljs-property">self</span>, <span class="hljs-attr">configurations</span>: config)
        <span class="hljs-keyword">let</span> sampleObject = <span class="hljs-title class_">PhotoObject</span>(
            <span class="hljs-attr">albumId</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">title</span>: <span class="hljs-string">"accusamus beatae ad facilis cum similique qui sunt"</span>,
            <span class="hljs-attr">url</span>: <span class="hljs-string">"https://via.placeholder.com/600/92c952"</span>,
            <span class="hljs-attr">thumbnailUrl</span>: <span class="hljs-string">"https://via.placeholder.com/150/92c952"</span>
        )
        container.<span class="hljs-property">mainContext</span>.<span class="hljs-title function_">insert</span>(sampleObject)

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">ContentView</span>().<span class="hljs-title function_">modelContainer</span>(container)
    } <span class="hljs-keyword">catch</span> {
        <span class="hljs-title function_">fatalError</span>(<span class="hljs-string">"Failed to create model container"</span>)
    }
}
</code></pre>
<p>이 글이 유익하다고 느끼신다면, 제를 팔로우하는 것, 이 글에 👏 반응을 보내는 것, 또는 공유하여 다른 사람이 더 쉽게 찾을 수 있도록 돕는 것도 고려해주세요."</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>해당 주제에 대해 궁금한 점이 있거나 동일한 작업을 수행하는 다른 방법을 알고 계신다면, 이 게시물에 답글을 달거나 친구에게 공유하여 의견을 얻을 수 있습니다. Native 모바일 개발에 대해 더 배우고 싶다면, 여기에서 작성한 다른 기사들을 확인해보세요: <a href="https://medium.com/@jpmtech" rel="nofollow" target="_blank">https://medium.com/@jpmtech</a>. Native 모바일 개발로 제작된 앱들을 보고 싶다면, 여기에서 제가 만든 앱들을 확인해보세요: <a href="https://jpmtech.io/apps" rel="nofollow" target="_blank">https://jpmtech.io/apps</a>. 제 작품을 확인해주셔서 감사합니다!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"SwiftData로 원격 API에서 데이터 저장하는 방법","description":"","date":"2024-06-22 23:10","slug":"2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI","content":"\n앱 사용자에게 오프라인 기능을 제공하고 앱 운영 비용을 줄이는 데 중요한 로컬 데이터 저장은 매우 중요합니다.\n\n[![Image](/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png)](//)\n\n시작하기 전에 몇 초 동안 제 게시물을 팔로우하고 👏 클랩(clap)하여 더 많은 사람들이 이 유용한 내용을 배울 수 있도록 도와주세요.\n\n# API 호출로부터 SwiftData를 사용하여 로컬로 데이터 저장하기\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n코드로 넘어가기로 하겠습니다. SwiftData에 익숙하지 않으신 경우, 새로운 내용을 익히시려면 이 기사를 확인해보세요.\n\n우리는 구조체의 이름 뒤에 약어 DTO(Data Transfer Object)를 추가하기로 결정했습니다. DTO는 한 시스템에서 다른 시스템으로 데이터를 전송하는 데 사용됩니다. 우리의 예제에서는 API 응답의 데이터를 JSON에서 SwiftData entity로 전송하려고 합니다. DTO는 JSON 응답을 일시적으로 보유하여 해당 데이터를 파싱하고 Swift 객체로 변환할 수 있게 합니다. 앞으로 몇 개의 코드 블록에서는 해당 Swift 객체를 SwiftData entity로 변환할 것입니다.\n\n```swift\n// PhotoDTO.swift\nimport Foundation\n\nstruct PhotoDTO: Identifiable, Codable {\n    let albumId: Int\n    let id: Int\n    let title: String\n    let url: String\n    let thumbnailUrl: String\n}\n```\n\nSwiftData로 시작하는 기사를 읽으신 경우, 이 내용은 익숙하게 느껴질 것입니다. 클래스에 새로운 코드 조각을 추가했는데, 그것은 편의 이니셜라이저입니다. 이를 통해 DTO를 직접 전달하여 SwiftData entity를 생성할 수 있습니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```swift\n//  PhotoObject.swift\nimport Foundation\nimport SwiftData\n\n@Model\nclass PhotoObject {\n    var albumId: Int\n    @Attribute(.unique) var id: Int\n    var title: String\n    var url: String\n    var thumbnailUrl: String\n\n    init(albumId: Int, id: Int, title: String, url: String, thumbnailUrl: String) {\n        self.albumId = albumId\n        self.id = id\n        self.title = title\n        self.url = url\n        self.thumbnailUrl = thumbnailUrl\n    }\n\n    convenience init(item: PhotoDTO) {\n        self.init(\n            albumId: item.albumId,\n            id: item.id,\n            title: item.title,\n            url: item.url,\n            thumbnailUrl: item.thumbnailUrl\n        )\n    }\n}\n```\n\n웹 서비스도 만약 SwiftUI에서 API 호출을 만들고 파싱한 적이 있다면 익숙할 것입니다. 웹 서비스를 살펴보면, 그 기사에서 살짝 수정하여 새로운 기능을 보유한 웹 서비스를 가지고 있다는 것을 알 수 있습니다. updateDataInDatabase를 이용해 API 호출에서 데이터를 파싱할 때마다 데이터를 데이터베이스에 저장할 수 있도록 새 기능을 추가했습니다. updateDataInDatabase 함수는 PhotoDTO를 SwiftData 엔티티로 변환하고 각 레코드를 데이터베이스에 저장하는 메서드입니다. 또한, ID로 찾을 수 없는 경우 새 레코드를 생성할지 또는 기존 레코드를 업데이트할지 결정하기 위해 insert 메서드를 사용하고 있음을 알 수 있습니다.\n\n```swift\n//  WebService.swift\nimport Foundation\nimport SwiftData\n\nenum NetworkError: Error {\n    case badUrl\n    case invalidRequest\n    case badResponse\n    case badStatus\n    case failedToDecodeResponse\n}\n\nclass WebService {\n    @MainActor\n    func updateDataInDatabase(modelContext: ModelContext) async {\n        do {\n            let itemData: [PhotoDTO] = try await fetchData(fromUrl: \"https://jsonplaceholder.typicode.com/albums/1/photos\")\n            for eachItem in itemData {\n                let itemToStore = PhotoObject(item: eachItem)\n                modelContext.insert(itemToStore)\n            }\n        } catch {\n            print(\"Error fetching data\")\n            print(error.localizedDescription)\n        }\n    }\n\n    private func fetchData\u003cT: Codable\u003e(fromUrl: String) async throws -\u003e [T] {\n        guard let downloadedData: [T] = await WebService().downloadData(fromURL: fromUrl) else { return [] }\n\n        return downloadedData\n    }\n\n    private func downloadData\u003cT: Codable\u003e(fromURL: String) async -\u003e T? {\n        do {\n            guard let url = URL(string: fromURL) else { throw NetworkError.badUrl }\n            let (data, response) = try await URLSession.shared.data(from: url)\n            guard let response = response as? HTTPURLResponse else { throw NetworkError.badResponse }\n            guard response.statusCode \u003e= 200 \u0026\u0026 response.statusCode \u003c 300 else { throw NetworkError.badStatus }\n            guard let decodedResponse = try? JSONDecoder().decode(T.self, from: data) else { throw NetworkError.failedToDecodeResponse }\n\n            return decodedResponse\n        } catch NetworkError.badUrl {\n            print(\"There was an error creating the URL\")\n        } catch NetworkError.badResponse {\n            print(\"Did not get a valid response\")\n        } catch NetworkError.badStatus {\n            print(\"Did not get a 2xx status code from the response\")\n        } catch NetworkError.failedToDecodeResponse {\n            print(\"Failed to decode response into the given type\")\n        } catch {\n            print(\"An error occured downloading the data\")\n        }\n\n        return nil\n    }\n}\n```\n\n뷰 레이어에서는 데이터베이스에서 PhotoObjects를 읽어와 목록으로 표시합니다. 목록 내에서는 AsyncImage 구성 요소를 사용해 API에서 이미지를 표시하고 해당 항목의 ID를 이미지 옆에 표시합니다. 목록의 하단에는 몇 가지 다른 변형을 추가했습니다. overlay 변형은 목록이 비어 있을 때 진행 스피너를 표시합니다. task 변형은 목록이 비어 있으면 API에서 데이터를 자동으로 가져오도록 합니다. 또한, refreshable 변형을 사용해 목록 구성 요소에 pull to refresh를 추가했습니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\"task\" 및 \"refreshable\" 수정자를 사용하면 사용자가 업데이트된 데이터를 확인하려고 할 때만 API가 호출되도록 보장합니다(API를 실행하는 비용을 줄임). 이는 앱을 런칭할 때마다 API에서 데이터를 가져오는 대신 두 번째로 데이터가 데이터베이스에서 가져와지게 함을 의미합니다.\n\n또한 미리보기가 일반적인 경우보다 코드가 더 많이 보일 수 있습니다. SwiftData에서 데이터를 미리보는 것은 일반적인 뷰에서 데이터를 표시하는 것보다 조금 더 복잡하기 때문입니다. 미리보기에서는 데이터가 임시로 저장되는 새 컨테이너를 만들고(미리보기 장치에 데이터를 영구적으로 저장하지 않기 위함), 그런 다음 객체를 만들어 그 컨테이너에 저장합니다. 미리보기 데이터를 저장하는 별도의 파일을 생성하는 다른 자습서도 볼 수 있지만 이는 작동하며 전혀 문제가 없습니다. 저는 미리보기에 대한 코드를 미리보기 자체에 가까이 유지하고 싶어하여 별도의 파일을 생성하지 않았습니다.\n\n```js\n//  ContentView.swift\nimport SwiftData\nimport SwiftUI\n\nstruct ContentView: View {\n    @Environment(\\.modelContext) var modelContext\n    @Query(sort: \\PhotoObject.id) var photos: [PhotoObject]\n\n    var body: some View {\n        List(photos) { item in\n            HStack {\n                Text(item.id, format: .number)\n                Spacer()\n\n                AsyncImage(url: URL(string: item.url)!) { imagePhase in\n                    switch imagePhase {\n                    case .empty:\n                        Image(systemName: \"ellipsis\")\n                    case .success(let returnedImage):\n                        returnedImage\n                            .resizable()\n                            .scaledToFit()\n                    case .failure:\n                        Image(systemName: \"xmark.circle\")\n                            .font(.headline)\n                            .foregroundColor(.red)\n                    @unknown default:\n                        Image(systemName: \"ellipsis\")\n                    }\n                }\n            }\n        }\n        .overlay {\n            if photos.isEmpty {\n                ProgressView()\n            }\n        }\n        .task {\n            if photos.isEmpty {\n                await WebService().updateDataInDatabase(modelContext: modelContext)\n            }\n        }\n        .refreshable {\n            await WebService().updateDataInDatabase(modelContext: modelContext)\n        }\n    }\n}\n\n#Preview {\n    do {\n        let config = ModelConfiguration(isStoredInMemoryOnly: true)\n        let container = try ModelContainer(for: PhotoObject.self, configurations: config)\n        let sampleObject = PhotoObject(\n            albumId: 1,\n            id: 1,\n            title: \"accusamus beatae ad facilis cum similique qui sunt\",\n            url: \"https://via.placeholder.com/600/92c952\",\n            thumbnailUrl: \"https://via.placeholder.com/150/92c952\"\n        )\n        container.mainContext.insert(sampleObject)\n\n        return ContentView().modelContainer(container)\n    } catch {\n        fatalError(\"Failed to create model container\")\n    }\n}\n```\n\n이 글이 유익하다고 느끼신다면, 제를 팔로우하는 것, 이 글에 👏 반응을 보내는 것, 또는 공유하여 다른 사람이 더 쉽게 찾을 수 있도록 돕는 것도 고려해주세요.\"\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n해당 주제에 대해 궁금한 점이 있거나 동일한 작업을 수행하는 다른 방법을 알고 계신다면, 이 게시물에 답글을 달거나 친구에게 공유하여 의견을 얻을 수 있습니다. Native 모바일 개발에 대해 더 배우고 싶다면, 여기에서 작성한 다른 기사들을 확인해보세요: [https://medium.com/@jpmtech](https://medium.com/@jpmtech). Native 모바일 개발로 제작된 앱들을 보고 싶다면, 여기에서 제가 만든 앱들을 확인해보세요: [https://jpmtech.io/apps](https://jpmtech.io/apps). 제 작품을 확인해주셔서 감사합니다!\n","ogImage":{"url":"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png"},"coverImage":"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png","tag":["Tech"],"readingTime":9},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e앱 사용자에게 오프라인 기능을 제공하고 앱 운영 비용을 줄이는 데 중요한 로컬 데이터 저장은 매우 중요합니다.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"//\" rel=\"nofollow\" target=\"_blank\"\u003e\u003cimg src=\"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png\" alt=\"Image\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e시작하기 전에 몇 초 동안 제 게시물을 팔로우하고 👏 클랩(clap)하여 더 많은 사람들이 이 유용한 내용을 배울 수 있도록 도와주세요.\u003c/p\u003e\n\u003ch1\u003eAPI 호출로부터 SwiftData를 사용하여 로컬로 데이터 저장하기\u003c/h1\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e코드로 넘어가기로 하겠습니다. SwiftData에 익숙하지 않으신 경우, 새로운 내용을 익히시려면 이 기사를 확인해보세요.\u003c/p\u003e\n\u003cp\u003e우리는 구조체의 이름 뒤에 약어 DTO(Data Transfer Object)를 추가하기로 결정했습니다. DTO는 한 시스템에서 다른 시스템으로 데이터를 전송하는 데 사용됩니다. 우리의 예제에서는 API 응답의 데이터를 JSON에서 SwiftData entity로 전송하려고 합니다. DTO는 JSON 응답을 일시적으로 보유하여 해당 데이터를 파싱하고 Swift 객체로 변환할 수 있게 합니다. 앞으로 몇 개의 코드 블록에서는 해당 Swift 객체를 SwiftData entity로 변환할 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-comment\"\u003e// PhotoDTO.swift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Foundation\n\n\u003cspan class=\"hljs-keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePhotoDTO\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eIdentifiable\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eCodable\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e albumId: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e id: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e title: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e url: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e thumbnailUrl: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSwiftData로 시작하는 기사를 읽으신 경우, 이 내용은 익숙하게 느껴질 것입니다. 클래스에 새로운 코드 조각을 추가했는데, 그것은 편의 이니셜라이저입니다. 이를 통해 DTO를 직접 전달하여 SwiftData entity를 생성할 수 있습니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-comment\"\u003e//  PhotoObject.swift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Foundation\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e SwiftData\n\n\u003cspan class=\"hljs-meta\"\u003e@Model\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e albumId: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e\n    \u003cspan class=\"hljs-meta\"\u003e@Attribute\u003c/span\u003e(.unique) \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e id: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e title: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e url: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e thumbnailUrl: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ealbumId\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e, \u003cspan class=\"hljs-params\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e, \u003cspan class=\"hljs-params\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e, \u003cspan class=\"hljs-params\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e, \u003cspan class=\"hljs-params\"\u003ethumbnailUrl\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.albumId \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e albumId\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e id\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.title \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e title\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.url \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e url\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.thumbnailUrl \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e thumbnailUrl\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003econvenience\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eitem\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003ePhotoDTO\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e(\n            albumId: item.albumId,\n            id: item.id,\n            title: item.title,\n            url: item.url,\n            thumbnailUrl: item.thumbnailUrl\n        )\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e웹 서비스도 만약 SwiftUI에서 API 호출을 만들고 파싱한 적이 있다면 익숙할 것입니다. 웹 서비스를 살펴보면, 그 기사에서 살짝 수정하여 새로운 기능을 보유한 웹 서비스를 가지고 있다는 것을 알 수 있습니다. updateDataInDatabase를 이용해 API 호출에서 데이터를 파싱할 때마다 데이터를 데이터베이스에 저장할 수 있도록 새 기능을 추가했습니다. updateDataInDatabase 함수는 PhotoDTO를 SwiftData 엔티티로 변환하고 각 레코드를 데이터베이스에 저장하는 메서드입니다. 또한, ID로 찾을 수 없는 경우 새 레코드를 생성할지 또는 기존 레코드를 업데이트할지 결정하기 위해 insert 메서드를 사용하고 있음을 알 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-comment\"\u003e//  WebService.swift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Foundation\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e SwiftData\n\n\u003cspan class=\"hljs-keyword\"\u003eenum\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNetworkError\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e badUrl\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e invalidRequest\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e badResponse\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e badStatus\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e failedToDecodeResponse\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eWebService\u003c/span\u003e {\n    \u003cspan class=\"hljs-meta\"\u003e@MainActor\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdateDataInDatabase\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003emodelContext\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eModelContext\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e itemData: [\u003cspan class=\"hljs-type\"\u003ePhotoDTO\u003c/span\u003e] \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e fetchData(fromUrl: \u003cspan class=\"hljs-string\"\u003e\"https://jsonplaceholder.typicode.com/albums/1/photos\"\u003c/span\u003e)\n            \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e eachItem \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e itemData {\n                \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e itemToStore \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003ePhotoObject\u003c/span\u003e(item: eachItem)\n                modelContext.insert(itemToStore)\n            }\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Error fetching data\"\u003c/span\u003e)\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(error.localizedDescription)\n        }\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetchData\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eCodable\u003c/span\u003e\u003e(\u003cspan class=\"hljs-params\"\u003efromUrl\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethrows\u003c/span\u003e -\u003e [\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e] {\n        \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e downloadedData: [\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e] \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eWebService\u003c/span\u003e().downloadData(fromURL: fromUrl) \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [] }\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e downloadedData\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edownloadData\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eCodable\u003c/span\u003e\u003e(\u003cspan class=\"hljs-params\"\u003efromURL\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e -\u003e \u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e? {\n        \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e url \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eURL\u003c/span\u003e(string: fromURL) \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badUrl }\n            \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e (data, response) \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eURLSession\u003c/span\u003e.shared.data(from: url)\n            \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e response \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e response \u003cspan class=\"hljs-keyword\"\u003eas?\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eHTTPURLResponse\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badResponse }\n            \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e response.statusCode \u003cspan class=\"hljs-operator\"\u003e\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e response.statusCode \u003cspan class=\"hljs-operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e300\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badStatus }\n            \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e decodedResponse \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etry?\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eJSONDecoder\u003c/span\u003e().decode(\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e, from: data) \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.failedToDecodeResponse }\n\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e decodedResponse\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badUrl {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"There was an error creating the URL\"\u003c/span\u003e)\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badResponse {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Did not get a valid response\"\u003c/span\u003e)\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badStatus {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Did not get a 2xx status code from the response\"\u003c/span\u003e)\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.failedToDecodeResponse {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Failed to decode response into the given type\"\u003c/span\u003e)\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"An error occured downloading the data\"\u003c/span\u003e)\n        }\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e뷰 레이어에서는 데이터베이스에서 PhotoObjects를 읽어와 목록으로 표시합니다. 목록 내에서는 AsyncImage 구성 요소를 사용해 API에서 이미지를 표시하고 해당 항목의 ID를 이미지 옆에 표시합니다. 목록의 하단에는 몇 가지 다른 변형을 추가했습니다. overlay 변형은 목록이 비어 있을 때 진행 스피너를 표시합니다. task 변형은 목록이 비어 있으면 API에서 데이터를 자동으로 가져오도록 합니다. 또한, refreshable 변형을 사용해 목록 구성 요소에 pull to refresh를 추가했습니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\"task\" 및 \"refreshable\" 수정자를 사용하면 사용자가 업데이트된 데이터를 확인하려고 할 때만 API가 호출되도록 보장합니다(API를 실행하는 비용을 줄임). 이는 앱을 런칭할 때마다 API에서 데이터를 가져오는 대신 두 번째로 데이터가 데이터베이스에서 가져와지게 함을 의미합니다.\u003c/p\u003e\n\u003cp\u003e또한 미리보기가 일반적인 경우보다 코드가 더 많이 보일 수 있습니다. SwiftData에서 데이터를 미리보는 것은 일반적인 뷰에서 데이터를 표시하는 것보다 조금 더 복잡하기 때문입니다. 미리보기에서는 데이터가 임시로 저장되는 새 컨테이너를 만들고(미리보기 장치에 데이터를 영구적으로 저장하지 않기 위함), 그런 다음 객체를 만들어 그 컨테이너에 저장합니다. 미리보기 데이터를 저장하는 별도의 파일을 생성하는 다른 자습서도 볼 수 있지만 이는 작동하며 전혀 문제가 없습니다. 저는 미리보기에 대한 코드를 미리보기 자체에 가까이 유지하고 싶어하여 별도의 파일을 생성하지 않았습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e//  ContentView.swift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSwiftData\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSwiftUI\u003c/span\u003e\n\nstruct \u003cspan class=\"hljs-title class_\"\u003eContentView\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eView\u003c/span\u003e {\n    @\u003cspan class=\"hljs-title class_\"\u003eEnvironment\u003c/span\u003e(\\.\u003cspan class=\"hljs-property\"\u003emodelContext\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e modelContext\n    @\u003cspan class=\"hljs-title class_\"\u003eQuery\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esort\u003c/span\u003e: \\\u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ephotos\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e]\n\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ebody\u003c/span\u003e: some \u003cspan class=\"hljs-title class_\"\u003eView\u003c/span\u003e {\n        \u003cspan class=\"hljs-title class_\"\u003eList\u003c/span\u003e(photos) { item \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e\n            \u003cspan class=\"hljs-title class_\"\u003eHStack\u003c/span\u003e {\n                \u003cspan class=\"hljs-title class_\"\u003eText\u003c/span\u003e(item.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eformat\u003c/span\u003e: .\u003cspan class=\"hljs-property\"\u003enumber\u003c/span\u003e)\n                \u003cspan class=\"hljs-title class_\"\u003eSpacer\u003c/span\u003e()\n\n                \u003cspan class=\"hljs-title class_\"\u003eAsyncImage\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003estring\u003c/span\u003e: item.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e)!) { imagePhase \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e\n                    \u003cspan class=\"hljs-keyword\"\u003eswitch\u003c/span\u003e imagePhase {\n                    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e .\u003cspan class=\"hljs-property\"\u003eempty\u003c/span\u003e:\n                        \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esystemName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ellipsis\"\u003c/span\u003e)\n                    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e .\u003cspan class=\"hljs-title function_\"\u003esuccess\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e returnedImage):\n                        returnedImage\n                            .\u003cspan class=\"hljs-title function_\"\u003eresizable\u003c/span\u003e()\n                            .\u003cspan class=\"hljs-title function_\"\u003escaledToFit\u003c/span\u003e()\n                    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e .\u003cspan class=\"hljs-property\"\u003efailure\u003c/span\u003e:\n                        \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esystemName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"xmark.circle\"\u003c/span\u003e)\n                            .\u003cspan class=\"hljs-title function_\"\u003efont\u003c/span\u003e(.\u003cspan class=\"hljs-property\"\u003eheadline\u003c/span\u003e)\n                            .\u003cspan class=\"hljs-title function_\"\u003eforegroundColor\u003c/span\u003e(.\u003cspan class=\"hljs-property\"\u003ered\u003c/span\u003e)\n                    @unknown \u003cspan class=\"hljs-attr\"\u003edefault\u003c/span\u003e:\n                        \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esystemName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ellipsis\"\u003c/span\u003e)\n                    }\n                }\n            }\n        }\n        .\u003cspan class=\"hljs-property\"\u003eoverlay\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e photos.\u003cspan class=\"hljs-property\"\u003eisEmpty\u003c/span\u003e {\n                \u003cspan class=\"hljs-title class_\"\u003eProgressView\u003c/span\u003e()\n            }\n        }\n        .\u003cspan class=\"hljs-property\"\u003etask\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e photos.\u003cspan class=\"hljs-property\"\u003eisEmpty\u003c/span\u003e {\n                \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eWebService\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eupdateDataInDatabase\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003emodelContext\u003c/span\u003e: modelContext)\n            }\n        }\n        .\u003cspan class=\"hljs-property\"\u003erefreshable\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eWebService\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eupdateDataInDatabase\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003emodelContext\u003c/span\u003e: modelContext)\n        }\n    }\n}\n\n#\u003cspan class=\"hljs-title class_\"\u003ePreview\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e config = \u003cspan class=\"hljs-title class_\"\u003eModelConfiguration\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eisStoredInMemoryOnly\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e)\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e container = \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eModelContainer\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003efor\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eself\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003econfigurations\u003c/span\u003e: config)\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e sampleObject = \u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e(\n            \u003cspan class=\"hljs-attr\"\u003ealbumId\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"accusamus beatae ad facilis cum similique qui sunt\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"https://via.placeholder.com/600/92c952\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003ethumbnailUrl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"https://via.placeholder.com/150/92c952\"\u003c/span\u003e\n        )\n        container.\u003cspan class=\"hljs-property\"\u003emainContext\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einsert\u003c/span\u003e(sampleObject)\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eContentView\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003emodelContainer\u003c/span\u003e(container)\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n        \u003cspan class=\"hljs-title function_\"\u003efatalError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Failed to create model container\"\u003c/span\u003e)\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 글이 유익하다고 느끼신다면, 제를 팔로우하는 것, 이 글에 👏 반응을 보내는 것, 또는 공유하여 다른 사람이 더 쉽게 찾을 수 있도록 돕는 것도 고려해주세요.\"\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e해당 주제에 대해 궁금한 점이 있거나 동일한 작업을 수행하는 다른 방법을 알고 계신다면, 이 게시물에 답글을 달거나 친구에게 공유하여 의견을 얻을 수 있습니다. Native 모바일 개발에 대해 더 배우고 싶다면, 여기에서 작성한 다른 기사들을 확인해보세요: \u003ca href=\"https://medium.com/@jpmtech\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://medium.com/@jpmtech\u003c/a\u003e. Native 모바일 개발로 제작된 앱들을 보고 싶다면, 여기에서 제가 만든 앱들을 확인해보세요: \u003ca href=\"https://jpmtech.io/apps\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://jpmtech.io/apps\u003c/a\u003e. 제 작품을 확인해주셔서 감사합니다!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI"},"buildId":"YUMR4jSyk_WlOHHc7UfOk","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>