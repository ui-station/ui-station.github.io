<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>SwiftDataë¡œ ì›ê²© APIì—ì„œ ë°ì´í„° ì €ì¥í•˜ëŠ” ë°©ë²• | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="SwiftDataë¡œ ì›ê²© APIì—ì„œ ë°ì´í„° ì €ì¥í•˜ëŠ” ë°©ë²• | ui-station" data-gatsby-head="true"/><meta property="og:title" content="SwiftDataë¡œ ì›ê²© APIì—ì„œ ë°ì´í„° ì €ì¥í•˜ëŠ” ë°©ë²• | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI" data-gatsby-head="true"/><meta name="twitter:title" content="SwiftDataë¡œ ì›ê²© APIì—ì„œ ë°ì´í„° ì €ì¥í•˜ëŠ” ë°©ë²• | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 23:10" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-4f7b40c1114f0d09.js" defer=""></script><script src="/_next/static/YUMR4jSyk_WlOHHc7UfOk/_buildManifest.js" defer=""></script><script src="/_next/static/YUMR4jSyk_WlOHHc7UfOk/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">SwiftDataë¡œ ì›ê²© APIì—ì„œ ë°ì´í„° ì €ì¥í•˜ëŠ” ë°©ë²•</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="SwiftDataë¡œ ì›ê²© APIì—ì„œ ë°ì´í„° ì €ì¥í•˜ëŠ” ë°©ë²•" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">9<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>ì•± ì‚¬ìš©ìì—ê²Œ ì˜¤í”„ë¼ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ì•± ìš´ì˜ ë¹„ìš©ì„ ì¤„ì´ëŠ” ë° ì¤‘ìš”í•œ ë¡œì»¬ ë°ì´í„° ì €ì¥ì€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<p><a href="//" rel="nofollow" target="_blank"><img src="/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png" alt="Image"></a></p>
<p>ì‹œì‘í•˜ê¸° ì „ì— ëª‡ ì´ˆ ë™ì•ˆ ì œ ê²Œì‹œë¬¼ì„ íŒ”ë¡œìš°í•˜ê³  ğŸ‘ í´ë©(clap)í•˜ì—¬ ë” ë§ì€ ì‚¬ëŒë“¤ì´ ì´ ìœ ìš©í•œ ë‚´ìš©ì„ ë°°ìš¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ì„¸ìš”.</p>
<h1>API í˜¸ì¶œë¡œë¶€í„° SwiftDataë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ë¡œ ë°ì´í„° ì €ì¥í•˜ê¸°</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì½”ë“œë¡œ ë„˜ì–´ê°€ê¸°ë¡œ í•˜ê² ìŠµë‹ˆë‹¤. SwiftDataì— ìµìˆ™í•˜ì§€ ì•Šìœ¼ì‹  ê²½ìš°, ìƒˆë¡œìš´ ë‚´ìš©ì„ ìµíˆì‹œë ¤ë©´ ì´ ê¸°ì‚¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>
<p>ìš°ë¦¬ëŠ” êµ¬ì¡°ì²´ì˜ ì´ë¦„ ë’¤ì— ì•½ì–´ DTO(Data Transfer Object)ë¥¼ ì¶”ê°€í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. DTOëŠ” í•œ ì‹œìŠ¤í…œì—ì„œ ë‹¤ë¥¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ìš°ë¦¬ì˜ ì˜ˆì œì—ì„œëŠ” API ì‘ë‹µì˜ ë°ì´í„°ë¥¼ JSONì—ì„œ SwiftData entityë¡œ ì „ì†¡í•˜ë ¤ê³  í•©ë‹ˆë‹¤. DTOëŠ” JSON ì‘ë‹µì„ ì¼ì‹œì ìœ¼ë¡œ ë³´ìœ í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ê³  Swift ê°ì²´ë¡œ ë³€í™˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œ ëª‡ ê°œì˜ ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” í•´ë‹¹ Swift ê°ì²´ë¥¼ SwiftData entityë¡œ ë³€í™˜í•  ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-swift"><span class="hljs-comment">// PhotoDTO.swift</span>
<span class="hljs-keyword">import</span> Foundation

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoDTO</span>: <span class="hljs-title class_">Identifiable</span>, <span class="hljs-title class_">Codable</span> {
    <span class="hljs-keyword">let</span> albumId: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> url: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> thumbnailUrl: <span class="hljs-type">String</span>
}
</code></pre>
<p>SwiftDataë¡œ ì‹œì‘í•˜ëŠ” ê¸°ì‚¬ë¥¼ ì½ìœ¼ì‹  ê²½ìš°, ì´ ë‚´ìš©ì€ ìµìˆ™í•˜ê²Œ ëŠê»´ì§ˆ ê²ƒì…ë‹ˆë‹¤. í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ì½”ë“œ ì¡°ê°ì„ ì¶”ê°€í–ˆëŠ”ë°, ê·¸ê²ƒì€ í¸ì˜ ì´ë‹ˆì…œë¼ì´ì €ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ DTOë¥¼ ì§ì ‘ ì „ë‹¬í•˜ì—¬ SwiftData entityë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-swift"><span class="hljs-comment">//  PhotoObject.swift</span>
<span class="hljs-keyword">import</span> Foundation
<span class="hljs-keyword">import</span> SwiftData

<span class="hljs-meta">@Model</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoObject</span> {
    <span class="hljs-keyword">var</span> albumId: <span class="hljs-type">Int</span>
    <span class="hljs-meta">@Attribute</span>(.unique) <span class="hljs-keyword">var</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">var</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">var</span> url: <span class="hljs-type">String</span>
    <span class="hljs-keyword">var</span> thumbnailUrl: <span class="hljs-type">String</span>

    <span class="hljs-keyword">init</span>(<span class="hljs-params">albumId</span>: <span class="hljs-type">Int</span>, <span class="hljs-params">id</span>: <span class="hljs-type">Int</span>, <span class="hljs-params">title</span>: <span class="hljs-type">String</span>, <span class="hljs-params">url</span>: <span class="hljs-type">String</span>, <span class="hljs-params">thumbnailUrl</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.albumId <span class="hljs-operator">=</span> albumId
        <span class="hljs-keyword">self</span>.id <span class="hljs-operator">=</span> id
        <span class="hljs-keyword">self</span>.title <span class="hljs-operator">=</span> title
        <span class="hljs-keyword">self</span>.url <span class="hljs-operator">=</span> url
        <span class="hljs-keyword">self</span>.thumbnailUrl <span class="hljs-operator">=</span> thumbnailUrl
    }

    <span class="hljs-keyword">convenience</span> <span class="hljs-keyword">init</span>(<span class="hljs-params">item</span>: <span class="hljs-type">PhotoDTO</span>) {
        <span class="hljs-keyword">self</span>.<span class="hljs-keyword">init</span>(
            albumId: item.albumId,
            id: item.id,
            title: item.title,
            url: item.url,
            thumbnailUrl: item.thumbnailUrl
        )
    }
}
</code></pre>
<p>ì›¹ ì„œë¹„ìŠ¤ë„ ë§Œì•½ SwiftUIì—ì„œ API í˜¸ì¶œì„ ë§Œë“¤ê³  íŒŒì‹±í•œ ì ì´ ìˆë‹¤ë©´ ìµìˆ™í•  ê²ƒì…ë‹ˆë‹¤. ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì‚´í´ë³´ë©´, ê·¸ ê¸°ì‚¬ì—ì„œ ì‚´ì§ ìˆ˜ì •í•˜ì—¬ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ë³´ìœ í•œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. updateDataInDatabaseë¥¼ ì´ìš©í•´ API í˜¸ì¶œì—ì„œ ë°ì´í„°ë¥¼ íŒŒì‹±í•  ë•Œë§ˆë‹¤ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ìƒˆ ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. updateDataInDatabase í•¨ìˆ˜ëŠ” PhotoDTOë¥¼ SwiftData ì—”í‹°í‹°ë¡œ ë³€í™˜í•˜ê³  ê° ë ˆì½”ë“œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤. ë˜í•œ, IDë¡œ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš° ìƒˆ ë ˆì½”ë“œë¥¼ ìƒì„±í• ì§€ ë˜ëŠ” ê¸°ì¡´ ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í• ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ insert ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-swift"><span class="hljs-comment">//  WebService.swift</span>
<span class="hljs-keyword">import</span> Foundation
<span class="hljs-keyword">import</span> SwiftData

<span class="hljs-keyword">enum</span> <span class="hljs-title class_">NetworkError</span>: <span class="hljs-title class_">Error</span> {
    <span class="hljs-keyword">case</span> badUrl
    <span class="hljs-keyword">case</span> invalidRequest
    <span class="hljs-keyword">case</span> badResponse
    <span class="hljs-keyword">case</span> badStatus
    <span class="hljs-keyword">case</span> failedToDecodeResponse
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebService</span> {
    <span class="hljs-meta">@MainActor</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateDataInDatabase</span>(<span class="hljs-params">modelContext</span>: <span class="hljs-type">ModelContext</span>) <span class="hljs-keyword">async</span> {
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">let</span> itemData: [<span class="hljs-type">PhotoDTO</span>] <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> fetchData(fromUrl: <span class="hljs-string">"https://jsonplaceholder.typicode.com/albums/1/photos"</span>)
            <span class="hljs-keyword">for</span> eachItem <span class="hljs-keyword">in</span> itemData {
                <span class="hljs-keyword">let</span> itemToStore <span class="hljs-operator">=</span> <span class="hljs-type">PhotoObject</span>(item: eachItem)
                modelContext.insert(itemToStore)
            }
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error fetching data"</span>)
            <span class="hljs-built_in">print</span>(error.localizedDescription)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchData</span>&#x3C;<span class="hljs-type">T</span>: <span class="hljs-type">Codable</span>>(<span class="hljs-params">fromUrl</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -> [<span class="hljs-type">T</span>] {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> downloadedData: [<span class="hljs-type">T</span>] <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-type">WebService</span>().downloadData(fromURL: fromUrl) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> [] }

        <span class="hljs-keyword">return</span> downloadedData
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">downloadData</span>&#x3C;<span class="hljs-type">T</span>: <span class="hljs-type">Codable</span>>(<span class="hljs-params">fromURL</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> -> <span class="hljs-type">T</span>? {
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: fromURL) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.badUrl }
            <span class="hljs-keyword">let</span> (data, response) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> response <span class="hljs-keyword">as?</span> <span class="hljs-type">HTTPURLResponse</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.badResponse }
            <span class="hljs-keyword">guard</span> response.statusCode <span class="hljs-operator">>=</span> <span class="hljs-number">200</span> <span class="hljs-operator">&#x26;&#x26;</span> response.statusCode <span class="hljs-operator">&#x3C;</span> <span class="hljs-number">300</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.badStatus }
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> decodedResponse <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>, from: data) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.failedToDecodeResponse }

            <span class="hljs-keyword">return</span> decodedResponse
        } <span class="hljs-keyword">catch</span> <span class="hljs-type">NetworkError</span>.badUrl {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"There was an error creating the URL"</span>)
        } <span class="hljs-keyword">catch</span> <span class="hljs-type">NetworkError</span>.badResponse {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Did not get a valid response"</span>)
        } <span class="hljs-keyword">catch</span> <span class="hljs-type">NetworkError</span>.badStatus {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Did not get a 2xx status code from the response"</span>)
        } <span class="hljs-keyword">catch</span> <span class="hljs-type">NetworkError</span>.failedToDecodeResponse {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Failed to decode response into the given type"</span>)
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"An error occured downloading the data"</span>)
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}
</code></pre>
<p>ë·° ë ˆì´ì–´ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ PhotoObjectsë¥¼ ì½ì–´ì™€ ëª©ë¡ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ ë‚´ì—ì„œëŠ” AsyncImage êµ¬ì„± ìš”ì†Œë¥¼ ì‚¬ìš©í•´ APIì—ì„œ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•˜ê³  í•´ë‹¹ í•­ëª©ì˜ IDë¥¼ ì´ë¯¸ì§€ ì˜†ì— í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ì˜ í•˜ë‹¨ì—ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ë³€í˜•ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. overlay ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆì„ ë•Œ ì§„í–‰ ìŠ¤í”¼ë„ˆë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. task ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆìœ¼ë©´ APIì—ì„œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ, refreshable ë³€í˜•ì„ ì‚¬ìš©í•´ ëª©ë¡ êµ¬ì„± ìš”ì†Œì— pull to refreshë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>"task" ë° "refreshable" ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì—…ë°ì´íŠ¸ëœ ë°ì´í„°ë¥¼ í™•ì¸í•˜ë ¤ê³  í•  ë•Œë§Œ APIê°€ í˜¸ì¶œë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤(APIë¥¼ ì‹¤í–‰í•˜ëŠ” ë¹„ìš©ì„ ì¤„ì„). ì´ëŠ” ì•±ì„ ëŸ°ì¹­í•  ë•Œë§ˆë‹¤ APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹  ë‘ ë²ˆì§¸ë¡œ ë°ì´í„°ê°€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì™€ì§€ê²Œ í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>
<p>ë˜í•œ ë¯¸ë¦¬ë³´ê¸°ê°€ ì¼ë°˜ì ì¸ ê²½ìš°ë³´ë‹¤ ì½”ë“œê°€ ë” ë§ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. SwiftDataì—ì„œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ë³´ëŠ” ê²ƒì€ ì¼ë°˜ì ì¸ ë·°ì—ì„œ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒë³´ë‹¤ ì¡°ê¸ˆ ë” ë³µì¡í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸°ì—ì„œëŠ” ë°ì´í„°ê°€ ì„ì‹œë¡œ ì €ì¥ë˜ëŠ” ìƒˆ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³ (ë¯¸ë¦¬ë³´ê¸° ì¥ì¹˜ì— ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ì§€ ì•Šê¸° ìœ„í•¨), ê·¸ëŸ° ë‹¤ìŒ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ê·¸ ì»¨í…Œì´ë„ˆì— ì €ì¥í•©ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸° ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë‹¤ë¥¸ ììŠµì„œë„ ë³¼ ìˆ˜ ìˆì§€ë§Œ ì´ëŠ” ì‘ë™í•˜ë©° ì „í˜€ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ì €ëŠ” ë¯¸ë¦¬ë³´ê¸°ì— ëŒ€í•œ ì½”ë“œë¥¼ ë¯¸ë¦¬ë³´ê¸° ìì²´ì— ê°€ê¹Œì´ ìœ ì§€í•˜ê³  ì‹¶ì–´í•˜ì—¬ ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">//  ContentView.swift</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">SwiftData</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">SwiftUI</span>

struct <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    @<span class="hljs-title class_">Environment</span>(\.<span class="hljs-property">modelContext</span>) <span class="hljs-keyword">var</span> modelContext
    @<span class="hljs-title class_">Query</span>(<span class="hljs-attr">sort</span>: \<span class="hljs-title class_">PhotoObject</span>.<span class="hljs-property">id</span>) <span class="hljs-keyword">var</span> <span class="hljs-attr">photos</span>: [<span class="hljs-title class_">PhotoObject</span>]

    <span class="hljs-keyword">var</span> <span class="hljs-attr">body</span>: some <span class="hljs-title class_">View</span> {
        <span class="hljs-title class_">List</span>(photos) { item <span class="hljs-keyword">in</span>
            <span class="hljs-title class_">HStack</span> {
                <span class="hljs-title class_">Text</span>(item.<span class="hljs-property">id</span>, <span class="hljs-attr">format</span>: .<span class="hljs-property">number</span>)
                <span class="hljs-title class_">Spacer</span>()

                <span class="hljs-title class_">AsyncImage</span>(<span class="hljs-attr">url</span>: <span class="hljs-title function_">URL</span>(<span class="hljs-attr">string</span>: item.<span class="hljs-property">url</span>)!) { imagePhase <span class="hljs-keyword">in</span>
                    <span class="hljs-keyword">switch</span> imagePhase {
                    <span class="hljs-keyword">case</span> .<span class="hljs-property">empty</span>:
                        <span class="hljs-title class_">Image</span>(<span class="hljs-attr">systemName</span>: <span class="hljs-string">"ellipsis"</span>)
                    <span class="hljs-keyword">case</span> .<span class="hljs-title function_">success</span>(<span class="hljs-keyword">let</span> returnedImage):
                        returnedImage
                            .<span class="hljs-title function_">resizable</span>()
                            .<span class="hljs-title function_">scaledToFit</span>()
                    <span class="hljs-keyword">case</span> .<span class="hljs-property">failure</span>:
                        <span class="hljs-title class_">Image</span>(<span class="hljs-attr">systemName</span>: <span class="hljs-string">"xmark.circle"</span>)
                            .<span class="hljs-title function_">font</span>(.<span class="hljs-property">headline</span>)
                            .<span class="hljs-title function_">foregroundColor</span>(.<span class="hljs-property">red</span>)
                    @unknown <span class="hljs-attr">default</span>:
                        <span class="hljs-title class_">Image</span>(<span class="hljs-attr">systemName</span>: <span class="hljs-string">"ellipsis"</span>)
                    }
                }
            }
        }
        .<span class="hljs-property">overlay</span> {
            <span class="hljs-keyword">if</span> photos.<span class="hljs-property">isEmpty</span> {
                <span class="hljs-title class_">ProgressView</span>()
            }
        }
        .<span class="hljs-property">task</span> {
            <span class="hljs-keyword">if</span> photos.<span class="hljs-property">isEmpty</span> {
                <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebService</span>().<span class="hljs-title function_">updateDataInDatabase</span>(<span class="hljs-attr">modelContext</span>: modelContext)
            }
        }
        .<span class="hljs-property">refreshable</span> {
            <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebService</span>().<span class="hljs-title function_">updateDataInDatabase</span>(<span class="hljs-attr">modelContext</span>: modelContext)
        }
    }
}

#<span class="hljs-title class_">Preview</span> {
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">let</span> config = <span class="hljs-title class_">ModelConfiguration</span>(<span class="hljs-attr">isStoredInMemoryOnly</span>: <span class="hljs-literal">true</span>)
        <span class="hljs-keyword">let</span> container = <span class="hljs-keyword">try</span> <span class="hljs-title class_">ModelContainer</span>(<span class="hljs-attr">for</span>: <span class="hljs-title class_">PhotoObject</span>.<span class="hljs-property">self</span>, <span class="hljs-attr">configurations</span>: config)
        <span class="hljs-keyword">let</span> sampleObject = <span class="hljs-title class_">PhotoObject</span>(
            <span class="hljs-attr">albumId</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">title</span>: <span class="hljs-string">"accusamus beatae ad facilis cum similique qui sunt"</span>,
            <span class="hljs-attr">url</span>: <span class="hljs-string">"https://via.placeholder.com/600/92c952"</span>,
            <span class="hljs-attr">thumbnailUrl</span>: <span class="hljs-string">"https://via.placeholder.com/150/92c952"</span>
        )
        container.<span class="hljs-property">mainContext</span>.<span class="hljs-title function_">insert</span>(sampleObject)

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">ContentView</span>().<span class="hljs-title function_">modelContainer</span>(container)
    } <span class="hljs-keyword">catch</span> {
        <span class="hljs-title function_">fatalError</span>(<span class="hljs-string">"Failed to create model container"</span>)
    }
}
</code></pre>
<p>ì´ ê¸€ì´ ìœ ìµí•˜ë‹¤ê³  ëŠë¼ì‹ ë‹¤ë©´, ì œë¥¼ íŒ”ë¡œìš°í•˜ëŠ” ê²ƒ, ì´ ê¸€ì— ğŸ‘ ë°˜ì‘ì„ ë³´ë‚´ëŠ” ê²ƒ, ë˜ëŠ” ê³µìœ í•˜ì—¬ ë‹¤ë¥¸ ì‚¬ëŒì´ ë” ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê²ƒë„ ê³ ë ¤í•´ì£¼ì„¸ìš”."</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>í•´ë‹¹ ì£¼ì œì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ì„ ì•Œê³  ê³„ì‹ ë‹¤ë©´, ì´ ê²Œì‹œë¬¼ì— ë‹µê¸€ì„ ë‹¬ê±°ë‚˜ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ì—¬ ì˜ê²¬ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Native ëª¨ë°”ì¼ ê°œë°œì— ëŒ€í•´ ë” ë°°ìš°ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì‘ì„±í•œ ë‹¤ë¥¸ ê¸°ì‚¬ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: <a href="https://medium.com/@jpmtech" rel="nofollow" target="_blank">https://medium.com/@jpmtech</a>. Native ëª¨ë°”ì¼ ê°œë°œë¡œ ì œì‘ëœ ì•±ë“¤ì„ ë³´ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì œê°€ ë§Œë“  ì•±ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: <a href="https://jpmtech.io/apps" rel="nofollow" target="_blank">https://jpmtech.io/apps</a>. ì œ ì‘í’ˆì„ í™•ì¸í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"SwiftDataë¡œ ì›ê²© APIì—ì„œ ë°ì´í„° ì €ì¥í•˜ëŠ” ë°©ë²•","description":"","date":"2024-06-22 23:10","slug":"2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI","content":"\nì•± ì‚¬ìš©ìì—ê²Œ ì˜¤í”„ë¼ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ì•± ìš´ì˜ ë¹„ìš©ì„ ì¤„ì´ëŠ” ë° ì¤‘ìš”í•œ ë¡œì»¬ ë°ì´í„° ì €ì¥ì€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n[![Image](/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png)](//)\n\nì‹œì‘í•˜ê¸° ì „ì— ëª‡ ì´ˆ ë™ì•ˆ ì œ ê²Œì‹œë¬¼ì„ íŒ”ë¡œìš°í•˜ê³  ğŸ‘ í´ë©(clap)í•˜ì—¬ ë” ë§ì€ ì‚¬ëŒë“¤ì´ ì´ ìœ ìš©í•œ ë‚´ìš©ì„ ë°°ìš¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ì„¸ìš”.\n\n# API í˜¸ì¶œë¡œë¶€í„° SwiftDataë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ë¡œ ë°ì´í„° ì €ì¥í•˜ê¸°\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì½”ë“œë¡œ ë„˜ì–´ê°€ê¸°ë¡œ í•˜ê² ìŠµë‹ˆë‹¤. SwiftDataì— ìµìˆ™í•˜ì§€ ì•Šìœ¼ì‹  ê²½ìš°, ìƒˆë¡œìš´ ë‚´ìš©ì„ ìµíˆì‹œë ¤ë©´ ì´ ê¸°ì‚¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.\n\nìš°ë¦¬ëŠ” êµ¬ì¡°ì²´ì˜ ì´ë¦„ ë’¤ì— ì•½ì–´ DTO(Data Transfer Object)ë¥¼ ì¶”ê°€í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. DTOëŠ” í•œ ì‹œìŠ¤í…œì—ì„œ ë‹¤ë¥¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ìš°ë¦¬ì˜ ì˜ˆì œì—ì„œëŠ” API ì‘ë‹µì˜ ë°ì´í„°ë¥¼ JSONì—ì„œ SwiftData entityë¡œ ì „ì†¡í•˜ë ¤ê³  í•©ë‹ˆë‹¤. DTOëŠ” JSON ì‘ë‹µì„ ì¼ì‹œì ìœ¼ë¡œ ë³´ìœ í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ê³  Swift ê°ì²´ë¡œ ë³€í™˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œ ëª‡ ê°œì˜ ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” í•´ë‹¹ Swift ê°ì²´ë¥¼ SwiftData entityë¡œ ë³€í™˜í•  ê²ƒì…ë‹ˆë‹¤.\n\n```swift\n// PhotoDTO.swift\nimport Foundation\n\nstruct PhotoDTO: Identifiable, Codable {\n    let albumId: Int\n    let id: Int\n    let title: String\n    let url: String\n    let thumbnailUrl: String\n}\n```\n\nSwiftDataë¡œ ì‹œì‘í•˜ëŠ” ê¸°ì‚¬ë¥¼ ì½ìœ¼ì‹  ê²½ìš°, ì´ ë‚´ìš©ì€ ìµìˆ™í•˜ê²Œ ëŠê»´ì§ˆ ê²ƒì…ë‹ˆë‹¤. í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ì½”ë“œ ì¡°ê°ì„ ì¶”ê°€í–ˆëŠ”ë°, ê·¸ê²ƒì€ í¸ì˜ ì´ë‹ˆì…œë¼ì´ì €ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ DTOë¥¼ ì§ì ‘ ì „ë‹¬í•˜ì—¬ SwiftData entityë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```swift\n//  PhotoObject.swift\nimport Foundation\nimport SwiftData\n\n@Model\nclass PhotoObject {\n    var albumId: Int\n    @Attribute(.unique) var id: Int\n    var title: String\n    var url: String\n    var thumbnailUrl: String\n\n    init(albumId: Int, id: Int, title: String, url: String, thumbnailUrl: String) {\n        self.albumId = albumId\n        self.id = id\n        self.title = title\n        self.url = url\n        self.thumbnailUrl = thumbnailUrl\n    }\n\n    convenience init(item: PhotoDTO) {\n        self.init(\n            albumId: item.albumId,\n            id: item.id,\n            title: item.title,\n            url: item.url,\n            thumbnailUrl: item.thumbnailUrl\n        )\n    }\n}\n```\n\nì›¹ ì„œë¹„ìŠ¤ë„ ë§Œì•½ SwiftUIì—ì„œ API í˜¸ì¶œì„ ë§Œë“¤ê³  íŒŒì‹±í•œ ì ì´ ìˆë‹¤ë©´ ìµìˆ™í•  ê²ƒì…ë‹ˆë‹¤. ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì‚´í´ë³´ë©´, ê·¸ ê¸°ì‚¬ì—ì„œ ì‚´ì§ ìˆ˜ì •í•˜ì—¬ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ë³´ìœ í•œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. updateDataInDatabaseë¥¼ ì´ìš©í•´ API í˜¸ì¶œì—ì„œ ë°ì´í„°ë¥¼ íŒŒì‹±í•  ë•Œë§ˆë‹¤ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ìƒˆ ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. updateDataInDatabase í•¨ìˆ˜ëŠ” PhotoDTOë¥¼ SwiftData ì—”í‹°í‹°ë¡œ ë³€í™˜í•˜ê³  ê° ë ˆì½”ë“œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤. ë˜í•œ, IDë¡œ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš° ìƒˆ ë ˆì½”ë“œë¥¼ ìƒì„±í• ì§€ ë˜ëŠ” ê¸°ì¡´ ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í• ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ insert ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```swift\n//  WebService.swift\nimport Foundation\nimport SwiftData\n\nenum NetworkError: Error {\n    case badUrl\n    case invalidRequest\n    case badResponse\n    case badStatus\n    case failedToDecodeResponse\n}\n\nclass WebService {\n    @MainActor\n    func updateDataInDatabase(modelContext: ModelContext) async {\n        do {\n            let itemData: [PhotoDTO] = try await fetchData(fromUrl: \"https://jsonplaceholder.typicode.com/albums/1/photos\")\n            for eachItem in itemData {\n                let itemToStore = PhotoObject(item: eachItem)\n                modelContext.insert(itemToStore)\n            }\n        } catch {\n            print(\"Error fetching data\")\n            print(error.localizedDescription)\n        }\n    }\n\n    private func fetchData\u003cT: Codable\u003e(fromUrl: String) async throws -\u003e [T] {\n        guard let downloadedData: [T] = await WebService().downloadData(fromURL: fromUrl) else { return [] }\n\n        return downloadedData\n    }\n\n    private func downloadData\u003cT: Codable\u003e(fromURL: String) async -\u003e T? {\n        do {\n            guard let url = URL(string: fromURL) else { throw NetworkError.badUrl }\n            let (data, response) = try await URLSession.shared.data(from: url)\n            guard let response = response as? HTTPURLResponse else { throw NetworkError.badResponse }\n            guard response.statusCode \u003e= 200 \u0026\u0026 response.statusCode \u003c 300 else { throw NetworkError.badStatus }\n            guard let decodedResponse = try? JSONDecoder().decode(T.self, from: data) else { throw NetworkError.failedToDecodeResponse }\n\n            return decodedResponse\n        } catch NetworkError.badUrl {\n            print(\"There was an error creating the URL\")\n        } catch NetworkError.badResponse {\n            print(\"Did not get a valid response\")\n        } catch NetworkError.badStatus {\n            print(\"Did not get a 2xx status code from the response\")\n        } catch NetworkError.failedToDecodeResponse {\n            print(\"Failed to decode response into the given type\")\n        } catch {\n            print(\"An error occured downloading the data\")\n        }\n\n        return nil\n    }\n}\n```\n\në·° ë ˆì´ì–´ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ PhotoObjectsë¥¼ ì½ì–´ì™€ ëª©ë¡ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ ë‚´ì—ì„œëŠ” AsyncImage êµ¬ì„± ìš”ì†Œë¥¼ ì‚¬ìš©í•´ APIì—ì„œ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•˜ê³  í•´ë‹¹ í•­ëª©ì˜ IDë¥¼ ì´ë¯¸ì§€ ì˜†ì— í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ì˜ í•˜ë‹¨ì—ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ë³€í˜•ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. overlay ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆì„ ë•Œ ì§„í–‰ ìŠ¤í”¼ë„ˆë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. task ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆìœ¼ë©´ APIì—ì„œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ, refreshable ë³€í˜•ì„ ì‚¬ìš©í•´ ëª©ë¡ êµ¬ì„± ìš”ì†Œì— pull to refreshë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\"task\" ë° \"refreshable\" ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì—…ë°ì´íŠ¸ëœ ë°ì´í„°ë¥¼ í™•ì¸í•˜ë ¤ê³  í•  ë•Œë§Œ APIê°€ í˜¸ì¶œë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤(APIë¥¼ ì‹¤í–‰í•˜ëŠ” ë¹„ìš©ì„ ì¤„ì„). ì´ëŠ” ì•±ì„ ëŸ°ì¹­í•  ë•Œë§ˆë‹¤ APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹  ë‘ ë²ˆì§¸ë¡œ ë°ì´í„°ê°€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì™€ì§€ê²Œ í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\në˜í•œ ë¯¸ë¦¬ë³´ê¸°ê°€ ì¼ë°˜ì ì¸ ê²½ìš°ë³´ë‹¤ ì½”ë“œê°€ ë” ë§ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. SwiftDataì—ì„œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ë³´ëŠ” ê²ƒì€ ì¼ë°˜ì ì¸ ë·°ì—ì„œ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒë³´ë‹¤ ì¡°ê¸ˆ ë” ë³µì¡í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸°ì—ì„œëŠ” ë°ì´í„°ê°€ ì„ì‹œë¡œ ì €ì¥ë˜ëŠ” ìƒˆ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³ (ë¯¸ë¦¬ë³´ê¸° ì¥ì¹˜ì— ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ì§€ ì•Šê¸° ìœ„í•¨), ê·¸ëŸ° ë‹¤ìŒ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ê·¸ ì»¨í…Œì´ë„ˆì— ì €ì¥í•©ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸° ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë‹¤ë¥¸ ììŠµì„œë„ ë³¼ ìˆ˜ ìˆì§€ë§Œ ì´ëŠ” ì‘ë™í•˜ë©° ì „í˜€ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ì €ëŠ” ë¯¸ë¦¬ë³´ê¸°ì— ëŒ€í•œ ì½”ë“œë¥¼ ë¯¸ë¦¬ë³´ê¸° ìì²´ì— ê°€ê¹Œì´ ìœ ì§€í•˜ê³  ì‹¶ì–´í•˜ì—¬ ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\n```js\n//  ContentView.swift\nimport SwiftData\nimport SwiftUI\n\nstruct ContentView: View {\n    @Environment(\\.modelContext) var modelContext\n    @Query(sort: \\PhotoObject.id) var photos: [PhotoObject]\n\n    var body: some View {\n        List(photos) { item in\n            HStack {\n                Text(item.id, format: .number)\n                Spacer()\n\n                AsyncImage(url: URL(string: item.url)!) { imagePhase in\n                    switch imagePhase {\n                    case .empty:\n                        Image(systemName: \"ellipsis\")\n                    case .success(let returnedImage):\n                        returnedImage\n                            .resizable()\n                            .scaledToFit()\n                    case .failure:\n                        Image(systemName: \"xmark.circle\")\n                            .font(.headline)\n                            .foregroundColor(.red)\n                    @unknown default:\n                        Image(systemName: \"ellipsis\")\n                    }\n                }\n            }\n        }\n        .overlay {\n            if photos.isEmpty {\n                ProgressView()\n            }\n        }\n        .task {\n            if photos.isEmpty {\n                await WebService().updateDataInDatabase(modelContext: modelContext)\n            }\n        }\n        .refreshable {\n            await WebService().updateDataInDatabase(modelContext: modelContext)\n        }\n    }\n}\n\n#Preview {\n    do {\n        let config = ModelConfiguration(isStoredInMemoryOnly: true)\n        let container = try ModelContainer(for: PhotoObject.self, configurations: config)\n        let sampleObject = PhotoObject(\n            albumId: 1,\n            id: 1,\n            title: \"accusamus beatae ad facilis cum similique qui sunt\",\n            url: \"https://via.placeholder.com/600/92c952\",\n            thumbnailUrl: \"https://via.placeholder.com/150/92c952\"\n        )\n        container.mainContext.insert(sampleObject)\n\n        return ContentView().modelContainer(container)\n    } catch {\n        fatalError(\"Failed to create model container\")\n    }\n}\n```\n\nì´ ê¸€ì´ ìœ ìµí•˜ë‹¤ê³  ëŠë¼ì‹ ë‹¤ë©´, ì œë¥¼ íŒ”ë¡œìš°í•˜ëŠ” ê²ƒ, ì´ ê¸€ì— ğŸ‘ ë°˜ì‘ì„ ë³´ë‚´ëŠ” ê²ƒ, ë˜ëŠ” ê³µìœ í•˜ì—¬ ë‹¤ë¥¸ ì‚¬ëŒì´ ë” ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê²ƒë„ ê³ ë ¤í•´ì£¼ì„¸ìš”.\"\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\ní•´ë‹¹ ì£¼ì œì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ì„ ì•Œê³  ê³„ì‹ ë‹¤ë©´, ì´ ê²Œì‹œë¬¼ì— ë‹µê¸€ì„ ë‹¬ê±°ë‚˜ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ì—¬ ì˜ê²¬ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Native ëª¨ë°”ì¼ ê°œë°œì— ëŒ€í•´ ë” ë°°ìš°ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì‘ì„±í•œ ë‹¤ë¥¸ ê¸°ì‚¬ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: [https://medium.com/@jpmtech](https://medium.com/@jpmtech). Native ëª¨ë°”ì¼ ê°œë°œë¡œ ì œì‘ëœ ì•±ë“¤ì„ ë³´ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì œê°€ ë§Œë“  ì•±ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: [https://jpmtech.io/apps](https://jpmtech.io/apps). ì œ ì‘í’ˆì„ í™•ì¸í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!\n","ogImage":{"url":"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png"},"coverImage":"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png","tag":["Tech"],"readingTime":9},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003eì•± ì‚¬ìš©ìì—ê²Œ ì˜¤í”„ë¼ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ì•± ìš´ì˜ ë¹„ìš©ì„ ì¤„ì´ëŠ” ë° ì¤‘ìš”í•œ ë¡œì»¬ ë°ì´í„° ì €ì¥ì€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"//\" rel=\"nofollow\" target=\"_blank\"\u003e\u003cimg src=\"/assets/img/2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI_0.png\" alt=\"Image\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eì‹œì‘í•˜ê¸° ì „ì— ëª‡ ì´ˆ ë™ì•ˆ ì œ ê²Œì‹œë¬¼ì„ íŒ”ë¡œìš°í•˜ê³  ğŸ‘ í´ë©(clap)í•˜ì—¬ ë” ë§ì€ ì‚¬ëŒë“¤ì´ ì´ ìœ ìš©í•œ ë‚´ìš©ì„ ë°°ìš¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003ch1\u003eAPI í˜¸ì¶œë¡œë¶€í„° SwiftDataë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ë¡œ ë°ì´í„° ì €ì¥í•˜ê¸°\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì½”ë“œë¡œ ë„˜ì–´ê°€ê¸°ë¡œ í•˜ê² ìŠµë‹ˆë‹¤. SwiftDataì— ìµìˆ™í•˜ì§€ ì•Šìœ¼ì‹  ê²½ìš°, ìƒˆë¡œìš´ ë‚´ìš©ì„ ìµíˆì‹œë ¤ë©´ ì´ ê¸°ì‚¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” êµ¬ì¡°ì²´ì˜ ì´ë¦„ ë’¤ì— ì•½ì–´ DTO(Data Transfer Object)ë¥¼ ì¶”ê°€í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. DTOëŠ” í•œ ì‹œìŠ¤í…œì—ì„œ ë‹¤ë¥¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ìš°ë¦¬ì˜ ì˜ˆì œì—ì„œëŠ” API ì‘ë‹µì˜ ë°ì´í„°ë¥¼ JSONì—ì„œ SwiftData entityë¡œ ì „ì†¡í•˜ë ¤ê³  í•©ë‹ˆë‹¤. DTOëŠ” JSON ì‘ë‹µì„ ì¼ì‹œì ìœ¼ë¡œ ë³´ìœ í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ê³  Swift ê°ì²´ë¡œ ë³€í™˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œ ëª‡ ê°œì˜ ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” í•´ë‹¹ Swift ê°ì²´ë¥¼ SwiftData entityë¡œ ë³€í™˜í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-comment\"\u003e// PhotoDTO.swift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Foundation\n\n\u003cspan class=\"hljs-keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePhotoDTO\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eIdentifiable\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eCodable\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e albumId: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e id: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e title: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e url: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e thumbnailUrl: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSwiftDataë¡œ ì‹œì‘í•˜ëŠ” ê¸°ì‚¬ë¥¼ ì½ìœ¼ì‹  ê²½ìš°, ì´ ë‚´ìš©ì€ ìµìˆ™í•˜ê²Œ ëŠê»´ì§ˆ ê²ƒì…ë‹ˆë‹¤. í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ì½”ë“œ ì¡°ê°ì„ ì¶”ê°€í–ˆëŠ”ë°, ê·¸ê²ƒì€ í¸ì˜ ì´ë‹ˆì…œë¼ì´ì €ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ DTOë¥¼ ì§ì ‘ ì „ë‹¬í•˜ì—¬ SwiftData entityë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-comment\"\u003e//  PhotoObject.swift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Foundation\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e SwiftData\n\n\u003cspan class=\"hljs-meta\"\u003e@Model\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e albumId: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e\n    \u003cspan class=\"hljs-meta\"\u003e@Attribute\u003c/span\u003e(.unique) \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e id: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e title: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e url: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e thumbnailUrl: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ealbumId\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e, \u003cspan class=\"hljs-params\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e, \u003cspan class=\"hljs-params\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e, \u003cspan class=\"hljs-params\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e, \u003cspan class=\"hljs-params\"\u003ethumbnailUrl\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.albumId \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e albumId\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e id\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.title \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e title\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.url \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e url\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.thumbnailUrl \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e thumbnailUrl\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003econvenience\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eitem\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003ePhotoDTO\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e(\n            albumId: item.albumId,\n            id: item.id,\n            title: item.title,\n            url: item.url,\n            thumbnailUrl: item.thumbnailUrl\n        )\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì›¹ ì„œë¹„ìŠ¤ë„ ë§Œì•½ SwiftUIì—ì„œ API í˜¸ì¶œì„ ë§Œë“¤ê³  íŒŒì‹±í•œ ì ì´ ìˆë‹¤ë©´ ìµìˆ™í•  ê²ƒì…ë‹ˆë‹¤. ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì‚´í´ë³´ë©´, ê·¸ ê¸°ì‚¬ì—ì„œ ì‚´ì§ ìˆ˜ì •í•˜ì—¬ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ë³´ìœ í•œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. updateDataInDatabaseë¥¼ ì´ìš©í•´ API í˜¸ì¶œì—ì„œ ë°ì´í„°ë¥¼ íŒŒì‹±í•  ë•Œë§ˆë‹¤ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ìƒˆ ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. updateDataInDatabase í•¨ìˆ˜ëŠ” PhotoDTOë¥¼ SwiftData ì—”í‹°í‹°ë¡œ ë³€í™˜í•˜ê³  ê° ë ˆì½”ë“œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤. ë˜í•œ, IDë¡œ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš° ìƒˆ ë ˆì½”ë“œë¥¼ ìƒì„±í• ì§€ ë˜ëŠ” ê¸°ì¡´ ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í• ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ insert ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-comment\"\u003e//  WebService.swift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Foundation\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e SwiftData\n\n\u003cspan class=\"hljs-keyword\"\u003eenum\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNetworkError\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e badUrl\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e invalidRequest\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e badResponse\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e badStatus\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e failedToDecodeResponse\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eWebService\u003c/span\u003e {\n    \u003cspan class=\"hljs-meta\"\u003e@MainActor\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdateDataInDatabase\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003emodelContext\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eModelContext\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e itemData: [\u003cspan class=\"hljs-type\"\u003ePhotoDTO\u003c/span\u003e] \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e fetchData(fromUrl: \u003cspan class=\"hljs-string\"\u003e\"https://jsonplaceholder.typicode.com/albums/1/photos\"\u003c/span\u003e)\n            \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e eachItem \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e itemData {\n                \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e itemToStore \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003ePhotoObject\u003c/span\u003e(item: eachItem)\n                modelContext.insert(itemToStore)\n            }\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Error fetching data\"\u003c/span\u003e)\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(error.localizedDescription)\n        }\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetchData\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eCodable\u003c/span\u003e\u003e(\u003cspan class=\"hljs-params\"\u003efromUrl\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethrows\u003c/span\u003e -\u003e [\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e] {\n        \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e downloadedData: [\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e] \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eWebService\u003c/span\u003e().downloadData(fromURL: fromUrl) \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [] }\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e downloadedData\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edownloadData\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eCodable\u003c/span\u003e\u003e(\u003cspan class=\"hljs-params\"\u003efromURL\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e -\u003e \u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e? {\n        \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e url \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eURL\u003c/span\u003e(string: fromURL) \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badUrl }\n            \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e (data, response) \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eURLSession\u003c/span\u003e.shared.data(from: url)\n            \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e response \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e response \u003cspan class=\"hljs-keyword\"\u003eas?\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eHTTPURLResponse\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badResponse }\n            \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e response.statusCode \u003cspan class=\"hljs-operator\"\u003e\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e response.statusCode \u003cspan class=\"hljs-operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e300\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badStatus }\n            \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e decodedResponse \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etry?\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eJSONDecoder\u003c/span\u003e().decode(\u003cspan class=\"hljs-type\"\u003eT\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e, from: data) \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.failedToDecodeResponse }\n\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e decodedResponse\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badUrl {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"There was an error creating the URL\"\u003c/span\u003e)\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badResponse {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Did not get a valid response\"\u003c/span\u003e)\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.badStatus {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Did not get a 2xx status code from the response\"\u003c/span\u003e)\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eNetworkError\u003c/span\u003e.failedToDecodeResponse {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Failed to decode response into the given type\"\u003c/span\u003e)\n        } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n            \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"An error occured downloading the data\"\u003c/span\u003e)\n        }\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë·° ë ˆì´ì–´ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ PhotoObjectsë¥¼ ì½ì–´ì™€ ëª©ë¡ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ ë‚´ì—ì„œëŠ” AsyncImage êµ¬ì„± ìš”ì†Œë¥¼ ì‚¬ìš©í•´ APIì—ì„œ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•˜ê³  í•´ë‹¹ í•­ëª©ì˜ IDë¥¼ ì´ë¯¸ì§€ ì˜†ì— í‘œì‹œí•©ë‹ˆë‹¤. ëª©ë¡ì˜ í•˜ë‹¨ì—ëŠ” ëª‡ ê°€ì§€ ë‹¤ë¥¸ ë³€í˜•ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. overlay ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆì„ ë•Œ ì§„í–‰ ìŠ¤í”¼ë„ˆë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. task ë³€í˜•ì€ ëª©ë¡ì´ ë¹„ì–´ ìˆìœ¼ë©´ APIì—ì„œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ, refreshable ë³€í˜•ì„ ì‚¬ìš©í•´ ëª©ë¡ êµ¬ì„± ìš”ì†Œì— pull to refreshë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\"task\" ë° \"refreshable\" ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì—…ë°ì´íŠ¸ëœ ë°ì´í„°ë¥¼ í™•ì¸í•˜ë ¤ê³  í•  ë•Œë§Œ APIê°€ í˜¸ì¶œë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤(APIë¥¼ ì‹¤í–‰í•˜ëŠ” ë¹„ìš©ì„ ì¤„ì„). ì´ëŠ” ì•±ì„ ëŸ°ì¹­í•  ë•Œë§ˆë‹¤ APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹  ë‘ ë²ˆì§¸ë¡œ ë°ì´í„°ê°€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì™€ì§€ê²Œ í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë˜í•œ ë¯¸ë¦¬ë³´ê¸°ê°€ ì¼ë°˜ì ì¸ ê²½ìš°ë³´ë‹¤ ì½”ë“œê°€ ë” ë§ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. SwiftDataì—ì„œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ë³´ëŠ” ê²ƒì€ ì¼ë°˜ì ì¸ ë·°ì—ì„œ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒë³´ë‹¤ ì¡°ê¸ˆ ë” ë³µì¡í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸°ì—ì„œëŠ” ë°ì´í„°ê°€ ì„ì‹œë¡œ ì €ì¥ë˜ëŠ” ìƒˆ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³ (ë¯¸ë¦¬ë³´ê¸° ì¥ì¹˜ì— ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ì§€ ì•Šê¸° ìœ„í•¨), ê·¸ëŸ° ë‹¤ìŒ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ê·¸ ì»¨í…Œì´ë„ˆì— ì €ì¥í•©ë‹ˆë‹¤. ë¯¸ë¦¬ë³´ê¸° ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë‹¤ë¥¸ ììŠµì„œë„ ë³¼ ìˆ˜ ìˆì§€ë§Œ ì´ëŠ” ì‘ë™í•˜ë©° ì „í˜€ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ì €ëŠ” ë¯¸ë¦¬ë³´ê¸°ì— ëŒ€í•œ ì½”ë“œë¥¼ ë¯¸ë¦¬ë³´ê¸° ìì²´ì— ê°€ê¹Œì´ ìœ ì§€í•˜ê³  ì‹¶ì–´í•˜ì—¬ ë³„ë„ì˜ íŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e//  ContentView.swift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSwiftData\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSwiftUI\u003c/span\u003e\n\nstruct \u003cspan class=\"hljs-title class_\"\u003eContentView\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eView\u003c/span\u003e {\n    @\u003cspan class=\"hljs-title class_\"\u003eEnvironment\u003c/span\u003e(\\.\u003cspan class=\"hljs-property\"\u003emodelContext\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e modelContext\n    @\u003cspan class=\"hljs-title class_\"\u003eQuery\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esort\u003c/span\u003e: \\\u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ephotos\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e]\n\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ebody\u003c/span\u003e: some \u003cspan class=\"hljs-title class_\"\u003eView\u003c/span\u003e {\n        \u003cspan class=\"hljs-title class_\"\u003eList\u003c/span\u003e(photos) { item \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e\n            \u003cspan class=\"hljs-title class_\"\u003eHStack\u003c/span\u003e {\n                \u003cspan class=\"hljs-title class_\"\u003eText\u003c/span\u003e(item.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eformat\u003c/span\u003e: .\u003cspan class=\"hljs-property\"\u003enumber\u003c/span\u003e)\n                \u003cspan class=\"hljs-title class_\"\u003eSpacer\u003c/span\u003e()\n\n                \u003cspan class=\"hljs-title class_\"\u003eAsyncImage\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003estring\u003c/span\u003e: item.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e)!) { imagePhase \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e\n                    \u003cspan class=\"hljs-keyword\"\u003eswitch\u003c/span\u003e imagePhase {\n                    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e .\u003cspan class=\"hljs-property\"\u003eempty\u003c/span\u003e:\n                        \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esystemName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ellipsis\"\u003c/span\u003e)\n                    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e .\u003cspan class=\"hljs-title function_\"\u003esuccess\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e returnedImage):\n                        returnedImage\n                            .\u003cspan class=\"hljs-title function_\"\u003eresizable\u003c/span\u003e()\n                            .\u003cspan class=\"hljs-title function_\"\u003escaledToFit\u003c/span\u003e()\n                    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e .\u003cspan class=\"hljs-property\"\u003efailure\u003c/span\u003e:\n                        \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esystemName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"xmark.circle\"\u003c/span\u003e)\n                            .\u003cspan class=\"hljs-title function_\"\u003efont\u003c/span\u003e(.\u003cspan class=\"hljs-property\"\u003eheadline\u003c/span\u003e)\n                            .\u003cspan class=\"hljs-title function_\"\u003eforegroundColor\u003c/span\u003e(.\u003cspan class=\"hljs-property\"\u003ered\u003c/span\u003e)\n                    @unknown \u003cspan class=\"hljs-attr\"\u003edefault\u003c/span\u003e:\n                        \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003esystemName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ellipsis\"\u003c/span\u003e)\n                    }\n                }\n            }\n        }\n        .\u003cspan class=\"hljs-property\"\u003eoverlay\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e photos.\u003cspan class=\"hljs-property\"\u003eisEmpty\u003c/span\u003e {\n                \u003cspan class=\"hljs-title class_\"\u003eProgressView\u003c/span\u003e()\n            }\n        }\n        .\u003cspan class=\"hljs-property\"\u003etask\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e photos.\u003cspan class=\"hljs-property\"\u003eisEmpty\u003c/span\u003e {\n                \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eWebService\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eupdateDataInDatabase\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003emodelContext\u003c/span\u003e: modelContext)\n            }\n        }\n        .\u003cspan class=\"hljs-property\"\u003erefreshable\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eWebService\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eupdateDataInDatabase\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003emodelContext\u003c/span\u003e: modelContext)\n        }\n    }\n}\n\n#\u003cspan class=\"hljs-title class_\"\u003ePreview\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e config = \u003cspan class=\"hljs-title class_\"\u003eModelConfiguration\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eisStoredInMemoryOnly\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e)\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e container = \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eModelContainer\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003efor\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eself\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003econfigurations\u003c/span\u003e: config)\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e sampleObject = \u003cspan class=\"hljs-title class_\"\u003ePhotoObject\u003c/span\u003e(\n            \u003cspan class=\"hljs-attr\"\u003ealbumId\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"accusamus beatae ad facilis cum similique qui sunt\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"https://via.placeholder.com/600/92c952\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003ethumbnailUrl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"https://via.placeholder.com/150/92c952\"\u003c/span\u003e\n        )\n        container.\u003cspan class=\"hljs-property\"\u003emainContext\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einsert\u003c/span\u003e(sampleObject)\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eContentView\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003emodelContainer\u003c/span\u003e(container)\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n        \u003cspan class=\"hljs-title function_\"\u003efatalError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Failed to create model container\"\u003c/span\u003e)\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ê¸€ì´ ìœ ìµí•˜ë‹¤ê³  ëŠë¼ì‹ ë‹¤ë©´, ì œë¥¼ íŒ”ë¡œìš°í•˜ëŠ” ê²ƒ, ì´ ê¸€ì— ğŸ‘ ë°˜ì‘ì„ ë³´ë‚´ëŠ” ê²ƒ, ë˜ëŠ” ê³µìœ í•˜ì—¬ ë‹¤ë¥¸ ì‚¬ëŒì´ ë” ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê²ƒë„ ê³ ë ¤í•´ì£¼ì„¸ìš”.\"\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eí•´ë‹¹ ì£¼ì œì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ì„ ì•Œê³  ê³„ì‹ ë‹¤ë©´, ì´ ê²Œì‹œë¬¼ì— ë‹µê¸€ì„ ë‹¬ê±°ë‚˜ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ì—¬ ì˜ê²¬ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Native ëª¨ë°”ì¼ ê°œë°œì— ëŒ€í•´ ë” ë°°ìš°ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì‘ì„±í•œ ë‹¤ë¥¸ ê¸°ì‚¬ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: \u003ca href=\"https://medium.com/@jpmtech\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://medium.com/@jpmtech\u003c/a\u003e. Native ëª¨ë°”ì¼ ê°œë°œë¡œ ì œì‘ëœ ì•±ë“¤ì„ ë³´ê³  ì‹¶ë‹¤ë©´, ì—¬ê¸°ì—ì„œ ì œê°€ ë§Œë“  ì•±ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”: \u003ca href=\"https://jpmtech.io/apps\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://jpmtech.io/apps\u003c/a\u003e. ì œ ì‘í’ˆì„ í™•ì¸í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-UsingSwiftDatatoStoreDatafromaRemoteAPI"},"buildId":"YUMR4jSyk_WlOHHc7UfOk","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>