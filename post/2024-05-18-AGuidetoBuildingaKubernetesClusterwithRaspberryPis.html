<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ê°€ì´ë“œ | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ê°€ì´ë“œ | ui-station" data-gatsby-head="true"/><meta property="og:title" content="ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ê°€ì´ë“œ | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis" data-gatsby-head="true"/><meta name="twitter:title" content="ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ê°€ì´ë“œ | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-18 19:08" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-4f7b40c1114f0d09.js" defer=""></script><script src="/_next/static/bb_yO9GbCvdfc_n71SfUf/_buildManifest.js" defer=""></script><script src="/_next/static/bb_yO9GbCvdfc_n71SfUf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ê°€ì´ë“œ</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ê°€ì´ë“œ" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 18, 2024</span><span class="posts_reading_time__f7YPP">23<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>ëª‡ ë…„ ì „ì— ë¼ì¦ˆë² ë¦¬ íŒŒì´ì—ì„œ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¸íŒ…í–ˆì—ˆì–´ìš”. ë‹¹ì‹œ ë¼ì¦ˆë² ë¦¬ íŒŒì´ì˜ ARM ì•„í‚¤í…ì²˜ëŠ” ëª‡ ê°€ì§€ ì–´ë ¤ì›€ì„ ì•¼ê¸°í–ˆì£ . ARMì„ ì§€ì›í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì°¾ëŠ” ê±´ ì–´ë ¤ìš´ ê³¼ì œì˜€ëŠ”ë°, ê·¸ë˜ì„œ í•„ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì»¨í…Œì´ë„ˆë¥¼ ì§ì ‘ ë¹Œë“œí•´ì•¼ í–ˆë˜ ì ì´ ë§ì•˜ì–´ìš”.</p>
<p>ê·¸ëŸ°ë° ê·¸ ì´í›„ë¡œ ìƒí™©ì´ í¬ê²Œ ê°œì„ ë˜ì—ˆì–´ìš”! ìƒˆë¡œìš´ 64ë¹„íŠ¸ ë¼ì¦ˆë² ë¦¬ íŒŒì´ OSì˜ ë“±ì¥ê³¼ ARMì˜ ì €ë ´í•¨ìœ¼ë¡œ í´ë¼ìš°ë“œ ë°°í¬ì— ë§ì´ ì‚¬ìš©ë˜ëŠ” ì‚°ì—…ì—ì„œì˜ ì¸ê¸° ìƒìŠ¹ìœ¼ë¡œ, ë¼ì¦ˆë² ë¦¬ íŒŒì´ í´ëŸ¬ìŠ¤í„° êµ¬ì¶•ì´ í›¨ì”¬ ê°„ë‹¨í•´ì¡Œì–´ìš”. ì €ëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ì‹œ êµ¬ì¶•í•˜ê¸°ë¡œ ê²°ì •í–ˆê³ , 64ë¹„íŠ¸ OS ë° ìµœì‹  ë²„ì „ì˜ Kubernetesì™€ Dockerë¡œ ì—…ë°ì´íŠ¸í–ˆì–´ìš”.</p>
<p>ì—¬ëŸ¬ë¶„ì´ ìì²´ ë¼ì¦ˆë² ë¦¬ íŒŒì´ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œë¥¼ ì‘ì„±í–ˆì–´ìš”. ì§‘ì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•˜ëŠ” ì—¬ì •ì— ìœ ìš©í•˜ê¸¸ ë°”ëë‹ˆë‹¤! ğŸš€</p>
<h1>ìš”êµ¬ ì‚¬í•­</h1>
<p></p>
<p>í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” í•˜ë“œì›¨ì–´ê°€ í•„ìš”í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ì•„ìš”:</p>
<ul>
<li>ë¼ì¦ˆë² ë¦¬ íŒŒì´(ì €ëŠ” 4 ëª¨ë¸ Bë¥¼ ì‚¬ìš©í–ˆì–´ìš”)</li>
<li>SD ì¹´ë“œ 1ì¥ / ë¼ì¦ˆë² ë¦¬ íŒŒì´</li>
<li>ì´ë”ë„· ì¼€ì´ë¸” 1ê°œ / ë¼ì¦ˆë² ë¦¬ íŒŒì´</li>
<li>ë¼ìš°í„° ë°/ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜</li>
<li>USB í—ˆë¸Œ</li>
<li>(ì„ íƒ ì‚¬í•­) ì¼€ì´ìŠ¤</li>
</ul>
<p>ì´ ì•ˆë‚´ì„œëŠ” Kubernetes 1.26.6, Docker 24.0.2 ë° ë¼ì¦ˆë² ë¦¬ íŒŒì´ Lite(64ë¹„íŠ¸) ë¶ˆìì´ì— ë§ì¶° ì‘ì„±ë˜ì—ˆì–´ìš”.</p>
<h1>OS ì„¤ì •</h1>
<p></p>
<p>ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ëª¨ë“  Raspberry Piì— OSë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ Raspberry PiëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¶€íŒ…í•  ì‹œìŠ¤í…œì´ ì—†ìŠµë‹ˆë‹¤.</p>
<p>Raspberry Pi Imagerë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì‹­ì‹œì˜¤. ì´ í¸ë¦¬í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ Raspberry Piì˜ ë‹¤ìš´ë¡œë“œì™€ í”Œë˜ì‹±ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” Raspberry Pi OS (Debianì˜ íŒŒìƒ ë²„ì „)ì˜ 64ë¹„íŠ¸ í—¤ë“œë¦¬ìŠ¤ ë²„ì „ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>ìµœì‹  Raspberry Piì™€ í˜¸í™˜ë˜ëŠ”ì§€ í™•ì¸í•œ í›„ì— SD ì¹´ë“œë¥¼ í”Œë˜ì‹±í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p><img src="/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_0.png" alt="Raspberry Pi Imager"></p>
<p></p>
<p>SD ì¹´ë“œë¥¼ ì„ íƒí•˜ê³  OSë¥¼ í”Œë˜ì‹±í•˜ê¸° ì‹œì‘í•˜ì„¸ìš”. ëª¨ë“  SD ì¹´ë“œì— ëŒ€í•´ ì´ ì‘ì—…ì„ ì™„ë£Œí•  ë•Œê¹Œì§€ ë°˜ë³µí•´ì£¼ì„¸ìš”.</p>
<h2>SSH í™œì„±í™” ë° ê¸°ë³¸ ì‚¬ìš©ì ìƒì„±</h2>
<p>ê° Pië¥¼ ì›ê²©ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆê²Œë” SSHë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>SSHë¥¼ í™œì„±í™”í•˜ë ¤ë©´ SD ì¹´ë“œì˜ ë¶€íŠ¸ íŒŒí‹°ì…˜ì— í™•ì¥ì ì—†ì´ sshë¼ëŠ” ë¹ˆ íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.</p>
<p></p>
<p>ë¡œê·¸ì¸ ì‚¬ìš©ìë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´, SD ì¹´ë“œì˜ ë¶€íŒ… íŒŒí‹°ì…˜ì— userconfë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”. ì´ íŒŒì¼ì€ 'name':'encrypted-password'ë¡œ êµ¬ì„±ëœ í…ìŠ¤íŠ¸ í•œ ì¤„ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. ë¡œê·¸ì¸ ì‚¬ìš©ìë¡œ ë…¸ë“œë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ ì›í•˜ëŠ” ëŒ€ë¡œ ì‚¬ìš©í•˜ì…”ë„ ë©ë‹ˆë‹¤.</p>
<p>encrypted-passwordë¥¼ ìƒì„±í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ OpenSSLê³¼ í•¨ê»˜ ì‹¤í–‰í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">echo <span class="hljs-string">'{password}'</span> | openssl passwd -<span class="hljs-number">6</span> -stdin
</code></pre>
<p>íŒŒì¼ì„ ì €ì¥í•˜ê³  SD ì¹´ë“œë¥¼ ì œê±°í•˜ì„¸ìš”. ê·¸ë¦¬ê³  ë¼ì¦ˆë² ë¦¬ íŒŒì´ì— SD ì¹´ë“œë¥¼ ì‚½ì…í•˜ê³  ì „ì›ì„ ì¼œì„¸ìš”. ê°œì¸ ë„¤íŠ¸ì›Œí¬ì˜ ë¼ìš°í„°ë‚˜ ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
<p></p>
<h1>ì²« ë²ˆì§¸ ë¶€íŒ… ë° ì´ˆê¸° êµ¬ì„±</h1>
<p>ë¼ì¦ˆë² ë¦¬ íŒŒì´ì˜ IPë¥¼ ì–»ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ë¼ìš°í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì œ ê²½ìš°, OpenWrtë¥¼ ì‚¬ìš©í•˜ë©° DHCP ì„¤ì •ì—ì„œ ê¸°ì–µí•˜ê¸° ì‰¬ìš´ ì •ì  IPë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>
<p><img src="/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_1.png" alt="image"></p>
<p>ì²« ë²ˆì§¸ ë…¸ë“œì— SSHë¡œ ì—°ê²°í•©ë‹ˆë‹¤. ì´ ë…¸ë“œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ì œì–´ í‰ë©´ì„ ì‹¤í–‰í•˜ëŠ” ë§ˆìŠ¤í„° ë…¸ë“œê°€ ë©ë‹ˆë‹¤. ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ í„°ë„ë§í•œ í›„ì— ì„¤ì •ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>
<p></p>
<p>ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë¥¼ sudo ê·¸ë£¹ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js">sudo usermod -aG sudo node
</code></pre>
<p>ì´ì œ rasp-configë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ node ì‚¬ìš©ìë¡œ ìë™ ë¶€íŒ…í•˜ë„ë¡ ì„¤ì •í•´ë´…ì‹œë‹¤.</p>
<pre><code class="hljs language-js">sudo raspi-config
</code></pre>
<p></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/1*XG-oT3YeryzngA-Xv3JY9w.gif" alt="image"></p>
<p>â€œSystem Optionsâ€ â†’ â€œBoot / Auto Loginâ€ ìœ¼ë¡œ ì´ë™í•˜ì—¬ â€œConsole Autologinâ€ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
<h1>Docker &#x26; Kubernetes ì´ˆê¸° ì„¤ì •</h1>
<p>ê¸°ë³¸ì ìœ¼ë¡œ cgroup ë©”ëª¨ë¦¬ ì˜µì…˜ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìœ¼ë¯€ë¡œ Dockerê°€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì œí•œí•  ìˆ˜ ìˆë„ë¡ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤. /boot/cmdline.txtë¥¼ ì—´ê³  cgroup_enable=memory cgroup_memory=1ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
<p></p>
<p>ì´ì œ ìš°ë¦¬ì˜ apt ì €ì¥ì†Œë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  Kubernetes ì €ì¥ì†Œë¥¼ í¬í•¨ì‹œí‚¬ ì°¨ë¡€ì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">curl -s <span class="hljs-attr">https</span>:<span class="hljs-comment">//packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -</span>
echo <span class="hljs-string">"deb http://apt.kubernetes.io/ kubernetes-xenial main"</span> | sudo tee -a /etc/apt/sources.<span class="hljs-property">list</span>.<span class="hljs-property">d</span>/kubernetes.<span class="hljs-property">list</span>
sudo apt update &#x26;&#x26; sudo apt upgrade -y
</code></pre>
<p>Docker ì„¤ì¹˜:</p>
<pre><code class="hljs language-js">curl -sSL <span class="hljs-attr">https</span>:<span class="hljs-comment">//get.docker.com | sh</span>
sudo usermod -aG docker node
</code></pre>
<p></p>
<p>Kubernetes 1.20ë¶€í„°ëŠ” dockershimì´ íê¸°ë˜ê³  ìˆìŠµë‹ˆë‹¤. Mirantisì—ì„œ ì œê³µí•˜ëŠ” cri-dockerdë¼ëŠ” í´ëŸ¬ìŠ¤í„°ìš© ì˜¤í”ˆ ì†ŒìŠ¤ CRIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. cri-dockerdë¥¼ ì„¤ì¹˜í•˜ê³  ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">wget <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/Mirantis/cri-dockerd/releases/download/v0.3.4/cri-dockerd-0.3.4.arm64.tgz</span>
tar -xvzf cri-dockerd-<span class="hljs-number">0.3</span><span class="hljs-number">.4</span>.<span class="hljs-property">arm64</span>.<span class="hljs-property">tgz</span>
sudo mv cri-dockerd/cri-dockerd /usr/bin/cri-dockerd
sudo chmod +x /usr/bin/cri-dockerd
wget <span class="hljs-attr">https</span>:<span class="hljs-comment">//raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.service</span>
wget <span class="hljs-attr">https</span>:<span class="hljs-comment">//raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.socket</span>
sudo mv cri-docker.<span class="hljs-property">service</span> /etc/systemd/system/
sudo mv cri-docker.<span class="hljs-property">socket</span> /etc/systemd/system/
sudo systemctl enable cri-docker.<span class="hljs-property">service</span>
sudo systemctl enable cri-docker.<span class="hljs-property">socket</span>
sudo systemctl start cri-docker.<span class="hljs-property">service</span>
sudo systemctl start cri-docker.<span class="hljs-property">socket</span>
</code></pre>
<p>Kubernetes ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ìœ„í•´ ë…¸ë“œì—ì„œ swapì„ ë¹„í™œì„±í™”í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">sudo apt-get update &#x26;&#x26; sudo apt-get install dphys-swapfile &#x26;&#x26; sudo dphys-swapfile swapoff &#x26;&#x26; sudo dphys-swapfile uninstall &#x26;&#x26; sudo systemctl disable dphys-swapfile
</code></pre>
<p></p>
<p>ë§Œì•½ cri-dockerd ì„¤ì •ì— ë¬¸ì œê°€ ë°œìƒí•˜ë©´, ì´ ì•ˆë‚´ì„œë¥¼ í™•ì¸í•´ë³´ì„¸ìš”. ì²˜ìŒì— ì‘ì„±í–ˆì„ ë•Œì™€ ë‹¬ë¼ì§„ ì‚¬í•­ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”.</p>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, Kubernetesë¥¼ ì„¤ì¹˜í•´ë´…ì‹œë‹¤!</p>
<pre><code class="hljs language-js">sudo apt install -y kubelet=<span class="hljs-number">1.26</span><span class="hljs-number">.6</span>-<span class="hljs-number">00</span> kubeadm=<span class="hljs-number">1.26</span><span class="hljs-number">.6</span>-<span class="hljs-number">00</span> kubectl=<span class="hljs-number">1.26</span><span class="hljs-number">.6</span>-<span class="hljs-number">00</span>
sudo apt-mark hold kubelet kubeadm kubectl
</code></pre>
<p>ì´ ê°€ì´ë“œì—ì„œëŠ” ëª¨ë“  ê²ƒì´ 1.26.6ì—ì„œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í–ˆì–´ìš”. 1.24 ì´ì „ ë²„ì „ì€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šì„ ê±°ì˜ˆìš”. ì´ëŸ¬í•œ íŒ¨í‚¤ì§€ë¥¼ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šë„ë¡ í‘œì‹œí•  ê±°ì—ìš”.</p>
<p></p>
<p>ì°¨ì„ ìœ¼ë¡œ, ëœì²˜ ë©ìŠ¤ì—ì„œ ë§Œë“  k3sëŠ” ê°€ë²¼ìš´ ì˜µì…˜ìœ¼ë¡œ ì¢‹ì€ ì„ íƒì¼ ê²ƒì…ë‹ˆë‹¤. ê·¸ ì¤‘ ì¼ë¶€ ì¥ì ì€ ì‘ì€ ì‹¤í–‰ íŒŒì¼ í¬ê¸°, ë§¤ìš° ë‚®ì€ ìì› ìš”êµ¬ ì‚¬í•­ ë° ARMìš©ìœ¼ë¡œ ìµœì í™”ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” ì´ë¥¼ í…ŒìŠ¤íŠ¸í•´ë³´ì§€ ì•Šì•˜ì§€ë§Œ, ì´í›„ì— ë¹„ìŠ·í•œ ì„¤ì •ì´ ë  ê²ƒìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤.</p>
<p>ì´ì œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì´ˆê¸°í™”í•  ì‹œê°„ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ InitConfiguration ë° ClusterConfiguration ì„¤ì •ì´ í¬í•¨ëœ íŒŒì¼ì„ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-attr">apiVersion</span>: kubeadm.<span class="hljs-property">k8s</span>.<span class="hljs-property">io</span>/v1beta3
<span class="hljs-attr">bootstrapTokens</span>:
- <span class="hljs-attr">groups</span>:
  - <span class="hljs-attr">system</span>:<span class="hljs-attr">bootstrappers</span>:<span class="hljs-attr">kubeadm</span>:<span class="hljs-keyword">default</span>-node-token
  <span class="hljs-attr">token</span>: {token}
  <span class="hljs-attr">usages</span>:
  - signing
  - authentication
<span class="hljs-attr">kind</span>: <span class="hljs-title class_">InitConfiguration</span>
<span class="hljs-attr">localAPIEndpoint</span>:
  <span class="hljs-attr">advertiseAddress</span>: <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.100</span>
  <span class="hljs-attr">bindPort</span>: <span class="hljs-number">6443</span>
<span class="hljs-attr">nodeRegistration</span>:
  <span class="hljs-attr">criSocket</span>: <span class="hljs-attr">unix</span>:<span class="hljs-comment">///var/run/cri-dockerd.sock</span>
  <span class="hljs-attr">imagePullPolicy</span>: <span class="hljs-title class_">IfNotPresent</span>
  <span class="hljs-attr">name</span>: node-<span class="hljs-number">0</span>
---
<span class="hljs-attr">apiVersion</span>: kubeadm.<span class="hljs-property">k8s</span>.<span class="hljs-property">io</span>/v1beta3
<span class="hljs-attr">kind</span>: <span class="hljs-title class_">ClusterConfiguration</span>
<span class="hljs-attr">networking</span>:
  <span class="hljs-attr">podSubnet</span>: <span class="hljs-string">"10.244.0.0/16"</span> # --pod-network-cidr
</code></pre>
<p>ì´ íŒŒì¼ì—ëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì˜ ì„¤ì •ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. criSocketì´ cri-dockerdë¥¼ ì‚¬ìš©í•˜ê³ , ë‚˜ì¤‘ì— ë„¤íŠ¸ì›Œí¬ CIDRì„ ì„¤ì •í•´ë‘ì—ˆìŒì„ ì£¼ëª©í•˜ì‹­ì‹œì˜¤.</p>
<p></p>
<p>ì´ ë…¸ë“œì—ì„œ ì œì–´ í‰ë©´ì„ ì´ˆê¸°í™”í•˜ë ¤ë©´ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”.</p>
<pre><code class="hljs language-js">sudo kubeadm init --config kubeadm-config.<span class="hljs-property">yaml</span>
</code></pre>
<p>ì´ ëª…ë ¹ì€ ìƒˆ ë…¸ë“œë¥¼ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€í•˜ëŠ” ì„¤ì • ë° kube-configë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
<p>ëª…ë ¹ì—ì„œ ì§€ì‹œí•˜ëŠ” ë°©ë²•ì— ë”°ë¼ kube-configë¥¼ ì„¤ì •í•˜ê³ , ì›Œí¬ìŠ¤í…Œì´ì…˜ì— kube-configì™€ ê°€ì… ëª…ë ¹ì„ ë³µì‚¬í•˜ê³  ì €ì¥í•˜ì„¸ìš”. ë‚˜ì¤‘ì— í•„ìš”í•  ê²ƒì´ë‹ˆê¹Œìš”!</p>
<p></p>
<h1>í´ëŸ¬ìŠ¤í„° ë„¤íŠ¸ì›Œí‚¹</h1>
<p>ì´ì œ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë„¤íŠ¸ì›Œí‚¹ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. Podë“¤ì´ ë…¸ë“œ ê°„ì— ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ (CNI ë˜ëŠ” ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œë„ ë¶ˆë¦¼)ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p>ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì€ IP ì£¼ì†Œ í• ë‹¹, DNS í•´ê²° ë° ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ì™€ ê°™ì€ ê¸°ëŠ¥ì„ Podì— ì œê³µí•©ë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ëŠ” ì´ë¥¼ ìœ„í•´ Flannelì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p></p>
<p>ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ë‹¤ìŒì„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js">kubectl apply -f <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml</span>
</code></pre>
<p>ê·¸ê²Œ ë‹¤ì—ìš”! ì´ì œ ë§ˆìŠ¤í„° ë…¸ë“œê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ, í´ëŸ¬ìŠ¤í„°ì— ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê¸° ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”. ì´ì „ì— ì¶œë ¥ëœ ì¡°ì¸ ëª…ë ¹ì„ ê¸°ì–µí•˜ê³  ìˆë‚˜ìš”? ì´ì œ ê·¸ê²ƒì´ í•„ìš”í•  ê±°ì—ìš”.</p>
<h1>í´ëŸ¬ìŠ¤í„°ì— ìƒˆë¡œìš´ ë…¸ë“œ ì¶”ê°€í•˜ê¸°</h1>
<p></p>
<p>í´ëŸ¬ìŠ¤í„°ì— ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ê½¤ ê°„ë‹¨í•©ë‹ˆë‹¤. ë§ì€ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê²½ìš°ì—ëŠ” tmuxì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ ëª…ë ¹ì„ ë‹¤ì¤‘í™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<p>"ì²« ë²ˆì§¸ ë¶€íŒ… ë° ì´ˆê¸° ì„¤ì •"ì„ ì™„ë£Œí•˜ê³  "ë„ì»¤ ë° ì¿ ë²„ë„¤í‹°ìŠ¤ ì´ˆê¸° ì„¤ì •"ì„ ì§„í–‰í•˜ì„¸ìš”. ì„œë¡œ ë‹¤ë¥¸ Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ ì„¤ì¹˜í•˜ëŠ” ë‹¨ê³„ ì´í›„ì— ì‘ì—…ì„ ì¤‘ì§€í•˜ì„¸ìš”. ì´ ì‹œì ì—ì„œ ì´ì „ì— ì‹¤í–‰í•œ kubeadm join ëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. cri-socket ë° node-name ì˜µì…˜ì„ í¬í•¨í•˜ì—¬ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js">sudo kubeadm join <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.100</span>:<span class="hljs-number">6443</span> --token {token} --discovery-token-ca-cert-hash {hash} --cri-socket <span class="hljs-attr">unix</span>:<span class="hljs-comment">///var/run/cri-dockerd.sock --node-name {name}</span>
</code></pre>
<p>ì´ì œ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ëª¨ë“  ë…¸ë“œê°€ í´ëŸ¬ìŠ¤í„°ì— ê°€ì…í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
<p></p>
<pre><code class="hljs language-js">> kubectl get nodesë¥¼ watchí•©ë‹ˆë‹¤.
ì´ì œ ê·€í•˜ì˜ í´ëŸ¬ìŠ¤í„°ê°€ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤! ê·¸ëŸ¬ë‚˜ <span class="hljs-variable constant_">SSH</span>ë¥¼ í†µí•´ê°€ ì•„ë‹Œ ì›Œí¬ìŠ¤í…Œì´ì…˜ì—ì„œ ì•¡ì„¸ìŠ¤í•˜ê³  ì‹¶ì„ ê²ƒì…ë‹ˆë‹¤. ì»´í“¨í„°ì—ì„œ ì´ì „ì— ì„¤ì •í•œ kube-configë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê¸°ë³¸ kube-configëŠ” ê´€ë¦¬ì ê¶Œí•œì„ ë¶€ì—¬í•˜ë©° ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.

ë¨¼ì € í”„ë¡œí•„ì— êµ¬ì„±ì„ ë‚´ë³´ëƒ…ë‹ˆë‹¤.
</code></pre>
<p></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">KUBECONFIG</span>=~<span class="hljs-regexp">/.kube/</span>config
</code></pre>
<p>ì»¨í…ìŠ¤íŠ¸ ì„¤ì •:</p>
<pre><code class="hljs language-js">kubectl config use-context kubernetes-admin@kubernetes
</code></pre>
<p>ì´ì œ ì›ê²©ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<p></p>
<pre><code class="hljs language-js">> kubectl cluster-info
ì¿ ë²„ë„¤í‹°ìŠ¤ ì œì–´ í‰ë©´ì´ <span class="hljs-attr">https</span>:<span class="hljs-comment">//10.0.0.100:6443 ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.</span>
<span class="hljs-title class_">CoreDNS</span>ì´ <span class="hljs-attr">https</span>:<span class="hljs-comment">//10.0.0.100:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.</span>

ë” ë§ì€ ë””ë²„ê¹… ë° ì§„ë‹¨ì„ ìœ„í•´ <span class="hljs-string">'kubectl cluster-info dump'</span>ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
</code></pre>
<h1>ë„êµ¬ ì„¤ì •</h1>
<p>ì´ì œ ë°´ìì´ë¼ í´ëŸ¬ìŠ¤í„°ë¥¼ ì¼ë°˜ì—ì„œ ë©‹ì§€ê²Œ ì—…ê·¸ë ˆì´ë“œí•´ ë´…ì‹œë‹¤. ìƒˆ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì‰½ê²Œ ë°°í¬í•˜ê³  í´ëŸ¬ìŠ¤í„°ë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ë„êµ¬ë¥¼ ì„¤ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ArgoCD, Prometheus ë° Grafana ì„¤ì¹˜ ë°©ë²•ì„ ì•ˆë‚´í•˜ê² ìŠµë‹ˆë‹¤! ì´ ì„¸ ê°€ì§€ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ê°€ ìš°ë¦¬ì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ìŒ ìˆ˜ì¤€ìœ¼ë¡œ ëŒì–´ì˜¬ë¦½ë‹ˆë‹¤.</p>
<p>ê³„ì†í•˜ê¸° ì „ì—, ì´ëŸ¬í•œ ë„êµ¬ë“¤ì— ëŒ€í•œ ëª¨ë“  ì„¤ì • ë³€ê²½ ì‚¬í•­ì„ ì¶”ì í•˜ê¸° ìœ„í•œ ì›ê²© git ì €ì¥ì†Œë¥¼ ë§Œë“¤ì–´ ë³´ì‹œê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. íŠ¹íˆ ArgoCDë¥¼ ì‚¬ìš©í•  ë•Œ, ê° ë„êµ¬ë‚˜ ì¶”ê°€ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ë°°í¬í•  ë•Œë§ˆë‹¤ ê±°ê¸°ë¥¼ í†µí•´ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<p></p>
<h1>ArgoCD</h1>
<p>ê° ë„êµ¬ì— ëŒ€í•´ Helmì„ ë¦¬ì†ŒìŠ¤ í…œí”Œë¦¿íŒ… ë„êµ¬ë¡œ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ìµœì‹  ë²„ì „(ë˜ëŠ” ì ì–´ë„ Helm v3)ì„ ì„¤ì¹˜í•˜ê³  ArgoCD ì €ì¥ì†Œë¥¼ ì¶”ê°€í•´ ë´…ì‹œë‹¤.</p>
<pre><code class="hljs language-js">helm repo add argo <span class="hljs-attr">https</span>:<span class="hljs-comment">//argoproj.github.io/argo-helm</span>
</code></pre>
<p>Values íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.</p>
<p></p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">serviceType:</span> <span class="hljs-string">NodePort</span>
  <span class="hljs-attr">httpNodePort:</span> <span class="hljs-number">30080</span>
  <span class="hljs-attr">httpsNodePort:</span> <span class="hljs-number">30443</span>
</code></pre>
<p>ì´ íŒŒì¼ì€ ì°¨íŠ¸ì˜ ì„¤ì • ì¤‘ í•˜ë‚˜ë¥¼ ì¬ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì„œë¹„ìŠ¤ë¥¼ ClusterIP ëŒ€ì‹  NodePortë¡œ ì‹¤í–‰í•˜ë„ë¡ ë³€ê²½í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì§€ì •í•œ í¬íŠ¸ë¥¼ ì™¸ë¶€ì—ì„œ ì—‘ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ê°œì¸ ë„¤íŠ¸ì›Œí¬ì—ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì„œë¹„ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ì‹­ì‹œì˜¤.</p>
<pre><code class="hljs language-js">helm install argocd -n argocd -f values.<span class="hljs-property">yaml</span> argo/argocd
</code></pre>
<p></p>
<p>ê·¸ëŸ¼ ê´€ë¦¬ì ì‚¬ìš©ìì˜ ê¸°ë³¸ ì•”í˜¸ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath=<span class="hljs-string">"{.data.password}"</span> | base64 -d
</code></pre>
<p>OpenWrtë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„°ì— í˜¸ìŠ¤íŠ¸ ì´ë¦„ í•­ëª©ì„ ì„¤ì •í•˜ê³  <a href="https://cluster.home:30443%EC%97%90%EC%84%9C" rel="nofollow" target="_blank">https://cluster.home:30443ì—ì„œ</a> ë¡œê·¸ì¸ í˜ì´ì§€ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_2.png" alt="ê·¸ë¦¼"></p>
<p></p>
<p>ArgoCDì— ë¡œê·¸ì¸í•˜ê³ , ê³§ ëŒì•„ì˜¬ê²Œìš”.</p>
<p><img src="/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_3.png" alt="image"></p>
<h1>Prometheus</h1>
<p>ìš°ë¦¬ëŠ” í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ì •ë³´ ìˆ˜ì§‘ì„ ìœ„í•´ íƒ€ì„ ì‹œë¦¬ì¦ˆ ë©”íŠ¸ë¦­ ì„œë²„ë¡œ Prometheusë¥¼ ì‚¬ìš©í•  ê±°ì—ìš”.</p>
<p></p>
<p>ì„¤ì¹˜í•˜ê¸° ì „ì— Prometheusê°€ ì¿¼ë¦¬ ë°ì´í„°ë¥¼ ì €ì¥í•  ì§€ì†ì ì¸ ë³¼ë¥¨ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì§‘ í´ëŸ¬ìŠ¤í„°ì—ì„œëŠ” ì˜ˆë¹„ USB ë“œë¼ì´ë¸Œë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆì§€ë§Œ ì›í•˜ëŠ” ê²ƒì„ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ë³¼ë¥¨ì„ ì„¤ì •í•œ ë‹¨ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ìš°ë¦¬ì˜ ë³¼ë¥¨ì„ ìœ„í•œ ê²½ë¡œë¥¼ ë§Œë“¤ê³  ì‹¤ìˆ˜ë¥¼ ë§‰ê¸° ìœ„í•´ ë³€ê²½ ì‚¬í•­ì„ ë°˜ì˜í•´ì•¼ í•  fstabì˜ ë°±ì—…ì„ ë§Œë“­ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">sudo mkdir /mnt/usb
sudo cp /etc/fstab /etc/fstab.<span class="hljs-property">bak</span>
</code></pre>
<p>ì¥ì¹˜ë¥¼ ì—°ê²°í•œ ë‹¤ìŒ fstabì„ ë³€ê²½ ë‚´ìš©ê³¼ í•¨ê»˜ ìˆ˜ì •í•©ë‹ˆë‹¤.</p>
<p></p>
<p>/dev/sda1 /mnt/usb vfat defaults,uid=youruid,gid=yourgid,dmask=002,fmask=113 0 0</p>
<p>ì´ì œ ìš°ë¦¬ ë…¸ë“œ ì‚¬ìš©ìì˜ ì‚¬ìš©ì ë° ê·¸ë£¹ ì„¤ì •ìœ¼ë¡œ ì¥ì¹˜ë¥¼ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤.</p>
<p>sudo mount -o uid=youruid,gid=yourgid,dmask=002,fmask=113 /dev/sdX1 /mnt/usb</p>
<p>ì´ì œ ìš°ë¦¬ëŠ” PersistentVolumeê³¼ PersistentVolumeChainì„ ê°€ì§„ Kubernetes ìì›ì„ ìƒì„±í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<p></p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolume</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-usb-pv</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">local</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">manual</span>
  <span class="hljs-attr">capacity:</span>
    <span class="hljs-attr">storage:</span> {<span class="hljs-string">deviceì˜</span> <span class="hljs-string">í¬ê¸°</span>}<span class="hljs-string">Gi</span>
  <span class="hljs-attr">accessModes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span>
  <span class="hljs-attr">persistentVolumeReclaimPolicy:</span> <span class="hljs-string">Retain</span>
  <span class="hljs-attr">hostPath:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">"/mnt/usb"</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolumeClaim</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-usb-pvc</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">manual</span>
  <span class="hljs-attr">accessModes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span>
  <span class="hljs-attr">resources:</span>
    <span class="hljs-attr">requests:</span>
      <span class="hljs-attr">storage:</span> {<span class="hljs-string">deviceì˜</span> <span class="hljs-string">í¬ê¸°</span>}<span class="hljs-string">Gi</span>
</code></pre>
<p>ë§Œì•½ git ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš© ì¤‘ì´ë¼ë©´, ì´ íŒŒì¼ë“¤ì„ template ë””ë ‰í† ë¦¬ ì•ˆì— ìƒˆë¡œìš´ Helm Chartì— ìœ„ì¹˜ì‹œì¼œì£¼ì„¸ìš”. ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ ê³„ì† ì§„í–‰í•´ë´ìš”.</p>
<p>ì´ì œ í”„ë¡œë©”í…Œìš°ìŠ¤ì™€ í•¨ê»˜ ì°¨íŠ¸ë¥¼ ì„¤ì •í•´ë´…ì‹œë‹¤.</p>
<pre><code class="hljs language-bash">helm create prometheus
</code></pre>
<p></p>
<p>Chart.yamlì— Prometheus subchartë¥¼ ì¢…ì†ì„±ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
    <span class="hljs-attr">version:</span> <span class="hljs-number">22.7</span><span class="hljs-number">.0</span>
    <span class="hljs-attr">repository:</span> <span class="hljs-string">https://prometheus-community.github.io/helm-charts</span>
</code></pre>
<p>ì´ì œ ìƒˆ PV ë° PVCë¥¼ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ì„ ì„¤ì •í•˜ê³ , ì¼ë¶€ ê¶Œí•œì„ ìˆ˜ì •í•˜ê³  ì„œë²„ë¥¼ ë§ˆìŠ¤í„° ë…¸ë“œì—ë§Œ ë°°í¬í•˜ë„ë¡ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">prometheus:</span>
  <span class="hljs-attr">alertmanager:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">prometheus-pushgateway:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">configmapReload:</span>
    <span class="hljs-attr">prometheus:</span>
      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">server:</span>
    <span class="hljs-attr">nodeSelector:</span>
      <span class="hljs-attr">kubernetes.io/hostname:</span> { <span class="hljs-string">master</span> <span class="hljs-string">node</span> }
    <span class="hljs-attr">securityContext:</span>
      <span class="hljs-attr">runAsUser:</span> { <span class="hljs-string">userid</span> }
      <span class="hljs-attr">runAsNonRoot:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">runAsGroup:</span> { <span class="hljs-string">groupid</span> }
      <span class="hljs-attr">fsGroup:</span> { <span class="hljs-string">fsid</span> }
    <span class="hljs-attr">persistentVolume:</span>
      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">existingClaim:</span> <span class="hljs-string">"prometheus-usb-pvc"</span>
      <span class="hljs-attr">volumeName:</span> <span class="hljs-string">"prometheus-usb-pv"</span>
</code></pre>
<p></p>
<p>ì¼ë¶€ ì¶”ê°€ ì„œë¹„ìŠ¤ë¥¼ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ alertmanager, pushgateway, ê·¸ë¦¬ê³  configmapreloadê°€ ì´ì— í•´ë‹¹í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ë‹¤ë¥¸ ì‹œê°„ì— ì´ë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ì •ìƒì ìœ¼ë¡œ í–‰ë™í•˜ëŠ” ê²½ìš° ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë„êµ¬ì¸ Alert Managerì…ë‹ˆë‹¤.</p>
<p>ì´ì œ ArgoCDë¡œ ëŒì•„ê°€ "ìƒˆ ì•±"ì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. Prometheusë¼ëŠ” ì´ë¦„ì˜ ì•±ì„ ë§Œë“¤ê³  ê¹ƒ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì†ŒìŠ¤ë¡œ ì¶”ê°€í•˜ê³  ê²½ë¡œë¥¼ ì„ íƒí•˜ì„¸ìš”. Grafanaë„ ë‚˜ì¤‘ì— ì´ ì‘ì—…ì„ í•´ì•¼í•˜ë¯€ë¡œ ì„œë¡œ ë‹¤ë¥¸ ê²½ë¡œì— ìœ ì§€í•˜ì„¸ìš”.</p>
<p><img src="/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_4.png" alt="Image"></p>
<p>ìƒì„±í•œ ì‚¬ìš©ì ì •ì˜ ì„¤ì •ì„ ì„¤ì •í•  ê°’ íŒŒì¼ì„ ì„ íƒí•œ ë‹¤ìŒ ì•±ì„ ìƒì„±í•˜ì„¸ìš”. ìˆ˜ë™ìœ¼ë¡œ ë™ê¸°í™”í•˜ë„ë¡ ì§€ì •í•œ ê²½ìš° ë™ê¸°í™”ê°€ í•„ìš”í•  ë•Œ ì´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì—…ê·¸ë ˆì´ë“œí•  ë•Œ ì‚¬ìš©í•˜ê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ ë¦´ë¦¬ìŠ¤í•˜ê³ ì í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ê·¸ ì™¸ì—ëŠ” í™ˆ í”„ë¡œì íŠ¸ì— ê°€ì¥ ì í•©í•œ CDìš© ìë™ ë™ê¸°í™” ë°©ë²•ì´ ìœ ìš©í•©ë‹ˆë‹¤.</p>
<p></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/1*Ice0ZJGARkN6BdzAl1nGDQ.gif" alt="Grafana"></p>
<p>ë§ˆì°¬ê°€ì§€ë¡œ Prometheusì™€ ë¹„ìŠ·í•˜ê²Œ, git ë ˆí¬ì§€í† ë¦¬ì—ì„œ ìƒˆë¡œìš´ Helm ì°¨íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”.</p>
<pre><code class="hljs language-js">helm create grafana
</code></pre>
<p></p>
<p>í—¬ë¦„ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js">helm repo add grafana <span class="hljs-attr">https</span>:<span class="hljs-comment">//grafana.github.io/helm-charts</span>
helm repo update
</code></pre>
<p>ë¦¬í¬ì§€í† ë¦¬ë¥¼ í†µí•´ ì°¨íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-attr">dependencies</span>:
  - <span class="hljs-attr">name</span>: grafana
    <span class="hljs-attr">version</span>: <span class="hljs-number">6.57</span><span class="hljs-number">.4</span>
    <span class="hljs-attr">repository</span>: <span class="hljs-attr">https</span>:<span class="hljs-comment">//grafana.github.io/helm-charts</span>
</code></pre>
<p></p>
<p>values.yaml íŒŒì¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-attr">grafana</span>: <span class="hljs-attr">service</span>: <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>;
<span class="hljs-attr">type</span>: <span class="hljs-title class_">NodePort</span>;
<span class="hljs-attr">nodePort</span>: <span class="hljs-number">30180</span>;
</code></pre>
<p>ê·¸ëŸ° ë‹¤ìŒ ì´ì „ê³¼ ê°™ì´ ArgoCDë¥¼ í†µí•´ Grafanaë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”. ë™ê¸°í™”ë¥¼ ì§„í–‰í•˜ê³  ì´ì œ ë‘ ê°œê°€ ëª¨ë‘ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<p></p>
<p>Grafanaë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¨¼ì € ì–»ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">kubectl get secret --namespace monitoring grafana -o jsonpath=<span class="hljs-string">"{.data.admin-password}"</span> | base64 --decode ; echo
</code></pre>
<p>ì¶œë ¥ì—ì„œ ë‚˜ì˜¨ ê´€ë¦¬ì ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.</p>
<p><img src="/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_6.png" alt="ì´ë¯¸ì§€"></p>
<p></p>
<p>ì´ì œ Prometheus ë°ì´í„° ì›ë³¸ì„ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤. Prometheus ì„œë¹„ìŠ¤ URLì€ ëª¨ë‹ˆí„°ë§ì„ ì„¤ì •í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì¸ í´ëŸ¬ìŠ¤í„°ì—ì„œ <a href="http://prometheus-server.monitoring.svc.cluster.local%EB%A1%9C" rel="nofollow" target="_blank">http://prometheus-server.monitoring.svc.cluster.localë¡œ</a> ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. "Administration" â†’ "Data sources" â†’ "Add new data source" ì•„ë˜ë¡œ ì´ë™í•œ ë‹¤ìŒ URLì„ ì¶”ê°€í•˜ê³  "Save &#x26; Test"ë¥¼ í´ë¦­í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/1*VphOqjzSh30E4dKrnf2Q2A.gif" alt="image"></p>
<p>ë§Œì•½ ìš°ë¦¬ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ê°„ë‹¨íˆ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ Grafana Labsì—ì„œ ì œê³µí•˜ëŠ” ëŒ€ì‹œë³´ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìš°ë¦¬ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê°„ë‹¨í•œ ë·°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/1*AIw7esBCtaz5koK_uJTU-w.gif" alt="image"></p>
<p></p>
<h1>ë‹¤ìŒ ë‹¨ê³„</h1>
<h2>ì‚¬ìš©ì ì •ì˜ Docker ì´ë¯¸ì§€</h2>
<p>ë‹¹ì‹ ì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ì˜í•˜ëŠ” ì¤‘ìš”í•œ ë‹¨ê³„ë¡œ, ê³µê°œ Docker.io ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì—†ëŠ” ì»¨í…Œì´ë„ˆë‚˜ ì‚¬ìš©ì ì •ì˜ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì— ë§ì€ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•  ê³„íšì´ë¼ë©´, ë¬´ë£Œ í‹°ì–´ Docker Hubì˜ ì œí•œì„ í”¼í•˜ê¸° ìœ„í•´ ê°œì¸ ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ëŠ” GCPì˜ Artifacts Repositoryì™€ ê°™ì€ í´ë¼ìš°ë“œ ê³µê¸‰ì—…ì²´ë‚˜ Harborì™€ ê°™ì€ ì˜¤í”ˆ ì†ŒìŠ¤ docker ì €ì¥ì†Œë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>í´ëŸ¬ìŠ¤í„° ìë™í™”</h2>
<p></p>
<p>ì´ ì•ˆë‚´ì„œëŠ” êµìœ¡ ëª©ì ì´ë‚˜ ì†Œê·œëª¨ ê°œì¸ í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•  ë•Œ ì´ìƒì ì¸ Kubernetes í´ëŸ¬ìŠ¤í„° ì„¤ì •ì— ëŒ€í•œ ìˆ˜ë™ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ í”„ë¡œë•ì…˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•˜ê±°ë‚˜ ì´ ì•ˆë‚´ì„œì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ê²½ìš°, Ansibleê³¼ ê°™ì€ ìë™í™” ë„êµ¬ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ë ‡ê²Œí•˜ë©´ ë” íš¨ìœ¨ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•˜ë©° ê´€ë¦¬í•˜ê¸° ì‰¬ìš´ ë°°í¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<h1>ê²°ë¡ </h1>
<p>Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šì„ ìˆ˜ ìˆì§€ë§Œ í•œ ë²ˆ ì™„ë£Œë˜ë©´ ì¼ë°˜ì ì¸ ë…ë¦½í˜• ì„œë²„ë¥¼ ë›°ì–´ë„˜ëŠ” í™•ì¥ ê°€ëŠ¥í•œ í™˜ê²½ì„ ì œê³µí•˜ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>Raspberry PiëŠ” ë¹„ìš©ì´ ì €ë ´í•˜ê³  ì „ë ¥ ì†Œë¹„ê°€ ë‚®ì€ ì˜µì…˜ì´ì§€ë§Œ, ë” í° ì‘ìš© í”„ë¡œê·¸ë¨ì— ëŒ€í•œ í™•ì¥ì„±ì´ ì—¬ì „íˆ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤. Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ ì¥ì ì€ ë™ì¼í•œ í•˜ë“œì›¨ì–´ë§Œ ì‹¤í–‰í•˜ëŠ” ê²ƒì— ì œí•œë°›ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ë…¸ë“œë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ë‹¤ì–‘í•œ í•˜ë“œì›¨ì–´ë¥¼ í˜¼í•©í•˜ì—¬ í•„ìš”ì— ë§ê²Œ Raspberry Pië‚˜ ì„œë²„ì™€ ê°™ì€ ë‹¤ì–‘í•œ í•˜ë“œì›¨ì–´ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>
<p></p>
<p>ê·¸ê²ƒì´ ì¢‹ì€ ì‹œì‘ì ì´ ë˜ì—ˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤. ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ê°€ì´ë“œ","description":"","date":"2024-05-18 19:08","slug":"2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis","content":"\nëª‡ ë…„ ì „ì— ë¼ì¦ˆë² ë¦¬ íŒŒì´ì—ì„œ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¸íŒ…í–ˆì—ˆì–´ìš”. ë‹¹ì‹œ ë¼ì¦ˆë² ë¦¬ íŒŒì´ì˜ ARM ì•„í‚¤í…ì²˜ëŠ” ëª‡ ê°€ì§€ ì–´ë ¤ì›€ì„ ì•¼ê¸°í–ˆì£ . ARMì„ ì§€ì›í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì°¾ëŠ” ê±´ ì–´ë ¤ìš´ ê³¼ì œì˜€ëŠ”ë°, ê·¸ë˜ì„œ í•„ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì»¨í…Œì´ë„ˆë¥¼ ì§ì ‘ ë¹Œë“œí•´ì•¼ í–ˆë˜ ì ì´ ë§ì•˜ì–´ìš”.\n\nê·¸ëŸ°ë° ê·¸ ì´í›„ë¡œ ìƒí™©ì´ í¬ê²Œ ê°œì„ ë˜ì—ˆì–´ìš”! ìƒˆë¡œìš´ 64ë¹„íŠ¸ ë¼ì¦ˆë² ë¦¬ íŒŒì´ OSì˜ ë“±ì¥ê³¼ ARMì˜ ì €ë ´í•¨ìœ¼ë¡œ í´ë¼ìš°ë“œ ë°°í¬ì— ë§ì´ ì‚¬ìš©ë˜ëŠ” ì‚°ì—…ì—ì„œì˜ ì¸ê¸° ìƒìŠ¹ìœ¼ë¡œ, ë¼ì¦ˆë² ë¦¬ íŒŒì´ í´ëŸ¬ìŠ¤í„° êµ¬ì¶•ì´ í›¨ì”¬ ê°„ë‹¨í•´ì¡Œì–´ìš”. ì €ëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ì‹œ êµ¬ì¶•í•˜ê¸°ë¡œ ê²°ì •í–ˆê³ , 64ë¹„íŠ¸ OS ë° ìµœì‹  ë²„ì „ì˜ Kubernetesì™€ Dockerë¡œ ì—…ë°ì´íŠ¸í–ˆì–´ìš”.\n\nì—¬ëŸ¬ë¶„ì´ ìì²´ ë¼ì¦ˆë² ë¦¬ íŒŒì´ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œë¥¼ ì‘ì„±í–ˆì–´ìš”. ì§‘ì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•˜ëŠ” ì—¬ì •ì— ìœ ìš©í•˜ê¸¸ ë°”ëë‹ˆë‹¤! ğŸš€\n\n# ìš”êµ¬ ì‚¬í•­\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\ní´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” í•˜ë“œì›¨ì–´ê°€ í•„ìš”í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ì•„ìš”:\n\n- ë¼ì¦ˆë² ë¦¬ íŒŒì´(ì €ëŠ” 4 ëª¨ë¸ Bë¥¼ ì‚¬ìš©í–ˆì–´ìš”)\n- SD ì¹´ë“œ 1ì¥ / ë¼ì¦ˆë² ë¦¬ íŒŒì´\n- ì´ë”ë„· ì¼€ì´ë¸” 1ê°œ / ë¼ì¦ˆë² ë¦¬ íŒŒì´\n- ë¼ìš°í„° ë°/ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜\n- USB í—ˆë¸Œ\n- (ì„ íƒ ì‚¬í•­) ì¼€ì´ìŠ¤\n\nì´ ì•ˆë‚´ì„œëŠ” Kubernetes 1.26.6, Docker 24.0.2 ë° ë¼ì¦ˆë² ë¦¬ íŒŒì´ Lite(64ë¹„íŠ¸) ë¶ˆìì´ì— ë§ì¶° ì‘ì„±ë˜ì—ˆì–´ìš”.\n\n# OS ì„¤ì •\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ëª¨ë“  Raspberry Piì— OSë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ Raspberry PiëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¶€íŒ…í•  ì‹œìŠ¤í…œì´ ì—†ìŠµë‹ˆë‹¤.\n\nRaspberry Pi Imagerë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì‹­ì‹œì˜¤. ì´ í¸ë¦¬í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ Raspberry Piì˜ ë‹¤ìš´ë¡œë“œì™€ í”Œë˜ì‹±ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” Raspberry Pi OS (Debianì˜ íŒŒìƒ ë²„ì „)ì˜ 64ë¹„íŠ¸ í—¤ë“œë¦¬ìŠ¤ ë²„ì „ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\nìµœì‹  Raspberry Piì™€ í˜¸í™˜ë˜ëŠ”ì§€ í™•ì¸í•œ í›„ì— SD ì¹´ë“œë¥¼ í”Œë˜ì‹±í•´ì•¼ í•©ë‹ˆë‹¤.\n\n![Raspberry Pi Imager](/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_0.png)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nSD ì¹´ë“œë¥¼ ì„ íƒí•˜ê³  OSë¥¼ í”Œë˜ì‹±í•˜ê¸° ì‹œì‘í•˜ì„¸ìš”. ëª¨ë“  SD ì¹´ë“œì— ëŒ€í•´ ì´ ì‘ì—…ì„ ì™„ë£Œí•  ë•Œê¹Œì§€ ë°˜ë³µí•´ì£¼ì„¸ìš”.\n\n## SSH í™œì„±í™” ë° ê¸°ë³¸ ì‚¬ìš©ì ìƒì„±\n\nê° Pië¥¼ ì›ê²©ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆê²Œë” SSHë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\nSSHë¥¼ í™œì„±í™”í•˜ë ¤ë©´ SD ì¹´ë“œì˜ ë¶€íŠ¸ íŒŒí‹°ì…˜ì— í™•ì¥ì ì—†ì´ sshë¼ëŠ” ë¹ˆ íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në¡œê·¸ì¸ ì‚¬ìš©ìë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´, SD ì¹´ë“œì˜ ë¶€íŒ… íŒŒí‹°ì…˜ì— userconfë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”. ì´ íŒŒì¼ì€ 'name':'encrypted-password'ë¡œ êµ¬ì„±ëœ í…ìŠ¤íŠ¸ í•œ ì¤„ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. ë¡œê·¸ì¸ ì‚¬ìš©ìë¡œ ë…¸ë“œë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ ì›í•˜ëŠ” ëŒ€ë¡œ ì‚¬ìš©í•˜ì…”ë„ ë©ë‹ˆë‹¤.\n\nencrypted-passwordë¥¼ ìƒì„±í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ OpenSSLê³¼ í•¨ê»˜ ì‹¤í–‰í•˜ì„¸ìš”:\n\n```js\necho '{password}' | openssl passwd -6 -stdin\n```\n\níŒŒì¼ì„ ì €ì¥í•˜ê³  SD ì¹´ë“œë¥¼ ì œê±°í•˜ì„¸ìš”. ê·¸ë¦¬ê³  ë¼ì¦ˆë² ë¦¬ íŒŒì´ì— SD ì¹´ë“œë¥¼ ì‚½ì…í•˜ê³  ì „ì›ì„ ì¼œì„¸ìš”. ê°œì¸ ë„¤íŠ¸ì›Œí¬ì˜ ë¼ìš°í„°ë‚˜ ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ì²« ë²ˆì§¸ ë¶€íŒ… ë° ì´ˆê¸° êµ¬ì„±\n\në¼ì¦ˆë² ë¦¬ íŒŒì´ì˜ IPë¥¼ ì–»ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ë¼ìš°í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì œ ê²½ìš°, OpenWrtë¥¼ ì‚¬ìš©í•˜ë©° DHCP ì„¤ì •ì—ì„œ ê¸°ì–µí•˜ê¸° ì‰¬ìš´ ì •ì  IPë¥¼ ë§Œë“­ë‹ˆë‹¤.\n\n![image](/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_1.png)\n\nì²« ë²ˆì§¸ ë…¸ë“œì— SSHë¡œ ì—°ê²°í•©ë‹ˆë‹¤. ì´ ë…¸ë“œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ì œì–´ í‰ë©´ì„ ì‹¤í–‰í•˜ëŠ” ë§ˆìŠ¤í„° ë…¸ë“œê°€ ë©ë‹ˆë‹¤. ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ í„°ë„ë§í•œ í›„ì— ì„¤ì •ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë¥¼ sudo ê·¸ë£¹ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.\n\n```js\nsudo usermod -aG sudo node\n```\n\nì´ì œ rasp-configë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ node ì‚¬ìš©ìë¡œ ìë™ ë¶€íŒ…í•˜ë„ë¡ ì„¤ì •í•´ë´…ì‹œë‹¤.\n\n```js\nsudo raspi-config\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![image](https://miro.medium.com/v2/resize:fit:1400/1*XG-oT3YeryzngA-Xv3JY9w.gif)\n\nâ€œSystem Optionsâ€ â†’ â€œBoot / Auto Loginâ€ ìœ¼ë¡œ ì´ë™í•˜ì—¬ â€œConsole Autologinâ€ì„ ì„ íƒí•´ì£¼ì„¸ìš”.\n\n# Docker \u0026 Kubernetes ì´ˆê¸° ì„¤ì •\n\nê¸°ë³¸ì ìœ¼ë¡œ cgroup ë©”ëª¨ë¦¬ ì˜µì…˜ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìœ¼ë¯€ë¡œ Dockerê°€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì œí•œí•  ìˆ˜ ìˆë„ë¡ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤. /boot/cmdline.txtë¥¼ ì—´ê³  cgroup_enable=memory cgroup_memory=1ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ì œ ìš°ë¦¬ì˜ apt ì €ì¥ì†Œë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  Kubernetes ì €ì¥ì†Œë¥¼ í¬í•¨ì‹œí‚¬ ì°¨ë¡€ì…ë‹ˆë‹¤.\n\n```js\ncurl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -\necho \"deb http://apt.kubernetes.io/ kubernetes-xenial main\" | sudo tee -a /etc/apt/sources.list.d/kubernetes.list\nsudo apt update \u0026\u0026 sudo apt upgrade -y\n```\n\nDocker ì„¤ì¹˜:\n\n```js\ncurl -sSL https://get.docker.com | sh\nsudo usermod -aG docker node\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nKubernetes 1.20ë¶€í„°ëŠ” dockershimì´ íê¸°ë˜ê³  ìˆìŠµë‹ˆë‹¤. Mirantisì—ì„œ ì œê³µí•˜ëŠ” cri-dockerdë¼ëŠ” í´ëŸ¬ìŠ¤í„°ìš© ì˜¤í”ˆ ì†ŒìŠ¤ CRIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. cri-dockerdë¥¼ ì„¤ì¹˜í•˜ê³  ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”:\n\n```js\nwget https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.4/cri-dockerd-0.3.4.arm64.tgz\ntar -xvzf cri-dockerd-0.3.4.arm64.tgz\nsudo mv cri-dockerd/cri-dockerd /usr/bin/cri-dockerd\nsudo chmod +x /usr/bin/cri-dockerd\nwget https://raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.service\nwget https://raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.socket\nsudo mv cri-docker.service /etc/systemd/system/\nsudo mv cri-docker.socket /etc/systemd/system/\nsudo systemctl enable cri-docker.service\nsudo systemctl enable cri-docker.socket\nsudo systemctl start cri-docker.service\nsudo systemctl start cri-docker.socket\n```\n\nKubernetes ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ìœ„í•´ ë…¸ë“œì—ì„œ swapì„ ë¹„í™œì„±í™”í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.\n\n```js\nsudo apt-get update \u0026\u0026 sudo apt-get install dphys-swapfile \u0026\u0026 sudo dphys-swapfile swapoff \u0026\u0026 sudo dphys-swapfile uninstall \u0026\u0026 sudo systemctl disable dphys-swapfile\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në§Œì•½ cri-dockerd ì„¤ì •ì— ë¬¸ì œê°€ ë°œìƒí•˜ë©´, ì´ ì•ˆë‚´ì„œë¥¼ í™•ì¸í•´ë³´ì„¸ìš”. ì²˜ìŒì— ì‘ì„±í–ˆì„ ë•Œì™€ ë‹¬ë¼ì§„ ì‚¬í•­ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, Kubernetesë¥¼ ì„¤ì¹˜í•´ë´…ì‹œë‹¤!\n\n```js\nsudo apt install -y kubelet=1.26.6-00 kubeadm=1.26.6-00 kubectl=1.26.6-00\nsudo apt-mark hold kubelet kubeadm kubectl\n```\n\nì´ ê°€ì´ë“œì—ì„œëŠ” ëª¨ë“  ê²ƒì´ 1.26.6ì—ì„œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í–ˆì–´ìš”. 1.24 ì´ì „ ë²„ì „ì€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šì„ ê±°ì˜ˆìš”. ì´ëŸ¬í•œ íŒ¨í‚¤ì§€ë¥¼ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šë„ë¡ í‘œì‹œí•  ê±°ì—ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì°¨ì„ ìœ¼ë¡œ, ëœì²˜ ë©ìŠ¤ì—ì„œ ë§Œë“  k3sëŠ” ê°€ë²¼ìš´ ì˜µì…˜ìœ¼ë¡œ ì¢‹ì€ ì„ íƒì¼ ê²ƒì…ë‹ˆë‹¤. ê·¸ ì¤‘ ì¼ë¶€ ì¥ì ì€ ì‘ì€ ì‹¤í–‰ íŒŒì¼ í¬ê¸°, ë§¤ìš° ë‚®ì€ ìì› ìš”êµ¬ ì‚¬í•­ ë° ARMìš©ìœ¼ë¡œ ìµœì í™”ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” ì´ë¥¼ í…ŒìŠ¤íŠ¸í•´ë³´ì§€ ì•Šì•˜ì§€ë§Œ, ì´í›„ì— ë¹„ìŠ·í•œ ì„¤ì •ì´ ë  ê²ƒìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤.\n\nì´ì œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì´ˆê¸°í™”í•  ì‹œê°„ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ InitConfiguration ë° ClusterConfiguration ì„¤ì •ì´ í¬í•¨ëœ íŒŒì¼ì„ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.\n\n```js\napiVersion: kubeadm.k8s.io/v1beta3\nbootstrapTokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: {token}\n  usages:\n  - signing\n  - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  advertiseAddress: 10.0.0.100\n  bindPort: 6443\nnodeRegistration:\n  criSocket: unix:///var/run/cri-dockerd.sock\n  imagePullPolicy: IfNotPresent\n  name: node-0\n---\napiVersion: kubeadm.k8s.io/v1beta3\nkind: ClusterConfiguration\nnetworking:\n  podSubnet: \"10.244.0.0/16\" # --pod-network-cidr\n```\n\nì´ íŒŒì¼ì—ëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì˜ ì„¤ì •ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. criSocketì´ cri-dockerdë¥¼ ì‚¬ìš©í•˜ê³ , ë‚˜ì¤‘ì— ë„¤íŠ¸ì›Œí¬ CIDRì„ ì„¤ì •í•´ë‘ì—ˆìŒì„ ì£¼ëª©í•˜ì‹­ì‹œì˜¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ ë…¸ë“œì—ì„œ ì œì–´ í‰ë©´ì„ ì´ˆê¸°í™”í•˜ë ¤ë©´ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”.\n\n```js\nsudo kubeadm init --config kubeadm-config.yaml\n```\n\nì´ ëª…ë ¹ì€ ìƒˆ ë…¸ë“œë¥¼ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€í•˜ëŠ” ì„¤ì • ë° kube-configë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\n\nëª…ë ¹ì—ì„œ ì§€ì‹œí•˜ëŠ” ë°©ë²•ì— ë”°ë¼ kube-configë¥¼ ì„¤ì •í•˜ê³ , ì›Œí¬ìŠ¤í…Œì´ì…˜ì— kube-configì™€ ê°€ì… ëª…ë ¹ì„ ë³µì‚¬í•˜ê³  ì €ì¥í•˜ì„¸ìš”. ë‚˜ì¤‘ì— í•„ìš”í•  ê²ƒì´ë‹ˆê¹Œìš”!\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# í´ëŸ¬ìŠ¤í„° ë„¤íŠ¸ì›Œí‚¹\n\nì´ì œ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë„¤íŠ¸ì›Œí‚¹ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. Podë“¤ì´ ë…¸ë“œ ê°„ì— ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ (CNI ë˜ëŠ” ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œë„ ë¶ˆë¦¼)ì´ í•„ìš”í•©ë‹ˆë‹¤.\n\në„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì€ IP ì£¼ì†Œ í• ë‹¹, DNS í•´ê²° ë° ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ì™€ ê°™ì€ ê¸°ëŠ¥ì„ Podì— ì œê³µí•©ë‹ˆë‹¤.\n\nìš°ë¦¬ëŠ” ì´ë¥¼ ìœ„í•´ Flannelì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ë‹¤ìŒì„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.\n\n```js\nkubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n```\n\nê·¸ê²Œ ë‹¤ì—ìš”! ì´ì œ ë§ˆìŠ¤í„° ë…¸ë“œê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ, í´ëŸ¬ìŠ¤í„°ì— ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê¸° ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”. ì´ì „ì— ì¶œë ¥ëœ ì¡°ì¸ ëª…ë ¹ì„ ê¸°ì–µí•˜ê³  ìˆë‚˜ìš”? ì´ì œ ê·¸ê²ƒì´ í•„ìš”í•  ê±°ì—ìš”.\n\n# í´ëŸ¬ìŠ¤í„°ì— ìƒˆë¡œìš´ ë…¸ë“œ ì¶”ê°€í•˜ê¸°\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\ní´ëŸ¬ìŠ¤í„°ì— ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ê½¤ ê°„ë‹¨í•©ë‹ˆë‹¤. ë§ì€ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê²½ìš°ì—ëŠ” tmuxì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ ëª…ë ¹ì„ ë‹¤ì¤‘í™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n\"ì²« ë²ˆì§¸ ë¶€íŒ… ë° ì´ˆê¸° ì„¤ì •\"ì„ ì™„ë£Œí•˜ê³  \"ë„ì»¤ ë° ì¿ ë²„ë„¤í‹°ìŠ¤ ì´ˆê¸° ì„¤ì •\"ì„ ì§„í–‰í•˜ì„¸ìš”. ì„œë¡œ ë‹¤ë¥¸ Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ ì„¤ì¹˜í•˜ëŠ” ë‹¨ê³„ ì´í›„ì— ì‘ì—…ì„ ì¤‘ì§€í•˜ì„¸ìš”. ì´ ì‹œì ì—ì„œ ì´ì „ì— ì‹¤í–‰í•œ kubeadm join ëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. cri-socket ë° node-name ì˜µì…˜ì„ í¬í•¨í•˜ì—¬ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.\n\n```js\nsudo kubeadm join 10.0.0.100:6443 --token {token} --discovery-token-ca-cert-hash {hash} --cri-socket unix:///var/run/cri-dockerd.sock --node-name {name}\n```\n\nì´ì œ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ëª¨ë“  ë…¸ë“œê°€ í´ëŸ¬ìŠ¤í„°ì— ê°€ì…í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n\u003e kubectl get nodesë¥¼ watchí•©ë‹ˆë‹¤.\nì´ì œ ê·€í•˜ì˜ í´ëŸ¬ìŠ¤í„°ê°€ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤! ê·¸ëŸ¬ë‚˜ SSHë¥¼ í†µí•´ê°€ ì•„ë‹Œ ì›Œí¬ìŠ¤í…Œì´ì…˜ì—ì„œ ì•¡ì„¸ìŠ¤í•˜ê³  ì‹¶ì„ ê²ƒì…ë‹ˆë‹¤. ì»´í“¨í„°ì—ì„œ ì´ì „ì— ì„¤ì •í•œ kube-configë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê¸°ë³¸ kube-configëŠ” ê´€ë¦¬ì ê¶Œí•œì„ ë¶€ì—¬í•˜ë©° ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.\n\në¨¼ì € í”„ë¡œí•„ì— êµ¬ì„±ì„ ë‚´ë³´ëƒ…ë‹ˆë‹¤.\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nexport KUBECONFIG=~/.kube/config\n```\n\nì»¨í…ìŠ¤íŠ¸ ì„¤ì •:\n\n```js\nkubectl config use-context kubernetes-admin@kubernetes\n```\n\nì´ì œ ì›ê²©ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n\u003e kubectl cluster-info\nì¿ ë²„ë„¤í‹°ìŠ¤ ì œì–´ í‰ë©´ì´ https://10.0.0.100:6443 ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.\nCoreDNSì´ https://10.0.0.100:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.\n\në” ë§ì€ ë””ë²„ê¹… ë° ì§„ë‹¨ì„ ìœ„í•´ 'kubectl cluster-info dump'ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n```\n\n# ë„êµ¬ ì„¤ì •\n\nì´ì œ ë°´ìì´ë¼ í´ëŸ¬ìŠ¤í„°ë¥¼ ì¼ë°˜ì—ì„œ ë©‹ì§€ê²Œ ì—…ê·¸ë ˆì´ë“œí•´ ë´…ì‹œë‹¤. ìƒˆ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì‰½ê²Œ ë°°í¬í•˜ê³  í´ëŸ¬ìŠ¤í„°ë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ë„êµ¬ë¥¼ ì„¤ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ArgoCD, Prometheus ë° Grafana ì„¤ì¹˜ ë°©ë²•ì„ ì•ˆë‚´í•˜ê² ìŠµë‹ˆë‹¤! ì´ ì„¸ ê°€ì§€ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ê°€ ìš°ë¦¬ì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ìŒ ìˆ˜ì¤€ìœ¼ë¡œ ëŒì–´ì˜¬ë¦½ë‹ˆë‹¤.\n\nê³„ì†í•˜ê¸° ì „ì—, ì´ëŸ¬í•œ ë„êµ¬ë“¤ì— ëŒ€í•œ ëª¨ë“  ì„¤ì • ë³€ê²½ ì‚¬í•­ì„ ì¶”ì í•˜ê¸° ìœ„í•œ ì›ê²© git ì €ì¥ì†Œë¥¼ ë§Œë“¤ì–´ ë³´ì‹œê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. íŠ¹íˆ ArgoCDë¥¼ ì‚¬ìš©í•  ë•Œ, ê° ë„êµ¬ë‚˜ ì¶”ê°€ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ë°°í¬í•  ë•Œë§ˆë‹¤ ê±°ê¸°ë¥¼ í†µí•´ ì¶”ê°€í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ArgoCD\n\nê° ë„êµ¬ì— ëŒ€í•´ Helmì„ ë¦¬ì†ŒìŠ¤ í…œí”Œë¦¿íŒ… ë„êµ¬ë¡œ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ìµœì‹  ë²„ì „(ë˜ëŠ” ì ì–´ë„ Helm v3)ì„ ì„¤ì¹˜í•˜ê³  ArgoCD ì €ì¥ì†Œë¥¼ ì¶”ê°€í•´ ë´…ì‹œë‹¤.\n\n```js\nhelm repo add argo https://argoproj.github.io/argo-helm\n```\n\nValues íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```yaml\nserver:\n  serviceType: NodePort\n  httpNodePort: 30080\n  httpsNodePort: 30443\n```\n\nì´ íŒŒì¼ì€ ì°¨íŠ¸ì˜ ì„¤ì • ì¤‘ í•˜ë‚˜ë¥¼ ì¬ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì„œë¹„ìŠ¤ë¥¼ ClusterIP ëŒ€ì‹  NodePortë¡œ ì‹¤í–‰í•˜ë„ë¡ ë³€ê²½í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì§€ì •í•œ í¬íŠ¸ë¥¼ ì™¸ë¶€ì—ì„œ ì—‘ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ê°œì¸ ë„¤íŠ¸ì›Œí¬ì—ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì„œë¹„ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ì‹­ì‹œì˜¤.\n\n```js\nhelm install argocd -n argocd -f values.yaml argo/argocd\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nê·¸ëŸ¼ ê´€ë¦¬ì ì‚¬ìš©ìì˜ ê¸°ë³¸ ì•”í˜¸ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.\n\n```js\nkubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath=\"{.data.password}\" | base64 -d\n```\n\nOpenWrtë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„°ì— í˜¸ìŠ¤íŠ¸ ì´ë¦„ í•­ëª©ì„ ì„¤ì •í•˜ê³  https://cluster.home:30443ì—ì„œ ë¡œê·¸ì¸ í˜ì´ì§€ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![ê·¸ë¦¼](/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_2.png)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nArgoCDì— ë¡œê·¸ì¸í•˜ê³ , ê³§ ëŒì•„ì˜¬ê²Œìš”.\n\n![image](/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_3.png)\n\n# Prometheus\n\nìš°ë¦¬ëŠ” í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ì •ë³´ ìˆ˜ì§‘ì„ ìœ„í•´ íƒ€ì„ ì‹œë¦¬ì¦ˆ ë©”íŠ¸ë¦­ ì„œë²„ë¡œ Prometheusë¥¼ ì‚¬ìš©í•  ê±°ì—ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì„¤ì¹˜í•˜ê¸° ì „ì— Prometheusê°€ ì¿¼ë¦¬ ë°ì´í„°ë¥¼ ì €ì¥í•  ì§€ì†ì ì¸ ë³¼ë¥¨ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì§‘ í´ëŸ¬ìŠ¤í„°ì—ì„œëŠ” ì˜ˆë¹„ USB ë“œë¼ì´ë¸Œë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆì§€ë§Œ ì›í•˜ëŠ” ê²ƒì„ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ë³¼ë¥¨ì„ ì„¤ì •í•œ ë‹¨ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ìš°ë¦¬ì˜ ë³¼ë¥¨ì„ ìœ„í•œ ê²½ë¡œë¥¼ ë§Œë“¤ê³  ì‹¤ìˆ˜ë¥¼ ë§‰ê¸° ìœ„í•´ ë³€ê²½ ì‚¬í•­ì„ ë°˜ì˜í•´ì•¼ í•  fstabì˜ ë°±ì—…ì„ ë§Œë“­ë‹ˆë‹¤.\n\n```js\nsudo mkdir /mnt/usb\nsudo cp /etc/fstab /etc/fstab.bak\n```\n\nì¥ì¹˜ë¥¼ ì—°ê²°í•œ ë‹¤ìŒ fstabì„ ë³€ê²½ ë‚´ìš©ê³¼ í•¨ê»˜ ìˆ˜ì •í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n/dev/sda1 /mnt/usb vfat defaults,uid=youruid,gid=yourgid,dmask=002,fmask=113 0 0\n\nì´ì œ ìš°ë¦¬ ë…¸ë“œ ì‚¬ìš©ìì˜ ì‚¬ìš©ì ë° ê·¸ë£¹ ì„¤ì •ìœ¼ë¡œ ì¥ì¹˜ë¥¼ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤.\n\nsudo mount -o uid=youruid,gid=yourgid,dmask=002,fmask=113 /dev/sdX1 /mnt/usb\n\nì´ì œ ìš°ë¦¬ëŠ” PersistentVolumeê³¼ PersistentVolumeChainì„ ê°€ì§„ Kubernetes ìì›ì„ ìƒì„±í•˜ë ¤ê³  í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```yaml\napiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: prometheus-usb-pv\n  labels:\n    type: local\nspec:\n  storageClassName: manual\n  capacity:\n    storage: {deviceì˜ í¬ê¸°}Gi\n  accessModes:\n    - ReadWriteOnce\n  persistentVolumeReclaimPolicy: Retain\n  hostPath:\n    path: \"/mnt/usb\"\n---\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: prometheus-usb-pvc\nspec:\n  storageClassName: manual\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: {deviceì˜ í¬ê¸°}Gi\n```\n\në§Œì•½ git ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš© ì¤‘ì´ë¼ë©´, ì´ íŒŒì¼ë“¤ì„ template ë””ë ‰í† ë¦¬ ì•ˆì— ìƒˆë¡œìš´ Helm Chartì— ìœ„ì¹˜ì‹œì¼œì£¼ì„¸ìš”. ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ ê³„ì† ì§„í–‰í•´ë´ìš”.\n\nì´ì œ í”„ë¡œë©”í…Œìš°ìŠ¤ì™€ í•¨ê»˜ ì°¨íŠ¸ë¥¼ ì„¤ì •í•´ë´…ì‹œë‹¤.\n\n```bash\nhelm create prometheus\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nChart.yamlì— Prometheus subchartë¥¼ ì¢…ì†ì„±ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ì„¸ìš”.\n\n```yaml\ndependencies:\n  - name: prometheus\n    version: 22.7.0\n    repository: https://prometheus-community.github.io/helm-charts\n```\n\nì´ì œ ìƒˆ PV ë° PVCë¥¼ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ì„ ì„¤ì •í•˜ê³ , ì¼ë¶€ ê¶Œí•œì„ ìˆ˜ì •í•˜ê³  ì„œë²„ë¥¼ ë§ˆìŠ¤í„° ë…¸ë“œì—ë§Œ ë°°í¬í•˜ë„ë¡ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```yaml\nprometheus:\n  alertmanager:\n    enabled: false\n  prometheus-pushgateway:\n    enabled: false\n  configmapReload:\n    prometheus:\n      enabled: false\n  server:\n    nodeSelector:\n      kubernetes.io/hostname: { master node }\n    securityContext:\n      runAsUser: { userid }\n      runAsNonRoot: true\n      runAsGroup: { groupid }\n      fsGroup: { fsid }\n    persistentVolume:\n      enabled: true\n      existingClaim: \"prometheus-usb-pvc\"\n      volumeName: \"prometheus-usb-pv\"\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì¼ë¶€ ì¶”ê°€ ì„œë¹„ìŠ¤ë¥¼ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ alertmanager, pushgateway, ê·¸ë¦¬ê³  configmapreloadê°€ ì´ì— í•´ë‹¹í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ë‹¤ë¥¸ ì‹œê°„ì— ì´ë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ì •ìƒì ìœ¼ë¡œ í–‰ë™í•˜ëŠ” ê²½ìš° ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë„êµ¬ì¸ Alert Managerì…ë‹ˆë‹¤.\n\nì´ì œ ArgoCDë¡œ ëŒì•„ê°€ \"ìƒˆ ì•±\"ì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. Prometheusë¼ëŠ” ì´ë¦„ì˜ ì•±ì„ ë§Œë“¤ê³  ê¹ƒ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì†ŒìŠ¤ë¡œ ì¶”ê°€í•˜ê³  ê²½ë¡œë¥¼ ì„ íƒí•˜ì„¸ìš”. Grafanaë„ ë‚˜ì¤‘ì— ì´ ì‘ì—…ì„ í•´ì•¼í•˜ë¯€ë¡œ ì„œë¡œ ë‹¤ë¥¸ ê²½ë¡œì— ìœ ì§€í•˜ì„¸ìš”.\n\n![Image](/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_4.png)\n\nìƒì„±í•œ ì‚¬ìš©ì ì •ì˜ ì„¤ì •ì„ ì„¤ì •í•  ê°’ íŒŒì¼ì„ ì„ íƒí•œ ë‹¤ìŒ ì•±ì„ ìƒì„±í•˜ì„¸ìš”. ìˆ˜ë™ìœ¼ë¡œ ë™ê¸°í™”í•˜ë„ë¡ ì§€ì •í•œ ê²½ìš° ë™ê¸°í™”ê°€ í•„ìš”í•  ë•Œ ì´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì—…ê·¸ë ˆì´ë“œí•  ë•Œ ì‚¬ìš©í•˜ê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ ë¦´ë¦¬ìŠ¤í•˜ê³ ì í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ê·¸ ì™¸ì—ëŠ” í™ˆ í”„ë¡œì íŠ¸ì— ê°€ì¥ ì í•©í•œ CDìš© ìë™ ë™ê¸°í™” ë°©ë²•ì´ ìœ ìš©í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![Grafana](https://miro.medium.com/v2/resize:fit:1400/1*Ice0ZJGARkN6BdzAl1nGDQ.gif)\n\në§ˆì°¬ê°€ì§€ë¡œ Prometheusì™€ ë¹„ìŠ·í•˜ê²Œ, git ë ˆí¬ì§€í† ë¦¬ì—ì„œ ìƒˆë¡œìš´ Helm ì°¨íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”.\n\n```js\nhelm create grafana\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\ní—¬ë¦„ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.\n\n```js\nhelm repo add grafana https://grafana.github.io/helm-charts\nhelm repo update\n```\n\në¦¬í¬ì§€í† ë¦¬ë¥¼ í†µí•´ ì°¨íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.\n\n```js\ndependencies:\n  - name: grafana\n    version: 6.57.4\n    repository: https://grafana.github.io/helm-charts\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nvalues.yaml íŒŒì¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.\n\n```js\ngrafana: service: enabled: true;\ntype: NodePort;\nnodePort: 30180;\n```\n\nê·¸ëŸ° ë‹¤ìŒ ì´ì „ê³¼ ê°™ì´ ArgoCDë¥¼ í†µí•´ Grafanaë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”. ë™ê¸°í™”ë¥¼ ì§„í–‰í•˜ê³  ì´ì œ ë‘ ê°œê°€ ëª¨ë‘ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n\u003cimg src=\"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_5.png\" /\u003e\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nGrafanaë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¨¼ì € ì–»ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n```js\nkubectl get secret --namespace monitoring grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode ; echo\n```\n\nì¶œë ¥ì—ì„œ ë‚˜ì˜¨ ê´€ë¦¬ì ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_6.png)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ì œ Prometheus ë°ì´í„° ì›ë³¸ì„ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤. Prometheus ì„œë¹„ìŠ¤ URLì€ ëª¨ë‹ˆí„°ë§ì„ ì„¤ì •í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì¸ í´ëŸ¬ìŠ¤í„°ì—ì„œ http://prometheus-server.monitoring.svc.cluster.localë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \"Administration\" â†’ \"Data sources\" â†’ \"Add new data source\" ì•„ë˜ë¡œ ì´ë™í•œ ë‹¤ìŒ URLì„ ì¶”ê°€í•˜ê³  \"Save \u0026 Test\"ë¥¼ í´ë¦­í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![image](https://miro.medium.com/v2/resize:fit:1400/1*VphOqjzSh30E4dKrnf2Q2A.gif)\n\në§Œì•½ ìš°ë¦¬ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ê°„ë‹¨íˆ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ Grafana Labsì—ì„œ ì œê³µí•˜ëŠ” ëŒ€ì‹œë³´ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìš°ë¦¬ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê°„ë‹¨í•œ ë·°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\n![image](https://miro.medium.com/v2/resize:fit:1400/1*AIw7esBCtaz5koK_uJTU-w.gif)\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ë‹¤ìŒ ë‹¨ê³„\n\n## ì‚¬ìš©ì ì •ì˜ Docker ì´ë¯¸ì§€\n\në‹¹ì‹ ì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ì˜í•˜ëŠ” ì¤‘ìš”í•œ ë‹¨ê³„ë¡œ, ê³µê°œ Docker.io ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì—†ëŠ” ì»¨í…Œì´ë„ˆë‚˜ ì‚¬ìš©ì ì •ì˜ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì— ë§ì€ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•  ê³„íšì´ë¼ë©´, ë¬´ë£Œ í‹°ì–´ Docker Hubì˜ ì œí•œì„ í”¼í•˜ê¸° ìœ„í•´ ê°œì¸ ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ëŠ” GCPì˜ Artifacts Repositoryì™€ ê°™ì€ í´ë¼ìš°ë“œ ê³µê¸‰ì—…ì²´ë‚˜ Harborì™€ ê°™ì€ ì˜¤í”ˆ ì†ŒìŠ¤ docker ì €ì¥ì†Œë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## í´ëŸ¬ìŠ¤í„° ìë™í™”\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ ì•ˆë‚´ì„œëŠ” êµìœ¡ ëª©ì ì´ë‚˜ ì†Œê·œëª¨ ê°œì¸ í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•  ë•Œ ì´ìƒì ì¸ Kubernetes í´ëŸ¬ìŠ¤í„° ì„¤ì •ì— ëŒ€í•œ ìˆ˜ë™ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ í”„ë¡œë•ì…˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•˜ê±°ë‚˜ ì´ ì•ˆë‚´ì„œì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ê²½ìš°, Ansibleê³¼ ê°™ì€ ìë™í™” ë„êµ¬ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ë ‡ê²Œí•˜ë©´ ë” íš¨ìœ¨ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•˜ë©° ê´€ë¦¬í•˜ê¸° ì‰¬ìš´ ë°°í¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n# ê²°ë¡ \n\nKubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šì„ ìˆ˜ ìˆì§€ë§Œ í•œ ë²ˆ ì™„ë£Œë˜ë©´ ì¼ë°˜ì ì¸ ë…ë¦½í˜• ì„œë²„ë¥¼ ë›°ì–´ë„˜ëŠ” í™•ì¥ ê°€ëŠ¥í•œ í™˜ê²½ì„ ì œê³µí•˜ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.\n\nRaspberry PiëŠ” ë¹„ìš©ì´ ì €ë ´í•˜ê³  ì „ë ¥ ì†Œë¹„ê°€ ë‚®ì€ ì˜µì…˜ì´ì§€ë§Œ, ë” í° ì‘ìš© í”„ë¡œê·¸ë¨ì— ëŒ€í•œ í™•ì¥ì„±ì´ ì—¬ì „íˆ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤. Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ ì¥ì ì€ ë™ì¼í•œ í•˜ë“œì›¨ì–´ë§Œ ì‹¤í–‰í•˜ëŠ” ê²ƒì— ì œí•œë°›ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ë…¸ë“œë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ë‹¤ì–‘í•œ í•˜ë“œì›¨ì–´ë¥¼ í˜¼í•©í•˜ì—¬ í•„ìš”ì— ë§ê²Œ Raspberry Pië‚˜ ì„œë²„ì™€ ê°™ì€ ë‹¤ì–‘í•œ í•˜ë“œì›¨ì–´ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nê·¸ê²ƒì´ ì¢‹ì€ ì‹œì‘ì ì´ ë˜ì—ˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤. ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!\n","ogImage":{"url":"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_0.png"},"coverImage":"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_0.png","tag":["Tech"],"readingTime":23},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003eëª‡ ë…„ ì „ì— ë¼ì¦ˆë² ë¦¬ íŒŒì´ì—ì„œ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¸íŒ…í–ˆì—ˆì–´ìš”. ë‹¹ì‹œ ë¼ì¦ˆë² ë¦¬ íŒŒì´ì˜ ARM ì•„í‚¤í…ì²˜ëŠ” ëª‡ ê°€ì§€ ì–´ë ¤ì›€ì„ ì•¼ê¸°í–ˆì£ . ARMì„ ì§€ì›í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì°¾ëŠ” ê±´ ì–´ë ¤ìš´ ê³¼ì œì˜€ëŠ”ë°, ê·¸ë˜ì„œ í•„ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì»¨í…Œì´ë„ˆë¥¼ ì§ì ‘ ë¹Œë“œí•´ì•¼ í–ˆë˜ ì ì´ ë§ì•˜ì–´ìš”.\u003c/p\u003e\n\u003cp\u003eê·¸ëŸ°ë° ê·¸ ì´í›„ë¡œ ìƒí™©ì´ í¬ê²Œ ê°œì„ ë˜ì—ˆì–´ìš”! ìƒˆë¡œìš´ 64ë¹„íŠ¸ ë¼ì¦ˆë² ë¦¬ íŒŒì´ OSì˜ ë“±ì¥ê³¼ ARMì˜ ì €ë ´í•¨ìœ¼ë¡œ í´ë¼ìš°ë“œ ë°°í¬ì— ë§ì´ ì‚¬ìš©ë˜ëŠ” ì‚°ì—…ì—ì„œì˜ ì¸ê¸° ìƒìŠ¹ìœ¼ë¡œ, ë¼ì¦ˆë² ë¦¬ íŒŒì´ í´ëŸ¬ìŠ¤í„° êµ¬ì¶•ì´ í›¨ì”¬ ê°„ë‹¨í•´ì¡Œì–´ìš”. ì €ëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ì‹œ êµ¬ì¶•í•˜ê¸°ë¡œ ê²°ì •í–ˆê³ , 64ë¹„íŠ¸ OS ë° ìµœì‹  ë²„ì „ì˜ Kubernetesì™€ Dockerë¡œ ì—…ë°ì´íŠ¸í–ˆì–´ìš”.\u003c/p\u003e\n\u003cp\u003eì—¬ëŸ¬ë¶„ì´ ìì²´ ë¼ì¦ˆë² ë¦¬ íŒŒì´ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œë¥¼ ì‘ì„±í–ˆì–´ìš”. ì§‘ì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•˜ëŠ” ì—¬ì •ì— ìœ ìš©í•˜ê¸¸ ë°”ëë‹ˆë‹¤! ğŸš€\u003c/p\u003e\n\u003ch1\u003eìš”êµ¬ ì‚¬í•­\u003c/h1\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eí´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” í•˜ë“œì›¨ì–´ê°€ í•„ìš”í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ì•„ìš”:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eë¼ì¦ˆë² ë¦¬ íŒŒì´(ì €ëŠ” 4 ëª¨ë¸ Bë¥¼ ì‚¬ìš©í–ˆì–´ìš”)\u003c/li\u003e\n\u003cli\u003eSD ì¹´ë“œ 1ì¥ / ë¼ì¦ˆë² ë¦¬ íŒŒì´\u003c/li\u003e\n\u003cli\u003eì´ë”ë„· ì¼€ì´ë¸” 1ê°œ / ë¼ì¦ˆë² ë¦¬ íŒŒì´\u003c/li\u003e\n\u003cli\u003eë¼ìš°í„° ë°/ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜\u003c/li\u003e\n\u003cli\u003eUSB í—ˆë¸Œ\u003c/li\u003e\n\u003cli\u003e(ì„ íƒ ì‚¬í•­) ì¼€ì´ìŠ¤\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eì´ ì•ˆë‚´ì„œëŠ” Kubernetes 1.26.6, Docker 24.0.2 ë° ë¼ì¦ˆë² ë¦¬ íŒŒì´ Lite(64ë¹„íŠ¸) ë¶ˆìì´ì— ë§ì¶° ì‘ì„±ë˜ì—ˆì–´ìš”.\u003c/p\u003e\n\u003ch1\u003eOS ì„¤ì •\u003c/h1\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ëª¨ë“  Raspberry Piì— OSë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ Raspberry PiëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¶€íŒ…í•  ì‹œìŠ¤í…œì´ ì—†ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eRaspberry Pi Imagerë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì‹­ì‹œì˜¤. ì´ í¸ë¦¬í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ Raspberry Piì˜ ë‹¤ìš´ë¡œë“œì™€ í”Œë˜ì‹±ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” Raspberry Pi OS (Debianì˜ íŒŒìƒ ë²„ì „)ì˜ 64ë¹„íŠ¸ í—¤ë“œë¦¬ìŠ¤ ë²„ì „ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eìµœì‹  Raspberry Piì™€ í˜¸í™˜ë˜ëŠ”ì§€ í™•ì¸í•œ í›„ì— SD ì¹´ë“œë¥¼ í”Œë˜ì‹±í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_0.png\" alt=\"Raspberry Pi Imager\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eSD ì¹´ë“œë¥¼ ì„ íƒí•˜ê³  OSë¥¼ í”Œë˜ì‹±í•˜ê¸° ì‹œì‘í•˜ì„¸ìš”. ëª¨ë“  SD ì¹´ë“œì— ëŒ€í•´ ì´ ì‘ì—…ì„ ì™„ë£Œí•  ë•Œê¹Œì§€ ë°˜ë³µí•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003ch2\u003eSSH í™œì„±í™” ë° ê¸°ë³¸ ì‚¬ìš©ì ìƒì„±\u003c/h2\u003e\n\u003cp\u003eê° Pië¥¼ ì›ê²©ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆê²Œë” SSHë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eSSHë¥¼ í™œì„±í™”í•˜ë ¤ë©´ SD ì¹´ë“œì˜ ë¶€íŠ¸ íŒŒí‹°ì…˜ì— í™•ì¥ì ì—†ì´ sshë¼ëŠ” ë¹ˆ íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eë¡œê·¸ì¸ ì‚¬ìš©ìë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´, SD ì¹´ë“œì˜ ë¶€íŒ… íŒŒí‹°ì…˜ì— userconfë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”. ì´ íŒŒì¼ì€ 'name':'encrypted-password'ë¡œ êµ¬ì„±ëœ í…ìŠ¤íŠ¸ í•œ ì¤„ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. ë¡œê·¸ì¸ ì‚¬ìš©ìë¡œ ë…¸ë“œë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ ì›í•˜ëŠ” ëŒ€ë¡œ ì‚¬ìš©í•˜ì…”ë„ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eencrypted-passwordë¥¼ ìƒì„±í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ OpenSSLê³¼ í•¨ê»˜ ì‹¤í–‰í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eecho \u003cspan class=\"hljs-string\"\u003e'{password}'\u003c/span\u003e | openssl passwd -\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e -stdin\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eíŒŒì¼ì„ ì €ì¥í•˜ê³  SD ì¹´ë“œë¥¼ ì œê±°í•˜ì„¸ìš”. ê·¸ë¦¬ê³  ë¼ì¦ˆë² ë¦¬ íŒŒì´ì— SD ì¹´ë“œë¥¼ ì‚½ì…í•˜ê³  ì „ì›ì„ ì¼œì„¸ìš”. ê°œì¸ ë„¤íŠ¸ì›Œí¬ì˜ ë¼ìš°í„°ë‚˜ ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003ch1\u003eì²« ë²ˆì§¸ ë¶€íŒ… ë° ì´ˆê¸° êµ¬ì„±\u003c/h1\u003e\n\u003cp\u003eë¼ì¦ˆë² ë¦¬ íŒŒì´ì˜ IPë¥¼ ì–»ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ë¼ìš°í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì œ ê²½ìš°, OpenWrtë¥¼ ì‚¬ìš©í•˜ë©° DHCP ì„¤ì •ì—ì„œ ê¸°ì–µí•˜ê¸° ì‰¬ìš´ ì •ì  IPë¥¼ ë§Œë“­ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_1.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eì²« ë²ˆì§¸ ë…¸ë“œì— SSHë¡œ ì—°ê²°í•©ë‹ˆë‹¤. ì´ ë…¸ë“œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ì œì–´ í‰ë©´ì„ ì‹¤í–‰í•˜ëŠ” ë§ˆìŠ¤í„° ë…¸ë“œê°€ ë©ë‹ˆë‹¤. ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ í„°ë„ë§í•œ í›„ì— ì„¤ì •ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë¥¼ sudo ê·¸ë£¹ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo usermod -aG sudo node\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ rasp-configë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ node ì‚¬ìš©ìë¡œ ìë™ ë¶€íŒ…í•˜ë„ë¡ ì„¤ì •í•´ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo raspi-config\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1400/1*XG-oT3YeryzngA-Xv3JY9w.gif\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eâ€œSystem Optionsâ€ â†’ â€œBoot / Auto Loginâ€ ìœ¼ë¡œ ì´ë™í•˜ì—¬ â€œConsole Autologinâ€ì„ ì„ íƒí•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003ch1\u003eDocker \u0026#x26; Kubernetes ì´ˆê¸° ì„¤ì •\u003c/h1\u003e\n\u003cp\u003eê¸°ë³¸ì ìœ¼ë¡œ cgroup ë©”ëª¨ë¦¬ ì˜µì…˜ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìœ¼ë¯€ë¡œ Dockerê°€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì œí•œí•  ìˆ˜ ìˆë„ë¡ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤. /boot/cmdline.txtë¥¼ ì—´ê³  cgroup_enable=memory cgroup_memory=1ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eì´ì œ ìš°ë¦¬ì˜ apt ì €ì¥ì†Œë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  Kubernetes ì €ì¥ì†Œë¥¼ í¬í•¨ì‹œí‚¬ ì°¨ë¡€ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecurl -s \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -\u003c/span\u003e\necho \u003cspan class=\"hljs-string\"\u003e\"deb http://apt.kubernetes.io/ kubernetes-xenial main\"\u003c/span\u003e | sudo tee -a /etc/apt/sources.\u003cspan class=\"hljs-property\"\u003elist\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ed\u003c/span\u003e/kubernetes.\u003cspan class=\"hljs-property\"\u003elist\u003c/span\u003e\nsudo apt update \u0026#x26;\u0026#x26; sudo apt upgrade -y\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDocker ì„¤ì¹˜:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecurl -sSL \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//get.docker.com | sh\u003c/span\u003e\nsudo usermod -aG docker node\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eKubernetes 1.20ë¶€í„°ëŠ” dockershimì´ íê¸°ë˜ê³  ìˆìŠµë‹ˆë‹¤. Mirantisì—ì„œ ì œê³µí•˜ëŠ” cri-dockerdë¼ëŠ” í´ëŸ¬ìŠ¤í„°ìš© ì˜¤í”ˆ ì†ŒìŠ¤ CRIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. cri-dockerdë¥¼ ì„¤ì¹˜í•˜ê³  ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ewget \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/Mirantis/cri-dockerd/releases/download/v0.3.4/cri-dockerd-0.3.4.arm64.tgz\u003c/span\u003e\ntar -xvzf cri-dockerd-\u003cspan class=\"hljs-number\"\u003e0.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003earm64\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etgz\u003c/span\u003e\nsudo mv cri-dockerd/cri-dockerd /usr/bin/cri-dockerd\nsudo chmod +x /usr/bin/cri-dockerd\nwget \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.service\u003c/span\u003e\nwget \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.socket\u003c/span\u003e\nsudo mv cri-docker.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e /etc/systemd/system/\nsudo mv cri-docker.\u003cspan class=\"hljs-property\"\u003esocket\u003c/span\u003e /etc/systemd/system/\nsudo systemctl enable cri-docker.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e\nsudo systemctl enable cri-docker.\u003cspan class=\"hljs-property\"\u003esocket\u003c/span\u003e\nsudo systemctl start cri-docker.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e\nsudo systemctl start cri-docker.\u003cspan class=\"hljs-property\"\u003esocket\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eKubernetes ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ìœ„í•´ ë…¸ë“œì—ì„œ swapì„ ë¹„í™œì„±í™”í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo apt-get update \u0026#x26;\u0026#x26; sudo apt-get install dphys-swapfile \u0026#x26;\u0026#x26; sudo dphys-swapfile swapoff \u0026#x26;\u0026#x26; sudo dphys-swapfile uninstall \u0026#x26;\u0026#x26; sudo systemctl disable dphys-swapfile\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eë§Œì•½ cri-dockerd ì„¤ì •ì— ë¬¸ì œê°€ ë°œìƒí•˜ë©´, ì´ ì•ˆë‚´ì„œë¥¼ í™•ì¸í•´ë³´ì„¸ìš”. ì²˜ìŒì— ì‘ì„±í–ˆì„ ë•Œì™€ ë‹¬ë¼ì§„ ì‚¬í•­ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ, Kubernetesë¥¼ ì„¤ì¹˜í•´ë´…ì‹œë‹¤!\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo apt install -y kubelet=\u003cspan class=\"hljs-number\"\u003e1.26\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.6\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e kubeadm=\u003cspan class=\"hljs-number\"\u003e1.26\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.6\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e kubectl=\u003cspan class=\"hljs-number\"\u003e1.26\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.6\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e\nsudo apt-mark hold kubelet kubeadm kubectl\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ê°€ì´ë“œì—ì„œëŠ” ëª¨ë“  ê²ƒì´ 1.26.6ì—ì„œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í–ˆì–´ìš”. 1.24 ì´ì „ ë²„ì „ì€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šì„ ê±°ì˜ˆìš”. ì´ëŸ¬í•œ íŒ¨í‚¤ì§€ë¥¼ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šë„ë¡ í‘œì‹œí•  ê±°ì—ìš”.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eì°¨ì„ ìœ¼ë¡œ, ëœì²˜ ë©ìŠ¤ì—ì„œ ë§Œë“  k3sëŠ” ê°€ë²¼ìš´ ì˜µì…˜ìœ¼ë¡œ ì¢‹ì€ ì„ íƒì¼ ê²ƒì…ë‹ˆë‹¤. ê·¸ ì¤‘ ì¼ë¶€ ì¥ì ì€ ì‘ì€ ì‹¤í–‰ íŒŒì¼ í¬ê¸°, ë§¤ìš° ë‚®ì€ ìì› ìš”êµ¬ ì‚¬í•­ ë° ARMìš©ìœ¼ë¡œ ìµœì í™”ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” ì´ë¥¼ í…ŒìŠ¤íŠ¸í•´ë³´ì§€ ì•Šì•˜ì§€ë§Œ, ì´í›„ì— ë¹„ìŠ·í•œ ì„¤ì •ì´ ë  ê²ƒìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì´ˆê¸°í™”í•  ì‹œê°„ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ InitConfiguration ë° ClusterConfiguration ì„¤ì •ì´ í¬í•¨ëœ íŒŒì¼ì„ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003eapiVersion\u003c/span\u003e: kubeadm.\u003cspan class=\"hljs-property\"\u003ek8s\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e/v1beta3\n\u003cspan class=\"hljs-attr\"\u003ebootstrapTokens\u003c/span\u003e:\n- \u003cspan class=\"hljs-attr\"\u003egroups\u003c/span\u003e:\n  - \u003cspan class=\"hljs-attr\"\u003esystem\u003c/span\u003e:\u003cspan class=\"hljs-attr\"\u003ebootstrappers\u003c/span\u003e:\u003cspan class=\"hljs-attr\"\u003ekubeadm\u003c/span\u003e:\u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e-node-token\n  \u003cspan class=\"hljs-attr\"\u003etoken\u003c/span\u003e: {token}\n  \u003cspan class=\"hljs-attr\"\u003eusages\u003c/span\u003e:\n  - signing\n  - authentication\n\u003cspan class=\"hljs-attr\"\u003ekind\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eInitConfiguration\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003elocalAPIEndpoint\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003eadvertiseAddress\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e10.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.100\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ebindPort\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e6443\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003enodeRegistration\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003ecriSocket\u003c/span\u003e: \u003cspan class=\"hljs-attr\"\u003eunix\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e///var/run/cri-dockerd.sock\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eimagePullPolicy\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eIfNotPresent\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: node-\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n---\n\u003cspan class=\"hljs-attr\"\u003eapiVersion\u003c/span\u003e: kubeadm.\u003cspan class=\"hljs-property\"\u003ek8s\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e/v1beta3\n\u003cspan class=\"hljs-attr\"\u003ekind\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eClusterConfiguration\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003enetworking\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003epodSubnet\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"10.244.0.0/16\"\u003c/span\u003e # --pod-network-cidr\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ íŒŒì¼ì—ëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì˜ ì„¤ì •ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. criSocketì´ cri-dockerdë¥¼ ì‚¬ìš©í•˜ê³ , ë‚˜ì¤‘ì— ë„¤íŠ¸ì›Œí¬ CIDRì„ ì„¤ì •í•´ë‘ì—ˆìŒì„ ì£¼ëª©í•˜ì‹­ì‹œì˜¤.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eì´ ë…¸ë“œì—ì„œ ì œì–´ í‰ë©´ì„ ì´ˆê¸°í™”í•˜ë ¤ë©´ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo kubeadm init --config kubeadm-config.\u003cspan class=\"hljs-property\"\u003eyaml\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ëª…ë ¹ì€ ìƒˆ ë…¸ë“œë¥¼ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€í•˜ëŠ” ì„¤ì • ë° kube-configë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eëª…ë ¹ì—ì„œ ì§€ì‹œí•˜ëŠ” ë°©ë²•ì— ë”°ë¼ kube-configë¥¼ ì„¤ì •í•˜ê³ , ì›Œí¬ìŠ¤í…Œì´ì…˜ì— kube-configì™€ ê°€ì… ëª…ë ¹ì„ ë³µì‚¬í•˜ê³  ì €ì¥í•˜ì„¸ìš”. ë‚˜ì¤‘ì— í•„ìš”í•  ê²ƒì´ë‹ˆê¹Œìš”!\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003ch1\u003eí´ëŸ¬ìŠ¤í„° ë„¤íŠ¸ì›Œí‚¹\u003c/h1\u003e\n\u003cp\u003eì´ì œ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë„¤íŠ¸ì›Œí‚¹ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. Podë“¤ì´ ë…¸ë“œ ê°„ì— ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ (CNI ë˜ëŠ” ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œë„ ë¶ˆë¦¼)ì´ í•„ìš”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì€ IP ì£¼ì†Œ í• ë‹¹, DNS í•´ê²° ë° ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ì™€ ê°™ì€ ê¸°ëŠ¥ì„ Podì— ì œê³µí•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” ì´ë¥¼ ìœ„í•´ Flannelì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ë‹¤ìŒì„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekubectl apply -f \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê·¸ê²Œ ë‹¤ì—ìš”! ì´ì œ ë§ˆìŠ¤í„° ë…¸ë“œê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ, í´ëŸ¬ìŠ¤í„°ì— ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê¸° ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”. ì´ì „ì— ì¶œë ¥ëœ ì¡°ì¸ ëª…ë ¹ì„ ê¸°ì–µí•˜ê³  ìˆë‚˜ìš”? ì´ì œ ê·¸ê²ƒì´ í•„ìš”í•  ê±°ì—ìš”.\u003c/p\u003e\n\u003ch1\u003eí´ëŸ¬ìŠ¤í„°ì— ìƒˆë¡œìš´ ë…¸ë“œ ì¶”ê°€í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eí´ëŸ¬ìŠ¤í„°ì— ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ê½¤ ê°„ë‹¨í•©ë‹ˆë‹¤. ë§ì€ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê²½ìš°ì—ëŠ” tmuxì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ ëª…ë ¹ì„ ë‹¤ì¤‘í™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\"ì²« ë²ˆì§¸ ë¶€íŒ… ë° ì´ˆê¸° ì„¤ì •\"ì„ ì™„ë£Œí•˜ê³  \"ë„ì»¤ ë° ì¿ ë²„ë„¤í‹°ìŠ¤ ì´ˆê¸° ì„¤ì •\"ì„ ì§„í–‰í•˜ì„¸ìš”. ì„œë¡œ ë‹¤ë¥¸ Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ ì„¤ì¹˜í•˜ëŠ” ë‹¨ê³„ ì´í›„ì— ì‘ì—…ì„ ì¤‘ì§€í•˜ì„¸ìš”. ì´ ì‹œì ì—ì„œ ì´ì „ì— ì‹¤í–‰í•œ kubeadm join ëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. cri-socket ë° node-name ì˜µì…˜ì„ í¬í•¨í•˜ì—¬ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo kubeadm join \u003cspan class=\"hljs-number\"\u003e10.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.100\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e6443\u003c/span\u003e --token {token} --discovery-token-ca-cert-hash {hash} --cri-socket \u003cspan class=\"hljs-attr\"\u003eunix\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e///var/run/cri-dockerd.sock --node-name {name}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ëª¨ë“  ë…¸ë“œê°€ í´ëŸ¬ìŠ¤í„°ì— ê°€ì…í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e kubectl get nodesë¥¼ watchí•©ë‹ˆë‹¤.\nì´ì œ ê·€í•˜ì˜ í´ëŸ¬ìŠ¤í„°ê°€ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤! ê·¸ëŸ¬ë‚˜ \u003cspan class=\"hljs-variable constant_\"\u003eSSH\u003c/span\u003eë¥¼ í†µí•´ê°€ ì•„ë‹Œ ì›Œí¬ìŠ¤í…Œì´ì…˜ì—ì„œ ì•¡ì„¸ìŠ¤í•˜ê³  ì‹¶ì„ ê²ƒì…ë‹ˆë‹¤. ì»´í“¨í„°ì—ì„œ ì´ì „ì— ì„¤ì •í•œ kube-configë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê¸°ë³¸ kube-configëŠ” ê´€ë¦¬ì ê¶Œí•œì„ ë¶€ì—¬í•˜ë©° ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.\n\në¨¼ì € í”„ë¡œí•„ì— êµ¬ì„±ì„ ë‚´ë³´ëƒ…ë‹ˆë‹¤.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eKUBECONFIG\u003c/span\u003e=~\u003cspan class=\"hljs-regexp\"\u003e/.kube/\u003c/span\u003econfig\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì»¨í…ìŠ¤íŠ¸ ì„¤ì •:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekubectl config use-context kubernetes-admin@kubernetes\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ì›ê²©ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e kubectl cluster-info\nì¿ ë²„ë„¤í‹°ìŠ¤ ì œì–´ í‰ë©´ì´ \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//10.0.0.100:6443 ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eCoreDNS\u003c/span\u003eì´ \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//10.0.0.100:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.\u003c/span\u003e\n\në” ë§ì€ ë””ë²„ê¹… ë° ì§„ë‹¨ì„ ìœ„í•´ \u003cspan class=\"hljs-string\"\u003e'kubectl cluster-info dump'\u003c/span\u003eë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë„êµ¬ ì„¤ì •\u003c/h1\u003e\n\u003cp\u003eì´ì œ ë°´ìì´ë¼ í´ëŸ¬ìŠ¤í„°ë¥¼ ì¼ë°˜ì—ì„œ ë©‹ì§€ê²Œ ì—…ê·¸ë ˆì´ë“œí•´ ë´…ì‹œë‹¤. ìƒˆ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì‰½ê²Œ ë°°í¬í•˜ê³  í´ëŸ¬ìŠ¤í„°ë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ë„êµ¬ë¥¼ ì„¤ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ArgoCD, Prometheus ë° Grafana ì„¤ì¹˜ ë°©ë²•ì„ ì•ˆë‚´í•˜ê² ìŠµë‹ˆë‹¤! ì´ ì„¸ ê°€ì§€ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ê°€ ìš°ë¦¬ì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ìŒ ìˆ˜ì¤€ìœ¼ë¡œ ëŒì–´ì˜¬ë¦½ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê³„ì†í•˜ê¸° ì „ì—, ì´ëŸ¬í•œ ë„êµ¬ë“¤ì— ëŒ€í•œ ëª¨ë“  ì„¤ì • ë³€ê²½ ì‚¬í•­ì„ ì¶”ì í•˜ê¸° ìœ„í•œ ì›ê²© git ì €ì¥ì†Œë¥¼ ë§Œë“¤ì–´ ë³´ì‹œê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. íŠ¹íˆ ArgoCDë¥¼ ì‚¬ìš©í•  ë•Œ, ê° ë„êµ¬ë‚˜ ì¶”ê°€ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ë°°í¬í•  ë•Œë§ˆë‹¤ ê±°ê¸°ë¥¼ í†µí•´ ì¶”ê°€í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003ch1\u003eArgoCD\u003c/h1\u003e\n\u003cp\u003eê° ë„êµ¬ì— ëŒ€í•´ Helmì„ ë¦¬ì†ŒìŠ¤ í…œí”Œë¦¿íŒ… ë„êµ¬ë¡œ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ìµœì‹  ë²„ì „(ë˜ëŠ” ì ì–´ë„ Helm v3)ì„ ì„¤ì¹˜í•˜ê³  ArgoCD ì €ì¥ì†Œë¥¼ ì¶”ê°€í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ehelm repo add argo \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//argoproj.github.io/argo-helm\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eValues íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eserver:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eserviceType:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eNodePort\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ehttpNodePort:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30080\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ehttpsNodePort:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30443\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ íŒŒì¼ì€ ì°¨íŠ¸ì˜ ì„¤ì • ì¤‘ í•˜ë‚˜ë¥¼ ì¬ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì„œë¹„ìŠ¤ë¥¼ ClusterIP ëŒ€ì‹  NodePortë¡œ ì‹¤í–‰í•˜ë„ë¡ ë³€ê²½í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì§€ì •í•œ í¬íŠ¸ë¥¼ ì™¸ë¶€ì—ì„œ ì—‘ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ê°œì¸ ë„¤íŠ¸ì›Œí¬ì—ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì„œë¹„ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ì‹­ì‹œì˜¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ehelm install argocd -n argocd -f values.\u003cspan class=\"hljs-property\"\u003eyaml\u003c/span\u003e argo/argocd\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eê·¸ëŸ¼ ê´€ë¦¬ì ì‚¬ìš©ìì˜ ê¸°ë³¸ ì•”í˜¸ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath=\u003cspan class=\"hljs-string\"\u003e\"{.data.password}\"\u003c/span\u003e | base64 -d\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOpenWrtë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„°ì— í˜¸ìŠ¤íŠ¸ ì´ë¦„ í•­ëª©ì„ ì„¤ì •í•˜ê³  \u003ca href=\"https://cluster.home:30443%EC%97%90%EC%84%9C\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://cluster.home:30443ì—ì„œ\u003c/a\u003e ë¡œê·¸ì¸ í˜ì´ì§€ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_2.png\" alt=\"ê·¸ë¦¼\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eArgoCDì— ë¡œê·¸ì¸í•˜ê³ , ê³§ ëŒì•„ì˜¬ê²Œìš”.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_3.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003ch1\u003ePrometheus\u003c/h1\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ì •ë³´ ìˆ˜ì§‘ì„ ìœ„í•´ íƒ€ì„ ì‹œë¦¬ì¦ˆ ë©”íŠ¸ë¦­ ì„œë²„ë¡œ Prometheusë¥¼ ì‚¬ìš©í•  ê±°ì—ìš”.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eì„¤ì¹˜í•˜ê¸° ì „ì— Prometheusê°€ ì¿¼ë¦¬ ë°ì´í„°ë¥¼ ì €ì¥í•  ì§€ì†ì ì¸ ë³¼ë¥¨ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì§‘ í´ëŸ¬ìŠ¤í„°ì—ì„œëŠ” ì˜ˆë¹„ USB ë“œë¼ì´ë¸Œë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆì§€ë§Œ ì›í•˜ëŠ” ê²ƒì„ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ë³¼ë¥¨ì„ ì„¤ì •í•œ ë‹¨ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ìš°ë¦¬ì˜ ë³¼ë¥¨ì„ ìœ„í•œ ê²½ë¡œë¥¼ ë§Œë“¤ê³  ì‹¤ìˆ˜ë¥¼ ë§‰ê¸° ìœ„í•´ ë³€ê²½ ì‚¬í•­ì„ ë°˜ì˜í•´ì•¼ í•  fstabì˜ ë°±ì—…ì„ ë§Œë“­ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo mkdir /mnt/usb\nsudo cp /etc/fstab /etc/fstab.\u003cspan class=\"hljs-property\"\u003ebak\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì¥ì¹˜ë¥¼ ì—°ê²°í•œ ë‹¤ìŒ fstabì„ ë³€ê²½ ë‚´ìš©ê³¼ í•¨ê»˜ ìˆ˜ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e/dev/sda1 /mnt/usb vfat defaults,uid=youruid,gid=yourgid,dmask=002,fmask=113 0 0\u003c/p\u003e\n\u003cp\u003eì´ì œ ìš°ë¦¬ ë…¸ë“œ ì‚¬ìš©ìì˜ ì‚¬ìš©ì ë° ê·¸ë£¹ ì„¤ì •ìœ¼ë¡œ ì¥ì¹˜ë¥¼ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003esudo mount -o uid=youruid,gid=yourgid,dmask=002,fmask=113 /dev/sdX1 /mnt/usb\u003c/p\u003e\n\u003cp\u003eì´ì œ ìš°ë¦¬ëŠ” PersistentVolumeê³¼ PersistentVolumeChainì„ ê°€ì§„ Kubernetes ìì›ì„ ìƒì„±í•˜ë ¤ê³  í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ev1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePersistentVolume\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eprometheus-usb-pv\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003elabels:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003elocal\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003estorageClassName:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emanual\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ecapacity:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003estorage:\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003edeviceì˜\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eí¬ê¸°\u003c/span\u003e}\u003cspan class=\"hljs-string\"\u003eGi\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eaccessModes:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eReadWriteOnce\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epersistentVolumeReclaimPolicy:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eRetain\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ehostPath:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003epath:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"/mnt/usb\"\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e---\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ev1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePersistentVolumeClaim\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eprometheus-usb-pvc\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003estorageClassName:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emanual\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eaccessModes:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eReadWriteOnce\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eresources:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003erequests:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003estorage:\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003edeviceì˜\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eí¬ê¸°\u003c/span\u003e}\u003cspan class=\"hljs-string\"\u003eGi\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë§Œì•½ git ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš© ì¤‘ì´ë¼ë©´, ì´ íŒŒì¼ë“¤ì„ template ë””ë ‰í† ë¦¬ ì•ˆì— ìƒˆë¡œìš´ Helm Chartì— ìœ„ì¹˜ì‹œì¼œì£¼ì„¸ìš”. ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ ê³„ì† ì§„í–‰í•´ë´ìš”.\u003c/p\u003e\n\u003cp\u003eì´ì œ í”„ë¡œë©”í…Œìš°ìŠ¤ì™€ í•¨ê»˜ ì°¨íŠ¸ë¥¼ ì„¤ì •í•´ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ehelm create prometheus\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eChart.yamlì— Prometheus subchartë¥¼ ì¢…ì†ì„±ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003edependencies:\u003c/span\u003e\n  \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eprometheus\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eversion:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e22.7\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003erepository:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehttps://prometheus-community.github.io/helm-charts\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ìƒˆ PV ë° PVCë¥¼ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ì„ ì„¤ì •í•˜ê³ , ì¼ë¶€ ê¶Œí•œì„ ìˆ˜ì •í•˜ê³  ì„œë²„ë¥¼ ë§ˆìŠ¤í„° ë…¸ë“œì—ë§Œ ë°°í¬í•˜ë„ë¡ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eprometheus:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ealertmanager:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eprometheus-pushgateway:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003econfigmapReload:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eprometheus:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eserver:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enodeSelector:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ekubernetes.io/hostname:\u003c/span\u003e { \u003cspan class=\"hljs-string\"\u003emaster\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enode\u003c/span\u003e }\n    \u003cspan class=\"hljs-attr\"\u003esecurityContext:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003erunAsUser:\u003c/span\u003e { \u003cspan class=\"hljs-string\"\u003euserid\u003c/span\u003e }\n      \u003cspan class=\"hljs-attr\"\u003erunAsNonRoot:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003erunAsGroup:\u003c/span\u003e { \u003cspan class=\"hljs-string\"\u003egroupid\u003c/span\u003e }\n      \u003cspan class=\"hljs-attr\"\u003efsGroup:\u003c/span\u003e { \u003cspan class=\"hljs-string\"\u003efsid\u003c/span\u003e }\n    \u003cspan class=\"hljs-attr\"\u003epersistentVolume:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eexistingClaim:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"prometheus-usb-pvc\"\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003evolumeName:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"prometheus-usb-pv\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eì¼ë¶€ ì¶”ê°€ ì„œë¹„ìŠ¤ë¥¼ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ alertmanager, pushgateway, ê·¸ë¦¬ê³  configmapreloadê°€ ì´ì— í•´ë‹¹í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ë‹¤ë¥¸ ì‹œê°„ì— ì´ë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ì •ìƒì ìœ¼ë¡œ í–‰ë™í•˜ëŠ” ê²½ìš° ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë„êµ¬ì¸ Alert Managerì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ ArgoCDë¡œ ëŒì•„ê°€ \"ìƒˆ ì•±\"ì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. Prometheusë¼ëŠ” ì´ë¦„ì˜ ì•±ì„ ë§Œë“¤ê³  ê¹ƒ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì†ŒìŠ¤ë¡œ ì¶”ê°€í•˜ê³  ê²½ë¡œë¥¼ ì„ íƒí•˜ì„¸ìš”. Grafanaë„ ë‚˜ì¤‘ì— ì´ ì‘ì—…ì„ í•´ì•¼í•˜ë¯€ë¡œ ì„œë¡œ ë‹¤ë¥¸ ê²½ë¡œì— ìœ ì§€í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_4.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cp\u003eìƒì„±í•œ ì‚¬ìš©ì ì •ì˜ ì„¤ì •ì„ ì„¤ì •í•  ê°’ íŒŒì¼ì„ ì„ íƒí•œ ë‹¤ìŒ ì•±ì„ ìƒì„±í•˜ì„¸ìš”. ìˆ˜ë™ìœ¼ë¡œ ë™ê¸°í™”í•˜ë„ë¡ ì§€ì •í•œ ê²½ìš° ë™ê¸°í™”ê°€ í•„ìš”í•  ë•Œ ì´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì—…ê·¸ë ˆì´ë“œí•  ë•Œ ì‚¬ìš©í•˜ê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ ë¦´ë¦¬ìŠ¤í•˜ê³ ì í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ê·¸ ì™¸ì—ëŠ” í™ˆ í”„ë¡œì íŠ¸ì— ê°€ì¥ ì í•©í•œ CDìš© ìë™ ë™ê¸°í™” ë°©ë²•ì´ ìœ ìš©í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1400/1*Ice0ZJGARkN6BdzAl1nGDQ.gif\" alt=\"Grafana\"\u003e\u003c/p\u003e\n\u003cp\u003eë§ˆì°¬ê°€ì§€ë¡œ Prometheusì™€ ë¹„ìŠ·í•˜ê²Œ, git ë ˆí¬ì§€í† ë¦¬ì—ì„œ ìƒˆë¡œìš´ Helm ì°¨íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ehelm create grafana\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eí—¬ë¦„ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ehelm repo add grafana \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//grafana.github.io/helm-charts\u003c/span\u003e\nhelm repo update\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë¦¬í¬ì§€í† ë¦¬ë¥¼ í†µí•´ ì°¨íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003edependencies\u003c/span\u003e:\n  - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: grafana\n    \u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e6.57\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003erepository\u003c/span\u003e: \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//grafana.github.io/helm-charts\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003evalues.yaml íŒŒì¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003egrafana\u003c/span\u003e: \u003cspan class=\"hljs-attr\"\u003eservice\u003c/span\u003e: \u003cspan class=\"hljs-attr\"\u003eenabled\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n\u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNodePort\u003c/span\u003e;\n\u003cspan class=\"hljs-attr\"\u003enodePort\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e30180\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê·¸ëŸ° ë‹¤ìŒ ì´ì „ê³¼ ê°™ì´ ArgoCDë¥¼ í†µí•´ Grafanaë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”. ë™ê¸°í™”ë¥¼ ì§„í–‰í•˜ê³  ì´ì œ ë‘ ê°œê°€ ëª¨ë‘ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eGrafanaë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¨¼ì € ì–»ì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekubectl get secret --namespace monitoring grafana -o jsonpath=\u003cspan class=\"hljs-string\"\u003e\"{.data.admin-password}\"\u003c/span\u003e | base64 --decode ; echo\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì¶œë ¥ì—ì„œ ë‚˜ì˜¨ ê´€ë¦¬ì ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis_6.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eì´ì œ Prometheus ë°ì´í„° ì›ë³¸ì„ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤. Prometheus ì„œë¹„ìŠ¤ URLì€ ëª¨ë‹ˆí„°ë§ì„ ì„¤ì •í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì¸ í´ëŸ¬ìŠ¤í„°ì—ì„œ \u003ca href=\"http://prometheus-server.monitoring.svc.cluster.local%EB%A1%9C\" rel=\"nofollow\" target=\"_blank\"\u003ehttp://prometheus-server.monitoring.svc.cluster.localë¡œ\u003c/a\u003e ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \"Administration\" â†’ \"Data sources\" â†’ \"Add new data source\" ì•„ë˜ë¡œ ì´ë™í•œ ë‹¤ìŒ URLì„ ì¶”ê°€í•˜ê³  \"Save \u0026#x26; Test\"ë¥¼ í´ë¦­í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1400/1*VphOqjzSh30E4dKrnf2Q2A.gif\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eë§Œì•½ ìš°ë¦¬ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ê°„ë‹¨íˆ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ Grafana Labsì—ì„œ ì œê³µí•˜ëŠ” ëŒ€ì‹œë³´ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìš°ë¦¬ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê°„ë‹¨í•œ ë·°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1400/1*AIw7esBCtaz5koK_uJTU-w.gif\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003ch1\u003eë‹¤ìŒ ë‹¨ê³„\u003c/h1\u003e\n\u003ch2\u003eì‚¬ìš©ì ì •ì˜ Docker ì´ë¯¸ì§€\u003c/h2\u003e\n\u003cp\u003eë‹¹ì‹ ì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ì˜í•˜ëŠ” ì¤‘ìš”í•œ ë‹¨ê³„ë¡œ, ê³µê°œ Docker.io ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì—†ëŠ” ì»¨í…Œì´ë„ˆë‚˜ ì‚¬ìš©ì ì •ì˜ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì— ë§ì€ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•  ê³„íšì´ë¼ë©´, ë¬´ë£Œ í‹°ì–´ Docker Hubì˜ ì œí•œì„ í”¼í•˜ê¸° ìœ„í•´ ê°œì¸ ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ëŠ” GCPì˜ Artifacts Repositoryì™€ ê°™ì€ í´ë¼ìš°ë“œ ê³µê¸‰ì—…ì²´ë‚˜ Harborì™€ ê°™ì€ ì˜¤í”ˆ ì†ŒìŠ¤ docker ì €ì¥ì†Œë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eí´ëŸ¬ìŠ¤í„° ìë™í™”\u003c/h2\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eì´ ì•ˆë‚´ì„œëŠ” êµìœ¡ ëª©ì ì´ë‚˜ ì†Œê·œëª¨ ê°œì¸ í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•  ë•Œ ì´ìƒì ì¸ Kubernetes í´ëŸ¬ìŠ¤í„° ì„¤ì •ì— ëŒ€í•œ ìˆ˜ë™ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ í”„ë¡œë•ì…˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•˜ê±°ë‚˜ ì´ ì•ˆë‚´ì„œì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ê²½ìš°, Ansibleê³¼ ê°™ì€ ìë™í™” ë„êµ¬ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ë ‡ê²Œí•˜ë©´ ë” íš¨ìœ¨ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•˜ë©° ê´€ë¦¬í•˜ê¸° ì‰¬ìš´ ë°°í¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eê²°ë¡ \u003c/h1\u003e\n\u003cp\u003eKubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šì„ ìˆ˜ ìˆì§€ë§Œ í•œ ë²ˆ ì™„ë£Œë˜ë©´ ì¼ë°˜ì ì¸ ë…ë¦½í˜• ì„œë²„ë¥¼ ë›°ì–´ë„˜ëŠ” í™•ì¥ ê°€ëŠ¥í•œ í™˜ê²½ì„ ì œê³µí•˜ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eRaspberry PiëŠ” ë¹„ìš©ì´ ì €ë ´í•˜ê³  ì „ë ¥ ì†Œë¹„ê°€ ë‚®ì€ ì˜µì…˜ì´ì§€ë§Œ, ë” í° ì‘ìš© í”„ë¡œê·¸ë¨ì— ëŒ€í•œ í™•ì¥ì„±ì´ ì—¬ì „íˆ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤. Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ ì¥ì ì€ ë™ì¼í•œ í•˜ë“œì›¨ì–´ë§Œ ì‹¤í–‰í•˜ëŠ” ê²ƒì— ì œí•œë°›ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ë…¸ë“œë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ë‹¤ì–‘í•œ í•˜ë“œì›¨ì–´ë¥¼ í˜¼í•©í•˜ì—¬ í•„ìš”ì— ë§ê²Œ Raspberry Pië‚˜ ì„œë²„ì™€ ê°™ì€ ë‹¤ì–‘í•œ í•˜ë“œì›¨ì–´ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003cp\u003eê·¸ê²ƒì´ ì¢‹ì€ ì‹œì‘ì ì´ ë˜ì—ˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤. ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-18-AGuidetoBuildingaKubernetesClusterwithRaspberryPis"},"buildId":"bb_yO9GbCvdfc_n71SfUf","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>