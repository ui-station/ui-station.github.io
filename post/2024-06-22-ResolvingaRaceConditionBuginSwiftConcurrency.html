<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Swift ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ê²½í•© ìƒíƒœ ë²„ê·¸ í•´ê²° ë°©ë²•  | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Swift ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ê²½í•© ìƒíƒœ ë²„ê·¸ í•´ê²° ë°©ë²•  | ui-station" data-gatsby-head="true"/><meta property="og:title" content="Swift ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ê²½í•© ìƒíƒœ ë²„ê·¸ í•´ê²° ë°©ë²•  | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency" data-gatsby-head="true"/><meta name="twitter:title" content="Swift ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ê²½í•© ìƒíƒœ ë²„ê·¸ í•´ê²° ë°©ë²•  | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 23:11" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/wfHLuDA3kTGBYfaM5IGXk/_buildManifest.js" defer=""></script><script src="/_next/static/wfHLuDA3kTGBYfaM5IGXk/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Swift ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ê²½í•© ìƒíƒœ ë²„ê·¸ í•´ê²° ë°©ë²• </h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Swift ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ê²½í•© ìƒíƒœ ë²„ê·¸ í•´ê²° ë°©ë²• " loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">9<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_0.png">
<p>iOS ìº˜ë¦°ë” ìŠ¤ì¼€ì¤„ëŸ¬ì—ëŠ” 'ê¸°ë³¸ ìº˜ë¦°ë”' ê¸°ëŠ¥ì´ ìˆì–´ìš”. Apple ìº˜ë¦°ë”ì™€ ê°™ì€ ì™¸ë¶€ ìº˜ë¦°ë”ì™€ í†µí•©í•œ í›„ì—, ì´ ì„¤ì •ì€ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•  ë•Œ ê°€ì¥ ìì£¼ ì‚¬ìš©í•˜ëŠ” ìº˜ë¦°ë”ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì„ íƒë˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ ì‚¬ìš©ìê°€ ì •ì˜í•œ 'ê¸°ë³¸ ìº˜ë¦°ë”'ë¥¼ ì—°ê²°ëœ ìº˜ë¦°ë”ì—ì„œ ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ë§ ì‹œì— ì—ë””í„°ì˜ 'ìº˜ë¦°ë” ì„ íƒ' ì„¹ì…˜ì—ì„œ ìë™ìœ¼ë¡œ ì„ íƒë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<img src="/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_1.png">
<h1>ğŸ’¡ ê²½í•© ì¡°ê±´ìœ¼ë¡œ ì¸í•œ ë¬¸ì œ í•´ê²°í•˜ê¸°</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ê·¸ëŸ¬ë‚˜ ë•Œë¡œëŠ” ë‹¤ë¥¸ ë‹ ë¦°ë”ê°€ ì„ íƒëœ ê²½ìš°ë„ ìˆì—ˆìŠµë‹ˆë‹¤. í•­ìƒ ê·¸ëŸ° ê²ƒì€ ì•„ë‹ˆì—ˆê³ , ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì •ìƒì ìœ¼ë¡œ ì‘ë™í–ˆìŠµë‹ˆë‹¤. ì œê°€ ì´ ë¬¸ì œë¥¼ ë””ë²„ê·¸í•˜ëŠ” ë°©ë²•ì„ ì˜ ëª¨ë¥´ê² ì—ˆëŠ”ë°, ê°€ë” ë°œìƒí•˜ëŠ” ë¬¸ì œë¼ì„œ ë”ìš± ë” ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ê°€ë”ì”© ë°œìƒí•˜ë”ë¼ë„, ì´ ê¸°ëŠ¥ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©ìê°€ ì˜ëª»ëœ ë§í¬ëœ ë‹¬ë ¥ì— ì´ë²¤íŠ¸ë¥¼ ì•Œì§€ ëª»í•˜ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆì–´ ë‚˜ì¤‘ì— ë¶ˆí•„ìš”í•œ ìˆ˜ì •ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ìµœê·¼ì— ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ì‹¤ë§ˆë¦¬ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. Xcode 16 ë² íƒ€ ë²„ì „ì˜ ìƒˆ ê¸°ëŠ¥ì— ëŒ€í•œ í˜¸ê¸°ì‹¬ìœ¼ë¡œ ì„¤ì¹˜í•œ í›„ ë³´ê²Œ ëœ ê²½ê³  ë©”ì‹œì§€ ë•ë¶„ì´ì—ˆìŠµë‹ˆë‹¤. ì´ ê²½ê³ ëŠ” ì´ì „ ë²„ì „ì˜ Xcodeì—ì„œëŠ” ë‚˜íƒ€ë‚˜ì§€ ì•Šì•˜ê³ , ìŠ¤ìœ„í”„íŠ¸ 6ì˜ ë³´ë‹¤ ì—„ê²©í•œ Actor Isolation ê·œì¹™ìœ¼ë¡œ ì¸í•´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì´ ê·œì¹™ì€ ë™ì‹œì„± ëª¨ë¸ì„ ë” ì•ˆì „í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.</p>
<p><img src="/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_2.png" alt="Image"></p>
<p>ìŠ¤ìœ„í”„íŠ¸ì—ì„œ ActorëŠ” ë™ì‹œì„± ëª¨ë¸ë¡œ, ë‚´ë¶€ í•¨ìˆ˜ì™€ ì†ì„±ì„ ë™ì‹œ ì•¡ì„¸ìŠ¤ë¡œë¶€í„° ë³´í˜¸í•©ë‹ˆë‹¤. ActorsëŠ” ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì„ ì§ë ¬í™”í•˜ì—¬ ê° ì‘ì—…ì´ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê²½í•© ì¡°ê±´ ë° ë°ì´í„° ê²½ì£¼ì™€ ê°™ì€ ë™ì‹œì„± ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ê²½ì£¼ ì¡°ê±´ì€ ì‹œìŠ¤í…œì˜ ë™ì‘ì´ ì‹¤í–‰ ìˆœì„œì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆëŠ” ë‹¤ì¤‘ ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì—ì„œ ì¤‘ìš”í•œ ê°œë…ì…ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ê²½ì£¼ ì¡°ê±´ì€ ë‘ ê°œ ì´ìƒì˜ ì‘ì—…ì´ ë³‘ë ¬ë¡œ ì‹¤í–‰ë˜ê³  ê²°ê³¼ê°€ ì‹¤í–‰ ìˆœì„œë‚˜ ì‹œê°„ì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤. ê²½ì£¼ ì¡°ê±´ì´ ë°œìƒí•˜ë©´ í”„ë¡œê·¸ë¨ì´ ì˜ˆì¸¡í•  ìˆ˜ ì—†ì´ ë™ì‘í•˜ê±°ë‚˜ ì˜ˆìƒì¹˜ ëª»í•œ ê²°ê³¼ë¥¼ ë‚´ë†“ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë°ì´í„° ê²½ì£¼ëŠ” ë‘ ê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ë™ì¼í•œ ë©”ëª¨ë¦¬ ìœ„ì¹˜ì— ì•¡ì„¸ìŠ¤í•˜ê³ , ê·¸ ì¤‘ ì ì–´ë„ í•˜ë‚˜ê°€ ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” ë©”ëª¨ë¦¬ ì¼ê´€ì„±ì„ íŒŒê´´í•˜ê³  ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” í”„ë¡œê·¸ë¨ ë™ì‘ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Swiftì˜ ActorëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ê²©ë¦¬í•©ë‹ˆë‹¤.</p>
<p>ì œ ì½”ë“œì—ì„œëŠ” ë©”ì¸ Actor ì½˜í…ìŠ¤íŠ¸ì—ì„œ Actorë¡œ ê²©ë¦¬ëœ ekRepositoryì˜ eventStore ì†ì„±ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í–ˆìœ¼ë©°, ì´ë¡œ ì¸í•´ Swift 6ì—ì„œ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì½”ë“œì˜ ë¬¸ì œê°€ ìš”ì•½ëœ ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-swift"><span class="hljs-keyword">import</span> EventKit

<span class="hljs-keyword">actor</span> <span class="hljs-title class_">EKRepository</span> {
    <span class="hljs-keyword">let</span> eventStore: <span class="hljs-type">EKEventStore</span>

    <span class="hljs-keyword">init</span>() {
        <span class="hljs-keyword">self</span>.eventStore <span class="hljs-operator">=</span> <span class="hljs-type">EKEventStore</span>()
    }
}

<span class="hljs-meta">@MainActor</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EKInteractor</span>: <span class="hljs-title class_">ObservableObject</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> ekRepository: <span class="hljs-type">EKRepository</span>

    <span class="hljs-keyword">var</span> eventStore: <span class="hljs-type">EKEventStore</span> {
        <span class="hljs-comment">/// ğŸ”¥ Actor-isolated property 'eventStore' can not be referenced from the main actor;</span>
        <span class="hljs-comment">/// ğŸ”¥ this is an error in the Swift 6 language mode.</span>
        ekRepository.eventStore
    }

    <span class="hljs-keyword">init</span>(<span class="hljs-params">ekRepository</span>: <span class="hljs-type">EKRepository</span>) {
        <span class="hljs-keyword">self</span>.ekRepository <span class="hljs-operator">=</span> ekRepository
    }
}
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì €ëŠ” ì´ ì½”ë“œë¥¼ ì²˜ìŒ ì‘ì„±í•  ë•Œ 'eventStore'ê°€ 'EKRepository' ë‚´ì—ì„œë§Œ ì•¡ì„¸ìŠ¤ë˜ë„ë¡ ë³´ì¥í•˜ëŠ” ê²ƒì´ ëª©í‘œì˜€ìŠµë‹ˆë‹¤. ì²˜ìŒì—ëŠ” EKInteractorê°€ ì†ì„±ìœ¼ë¡œ eventStoreë¥¼ ì •ì˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ EKEventEditViewControllerì™€ ê°™ì€ Appleì—ì„œ ì œê³µí•˜ëŠ” UIì— EKEventStoreë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë§ì•˜ìŠµë‹ˆë‹¤. ê·¸ ê²°ê³¼, EKInteractorëŠ” eventStoreì„ ë…¸ì¶œí•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ, EKInteractorê°€ Actor Isolationì„ ë¬´ì‹œí•˜ê³  ekRepositoryì˜ eventStoreì— ì•¡ì„¸ìŠ¤í•˜ê³  ìˆë‹¤ë©´, ì´ëŠ” ê²½í•© ì¡°ê±´ê³¼ ì˜ˆê¸°ì¹˜ ì•Šì€ ë¬¸ì œë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§í•˜ì—¬ Actor Isolationì„ ì¤€ìˆ˜í•˜ë„ë¡ ë§Œë“¤ì–´ ê²½í•© ì¡°ê±´ì„ í”¼í–ˆìŠµë‹ˆë‹¤. ë¦¬íŒ©í† ë§ëœ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-swift"><span class="hljs-keyword">actor</span> <span class="hljs-title class_">EKRepository</span> {
    <span class="hljs-comment">/// ğŸ’¡ 'getEventStore()' ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ eventStoreì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ìº¡ìŠí™”</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> eventStore: <span class="hljs-type">EKEventStore</span>

    <span class="hljs-keyword">init</span>() {
        <span class="hljs-keyword">self</span>.eventStore <span class="hljs-operator">=</span> <span class="hljs-type">EKEventStore</span>()
    }
}

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">EKRepository</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">getEventStore</span>() -> <span class="hljs-type">EKEventStore</span> {
        <span class="hljs-keyword">return</span> eventStore
    }
}

<span class="hljs-meta">@MainActor</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EKInteractor</span>: <span class="hljs-title class_">ObservableObject</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> ekRepository: <span class="hljs-type">EKRepository</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cachedEventStore: <span class="hljs-type">EKEventStore</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>

    <span class="hljs-comment">/// ğŸ’¡ Actor Isolationì„ ì¤€ìˆ˜í•˜ë©´ì„œ eventStoreì— ë¹„ë™ê¸°ì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•˜ê³  ìºì‹œí•©ë‹ˆë‹¤.</span>
    <span class="hljs-comment">/// ìš°ì„  ìºì‹œëœ eventStoreì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ ,</span>
    <span class="hljs-comment">/// ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ EKRepositoryì˜ getEventStore ë©”ì„œë“œë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì—¬ eventStoreì„ ê°€ì ¸ì™€ ìºì‹œí•©ë‹ˆë‹¤.</span>
    <span class="hljs-keyword">var</span> eventStore: <span class="hljs-type">EKEventStore</span> {
        <span class="hljs-keyword">get</span> <span class="hljs-keyword">async</span> {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> eventStore <span class="hljs-operator">=</span> cachedEventStore {
                <span class="hljs-keyword">return</span> eventStore
            }

            <span class="hljs-keyword">let</span> store <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> ekRepository.getEventStore()
            cachedEventStore <span class="hljs-operator">=</span> store
            <span class="hljs-keyword">return</span> store
        }
    }

    <span class="hljs-keyword">init</span>(<span class="hljs-params">ekRepository</span>: <span class="hljs-type">EKRepository</span>) {
        <span class="hljs-keyword">self</span>.ekRepository <span class="hljs-operator">=</span> ekRepository

        <span class="hljs-comment">/// ğŸ’¡ ì‹œì‘í•  ë•Œ eventStoreì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì™€ ìºì‹±í•˜ì—¬ ì´í›„ ì•¡ì„¸ìŠ¤ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.</span>
        initEventStore(ekRepository: ekRepository)
    }
}

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">EKInteractor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">initEventStore</span>(<span class="hljs-params">ekRepository</span>: <span class="hljs-type">EKRepository</span>) {
        <span class="hljs-comment">/// ğŸ’¡ [Task] ì´ ë©”ì„œë“œëŠ” eventStoreì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì™€ ìºì‹œí•˜ì§€ë§Œ,</span>
        <span class="hljs-comment">/// ì´ í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ê¸° ì „ì— í›„ì† ì‘ì—…ì´ ì§„í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
        <span class="hljs-type">Task</span> {
            <span class="hljs-keyword">self</span>.cachedEventStore <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> ekRepository.getEventStore()
        }
    }
}
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë˜í•œ, 'Default Calendar'ë¥¼ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì—ì„œ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì— ë¯¼ê°í•œ ì½”ë“œë¥¼ ë°œê²¬í–ˆì–´ìš”. ì•„ë˜ ì½”ë“œì—ì„œëŠ” newEKEventì˜ ìº˜ë¦°ë”(íƒ€ì…ì€ EKCalendar)ê°€ Task ë¸”ë¡ ë‚´ì—ì„œ ë¹„ë™ê¸°ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë¹„ë™ê¸° ì‘ì—…ì€ getNewEKEvent í•¨ìˆ˜ê°€ newEKEvent ê°ì²´ë¥¼ ë°˜í™˜í•œ ë’¤ì— ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë°˜í™˜ëœ newEKEvent ê°ì²´ë¥¼ ë‹¤ë¥¸ ê³³ì—ì„œ ì‚¬ìš©í•˜ë ¤ê³  í•  ë•Œ ìº˜ë¦°ë” ì†ì„±ì´ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì€ 'ì‹¤í–‰ ìˆœì„œ(execution order)'ì— ë”°ë¼ ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ë™ì‘ì„ ìœ ë°œí•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” í•´ê²°í•˜ê³ ì í–ˆë˜ ê°„í—ì  ë²„ê·¸ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">private func <span class="hljs-title function_">getNewEKEvent</span>(<span class="hljs-attr">ekInteractor</span>: <span class="hljs-title class_">EKInteractor</span>, <span class="hljs-attr">selectedDate</span>: <span class="hljs-title class_">Date</span>) -> <span class="hljs-title class_">EKEvent</span> {
    <span class="hljs-keyword">let</span> newEKEvent = <span class="hljs-title class_">EKEvent</span>(<span class="hljs-attr">eventStore</span>: ekInteractor.<span class="hljs-property">eventStore</span>)

    <span class="hljs-comment">// ğŸ”¥ ë¬¸ì œ: ì´ Task ë¸”ë¡ì€ ë¹„ë™ê¸°ë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ, í•¨ìˆ˜ê°€ newEKEventë¥¼ ë°˜í™˜í•œ í›„ì— ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
    <span class="hljs-title class_">Task</span> {
        <span class="hljs-comment">// ğŸ”¥ ë¬¸ì œ: ë¹„ë™ê¸° ì‘ì—…ì´ newEKEvent ë°˜í™˜ í›„ì— ì™„ë£Œëœ ê²½ìš°, ìº˜ë¦°ë” ì†ì„±ì´ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> defaultEKCalendarToAdd = <span class="hljs-keyword">await</span> ekInteractor.<span class="hljs-title function_">getDefaultEKCalendarToAdd</span>(<span class="hljs-params"></span>) {
            newEKEvent.<span class="hljs-property">calendar</span> = defaultEKCalendarToAdd
        }
    }

    <span class="hljs-comment">// ğŸ”¥ ë¬¸ì œ: í•¨ìˆ˜ê°€ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ê¸° ì „ì— newEKEventë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ, ë°ì´í„° ë ˆì´ìŠ¤ì™€ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
    <span class="hljs-keyword">return</span> newEKEvent
}
</code></pre>
<p>ìš”ì•½í•˜ë©´, ìœ„ì˜ ì½”ë“œëŠ” 'ë ˆì´ìŠ¤ ì»¨ë””ì…˜'ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆìœ¼ë©°, ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ê¸° ì „ì— ê°ì²´ê°€ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ ë¬¸ì œëŠ” ì•„ë˜ì— í‘œì‹œëœ ëŒ€ë¡œ ì½”ë“œë¥¼ ì¬êµ¬ì„±í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/// ğŸ’¡ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ getNewEKEvent í•¨ìˆ˜ë¥¼ asyncë¡œ ì„ ì–¸í•˜ì—¬,</span>
<span class="hljs-comment">/// ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œëœ í›„ì—ë§Œ newEKEventê°€ ë°˜í™˜ë˜ë„ë¡ í•¨.</span>
<span class="hljs-comment">/// ---> ë ˆì´ìŠ¤ ì»¨ë””ì…˜ê³¼ ë°ì´í„° ë ˆì´ìŠ¤ ë°©ì§€</span>
private func <span class="hljs-title function_">getNewEKEvent</span>(<span class="hljs-attr">ekInteractor</span>: <span class="hljs-title class_">EKInteractor</span>, <span class="hljs-attr">selectedDate</span>: <span class="hljs-title class_">Date</span>) <span class="hljs-keyword">async</span> -> <span class="hljs-title class_">EKEvent</span> {
    <span class="hljs-comment">/// ğŸ’¡ eventStoreë¥¼ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ await ì‚¬ìš©</span>
    <span class="hljs-keyword">let</span> newEKEvent = <span class="hljs-title class_">EKEvent</span>(<span class="hljs-attr">eventStore</span>: <span class="hljs-keyword">await</span> ekInteractor.<span class="hljs-property">eventStore</span>)

    <span class="hljs-comment">/// ğŸ’¡ defaultEKCalendarToAddë¥¼ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì™€ newEKEventì˜ ìº˜ë¦°ë” ì†ì„±ì— ì„¤ì •</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> defaultEKCalendarToAdd = <span class="hljs-keyword">await</span> ekInteractor.<span class="hljs-title function_">getDefaultEKCalendarToAdd</span>(<span class="hljs-params"></span>) {
        newEKEvent.<span class="hljs-property">calendar</span> = defaultEKCalendarToAdd
    }

    <span class="hljs-comment">/// ğŸ’¡ ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œëœ í›„ì— newEKEvent ë°˜í™˜</span>
    <span class="hljs-keyword">return</span> newEKEvent
}
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>ê²°ë¡ </h1>
<p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ì„œ Swift ë™ì‹œì„±ì— ëŒ€í•œ ì´í•´ê°€ ê¹Šì–´ì¡ŒìŠµë‹ˆë‹¤. ì•ˆì „í•œ ë™ì‹œ ì½”ë“œ ì‘ì„±ì˜ ê¸°ì´ˆë¥¼ í™•ë¦½í•  ìˆ˜ ìˆì–´ ê¸°ì©ë‹ˆë‹¤. ë¬´ì—‡ë³´ë‹¤ë„, Scheduler ì•±ì˜ ë‹¤ìŒ ì—…ë°ì´íŠ¸ì—ì„œ ì‚¬ìš©ìì—ê²Œ í ì¡ì„ ë° ì—†ëŠ” 'ê¸°ë³¸ ìº˜ë¦°ë”' ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆì–´ ê¸°ì©ë‹ˆë‹¤.</p>
<p>'Reminders'ë¶€í„° 'ê¸°ë³¸ ìº˜ë¦°ë”'ê¹Œì§€ ëª¨ë“  ê²ƒì„ ì‹ ì†í•˜ê²Œ í†µí•©í•˜ì„¸ìš”.
ë‹¤ì–‘í•œ ìœ„ì ¯.
Scheduler: iPhone, iPad ë° Macìš© ìº˜ë¦°ë” ì•±.</p>
<h1>ì°¸ê³ ë¬¸í—Œ</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>Swift í”„ë¡œê·¸ë˜ë° ì–¸ì–´ â€” ë™ì‹œì„±:
<a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/concurrency/" rel="nofollow" target="_blank">https://docs.swift.org/swift-book/documentation/the-swift-programming-language/concurrency/</a></li>
<li>Apple ê°œë°œì ë¬¸ì„œ â€” Swift ë™ì‹œì„±:
<a href="https://developer.apple.com/documentation/swift/concurrency" rel="nofollow" target="_blank">https://developer.apple.com/documentation/swift/concurrency</a></li>
<li>Apple ê°œë°œì ë¬¸ì„œ â€” EKEventStore:
<a href="https://developer.apple.com/documentation/eventkit/ekeventstore" rel="nofollow" target="_blank">https://developer.apple.com/documentation/eventkit/ekeventstore</a></li>
<li>ê²½í•© ì¡°ê±´ ì´í•´ì™€ í•´ê²°:
<a href="https://en.wikipedia.org/wiki/Race_condition" rel="nofollow" target="_blank">https://en.wikipedia.org/wiki/Race_condition</a></li>
<li>Apple ê°œë°œì ë¬¸ì„œ â€” Task:
<a href="https://developer.apple.com/documentation/swift/task" rel="nofollow" target="_blank">https://developer.apple.com/documentation/swift/task</a></li>
</ul>
<p>ì´ëŸ¬í•œ ìë£Œë“¤ì€ Swift ë™ì‹œì„±, ì•¡í„° ë° ê´€ë ¨ ì£¼ì œì— ëŒ€í•´ ìì„¸í•œ ì •ë³´ë¥¼ ì œê³µí•˜ì—¬ ê²½í•© ì¡°ê±´ê³¼ ê°™ì€ ë¬¸ì œë¥¼ ì´í•´í•˜ê³  í•´ê²°í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Swift ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ê²½í•© ìƒíƒœ ë²„ê·¸ í•´ê²° ë°©ë²• ","description":"","date":"2024-06-22 23:11","slug":"2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency","content":"\n\u003cimg src=\"/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_0.png\" /\u003e\n\niOS ìº˜ë¦°ë” ìŠ¤ì¼€ì¤„ëŸ¬ì—ëŠ” 'ê¸°ë³¸ ìº˜ë¦°ë”' ê¸°ëŠ¥ì´ ìˆì–´ìš”. Apple ìº˜ë¦°ë”ì™€ ê°™ì€ ì™¸ë¶€ ìº˜ë¦°ë”ì™€ í†µí•©í•œ í›„ì—, ì´ ì„¤ì •ì€ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•  ë•Œ ê°€ì¥ ìì£¼ ì‚¬ìš©í•˜ëŠ” ìº˜ë¦°ë”ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì„ íƒë˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ ì‚¬ìš©ìê°€ ì •ì˜í•œ 'ê¸°ë³¸ ìº˜ë¦°ë”'ë¥¼ ì—°ê²°ëœ ìº˜ë¦°ë”ì—ì„œ ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ë§ ì‹œì— ì—ë””í„°ì˜ 'ìº˜ë¦°ë” ì„ íƒ' ì„¹ì…˜ì—ì„œ ìë™ìœ¼ë¡œ ì„ íƒë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.\n\n\u003cimg src=\"/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_1.png\" /\u003e\n\n# ğŸ’¡ ê²½í•© ì¡°ê±´ìœ¼ë¡œ ì¸í•œ ë¬¸ì œ í•´ê²°í•˜ê¸°\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nê·¸ëŸ¬ë‚˜ ë•Œë¡œëŠ” ë‹¤ë¥¸ ë‹ ë¦°ë”ê°€ ì„ íƒëœ ê²½ìš°ë„ ìˆì—ˆìŠµë‹ˆë‹¤. í•­ìƒ ê·¸ëŸ° ê²ƒì€ ì•„ë‹ˆì—ˆê³ , ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì •ìƒì ìœ¼ë¡œ ì‘ë™í–ˆìŠµë‹ˆë‹¤. ì œê°€ ì´ ë¬¸ì œë¥¼ ë””ë²„ê·¸í•˜ëŠ” ë°©ë²•ì„ ì˜ ëª¨ë¥´ê² ì—ˆëŠ”ë°, ê°€ë” ë°œìƒí•˜ëŠ” ë¬¸ì œë¼ì„œ ë”ìš± ë” ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ê°€ë”ì”© ë°œìƒí•˜ë”ë¼ë„, ì´ ê¸°ëŠ¥ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©ìê°€ ì˜ëª»ëœ ë§í¬ëœ ë‹¬ë ¥ì— ì´ë²¤íŠ¸ë¥¼ ì•Œì§€ ëª»í•˜ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆì–´ ë‚˜ì¤‘ì— ë¶ˆí•„ìš”í•œ ìˆ˜ì •ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nìµœê·¼ì— ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ì‹¤ë§ˆë¦¬ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. Xcode 16 ë² íƒ€ ë²„ì „ì˜ ìƒˆ ê¸°ëŠ¥ì— ëŒ€í•œ í˜¸ê¸°ì‹¬ìœ¼ë¡œ ì„¤ì¹˜í•œ í›„ ë³´ê²Œ ëœ ê²½ê³  ë©”ì‹œì§€ ë•ë¶„ì´ì—ˆìŠµë‹ˆë‹¤. ì´ ê²½ê³ ëŠ” ì´ì „ ë²„ì „ì˜ Xcodeì—ì„œëŠ” ë‚˜íƒ€ë‚˜ì§€ ì•Šì•˜ê³ , ìŠ¤ìœ„í”„íŠ¸ 6ì˜ ë³´ë‹¤ ì—„ê²©í•œ Actor Isolation ê·œì¹™ìœ¼ë¡œ ì¸í•´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì´ ê·œì¹™ì€ ë™ì‹œì„± ëª¨ë¸ì„ ë” ì•ˆì „í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.\n\n![Image](/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_2.png)\n\nìŠ¤ìœ„í”„íŠ¸ì—ì„œ ActorëŠ” ë™ì‹œì„± ëª¨ë¸ë¡œ, ë‚´ë¶€ í•¨ìˆ˜ì™€ ì†ì„±ì„ ë™ì‹œ ì•¡ì„¸ìŠ¤ë¡œë¶€í„° ë³´í˜¸í•©ë‹ˆë‹¤. ActorsëŠ” ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì„ ì§ë ¬í™”í•˜ì—¬ ê° ì‘ì—…ì´ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê²½í•© ì¡°ê±´ ë° ë°ì´í„° ê²½ì£¼ì™€ ê°™ì€ ë™ì‹œì„± ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nê²½ì£¼ ì¡°ê±´ì€ ì‹œìŠ¤í…œì˜ ë™ì‘ì´ ì‹¤í–‰ ìˆœì„œì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆëŠ” ë‹¤ì¤‘ ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì—ì„œ ì¤‘ìš”í•œ ê°œë…ì…ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ê²½ì£¼ ì¡°ê±´ì€ ë‘ ê°œ ì´ìƒì˜ ì‘ì—…ì´ ë³‘ë ¬ë¡œ ì‹¤í–‰ë˜ê³  ê²°ê³¼ê°€ ì‹¤í–‰ ìˆœì„œë‚˜ ì‹œê°„ì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤. ê²½ì£¼ ì¡°ê±´ì´ ë°œìƒí•˜ë©´ í”„ë¡œê·¸ë¨ì´ ì˜ˆì¸¡í•  ìˆ˜ ì—†ì´ ë™ì‘í•˜ê±°ë‚˜ ì˜ˆìƒì¹˜ ëª»í•œ ê²°ê³¼ë¥¼ ë‚´ë†“ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në°ì´í„° ê²½ì£¼ëŠ” ë‘ ê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ë™ì¼í•œ ë©”ëª¨ë¦¬ ìœ„ì¹˜ì— ì•¡ì„¸ìŠ¤í•˜ê³ , ê·¸ ì¤‘ ì ì–´ë„ í•˜ë‚˜ê°€ ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” ë©”ëª¨ë¦¬ ì¼ê´€ì„±ì„ íŒŒê´´í•˜ê³  ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” í”„ë¡œê·¸ë¨ ë™ì‘ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Swiftì˜ ActorëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ê²©ë¦¬í•©ë‹ˆë‹¤.\n\nì œ ì½”ë“œì—ì„œëŠ” ë©”ì¸ Actor ì½˜í…ìŠ¤íŠ¸ì—ì„œ Actorë¡œ ê²©ë¦¬ëœ ekRepositoryì˜ eventStore ì†ì„±ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í–ˆìœ¼ë©°, ì´ë¡œ ì¸í•´ Swift 6ì—ì„œ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì½”ë“œì˜ ë¬¸ì œê°€ ìš”ì•½ëœ ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n```swift\nimport EventKit\n\nactor EKRepository {\n    let eventStore: EKEventStore\n\n    init() {\n        self.eventStore = EKEventStore()\n    }\n}\n\n@MainActor\nfinal class EKInteractor: ObservableObject {\n    private let ekRepository: EKRepository\n\n    var eventStore: EKEventStore {\n        /// ğŸ”¥ Actor-isolated property 'eventStore' can not be referenced from the main actor;\n        /// ğŸ”¥ this is an error in the Swift 6 language mode.\n        ekRepository.eventStore\n    }\n\n    init(ekRepository: EKRepository) {\n        self.ekRepository = ekRepository\n    }\n}\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì €ëŠ” ì´ ì½”ë“œë¥¼ ì²˜ìŒ ì‘ì„±í•  ë•Œ 'eventStore'ê°€ 'EKRepository' ë‚´ì—ì„œë§Œ ì•¡ì„¸ìŠ¤ë˜ë„ë¡ ë³´ì¥í•˜ëŠ” ê²ƒì´ ëª©í‘œì˜€ìŠµë‹ˆë‹¤. ì²˜ìŒì—ëŠ” EKInteractorê°€ ì†ì„±ìœ¼ë¡œ eventStoreë¥¼ ì •ì˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ EKEventEditViewControllerì™€ ê°™ì€ Appleì—ì„œ ì œê³µí•˜ëŠ” UIì— EKEventStoreë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë§ì•˜ìŠµë‹ˆë‹¤. ê·¸ ê²°ê³¼, EKInteractorëŠ” eventStoreì„ ë…¸ì¶œí•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, EKInteractorê°€ Actor Isolationì„ ë¬´ì‹œí•˜ê³  ekRepositoryì˜ eventStoreì— ì•¡ì„¸ìŠ¤í•˜ê³  ìˆë‹¤ë©´, ì´ëŠ” ê²½í•© ì¡°ê±´ê³¼ ì˜ˆê¸°ì¹˜ ì•Šì€ ë¬¸ì œë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§í•˜ì—¬ Actor Isolationì„ ì¤€ìˆ˜í•˜ë„ë¡ ë§Œë“¤ì–´ ê²½í•© ì¡°ê±´ì„ í”¼í–ˆìŠµë‹ˆë‹¤. ë¦¬íŒ©í† ë§ëœ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n```swift\nactor EKRepository {\n    /// ğŸ’¡ 'getEventStore()' ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ eventStoreì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ìº¡ìŠí™”\n    private let eventStore: EKEventStore\n\n    init() {\n        self.eventStore = EKEventStore()\n    }\n}\n\nextension EKRepository {\n    func getEventStore() -\u003e EKEventStore {\n        return eventStore\n    }\n}\n\n@MainActor\nfinal class EKInteractor: ObservableObject {\n    private let ekRepository: EKRepository\n\n    private var cachedEventStore: EKEventStore? = nil\n\n    /// ğŸ’¡ Actor Isolationì„ ì¤€ìˆ˜í•˜ë©´ì„œ eventStoreì— ë¹„ë™ê¸°ì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•˜ê³  ìºì‹œí•©ë‹ˆë‹¤.\n    /// ìš°ì„  ìºì‹œëœ eventStoreì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ ,\n    /// ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ EKRepositoryì˜ getEventStore ë©”ì„œë“œë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì—¬ eventStoreì„ ê°€ì ¸ì™€ ìºì‹œí•©ë‹ˆë‹¤.\n    var eventStore: EKEventStore {\n        get async {\n            if let eventStore = cachedEventStore {\n                return eventStore\n            }\n\n            let store = await ekRepository.getEventStore()\n            cachedEventStore = store\n            return store\n        }\n    }\n\n    init(ekRepository: EKRepository) {\n        self.ekRepository = ekRepository\n\n        /// ğŸ’¡ ì‹œì‘í•  ë•Œ eventStoreì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì™€ ìºì‹±í•˜ì—¬ ì´í›„ ì•¡ì„¸ìŠ¤ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\n        initEventStore(ekRepository: ekRepository)\n    }\n}\n\nextension EKInteractor {\n    private func initEventStore(ekRepository: EKRepository) {\n        /// ğŸ’¡ [Task] ì´ ë©”ì„œë“œëŠ” eventStoreì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì™€ ìºì‹œí•˜ì§€ë§Œ,\n        /// ì´ í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ê¸° ì „ì— í›„ì† ì‘ì—…ì´ ì§„í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n        Task {\n            self.cachedEventStore = await ekRepository.getEventStore()\n        }\n    }\n}\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në˜í•œ, 'Default Calendar'ë¥¼ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì—ì„œ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì— ë¯¼ê°í•œ ì½”ë“œë¥¼ ë°œê²¬í–ˆì–´ìš”. ì•„ë˜ ì½”ë“œì—ì„œëŠ” newEKEventì˜ ìº˜ë¦°ë”(íƒ€ì…ì€ EKCalendar)ê°€ Task ë¸”ë¡ ë‚´ì—ì„œ ë¹„ë™ê¸°ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë¹„ë™ê¸° ì‘ì—…ì€ getNewEKEvent í•¨ìˆ˜ê°€ newEKEvent ê°ì²´ë¥¼ ë°˜í™˜í•œ ë’¤ì— ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë°˜í™˜ëœ newEKEvent ê°ì²´ë¥¼ ë‹¤ë¥¸ ê³³ì—ì„œ ì‚¬ìš©í•˜ë ¤ê³  í•  ë•Œ ìº˜ë¦°ë” ì†ì„±ì´ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì€ 'ì‹¤í–‰ ìˆœì„œ(execution order)'ì— ë”°ë¼ ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ë™ì‘ì„ ìœ ë°œí•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” í•´ê²°í•˜ê³ ì í–ˆë˜ ê°„í—ì  ë²„ê·¸ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.\n\n```js\nprivate func getNewEKEvent(ekInteractor: EKInteractor, selectedDate: Date) -\u003e EKEvent {\n    let newEKEvent = EKEvent(eventStore: ekInteractor.eventStore)\n\n    // ğŸ”¥ ë¬¸ì œ: ì´ Task ë¸”ë¡ì€ ë¹„ë™ê¸°ë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ, í•¨ìˆ˜ê°€ newEKEventë¥¼ ë°˜í™˜í•œ í›„ì— ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n    Task {\n        // ğŸ”¥ ë¬¸ì œ: ë¹„ë™ê¸° ì‘ì—…ì´ newEKEvent ë°˜í™˜ í›„ì— ì™„ë£Œëœ ê²½ìš°, ìº˜ë¦°ë” ì†ì„±ì´ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n        if let defaultEKCalendarToAdd = await ekInteractor.getDefaultEKCalendarToAdd() {\n            newEKEvent.calendar = defaultEKCalendarToAdd\n        }\n    }\n\n    // ğŸ”¥ ë¬¸ì œ: í•¨ìˆ˜ê°€ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ê¸° ì „ì— newEKEventë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ, ë°ì´í„° ë ˆì´ìŠ¤ì™€ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n    return newEKEvent\n}\n```\n\nìš”ì•½í•˜ë©´, ìœ„ì˜ ì½”ë“œëŠ” 'ë ˆì´ìŠ¤ ì»¨ë””ì…˜'ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆìœ¼ë©°, ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ê¸° ì „ì— ê°ì²´ê°€ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ ë¬¸ì œëŠ” ì•„ë˜ì— í‘œì‹œëœ ëŒ€ë¡œ ì½”ë“œë¥¼ ì¬êµ¬ì„±í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\n/// ğŸ’¡ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ getNewEKEvent í•¨ìˆ˜ë¥¼ asyncë¡œ ì„ ì–¸í•˜ì—¬,\n/// ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œëœ í›„ì—ë§Œ newEKEventê°€ ë°˜í™˜ë˜ë„ë¡ í•¨.\n/// ---\u003e ë ˆì´ìŠ¤ ì»¨ë””ì…˜ê³¼ ë°ì´í„° ë ˆì´ìŠ¤ ë°©ì§€\nprivate func getNewEKEvent(ekInteractor: EKInteractor, selectedDate: Date) async -\u003e EKEvent {\n    /// ğŸ’¡ eventStoreë¥¼ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ await ì‚¬ìš©\n    let newEKEvent = EKEvent(eventStore: await ekInteractor.eventStore)\n\n    /// ğŸ’¡ defaultEKCalendarToAddë¥¼ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì™€ newEKEventì˜ ìº˜ë¦°ë” ì†ì„±ì— ì„¤ì •\n    if let defaultEKCalendarToAdd = await ekInteractor.getDefaultEKCalendarToAdd() {\n        newEKEvent.calendar = defaultEKCalendarToAdd\n    }\n\n    /// ğŸ’¡ ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œëœ í›„ì— newEKEvent ë°˜í™˜\n    return newEKEvent\n}\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ê²°ë¡ \n\nì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ì„œ Swift ë™ì‹œì„±ì— ëŒ€í•œ ì´í•´ê°€ ê¹Šì–´ì¡ŒìŠµë‹ˆë‹¤. ì•ˆì „í•œ ë™ì‹œ ì½”ë“œ ì‘ì„±ì˜ ê¸°ì´ˆë¥¼ í™•ë¦½í•  ìˆ˜ ìˆì–´ ê¸°ì©ë‹ˆë‹¤. ë¬´ì—‡ë³´ë‹¤ë„, Scheduler ì•±ì˜ ë‹¤ìŒ ì—…ë°ì´íŠ¸ì—ì„œ ì‚¬ìš©ìì—ê²Œ í ì¡ì„ ë° ì—†ëŠ” 'ê¸°ë³¸ ìº˜ë¦°ë”' ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆì–´ ê¸°ì©ë‹ˆë‹¤.\n\n'Reminders'ë¶€í„° 'ê¸°ë³¸ ìº˜ë¦°ë”'ê¹Œì§€ ëª¨ë“  ê²ƒì„ ì‹ ì†í•˜ê²Œ í†µí•©í•˜ì„¸ìš”.\në‹¤ì–‘í•œ ìœ„ì ¯.\nScheduler: iPhone, iPad ë° Macìš© ìº˜ë¦°ë” ì•±.\n\n# ì°¸ê³ ë¬¸í—Œ\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- Swift í”„ë¡œê·¸ë˜ë° ì–¸ì–´ â€” ë™ì‹œì„±:\n  https://docs.swift.org/swift-book/documentation/the-swift-programming-language/concurrency/\n- Apple ê°œë°œì ë¬¸ì„œ â€” Swift ë™ì‹œì„±:\n  https://developer.apple.com/documentation/swift/concurrency\n- Apple ê°œë°œì ë¬¸ì„œ â€” EKEventStore:\n  https://developer.apple.com/documentation/eventkit/ekeventstore\n- ê²½í•© ì¡°ê±´ ì´í•´ì™€ í•´ê²°:\n  https://en.wikipedia.org/wiki/Race_condition\n- Apple ê°œë°œì ë¬¸ì„œ â€” Task:\n  https://developer.apple.com/documentation/swift/task\n\nì´ëŸ¬í•œ ìë£Œë“¤ì€ Swift ë™ì‹œì„±, ì•¡í„° ë° ê´€ë ¨ ì£¼ì œì— ëŒ€í•´ ìì„¸í•œ ì •ë³´ë¥¼ ì œê³µí•˜ì—¬ ê²½í•© ì¡°ê±´ê³¼ ê°™ì€ ë¬¸ì œë¥¼ ì´í•´í•˜ê³  í•´ê²°í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\n","ogImage":{"url":"/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_0.png"},"coverImage":"/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_0.png","tag":["Tech"],"readingTime":9},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_0.png\"\u003e\n\u003cp\u003eiOS ìº˜ë¦°ë” ìŠ¤ì¼€ì¤„ëŸ¬ì—ëŠ” 'ê¸°ë³¸ ìº˜ë¦°ë”' ê¸°ëŠ¥ì´ ìˆì–´ìš”. Apple ìº˜ë¦°ë”ì™€ ê°™ì€ ì™¸ë¶€ ìº˜ë¦°ë”ì™€ í†µí•©í•œ í›„ì—, ì´ ì„¤ì •ì€ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•  ë•Œ ê°€ì¥ ìì£¼ ì‚¬ìš©í•˜ëŠ” ìº˜ë¦°ë”ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì„ íƒë˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ ì‚¬ìš©ìê°€ ì •ì˜í•œ 'ê¸°ë³¸ ìº˜ë¦°ë”'ë¥¼ ì—°ê²°ëœ ìº˜ë¦°ë”ì—ì„œ ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ë§ ì‹œì— ì—ë””í„°ì˜ 'ìº˜ë¦°ë” ì„ íƒ' ì„¹ì…˜ì—ì„œ ìë™ìœ¼ë¡œ ì„ íƒë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_1.png\"\u003e\n\u003ch1\u003eğŸ’¡ ê²½í•© ì¡°ê±´ìœ¼ë¡œ ì¸í•œ ë¬¸ì œ í•´ê²°í•˜ê¸°\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eê·¸ëŸ¬ë‚˜ ë•Œë¡œëŠ” ë‹¤ë¥¸ ë‹ ë¦°ë”ê°€ ì„ íƒëœ ê²½ìš°ë„ ìˆì—ˆìŠµë‹ˆë‹¤. í•­ìƒ ê·¸ëŸ° ê²ƒì€ ì•„ë‹ˆì—ˆê³ , ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì •ìƒì ìœ¼ë¡œ ì‘ë™í–ˆìŠµë‹ˆë‹¤. ì œê°€ ì´ ë¬¸ì œë¥¼ ë””ë²„ê·¸í•˜ëŠ” ë°©ë²•ì„ ì˜ ëª¨ë¥´ê² ì—ˆëŠ”ë°, ê°€ë” ë°œìƒí•˜ëŠ” ë¬¸ì œë¼ì„œ ë”ìš± ë” ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ê°€ë”ì”© ë°œìƒí•˜ë”ë¼ë„, ì´ ê¸°ëŠ¥ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©ìê°€ ì˜ëª»ëœ ë§í¬ëœ ë‹¬ë ¥ì— ì´ë²¤íŠ¸ë¥¼ ì•Œì§€ ëª»í•˜ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆì–´ ë‚˜ì¤‘ì— ë¶ˆí•„ìš”í•œ ìˆ˜ì •ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eìµœê·¼ì— ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ì‹¤ë§ˆë¦¬ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. Xcode 16 ë² íƒ€ ë²„ì „ì˜ ìƒˆ ê¸°ëŠ¥ì— ëŒ€í•œ í˜¸ê¸°ì‹¬ìœ¼ë¡œ ì„¤ì¹˜í•œ í›„ ë³´ê²Œ ëœ ê²½ê³  ë©”ì‹œì§€ ë•ë¶„ì´ì—ˆìŠµë‹ˆë‹¤. ì´ ê²½ê³ ëŠ” ì´ì „ ë²„ì „ì˜ Xcodeì—ì„œëŠ” ë‚˜íƒ€ë‚˜ì§€ ì•Šì•˜ê³ , ìŠ¤ìœ„í”„íŠ¸ 6ì˜ ë³´ë‹¤ ì—„ê²©í•œ Actor Isolation ê·œì¹™ìœ¼ë¡œ ì¸í•´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì´ ê·œì¹™ì€ ë™ì‹œì„± ëª¨ë¸ì„ ë” ì•ˆì „í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency_2.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cp\u003eìŠ¤ìœ„í”„íŠ¸ì—ì„œ ActorëŠ” ë™ì‹œì„± ëª¨ë¸ë¡œ, ë‚´ë¶€ í•¨ìˆ˜ì™€ ì†ì„±ì„ ë™ì‹œ ì•¡ì„¸ìŠ¤ë¡œë¶€í„° ë³´í˜¸í•©ë‹ˆë‹¤. ActorsëŠ” ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì„ ì§ë ¬í™”í•˜ì—¬ ê° ì‘ì—…ì´ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê²½í•© ì¡°ê±´ ë° ë°ì´í„° ê²½ì£¼ì™€ ê°™ì€ ë™ì‹œì„± ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eê²½ì£¼ ì¡°ê±´ì€ ì‹œìŠ¤í…œì˜ ë™ì‘ì´ ì‹¤í–‰ ìˆœì„œì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆëŠ” ë‹¤ì¤‘ ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì—ì„œ ì¤‘ìš”í•œ ê°œë…ì…ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ê²½ì£¼ ì¡°ê±´ì€ ë‘ ê°œ ì´ìƒì˜ ì‘ì—…ì´ ë³‘ë ¬ë¡œ ì‹¤í–‰ë˜ê³  ê²°ê³¼ê°€ ì‹¤í–‰ ìˆœì„œë‚˜ ì‹œê°„ì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤. ê²½ì£¼ ì¡°ê±´ì´ ë°œìƒí•˜ë©´ í”„ë¡œê·¸ë¨ì´ ì˜ˆì¸¡í•  ìˆ˜ ì—†ì´ ë™ì‘í•˜ê±°ë‚˜ ì˜ˆìƒì¹˜ ëª»í•œ ê²°ê³¼ë¥¼ ë‚´ë†“ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë°ì´í„° ê²½ì£¼ëŠ” ë‘ ê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ë™ì¼í•œ ë©”ëª¨ë¦¬ ìœ„ì¹˜ì— ì•¡ì„¸ìŠ¤í•˜ê³ , ê·¸ ì¤‘ ì ì–´ë„ í•˜ë‚˜ê°€ ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” ë©”ëª¨ë¦¬ ì¼ê´€ì„±ì„ íŒŒê´´í•˜ê³  ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” í”„ë¡œê·¸ë¨ ë™ì‘ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Swiftì˜ ActorëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ê²©ë¦¬í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì œ ì½”ë“œì—ì„œëŠ” ë©”ì¸ Actor ì½˜í…ìŠ¤íŠ¸ì—ì„œ Actorë¡œ ê²©ë¦¬ëœ ekRepositoryì˜ eventStore ì†ì„±ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í–ˆìœ¼ë©°, ì´ë¡œ ì¸í•´ Swift 6ì—ì„œ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì½”ë“œì˜ ë¬¸ì œê°€ ìš”ì•½ëœ ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e EventKit\n\n\u003cspan class=\"hljs-keyword\"\u003eactor\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEKRepository\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e eventStore: \u003cspan class=\"hljs-type\"\u003eEKEventStore\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e() {\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.eventStore \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eEKEventStore\u003c/span\u003e()\n    }\n}\n\n\u003cspan class=\"hljs-meta\"\u003e@MainActor\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEKInteractor\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eObservableObject\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e ekRepository: \u003cspan class=\"hljs-type\"\u003eEKRepository\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e eventStore: \u003cspan class=\"hljs-type\"\u003eEKEventStore\u003c/span\u003e {\n        \u003cspan class=\"hljs-comment\"\u003e/// ğŸ”¥ Actor-isolated property 'eventStore' can not be referenced from the main actor;\u003c/span\u003e\n        \u003cspan class=\"hljs-comment\"\u003e/// ğŸ”¥ this is an error in the Swift 6 language mode.\u003c/span\u003e\n        ekRepository.eventStore\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eekRepository\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eEKRepository\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.ekRepository \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e ekRepository\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì €ëŠ” ì´ ì½”ë“œë¥¼ ì²˜ìŒ ì‘ì„±í•  ë•Œ 'eventStore'ê°€ 'EKRepository' ë‚´ì—ì„œë§Œ ì•¡ì„¸ìŠ¤ë˜ë„ë¡ ë³´ì¥í•˜ëŠ” ê²ƒì´ ëª©í‘œì˜€ìŠµë‹ˆë‹¤. ì²˜ìŒì—ëŠ” EKInteractorê°€ ì†ì„±ìœ¼ë¡œ eventStoreë¥¼ ì •ì˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ EKEventEditViewControllerì™€ ê°™ì€ Appleì—ì„œ ì œê³µí•˜ëŠ” UIì— EKEventStoreë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë§ì•˜ìŠµë‹ˆë‹¤. ê·¸ ê²°ê³¼, EKInteractorëŠ” eventStoreì„ ë…¸ì¶œí•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eí•˜ì§€ë§Œ, EKInteractorê°€ Actor Isolationì„ ë¬´ì‹œí•˜ê³  ekRepositoryì˜ eventStoreì— ì•¡ì„¸ìŠ¤í•˜ê³  ìˆë‹¤ë©´, ì´ëŠ” ê²½í•© ì¡°ê±´ê³¼ ì˜ˆê¸°ì¹˜ ì•Šì€ ë¬¸ì œë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§í•˜ì—¬ Actor Isolationì„ ì¤€ìˆ˜í•˜ë„ë¡ ë§Œë“¤ì–´ ê²½í•© ì¡°ê±´ì„ í”¼í–ˆìŠµë‹ˆë‹¤. ë¦¬íŒ©í† ë§ëœ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-keyword\"\u003eactor\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEKRepository\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e/// ğŸ’¡ 'getEventStore()' ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ eventStoreì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ìº¡ìŠí™”\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e eventStore: \u003cspan class=\"hljs-type\"\u003eEKEventStore\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e() {\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.eventStore \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eEKEventStore\u003c/span\u003e()\n    }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eextension\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEKRepository\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetEventStore\u003c/span\u003e() -\u003e \u003cspan class=\"hljs-type\"\u003eEKEventStore\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e eventStore\n    }\n}\n\n\u003cspan class=\"hljs-meta\"\u003e@MainActor\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEKInteractor\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eObservableObject\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e ekRepository: \u003cspan class=\"hljs-type\"\u003eEKRepository\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e cachedEventStore: \u003cspan class=\"hljs-type\"\u003eEKEventStore\u003c/span\u003e? \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e\n\n    \u003cspan class=\"hljs-comment\"\u003e/// ğŸ’¡ Actor Isolationì„ ì¤€ìˆ˜í•˜ë©´ì„œ eventStoreì— ë¹„ë™ê¸°ì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•˜ê³  ìºì‹œí•©ë‹ˆë‹¤.\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e/// ìš°ì„  ìºì‹œëœ eventStoreì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ ,\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e/// ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ EKRepositoryì˜ getEventStore ë©”ì„œë“œë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì—¬ eventStoreì„ ê°€ì ¸ì™€ ìºì‹œí•©ë‹ˆë‹¤.\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e eventStore: \u003cspan class=\"hljs-type\"\u003eEKEventStore\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e eventStore \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e cachedEventStore {\n                \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e eventStore\n            }\n\n            \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e store \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ekRepository.getEventStore()\n            cachedEventStore \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e store\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e store\n        }\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003einit\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eekRepository\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eEKRepository\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.ekRepository \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e ekRepository\n\n        \u003cspan class=\"hljs-comment\"\u003e/// ğŸ’¡ ì‹œì‘í•  ë•Œ eventStoreì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì™€ ìºì‹±í•˜ì—¬ ì´í›„ ì•¡ì„¸ìŠ¤ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\u003c/span\u003e\n        initEventStore(ekRepository: ekRepository)\n    }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eextension\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEKInteractor\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003einitEventStore\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eekRepository\u003c/span\u003e: \u003cspan class=\"hljs-type\"\u003eEKRepository\u003c/span\u003e) {\n        \u003cspan class=\"hljs-comment\"\u003e/// ğŸ’¡ [Task] ì´ ë©”ì„œë“œëŠ” eventStoreì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì™€ ìºì‹œí•˜ì§€ë§Œ,\u003c/span\u003e\n        \u003cspan class=\"hljs-comment\"\u003e/// ì´ í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ê¸° ì „ì— í›„ì† ì‘ì—…ì´ ì§„í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/span\u003e\n        \u003cspan class=\"hljs-type\"\u003eTask\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.cachedEventStore \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ekRepository.getEventStore()\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë˜í•œ, 'Default Calendar'ë¥¼ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì—ì„œ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì— ë¯¼ê°í•œ ì½”ë“œë¥¼ ë°œê²¬í–ˆì–´ìš”. ì•„ë˜ ì½”ë“œì—ì„œëŠ” newEKEventì˜ ìº˜ë¦°ë”(íƒ€ì…ì€ EKCalendar)ê°€ Task ë¸”ë¡ ë‚´ì—ì„œ ë¹„ë™ê¸°ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë¹„ë™ê¸° ì‘ì—…ì€ getNewEKEvent í•¨ìˆ˜ê°€ newEKEvent ê°ì²´ë¥¼ ë°˜í™˜í•œ ë’¤ì— ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë°˜í™˜ëœ newEKEvent ê°ì²´ë¥¼ ë‹¤ë¥¸ ê³³ì—ì„œ ì‚¬ìš©í•˜ë ¤ê³  í•  ë•Œ ìº˜ë¦°ë” ì†ì„±ì´ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì€ 'ì‹¤í–‰ ìˆœì„œ(execution order)'ì— ë”°ë¼ ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ë™ì‘ì„ ìœ ë°œí•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” í•´ê²°í•˜ê³ ì í–ˆë˜ ê°„í—ì  ë²„ê·¸ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eprivate func \u003cspan class=\"hljs-title function_\"\u003egetNewEKEvent\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eekInteractor\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEKInteractor\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eselectedDate\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e) -\u003e \u003cspan class=\"hljs-title class_\"\u003eEKEvent\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e newEKEvent = \u003cspan class=\"hljs-title class_\"\u003eEKEvent\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eeventStore\u003c/span\u003e: ekInteractor.\u003cspan class=\"hljs-property\"\u003eeventStore\u003c/span\u003e)\n\n    \u003cspan class=\"hljs-comment\"\u003e// ğŸ”¥ ë¬¸ì œ: ì´ Task ë¸”ë¡ì€ ë¹„ë™ê¸°ë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ, í•¨ìˆ˜ê°€ newEKEventë¥¼ ë°˜í™˜í•œ í›„ì— ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/span\u003e\n    \u003cspan class=\"hljs-title class_\"\u003eTask\u003c/span\u003e {\n        \u003cspan class=\"hljs-comment\"\u003e// ğŸ”¥ ë¬¸ì œ: ë¹„ë™ê¸° ì‘ì—…ì´ newEKEvent ë°˜í™˜ í›„ì— ì™„ë£Œëœ ê²½ìš°, ìº˜ë¦°ë” ì†ì„±ì´ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e defaultEKCalendarToAdd = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ekInteractor.\u003cspan class=\"hljs-title function_\"\u003egetDefaultEKCalendarToAdd\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n            newEKEvent.\u003cspan class=\"hljs-property\"\u003ecalendar\u003c/span\u003e = defaultEKCalendarToAdd\n        }\n    }\n\n    \u003cspan class=\"hljs-comment\"\u003e// ğŸ”¥ ë¬¸ì œ: í•¨ìˆ˜ê°€ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ê¸° ì „ì— newEKEventë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ, ë°ì´í„° ë ˆì´ìŠ¤ì™€ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e newEKEvent\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìš”ì•½í•˜ë©´, ìœ„ì˜ ì½”ë“œëŠ” 'ë ˆì´ìŠ¤ ì»¨ë””ì…˜'ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆìœ¼ë©°, ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ê¸° ì „ì— ê°ì²´ê°€ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ ë¬¸ì œëŠ” ì•„ë˜ì— í‘œì‹œëœ ëŒ€ë¡œ ì½”ë“œë¥¼ ì¬êµ¬ì„±í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/// ğŸ’¡ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ getNewEKEvent í•¨ìˆ˜ë¥¼ asyncë¡œ ì„ ì–¸í•˜ì—¬,\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e/// ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œëœ í›„ì—ë§Œ newEKEventê°€ ë°˜í™˜ë˜ë„ë¡ í•¨.\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e/// ---\u003e ë ˆì´ìŠ¤ ì»¨ë””ì…˜ê³¼ ë°ì´í„° ë ˆì´ìŠ¤ ë°©ì§€\u003c/span\u003e\nprivate func \u003cspan class=\"hljs-title function_\"\u003egetNewEKEvent\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eekInteractor\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEKInteractor\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eselectedDate\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e -\u003e \u003cspan class=\"hljs-title class_\"\u003eEKEvent\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e/// ğŸ’¡ eventStoreë¥¼ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ await ì‚¬ìš©\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e newEKEvent = \u003cspan class=\"hljs-title class_\"\u003eEKEvent\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eeventStore\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ekInteractor.\u003cspan class=\"hljs-property\"\u003eeventStore\u003c/span\u003e)\n\n    \u003cspan class=\"hljs-comment\"\u003e/// ğŸ’¡ defaultEKCalendarToAddë¥¼ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì™€ newEKEventì˜ ìº˜ë¦°ë” ì†ì„±ì— ì„¤ì •\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e defaultEKCalendarToAdd = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ekInteractor.\u003cspan class=\"hljs-title function_\"\u003egetDefaultEKCalendarToAdd\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n        newEKEvent.\u003cspan class=\"hljs-property\"\u003ecalendar\u003c/span\u003e = defaultEKCalendarToAdd\n    }\n\n    \u003cspan class=\"hljs-comment\"\u003e/// ğŸ’¡ ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œëœ í›„ì— newEKEvent ë°˜í™˜\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e newEKEvent\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eê²°ë¡ \u003c/h1\u003e\n\u003cp\u003eì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ì„œ Swift ë™ì‹œì„±ì— ëŒ€í•œ ì´í•´ê°€ ê¹Šì–´ì¡ŒìŠµë‹ˆë‹¤. ì•ˆì „í•œ ë™ì‹œ ì½”ë“œ ì‘ì„±ì˜ ê¸°ì´ˆë¥¼ í™•ë¦½í•  ìˆ˜ ìˆì–´ ê¸°ì©ë‹ˆë‹¤. ë¬´ì—‡ë³´ë‹¤ë„, Scheduler ì•±ì˜ ë‹¤ìŒ ì—…ë°ì´íŠ¸ì—ì„œ ì‚¬ìš©ìì—ê²Œ í ì¡ì„ ë° ì—†ëŠ” 'ê¸°ë³¸ ìº˜ë¦°ë”' ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆì–´ ê¸°ì©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e'Reminders'ë¶€í„° 'ê¸°ë³¸ ìº˜ë¦°ë”'ê¹Œì§€ ëª¨ë“  ê²ƒì„ ì‹ ì†í•˜ê²Œ í†µí•©í•˜ì„¸ìš”.\në‹¤ì–‘í•œ ìœ„ì ¯.\nScheduler: iPhone, iPad ë° Macìš© ìº˜ë¦°ë” ì•±.\u003c/p\u003e\n\u003ch1\u003eì°¸ê³ ë¬¸í—Œ\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eSwift í”„ë¡œê·¸ë˜ë° ì–¸ì–´ â€” ë™ì‹œì„±:\n\u003ca href=\"https://docs.swift.org/swift-book/documentation/the-swift-programming-language/concurrency/\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://docs.swift.org/swift-book/documentation/the-swift-programming-language/concurrency/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eApple ê°œë°œì ë¬¸ì„œ â€” Swift ë™ì‹œì„±:\n\u003ca href=\"https://developer.apple.com/documentation/swift/concurrency\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://developer.apple.com/documentation/swift/concurrency\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eApple ê°œë°œì ë¬¸ì„œ â€” EKEventStore:\n\u003ca href=\"https://developer.apple.com/documentation/eventkit/ekeventstore\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://developer.apple.com/documentation/eventkit/ekeventstore\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eê²½í•© ì¡°ê±´ ì´í•´ì™€ í•´ê²°:\n\u003ca href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://en.wikipedia.org/wiki/Race_condition\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eApple ê°œë°œì ë¬¸ì„œ â€” Task:\n\u003ca href=\"https://developer.apple.com/documentation/swift/task\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://developer.apple.com/documentation/swift/task\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eì´ëŸ¬í•œ ìë£Œë“¤ì€ Swift ë™ì‹œì„±, ì•¡í„° ë° ê´€ë ¨ ì£¼ì œì— ëŒ€í•´ ìì„¸í•œ ì •ë³´ë¥¼ ì œê³µí•˜ì—¬ ê²½í•© ì¡°ê±´ê³¼ ê°™ì€ ë¬¸ì œë¥¼ ì´í•´í•˜ê³  í•´ê²°í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-ResolvingaRaceConditionBuginSwiftConcurrency"},"buildId":"wfHLuDA3kTGBYfaM5IGXk","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>