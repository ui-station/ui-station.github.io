<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title> ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Vault ì‚¬ìš© ë°©ë²• ì•ˆë‚´  | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-05-23-AHand-OnGuidetoVaultinKubernetes" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content=" ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Vault ì‚¬ìš© ë°©ë²• ì•ˆë‚´  | ui-station" data-gatsby-head="true"/><meta property="og:title" content=" ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Vault ì‚¬ìš© ë°©ë²• ì•ˆë‚´  | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-05-23-AHand-OnGuidetoVaultinKubernetes" data-gatsby-head="true"/><meta name="twitter:title" content=" ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Vault ì‚¬ìš© ë°©ë²• ì•ˆë‚´  | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-23 14:19" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/T_Nz0g9U1yttYMSEma95P/_buildManifest.js" defer=""></script><script src="/_next/static/T_Nz0g9U1yttYMSEma95P/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx"> ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Vault ì‚¬ìš© ë°©ë²• ì•ˆë‚´ </h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt=" ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Vault ì‚¬ìš© ë°©ë²• ì•ˆë‚´ " loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 23, 2024</span><span class="posts_reading_time__f7YPP">18<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-23-AHand-OnGuidetoVaultinKubernetes&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h2>â‡¢ ì‹¤ìš©ì ì¸ ì˜ˆì œë¡œ HashiCorp Vaultë¥¼ ì‚¬ìš©í•˜ì—¬ k8s Secrets ê´€ë¦¬í•˜ê¸°</h2>
<p><img src="/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_0.png" alt="image"></p>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¸ê³„ì—ì„œ API í‚¤, ë¹„ë°€ë²ˆí˜¸ ë° ê¸°íƒ€ ì¤‘ìš” ì •ë³´ì™€ ê°™ì€ ë³´ì•ˆ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì¤‘ìš”í•œ ì‘ì—…ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ëŠ” ë‚´ì¥ëœ ë³´ì•ˆ ì •ë³´ ê´€ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì´ ìˆì§€ë§Œ, ëª¨ë“  ì¡°ì§ì˜ ë³´ì•ˆ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¤ì§€ ëª»í•  ìˆ˜ë„ ìˆëŠ” íŠ¹ì • ì œí•œ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¿ ë²„ë„¤í‹°ìŠ¤ ë³´ì•ˆ ì •ë³´ëŠ” etcdì— ì €ì¥ë˜ë©°, ì´ëŠ” íœ´ì‹ ì¤‘ ì•”í˜¸í™”ë˜ì–´ ìˆì§€ë§Œ, ë§¤ìš° ì¤‘ìš”í•œ ì •ë³´ì— í•„ìš”í•œ ë³´ì•ˆ ìˆ˜ì¤€ê³¼ ì ‘ê·¼ ì œì–´ë¥¼ ì œê³µí•˜ì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ë•Œ HashiCorp Vaultê°€ ë“±ì¥í•©ë‹ˆë‹¤. VaultëŠ” ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì„¤ê³„ëœ ë„êµ¬ì…ë‹ˆë‹¤. ë™ì  ë³´ì•ˆ ì •ë³´, ì„œë¹„ìŠ¤ë¡œì˜ ì•”í˜¸í™” ë° ì ‘ê·¼ ì œì–´ë¥¼ ìœ„í•œ ê²¬ê³ í•œ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•˜ì—¬, ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ë³´ì•ˆ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸°ì— ì´ìƒì ì¸ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Helmì„ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— Vaultë¥¼ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í•˜ëŠ” ë‹¨ê³„ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Podë¥¼ ë°°í¬í•˜ì—¬ Vaultì—ì„œ ë¹„ë°€ì„ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤. ì´ ì•ˆë‚´ì„œë¥¼ ë§ˆì¹˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì‘ë™í•˜ëŠ” Vault ì„¤ì •ì´ ì™„ë£Œë˜ì–´ ì‘ìš© í”„ë¡œê·¸ë¨ ë¹„ë°€ì„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1>ì „ì œ ì¡°ê±´</h1>
<p>ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”:</p>
<ul>
<li>ì‹¤í–‰ ì¤‘ì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
<li>í´ëŸ¬ìŠ¤í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ë„ë¡ êµ¬ì„±ëœ kubectlì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
<li>ë¡œì»¬ ë¨¸ì‹ ì— Helmì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
</ul>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="https://miro.medium.com/v2/resize:fit:1400/1*jmt8bsoEGeVHv5ZUP7XY_Q.gif">
<h1>ë³´ë¥´íŠ¸(Namespace) ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±í•˜ê¸°</h1>
<p>ìš°ì„ , ë³´ë¥´íŠ¸(Vault)ë¥¼ ìœ„í•œ ë³„ë„ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë³´ë¥´íŠ¸ì— íŠ¹í™”ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">$ kubectl create ns vault
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>Vault ì„¤ì¹˜</h1>
<p>ìš°ë¦¬ëŠ” HashiCorpê°€ ì œê³µí•˜ëŠ” Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultì˜ ìµœì‹  ë²„ì „ì„ ì„¤ì¹˜í•  ê²ƒì…ë‹ˆë‹¤. ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤: 1. HashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ Helm ì„¤ì¹˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ 2. Helm ì°¨íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ë¡œì»¬ë¡œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.</p>
<h2>1. HashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ ì¶”ê°€</h2>
<p>HashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ë¥¼ Helm êµ¬ì„±ì— ì¶”ê°€í•´ë³´ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">helm repo add hashicorp <span class="hljs-attr">https</span>:<span class="hljs-comment">//helm.releases.hashicorp.com</span>
</code></pre>
<h2>2. ì„¤ì¹˜ ë°©ë²•</h2>
<ol>
<li>ì§ì ‘ Helm ì„¤ì¹˜ ì‹¤í–‰í•˜ê¸°</li>
</ol>
<p>ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ HashiCorp ì €ì¥ì†Œì—ì„œ Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultë¥¼ ì§ì ‘ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">helm install vault hashicorp/vault \
       --set=<span class="hljs-string">'server.dev.enabled=true'</span> \
       --set=<span class="hljs-string">'ui.enabled=true'</span> \
       --set=<span class="hljs-string">'ui.serviceType=LoadBalancer'</span> \
       --namespace vault
</code></pre>
<ol start="2">
<li>Helm ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜</li>
</ol>
<p>ëŒ€ì•ˆìœ¼ë¡œ Helm ì°¨íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ë¡œì»¬ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"># <span class="hljs-title class_">Helm</span> ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ
helm pull hashicorp/vault --untar

# ë‹¤ìš´ë¡œë“œí•œ ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ <span class="hljs-title class_">Vault</span> ì„¤ì¹˜
helm install vault \
       --set=<span class="hljs-string">'server.dev.enabled=true'</span> \
       --set=<span class="hljs-string">'ui.enabled=true'</span> \
       --set=<span class="hljs-string">'ui.serviceType=LoadBalancer'</span> \
       --namespace vault \
       ./vault-chart
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ UIê°€ í™œì„±í™”ëœ Vaultë¥¼ ê°œë°œ ëª¨ë“œë¡œ ì„¤ì¹˜í•˜ê³  ì™¸ë¶€ì—ì„œ ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ LoadBalancer ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ë…¸ì¶œí•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ í…ŒìŠ¤íŠ¸ ë° ê°œë°œ ëª©ì ìœ¼ë¡œ ì´ìƒì ì…ë‹ˆë‹¤.</p>
<p>ê²°ê³¼:</p>
<pre><code class="hljs language-js">$ kubectl get all -n vault
<span class="hljs-variable constant_">NAME</span>                                        <span class="hljs-variable constant_">READY</span>   <span class="hljs-variable constant_">STATUS</span>    <span class="hljs-variable constant_">RESTARTS</span>   <span class="hljs-variable constant_">AGE</span>
pod/vault-<span class="hljs-number">0</span>                                 <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-title class_">Running</span>   <span class="hljs-number">0</span>          2m39s
pod/vault-agent-injector-8497dd4457-8jgcm   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-title class_">Running</span>   <span class="hljs-number">0</span>          2m39s

<span class="hljs-variable constant_">NAME</span>                               <span class="hljs-variable constant_">TYPE</span>           <span class="hljs-variable constant_">CLUSTER</span>-<span class="hljs-variable constant_">IP</span>       <span class="hljs-variable constant_">EXTERNAL</span>-<span class="hljs-variable constant_">IP</span>    <span class="hljs-title function_">PORT</span>(S)             <span class="hljs-variable constant_">AGE</span>
service/vault                      <span class="hljs-title class_">ClusterIP</span>      <span class="hljs-number">10.245</span><span class="hljs-number">.225</span><span class="hljs-number">.169</span>   &#x3C;none>         <span class="hljs-number">8200</span>/<span class="hljs-variable constant_">TCP</span>,<span class="hljs-number">8201</span>/<span class="hljs-variable constant_">TCP</span>   2m40s
service/vault-agent-injector-svc   <span class="hljs-title class_">ClusterIP</span>      <span class="hljs-number">10.245</span><span class="hljs-number">.32</span><span class="hljs-number">.56</span>     &#x3C;none>         <span class="hljs-number">443</span>/<span class="hljs-variable constant_">TCP</span>             2m40s
service/vault-internal             <span class="hljs-title class_">ClusterIP</span>      <span class="hljs-title class_">None</span>             &#x3C;none>         <span class="hljs-number">8200</span>/<span class="hljs-variable constant_">TCP</span>,<span class="hljs-number">8201</span>/<span class="hljs-variable constant_">TCP</span>   2m40s
service/vault-ui                   <span class="hljs-title class_">LoadBalancer</span>   <span class="hljs-number">10.245</span><span class="hljs-number">.103</span><span class="hljs-number">.246</span>   <span class="hljs-number">24.132</span><span class="hljs-number">.59</span><span class="hljs-number">.59</span>   <span class="hljs-number">8200</span>:<span class="hljs-number">31764</span>/<span class="hljs-variable constant_">TCP</span>      2m40s

<span class="hljs-variable constant_">NAME</span>                                   <span class="hljs-variable constant_">READY</span>   <span class="hljs-variable constant_">UP</span>-<span class="hljs-variable constant_">TO</span>-<span class="hljs-variable constant_">DATE</span>   <span class="hljs-variable constant_">AVAILABLE</span>   <span class="hljs-variable constant_">AGE</span>
deployment.<span class="hljs-property">apps</span>/vault-agent-injector   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-number">1</span>            <span class="hljs-number">1</span>           2m40s

<span class="hljs-variable constant_">NAME</span>                                              <span class="hljs-variable constant_">DESIRED</span>   <span class="hljs-variable constant_">CURRENT</span>   <span class="hljs-variable constant_">READY</span>   <span class="hljs-variable constant_">AGE</span>
replicaset.<span class="hljs-property">apps</span>/vault-agent-injector-8497dd4457   <span class="hljs-number">1</span>         <span class="hljs-number">1</span>         <span class="hljs-number">1</span>       2m40s

<span class="hljs-variable constant_">NAME</span>                     <span class="hljs-variable constant_">READY</span>   <span class="hljs-variable constant_">AGE</span>
statefulset.<span class="hljs-property">apps</span>/vault   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     2m40s
</code></pre>
<h1>Vault êµ¬ì„±</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì•ˆì „í•˜ê²Œ ë¹„ë°€ì„ ê´€ë¦¬í•˜ê³  ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ Vault ì •ì±…ê³¼ ì¸ì¦ ë°©ë²•ì„ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤. ì´ êµ¬ì„±ì€ ì¸ì¦ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ë§Œ Vaultì—ì„œ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.</p>
<h2>1. Vault Podì— ì—°ê²°í•˜ê¸°</h2>
<p>ì„¤ì¹˜ê°€ ì™„ë£Œëœ í›„ Vault podì— ì—°ê²°í•˜ì—¬ ì´ˆê¸° êµ¬ì„±ì„ ìˆ˜í–‰í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">kubectl exec -it vault-<span class="hljs-number">0</span> -- <span class="hljs-regexp">/bin/</span>sh
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>2. ì •ì±… ìƒì„± ë° ì ìš©í•˜ê¸°</h2>
<p>ì´ì œ ë¹„ë°€ì„ ì½ì„ ìˆ˜ ìˆëŠ” ì •ì±…ì„ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤. ì´ ì •ì±…ì€ ì—­í• ì— ì²¨ë¶€ë˜ì–´ íŠ¹ì • Kubernetes ì„œë¹„ìŠ¤ ê³„ì •ì— ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì •ì±… íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">cat &#x3C;&#x3C;<span class="hljs-variable constant_">EOF</span> > <span class="hljs-regexp">/home/</span>vault/read-policy.<span class="hljs-property">hcl</span>
path <span class="hljs-string">"secret*"</span> {
  capabilities = [<span class="hljs-string">"read"</span>]
}
<span class="hljs-variable constant_">EOF</span>
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì•„ë˜ì™€ ê°™ì´ ì •ì±…ì„ ì ìš©í•´ì£¼ì„¸ìš”:</p>
<pre><code class="hljs language-js"># ë¬¸ë²•
$ vault policy write &#x3C;ì •ì±…ëª…> <span class="hljs-regexp">/ì •ì±…/</span>ê²½ë¡œ/ì—¬ê¸°ì—.<span class="hljs-property">hcl</span>

# ì˜ˆì‹œ
$ vault policy write read-policy /home/vault/read-policy.<span class="hljs-property">hcl</span>
</code></pre>
<h2>3. Kubernetes ì¸ì¦ í™œì„±í™”</h2>
<p>Vaultì—ì„œ Kubernetes ì¸ì¦ ë°©ë²•ì„ í™œì„±í™”í•˜ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">vault auth enable kubernetes
</code></pre>
<h2>4. Kubernetes ì¸ì¦ ì„¤ì •</h2>
<p>Vaultê°€ Kubernetes API ì„œë²„ì™€ í†µì‹ í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">vault write auth/kubernetes/config \
   token_reviewer_jwt=<span class="hljs-string">"$(cat /var/run/secrets/kubernetes.io/serviceaccount/token)"</span> \
   kubernetes_host=<span class="hljs-attr">https</span>:<span class="hljs-comment">//${KUBERNETES_PORT_443_TCP_ADDR}:443 \</span>
   kubernetes_ca_cert=@/<span class="hljs-keyword">var</span>/run/secrets/kubernetes.<span class="hljs-property">io</span>/serviceaccount/ca.<span class="hljs-property">crt</span>
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>5. ì—­í•  ìƒì„±</h2>
<p>íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ ê³„ì •(vault-serviceaccount)ì— ìœ„ì—ì„œ ë§Œë“  ì •ì±…ì„ ë°”ì¸ë”©í•˜ëŠ” ì—­í• (vault-role)ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ê³„ì •ì´ Vaultì— ì €ì¥ëœ ì‹œí¬ë¦¿ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">vault write auth/kubernetes/role/vault-role \
   bound_service_account_names=vault-serviceaccount \
   bound_service_account_namespaces=vault \
   policies=read-policy \
   ttl=1h
</code></pre>
<p>ì—¬ê¸°ì„œ ì—¬ëŸ¬ ê°œì˜ ì„œë¹„ìŠ¤ ê³„ì •ê³¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-bash">vault write auth/kubernetes/role/&#x3C;my-role> \
   bound_service_account_names=sa1, sa2 \
   bound_service_account_namespaces=namespace1, namespace2 \
   policies=&#x3C;policy-name> \
   ttl=1h
</code></pre>
<h1>ë³´ì•ˆ ì •ë³´ ë§Œë“¤ê¸°</h1>
<p>ì´ì œ Vaultì— ì¼ë¶€ ë³´ì•ˆ ì •ë³´ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:</p>
<p>ìš°ë¦¬ëŠ” ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë³´ì•ˆ ì •ë³´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>Vault CLIë¥¼ ì‚¬ìš©í•˜ê¸°</li>
</ul>
<h2>1. Vault CLI ì‚¬ìš©í•˜ê¸°</h2>
<p>ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ìƒì„±í•˜ì„¸ìš”</p>
<pre><code class="hljs language-js">$ vault kv put secret/login pattoken=ytbuytbytbf765rb65u56rv
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ë‚˜ì—´í•˜ì—¬ ë¹„ë°€ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">$ vault kv list secret
<span class="hljs-title class_">Keys</span>
----
login
</code></pre>
<h2>2. Vault UI ì‚¬ìš© ë°©ë²•</h2>
<p>Vault ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ë‚˜ì—´í•˜ì—¬ ë¡œë“œ ë°¸ëŸ°ì„œì˜ ì™¸ë¶€ IPë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">$ kubectl get svc -n vault
<span class="hljs-variable constant_">NAME</span>                       <span class="hljs-variable constant_">TYPE</span>           <span class="hljs-variable constant_">CLUSTER</span>-<span class="hljs-variable constant_">IP</span>       <span class="hljs-variable constant_">EXTERNAL</span>-<span class="hljs-variable constant_">IP</span>    <span class="hljs-title function_">PORT</span>(S)             <span class="hljs-variable constant_">AGE</span>
vault                      <span class="hljs-title class_">ClusterIP</span>      <span class="hljs-number">10.245</span><span class="hljs-number">.139</span><span class="hljs-number">.117</span>   &#x3C;none>         <span class="hljs-number">8200</span>/<span class="hljs-variable constant_">TCP</span>,<span class="hljs-number">8201</span>/<span class="hljs-variable constant_">TCP</span>   28h
vault-agent-injector-svc   <span class="hljs-title class_">ClusterIP</span>      <span class="hljs-number">10.245</span><span class="hljs-number">.58</span><span class="hljs-number">.140</span>    &#x3C;none>         <span class="hljs-number">443</span>/<span class="hljs-variable constant_">TCP</span>             28h
vault-internal             <span class="hljs-title class_">ClusterIP</span>      <span class="hljs-title class_">None</span>             &#x3C;none>         <span class="hljs-number">8200</span>/<span class="hljs-variable constant_">TCP</span>,<span class="hljs-number">8201</span>/<span class="hljs-variable constant_">TCP</span>   28h
vault-ui                   <span class="hljs-title class_">LoadBalancer</span>   <span class="hljs-number">10.245</span><span class="hljs-number">.11</span><span class="hljs-number">.13</span>     <span class="hljs-number">24.123</span><span class="hljs-number">.49</span><span class="hljs-number">.59</span>   <span class="hljs-number">8200</span>:<span class="hljs-number">32273</span>/<span class="hljs-variable constant_">TCP</span>      26h
</code></pre>
<p>ìœ„ì˜ ë¡œë“œë°¸ëŸ°ì„œì˜ ì™¸ë¶€ IPë¥¼ ì‚¬ìš©í•˜ì—¬ Vault UIì— ì•¡ì„¸ìŠ¤í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì˜ˆ: <code>external-ip</code>:8200</p>
<p>ì œ ê²½ìš°: 24.123.49.59:8200</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_1.png">
<p>ì´ì œ í† í° ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ Vaultì— ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” Token=rootë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸í•˜ì‹­ì‹œì˜¤.</p>
<p>ì´ì œ Vault UIì—ì„œ ì‹œí¬ë¦¿ ëŒ€ì‹œë³´ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì‹œí¬ë¦¿ ì—”ì§„ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš” '<code> ì‹œí¬ë¦¿</code></p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_2.png">
<p>ê·¸ëŸ° ë‹¤ìŒ ì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ "ë¹„ë°€ ìƒì„±(Create Secret)"ì„ í´ë¦­í•˜ì„¸ìš”.</p>
<img src="/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_3.png">
<p>ì´ì œ ë¹„ë°€ì„ ë§Œë“¤ê¸° ìœ„í•´ ì›í•˜ëŠ” í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Vault CLIì—ì„œ ìœ„ì˜ ë¹„ë°€ì„ ì•¡ì„¸ìŠ¤í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">$ vault kv list secret
<span class="hljs-title class_">Keys</span>
----
login
my-first-secret
</code></pre>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— Vaultë¥¼ ì„±ê³µì ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ì´ì œ Vaultë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë¹„ë°€ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1>ì¿ ë²„ë„¤í‹°ìŠ¤ Podì—ì„œ ë¹„ë°€ ì•¡ì„¸ìŠ¤</h1>
<p>ìœ„ ë‹¨ê³„ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultë¥¼ ì„¤ì¹˜í•˜ê³  Vault ì—­í• (vault-role)ì„ êµ¬ì„±í•˜ì—¬ ì„œë¹„ìŠ¤ ê³„ì •(vault-serviceaccount)ì´ Vaultì— ì €ì¥ëœ ë¹„ë°€ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë˜í•œ, loginê³¼ my-first-secretì´ë¼ëŠ” í‚¤-ê°’ ìŒì„ ê°€ì§„ ë‘ ê°œì˜ ì‹œí¬ë¦¿ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤. ì´ì œ ê°„ë‹¨í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë°°í¬ë¥¼ ìƒì„±í•˜ê³  ì´ëŸ¬í•œ ì‹œí¬ë¦¿ì— ì•¡ì„¸ìŠ¤í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>ë¨¼ì €, vault ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— vault-serviceaccountë¼ëŠ” ì„œë¹„ìŠ¤ ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ ê³„ì •ì€ ìœ„ì—ì„œ ì •ì˜í•œ "Role ìƒì„±" ë‹¨ê³„ì—ì„œ ì •ì˜ëœ Vault ì—­í• ì— ëŒ€í•œ ê¶Œí•œì´ ë¶€ì—¬ë©ë‹ˆë‹¤.</p>
<p>ì•„ë˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì„ vault-sa.yamlë¡œ ì €ì¥í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceAccount</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">vault-serviceaccount</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">read-vault-secret</span>
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ìœ„ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ìœ„ì— ì œê³µëœ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì ìš©í•˜ì„¸ìš”.</p>
<pre><code class="hljs language-js">kubectl apply -f vault-sa.<span class="hljs-property">yaml</span>
</code></pre>
<p>ì´ì œ ì•„ë˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ ë°°í¬(vault-secret-test-deploy.yaml)ë¥¼ ìƒì„±í•´ ë´…ì‹œë‹¤.</p>
<p>ì´ ë°°í¬ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” Vaultì—ì„œ ì‹œí¬ë¦¿ì„ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜¤ë„ë¡ êµ¬ì„±ëœ Nginx íŒŒë“œì˜ ë‹¨ì¼ ë ˆí”Œë¦¬ì¹´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Vault ì—ì´ì „íŠ¸ëŠ” ì§€ì •ëœ í…œí”Œë¦¿ì— ë”°ë¼ ì‹œí¬ë¦¿ì¸ login ë° my-first-secretì„ íŒŒë“œì— ì£¼ì…í•©ë‹ˆë‹¤. ì‹œí¬ë¦¿ì€ íŒŒë“œ íŒŒì¼ ì‹œìŠ¤í…œì— ì €ì¥ë˜ì–´ ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Vaultì™€ ì¸ì¦í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê¶Œí•œì„ ê°–ê³  ìˆëŠ” vault-serviceaccount ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì–´ë…¸í…Œì´ì…˜ ì„¹ì…˜ì„ ìì„¸íˆ ì‚´í´ë³´ë©´ ê·¸ ëª©ì ê³¼ ê¸°ëŠ¥ì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-attr">annotations</span>:
        vault.<span class="hljs-property">hashicorp</span>.<span class="hljs-property">com</span>/agent-<span class="hljs-attr">inject</span>: <span class="hljs-string">"true"</span>
        vault.<span class="hljs-property">hashicorp</span>.<span class="hljs-property">com</span>/agent-inject-<span class="hljs-attr">status</span>: <span class="hljs-string">"update"</span>
        vault.<span class="hljs-property">hashicorp</span>.<span class="hljs-property">com</span>/agent-inject-secret-<span class="hljs-attr">login</span>: <span class="hljs-string">"secret/login"</span>
        vault.<span class="hljs-property">hashicorp</span>.<span class="hljs-property">com</span>/agent-inject-template-<span class="hljs-attr">login</span>: |
          {- <span class="hljs-keyword">with</span> secret <span class="hljs-string">"secret/login"</span> -}
          pattoken={ .<span class="hljs-property">Data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">pattoken</span> }
          {- end }
        vault.<span class="hljs-property">hashicorp</span>.<span class="hljs-property">com</span>/agent-inject-secret-my-first-<span class="hljs-attr">secret</span>: <span class="hljs-string">"secret/my-first-secret"</span>
        vault.<span class="hljs-property">hashicorp</span>.<span class="hljs-property">com</span>/agent-inject-template-my-first-<span class="hljs-attr">secret</span>: |
          {- <span class="hljs-keyword">with</span> secret <span class="hljs-string">"secret/my-first-secret"</span> -}
          username={ .<span class="hljs-property">Data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">username</span> }
          password={ .<span class="hljs-property">Data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">password</span> }
          {- end }
        vault.<span class="hljs-property">hashicorp</span>.<span class="hljs-property">com</span>/<span class="hljs-attr">role</span>: <span class="hljs-string">"vault-role"</span>
</code></pre>
<p>ì´ëŸ¬í•œ ì–´ë…¸í…Œì´ì…˜ì€ Vault ì—ì´ì „íŠ¸ë¥¼ êµ¬ì„±í•˜ì—¬ ì‹œí¬ë¦¿ì„ íŒŒë“œ ë³¼ë¥¨ì— ì£¼ì…í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<ul>
<li>vault.hashicorp.com/agent-inject: â€œtrueâ€: ì´ íŒŒë“œì— ëŒ€í•œ Vault ì—ì´ì „íŠ¸ ì£¼ì…ì„ í™œì„±í™”í•©ë‹ˆë‹¤.</li>
<li>vault.hashicorp.com/agent-inject-status: â€œupdateâ€: ì‹œí¬ë¦¿ ì£¼ì… ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.</li>
<li>vault.hashicorp.com/agent-inject-secret-login: â€œsecret/loginâ€: Vaultì— ì €ì¥ëœ secret/loginì˜ ì‹œí¬ë¦¿ì„ ì£¼ì…í•´ì•¼ í•¨ì„ ì§€ì •í•©ë‹ˆë‹¤.</li>
<li>vault.hashicorp.com/agent-inject-template-login: ì£¼ì…ëœ ë¡œê·¸ì¸ ì‹œí¬ë¦¿ì˜ í…œí”Œë¦¿ì„ ì •ì˜í•˜ì—¬ ì‹œí¬ë¦¿ì´ ê¸°ë¡ë  í˜•ì‹ì„ ì§€ì •í•©ë‹ˆë‹¤.</li>
<li>vault.hashicorp.com/agent-inject-secret-my-first-secret: â€œsecret/my-first-secretâ€: Vaultì— ì €ì¥ëœ secret/my-first-secretì˜ ì‹œí¬ë¦¿ì„ ì£¼ì…í•´ì•¼ í•¨ì„ ì§€ì •í•©ë‹ˆë‹¤.</li>
<li>vault.hashicorp.com/agent-inject-template-my-first-secret: ì£¼ì…ëœ my-first-secretì— ëŒ€í•œ í…œí”Œë¦¿ì„ ì •ì˜í•˜ì—¬ ì‹œí¬ë¦¿ì´ ê¸°ë¡ë  í˜•ì‹ì„ ì§€ì •í•©ë‹ˆë‹¤.</li>
<li>vault.hashicorp.com/role: â€œvault-roleâ€: ì¸ì¦ì— ì‚¬ìš©ë  Vault ì—­í• ì„ ì§€ì •í•©ë‹ˆë‹¤.</li>
</ul>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ pod ë³¼ë¥¨ì—ì„œ Vault ì‹œí¬ë¦¿ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">$ kubectl exec -it vault-test-84d9dc9986-gcxfv -- sh -c <span class="hljs-string">"cat /vault/secrets/login &#x26;&#x26; cat /vault/secrets/my-first-secret"</span> -n vault
</code></pre>
<pre><code class="hljs language-js">$ kubectl exec -it vault-test-84d9dc9986-gcxfv -- sh -c <span class="hljs-string">"cat /vault/secrets/login &#x26;&#x26; cat /vault/secrets/my-first-secret"</span> -n vault

<span class="hljs-title class_">Defaulted</span> container <span class="hljs-string">"nginx"</span> out <span class="hljs-attr">of</span>: nginx, vault-agent, vault-agent-init (init)
pattoken=ytbuytbytbf765rb65u56rv
username=anvesh
password=anveshpassword
</code></pre>
<p>ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! Vaultì— ì‹œí¬ë¦¿ì„ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í•˜ê³  í•´ë‹¹ ì‹œí¬ë¦¿ì„ íŒŸ ë‚´ì—ì„œ í™œìš©í–ˆìŠµë‹ˆë‹¤.</p>
<h1>ì†ŒìŠ¤ ì½”ë“œ</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ìœ„ì˜ í…ìŠ¤íŠ¸ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p>ì¹œêµ¬ì•¼! ë‹¹ì‹ ì„ ìš°ë¦¬ì˜ GitHub ì €ì¥ì†Œë¡œ ì´ˆëŒ€í•©ë‹ˆë‹¤. ê±°ê¸°ì—ëŠ” Kubernetesìš© ì†ŒìŠ¤ ì½”ë“œì˜ í¬ê´„ì ì¸ ì»¬ë ‰ì…˜ì´ ì €ì¥ë˜ì–´ ìˆì–´ìš”.</p>
<p>ë˜í•œ, ì—¬ëŸ¬ë¶„ì˜ í”¼ë“œë°±ê³¼ ì œì•ˆì„ í™˜ì˜í•©ë‹ˆë‹¤! ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê°œì„  ì•„ì´ë””ì–´ê°€ ìˆë‹¤ë©´, ì €í¬ì˜ GitHub ì €ì¥ì†Œì—ì„œ issueë¥¼ ì—´ì–´ì£¼ì„¸ìš”. ğŸš€</p>
<img src="/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_6.png">
<h1>Connect With Me</h1>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ ë¸”ë¡œê·¸ë¥¼ ìœ ìµí•˜ê²Œ ì°¾ìœ¼ì…¨ê³  AWS, í´ë¼ìš°ë“œ ì „ëµ, Kubernetes ë˜ëŠ” ê´€ë ¨ëœ ëª¨ë“  ì£¼ì œì— ëŒ€í•´ ë” ê¹Šì´ ì•Œê³  ì‹¶ë‹¤ë©´, LinkedInì—ì„œ ì—°ê²°í•  ê¸°íšŒë¥¼ ê°–ê²Œ ë˜ì–´ ê¸°ì©ë‹ˆë‹¤. ì˜ë¯¸ ìˆëŠ” ëŒ€í™”ë¥¼ ë‚˜ëˆ„ê³  í†µì°°ì„ ê³µìœ í•˜ë©° í•¨ê»˜ í´ë¼ìš°ë“œ ì»´í“¨íŒ…ì˜ ê´‘í™œí•œ ì˜ì—­ì„ íƒìƒ‰í•´ ë´…ì‹œë‹¤.</p>
<p>ì–¸ì œë“ ì§€ ì—°ë½ ì£¼ì‹œê±°ë‚˜ ìƒê°ì„ ê³µìœ í•˜ê±°ë‚˜ ì§ˆë¬¸ì„ í•  ììœ ê°€ ìˆìŠµë‹ˆë‹¤. ë™ì ì¸ ë¶„ì•¼ì—ì„œ ì—°ê²°í•˜ê³  í•¨ê»˜ ì„±ì¥í•˜ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤!</p>
<p>í–‰ë³µí•œ ë°°í¬ ë˜ì„¸ìš”! ğŸš€</p>
<p>í–‰ë³µí•œ ì¿ ë²„ë„¤íŒ… ë˜ì„¸ìš”! âˆ</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":" ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Vault ì‚¬ìš© ë°©ë²• ì•ˆë‚´ ","description":"","date":"2024-05-23 14:19","slug":"2024-05-23-AHand-OnGuidetoVaultinKubernetes","content":"\n## â‡¢ ì‹¤ìš©ì ì¸ ì˜ˆì œë¡œ HashiCorp Vaultë¥¼ ì‚¬ìš©í•˜ì—¬ k8s Secrets ê´€ë¦¬í•˜ê¸°\n\n![image](/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_0.png)\n\nì¿ ë²„ë„¤í‹°ìŠ¤ ì„¸ê³„ì—ì„œ API í‚¤, ë¹„ë°€ë²ˆí˜¸ ë° ê¸°íƒ€ ì¤‘ìš” ì •ë³´ì™€ ê°™ì€ ë³´ì•ˆ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì¤‘ìš”í•œ ì‘ì—…ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ëŠ” ë‚´ì¥ëœ ë³´ì•ˆ ì •ë³´ ê´€ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì´ ìˆì§€ë§Œ, ëª¨ë“  ì¡°ì§ì˜ ë³´ì•ˆ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¤ì§€ ëª»í•  ìˆ˜ë„ ìˆëŠ” íŠ¹ì • ì œí•œ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¿ ë²„ë„¤í‹°ìŠ¤ ë³´ì•ˆ ì •ë³´ëŠ” etcdì— ì €ì¥ë˜ë©°, ì´ëŠ” íœ´ì‹ ì¤‘ ì•”í˜¸í™”ë˜ì–´ ìˆì§€ë§Œ, ë§¤ìš° ì¤‘ìš”í•œ ì •ë³´ì— í•„ìš”í•œ ë³´ì•ˆ ìˆ˜ì¤€ê³¼ ì ‘ê·¼ ì œì–´ë¥¼ ì œê³µí•˜ì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ë•Œ HashiCorp Vaultê°€ ë“±ì¥í•©ë‹ˆë‹¤. VaultëŠ” ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì„¤ê³„ëœ ë„êµ¬ì…ë‹ˆë‹¤. ë™ì  ë³´ì•ˆ ì •ë³´, ì„œë¹„ìŠ¤ë¡œì˜ ì•”í˜¸í™” ë° ì ‘ê·¼ ì œì–´ë¥¼ ìœ„í•œ ê²¬ê³ í•œ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•˜ì—¬, ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ë³´ì•ˆ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸°ì— ì´ìƒì ì¸ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Helmì„ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— Vaultë¥¼ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í•˜ëŠ” ë‹¨ê³„ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Podë¥¼ ë°°í¬í•˜ì—¬ Vaultì—ì„œ ë¹„ë°€ì„ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤. ì´ ì•ˆë‚´ì„œë¥¼ ë§ˆì¹˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì‘ë™í•˜ëŠ” Vault ì„¤ì •ì´ ì™„ë£Œë˜ì–´ ì‘ìš© í”„ë¡œê·¸ë¨ ë¹„ë°€ì„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ì „ì œ ì¡°ê±´\n\nì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”:\n\n- ì‹¤í–‰ ì¤‘ì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n- í´ëŸ¬ìŠ¤í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ë„ë¡ êµ¬ì„±ëœ kubectlì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n- ë¡œì»¬ ë¨¸ì‹ ì— Helmì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1400/1*jmt8bsoEGeVHv5ZUP7XY_Q.gif\" /\u003e\n\n# ë³´ë¥´íŠ¸(Namespace) ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±í•˜ê¸°\n\nìš°ì„ , ë³´ë¥´íŠ¸(Vault)ë¥¼ ìœ„í•œ ë³„ë„ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë³´ë¥´íŠ¸ì— íŠ¹í™”ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\n$ kubectl create ns vault\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# Vault ì„¤ì¹˜\n\nìš°ë¦¬ëŠ” HashiCorpê°€ ì œê³µí•˜ëŠ” Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultì˜ ìµœì‹  ë²„ì „ì„ ì„¤ì¹˜í•  ê²ƒì…ë‹ˆë‹¤. ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤: 1. HashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ Helm ì„¤ì¹˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ 2. Helm ì°¨íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ë¡œì»¬ë¡œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\n\n## 1. HashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ ì¶”ê°€\n\nHashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ë¥¼ Helm êµ¬ì„±ì— ì¶”ê°€í•´ë³´ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nhelm repo add hashicorp https://helm.releases.hashicorp.com\n```\n\n## 2. ì„¤ì¹˜ ë°©ë²•\n\n1. ì§ì ‘ Helm ì„¤ì¹˜ ì‹¤í–‰í•˜ê¸°\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ HashiCorp ì €ì¥ì†Œì—ì„œ Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultë¥¼ ì§ì ‘ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nhelm install vault hashicorp/vault \\\n       --set='server.dev.enabled=true' \\\n       --set='ui.enabled=true' \\\n       --set='ui.serviceType=LoadBalancer' \\\n       --namespace vault\n```\n\n2. Helm ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜\n\nëŒ€ì•ˆìœ¼ë¡œ Helm ì°¨íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ë¡œì»¬ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\n# Helm ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ\nhelm pull hashicorp/vault --untar\n\n# ë‹¤ìš´ë¡œë“œí•œ ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Vault ì„¤ì¹˜\nhelm install vault \\\n       --set='server.dev.enabled=true' \\\n       --set='ui.enabled=true' \\\n       --set='ui.serviceType=LoadBalancer' \\\n       --namespace vault \\\n       ./vault-chart\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ UIê°€ í™œì„±í™”ëœ Vaultë¥¼ ê°œë°œ ëª¨ë“œë¡œ ì„¤ì¹˜í•˜ê³  ì™¸ë¶€ì—ì„œ ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ LoadBalancer ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ë…¸ì¶œí•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ í…ŒìŠ¤íŠ¸ ë° ê°œë°œ ëª©ì ìœ¼ë¡œ ì´ìƒì ì…ë‹ˆë‹¤.\n\nê²°ê³¼:\n\n```js\n$ kubectl get all -n vault\nNAME                                        READY   STATUS    RESTARTS   AGE\npod/vault-0                                 1/1     Running   0          2m39s\npod/vault-agent-injector-8497dd4457-8jgcm   1/1     Running   0          2m39s\n\nNAME                               TYPE           CLUSTER-IP       EXTERNAL-IP    PORT(S)             AGE\nservice/vault                      ClusterIP      10.245.225.169   \u003cnone\u003e         8200/TCP,8201/TCP   2m40s\nservice/vault-agent-injector-svc   ClusterIP      10.245.32.56     \u003cnone\u003e         443/TCP             2m40s\nservice/vault-internal             ClusterIP      None             \u003cnone\u003e         8200/TCP,8201/TCP   2m40s\nservice/vault-ui                   LoadBalancer   10.245.103.246   24.132.59.59   8200:31764/TCP      2m40s\n\nNAME                                   READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/vault-agent-injector   1/1     1            1           2m40s\n\nNAME                                              DESIRED   CURRENT   READY   AGE\nreplicaset.apps/vault-agent-injector-8497dd4457   1         1         1       2m40s\n\nNAME                     READY   AGE\nstatefulset.apps/vault   1/1     2m40s\n```\n\n# Vault êµ¬ì„±\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì•ˆì „í•˜ê²Œ ë¹„ë°€ì„ ê´€ë¦¬í•˜ê³  ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ Vault ì •ì±…ê³¼ ì¸ì¦ ë°©ë²•ì„ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤. ì´ êµ¬ì„±ì€ ì¸ì¦ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ë§Œ Vaultì—ì„œ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\n\n## 1. Vault Podì— ì—°ê²°í•˜ê¸°\n\nì„¤ì¹˜ê°€ ì™„ë£Œëœ í›„ Vault podì— ì—°ê²°í•˜ì—¬ ì´ˆê¸° êµ¬ì„±ì„ ìˆ˜í–‰í•˜ì„¸ìš”:\n\n```js\nkubectl exec -it vault-0 -- /bin/sh\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 2. ì •ì±… ìƒì„± ë° ì ìš©í•˜ê¸°\n\nì´ì œ ë¹„ë°€ì„ ì½ì„ ìˆ˜ ìˆëŠ” ì •ì±…ì„ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤. ì´ ì •ì±…ì€ ì—­í• ì— ì²¨ë¶€ë˜ì–´ íŠ¹ì • Kubernetes ì„œë¹„ìŠ¤ ê³„ì •ì— ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì •ì±… íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”:\n\n```js\ncat \u003c\u003cEOF \u003e /home/vault/read-policy.hcl\npath \"secret*\" {\n  capabilities = [\"read\"]\n}\nEOF\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì•„ë˜ì™€ ê°™ì´ ì •ì±…ì„ ì ìš©í•´ì£¼ì„¸ìš”:\n\n```js\n# ë¬¸ë²•\n$ vault policy write \u003cì •ì±…ëª…\u003e /ì •ì±…/ê²½ë¡œ/ì—¬ê¸°ì—.hcl\n\n# ì˜ˆì‹œ\n$ vault policy write read-policy /home/vault/read-policy.hcl\n```\n\n## 3. Kubernetes ì¸ì¦ í™œì„±í™”\n\nVaultì—ì„œ Kubernetes ì¸ì¦ ë°©ë²•ì„ í™œì„±í™”í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nvault auth enable kubernetes\n```\n\n## 4. Kubernetes ì¸ì¦ ì„¤ì •\n\nVaultê°€ Kubernetes API ì„œë²„ì™€ í†µì‹ í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤:\n\n```js\nvault write auth/kubernetes/config \\\n   token_reviewer_jwt=\"$(cat /var/run/secrets/kubernetes.io/serviceaccount/token)\" \\\n   kubernetes_host=https://${KUBERNETES_PORT_443_TCP_ADDR}:443 \\\n   kubernetes_ca_cert=@/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 5. ì—­í•  ìƒì„±\n\níŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ ê³„ì •(vault-serviceaccount)ì— ìœ„ì—ì„œ ë§Œë“  ì •ì±…ì„ ë°”ì¸ë”©í•˜ëŠ” ì—­í• (vault-role)ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ê³„ì •ì´ Vaultì— ì €ì¥ëœ ì‹œí¬ë¦¿ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤:\n\n```js\nvault write auth/kubernetes/role/vault-role \\\n   bound_service_account_names=vault-serviceaccount \\\n   bound_service_account_namespaces=vault \\\n   policies=read-policy \\\n   ttl=1h\n```\n\nì—¬ê¸°ì„œ ì—¬ëŸ¬ ê°œì˜ ì„œë¹„ìŠ¤ ê³„ì •ê³¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```bash\nvault write auth/kubernetes/role/\u003cmy-role\u003e \\\n   bound_service_account_names=sa1, sa2 \\\n   bound_service_account_namespaces=namespace1, namespace2 \\\n   policies=\u003cpolicy-name\u003e \\\n   ttl=1h\n```\n\n# ë³´ì•ˆ ì •ë³´ ë§Œë“¤ê¸°\n\nì´ì œ Vaultì— ì¼ë¶€ ë³´ì•ˆ ì •ë³´ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:\n\nìš°ë¦¬ëŠ” ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë³´ì•ˆ ì •ë³´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- Vault CLIë¥¼ ì‚¬ìš©í•˜ê¸°\n\n## 1. Vault CLI ì‚¬ìš©í•˜ê¸°\n\nì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ìƒì„±í•˜ì„¸ìš”\n\n```js\n$ vault kv put secret/login pattoken=ytbuytbytbf765rb65u56rv\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ë‚˜ì—´í•˜ì—¬ ë¹„ë°€ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\n$ vault kv list secret\nKeys\n----\nlogin\n```\n\n## 2. Vault UI ì‚¬ìš© ë°©ë²•\n\nVault ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ë‚˜ì—´í•˜ì—¬ ë¡œë“œ ë°¸ëŸ°ì„œì˜ ì™¸ë¶€ IPë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n$ kubectl get svc -n vault\nNAME                       TYPE           CLUSTER-IP       EXTERNAL-IP    PORT(S)             AGE\nvault                      ClusterIP      10.245.139.117   \u003cnone\u003e         8200/TCP,8201/TCP   28h\nvault-agent-injector-svc   ClusterIP      10.245.58.140    \u003cnone\u003e         443/TCP             28h\nvault-internal             ClusterIP      None             \u003cnone\u003e         8200/TCP,8201/TCP   28h\nvault-ui                   LoadBalancer   10.245.11.13     24.123.49.59   8200:32273/TCP      26h\n```\n\nìœ„ì˜ ë¡œë“œë°¸ëŸ°ì„œì˜ ì™¸ë¶€ IPë¥¼ ì‚¬ìš©í•˜ì—¬ Vault UIì— ì•¡ì„¸ìŠ¤í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì˜ˆ: `external-ip`:8200\n\nì œ ê²½ìš°: 24.123.49.59:8200\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_1.png\" /\u003e\n\nì´ì œ í† í° ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ Vaultì— ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” Token=rootë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸í•˜ì‹­ì‹œì˜¤.\n\nì´ì œ Vault UIì—ì„œ ì‹œí¬ë¦¿ ëŒ€ì‹œë³´ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì‹œí¬ë¦¿ ì—”ì§„ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš” '` ì‹œí¬ë¦¿`\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_2.png\" /\u003e\n\nê·¸ëŸ° ë‹¤ìŒ ì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ \"ë¹„ë°€ ìƒì„±(Create Secret)\"ì„ í´ë¦­í•˜ì„¸ìš”.\n\n\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_3.png\" /\u003e\n\nì´ì œ ë¹„ë°€ì„ ë§Œë“¤ê¸° ìœ„í•´ ì›í•˜ëŠ” í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Vault CLIì—ì„œ ìœ„ì˜ ë¹„ë°€ì„ ì•¡ì„¸ìŠ¤í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n$ vault kv list secret\nKeys\n----\nlogin\nmy-first-secret\n```\n\nì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— Vaultë¥¼ ì„±ê³µì ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ì´ì œ Vaultë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë¹„ë°€ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ì¿ ë²„ë„¤í‹°ìŠ¤ Podì—ì„œ ë¹„ë°€ ì•¡ì„¸ìŠ¤\n\nìœ„ ë‹¨ê³„ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultë¥¼ ì„¤ì¹˜í•˜ê³  Vault ì—­í• (vault-role)ì„ êµ¬ì„±í•˜ì—¬ ì„œë¹„ìŠ¤ ê³„ì •(vault-serviceaccount)ì´ Vaultì— ì €ì¥ëœ ë¹„ë°€ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në˜í•œ, loginê³¼ my-first-secretì´ë¼ëŠ” í‚¤-ê°’ ìŒì„ ê°€ì§„ ë‘ ê°œì˜ ì‹œí¬ë¦¿ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤. ì´ì œ ê°„ë‹¨í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë°°í¬ë¥¼ ìƒì„±í•˜ê³  ì´ëŸ¬í•œ ì‹œí¬ë¦¿ì— ì•¡ì„¸ìŠ¤í•´ ë³´ê² ìŠµë‹ˆë‹¤.\n\në¨¼ì €, vault ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— vault-serviceaccountë¼ëŠ” ì„œë¹„ìŠ¤ ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ ê³„ì •ì€ ìœ„ì—ì„œ ì •ì˜í•œ \"Role ìƒì„±\" ë‹¨ê³„ì—ì„œ ì •ì˜ëœ Vault ì—­í• ì— ëŒ€í•œ ê¶Œí•œì´ ë¶€ì—¬ë©ë‹ˆë‹¤.\n\nì•„ë˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì„ vault-sa.yamlë¡œ ì €ì¥í•©ë‹ˆë‹¤.\n\n```yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: vault-serviceaccount\n  labels:\n    app: read-vault-secret\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nìœ„ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ìœ„ì— ì œê³µëœ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì ìš©í•˜ì„¸ìš”.\n\n```js\nkubectl apply -f vault-sa.yaml\n```\n\nì´ì œ ì•„ë˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ ë°°í¬(vault-secret-test-deploy.yaml)ë¥¼ ìƒì„±í•´ ë´…ì‹œë‹¤.\n\nì´ ë°°í¬ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” Vaultì—ì„œ ì‹œí¬ë¦¿ì„ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜¤ë„ë¡ êµ¬ì„±ëœ Nginx íŒŒë“œì˜ ë‹¨ì¼ ë ˆí”Œë¦¬ì¹´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Vault ì—ì´ì „íŠ¸ëŠ” ì§€ì •ëœ í…œí”Œë¦¿ì— ë”°ë¼ ì‹œí¬ë¦¿ì¸ login ë° my-first-secretì„ íŒŒë“œì— ì£¼ì…í•©ë‹ˆë‹¤. ì‹œí¬ë¦¿ì€ íŒŒë“œ íŒŒì¼ ì‹œìŠ¤í…œì— ì €ì¥ë˜ì–´ ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Vaultì™€ ì¸ì¦í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê¶Œí•œì„ ê°–ê³  ìˆëŠ” vault-serviceaccount ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì–´ë…¸í…Œì´ì…˜ ì„¹ì…˜ì„ ìì„¸íˆ ì‚´í´ë³´ë©´ ê·¸ ëª©ì ê³¼ ê¸°ëŠ¥ì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\nannotations:\n        vault.hashicorp.com/agent-inject: \"true\"\n        vault.hashicorp.com/agent-inject-status: \"update\"\n        vault.hashicorp.com/agent-inject-secret-login: \"secret/login\"\n        vault.hashicorp.com/agent-inject-template-login: |\n          {- with secret \"secret/login\" -}\n          pattoken={ .Data.data.pattoken }\n          {- end }\n        vault.hashicorp.com/agent-inject-secret-my-first-secret: \"secret/my-first-secret\"\n        vault.hashicorp.com/agent-inject-template-my-first-secret: |\n          {- with secret \"secret/my-first-secret\" -}\n          username={ .Data.data.username }\n          password={ .Data.data.password }\n          {- end }\n        vault.hashicorp.com/role: \"vault-role\"\n```\n\nì´ëŸ¬í•œ ì–´ë…¸í…Œì´ì…˜ì€ Vault ì—ì´ì „íŠ¸ë¥¼ êµ¬ì„±í•˜ì—¬ ì‹œí¬ë¦¿ì„ íŒŒë“œ ë³¼ë¥¨ì— ì£¼ì…í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n- vault.hashicorp.com/agent-inject: â€œtrueâ€: ì´ íŒŒë“œì— ëŒ€í•œ Vault ì—ì´ì „íŠ¸ ì£¼ì…ì„ í™œì„±í™”í•©ë‹ˆë‹¤.\n- vault.hashicorp.com/agent-inject-status: â€œupdateâ€: ì‹œí¬ë¦¿ ì£¼ì… ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\n- vault.hashicorp.com/agent-inject-secret-login: â€œsecret/loginâ€: Vaultì— ì €ì¥ëœ secret/loginì˜ ì‹œí¬ë¦¿ì„ ì£¼ì…í•´ì•¼ í•¨ì„ ì§€ì •í•©ë‹ˆë‹¤.\n- vault.hashicorp.com/agent-inject-template-login: ì£¼ì…ëœ ë¡œê·¸ì¸ ì‹œí¬ë¦¿ì˜ í…œí”Œë¦¿ì„ ì •ì˜í•˜ì—¬ ì‹œí¬ë¦¿ì´ ê¸°ë¡ë  í˜•ì‹ì„ ì§€ì •í•©ë‹ˆë‹¤.\n- vault.hashicorp.com/agent-inject-secret-my-first-secret: â€œsecret/my-first-secretâ€: Vaultì— ì €ì¥ëœ secret/my-first-secretì˜ ì‹œí¬ë¦¿ì„ ì£¼ì…í•´ì•¼ í•¨ì„ ì§€ì •í•©ë‹ˆë‹¤.\n- vault.hashicorp.com/agent-inject-template-my-first-secret: ì£¼ì…ëœ my-first-secretì— ëŒ€í•œ í…œí”Œë¦¿ì„ ì •ì˜í•˜ì—¬ ì‹œí¬ë¦¿ì´ ê¸°ë¡ë  í˜•ì‹ì„ ì§€ì •í•©ë‹ˆë‹¤.\n- vault.hashicorp.com/role: â€œvault-roleâ€: ì¸ì¦ì— ì‚¬ìš©ë  Vault ì—­í• ì„ ì§€ì •í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ pod ë³¼ë¥¨ì—ì„œ Vault ì‹œí¬ë¦¿ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n$ kubectl exec -it vault-test-84d9dc9986-gcxfv -- sh -c \"cat /vault/secrets/login \u0026\u0026 cat /vault/secrets/my-first-secret\" -n vault\n```\n\n```js\n$ kubectl exec -it vault-test-84d9dc9986-gcxfv -- sh -c \"cat /vault/secrets/login \u0026\u0026 cat /vault/secrets/my-first-secret\" -n vault\n\nDefaulted container \"nginx\" out of: nginx, vault-agent, vault-agent-init (init)\npattoken=ytbuytbytbf765rb65u56rv\nusername=anvesh\npassword=anveshpassword\n```\n\nì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! Vaultì— ì‹œí¬ë¦¿ì„ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í•˜ê³  í•´ë‹¹ ì‹œí¬ë¦¿ì„ íŒŸ ë‚´ì—ì„œ í™œìš©í–ˆìŠµë‹ˆë‹¤.\n\n# ì†ŒìŠ¤ ì½”ë“œ\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nìœ„ì˜ í…ìŠ¤íŠ¸ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ì˜€ìŠµë‹ˆë‹¤.\n\nì¹œêµ¬ì•¼! ë‹¹ì‹ ì„ ìš°ë¦¬ì˜ GitHub ì €ì¥ì†Œë¡œ ì´ˆëŒ€í•©ë‹ˆë‹¤. ê±°ê¸°ì—ëŠ” Kubernetesìš© ì†ŒìŠ¤ ì½”ë“œì˜ í¬ê´„ì ì¸ ì»¬ë ‰ì…˜ì´ ì €ì¥ë˜ì–´ ìˆì–´ìš”.\n\në˜í•œ, ì—¬ëŸ¬ë¶„ì˜ í”¼ë“œë°±ê³¼ ì œì•ˆì„ í™˜ì˜í•©ë‹ˆë‹¤! ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê°œì„  ì•„ì´ë””ì–´ê°€ ìˆë‹¤ë©´, ì €í¬ì˜ GitHub ì €ì¥ì†Œì—ì„œ issueë¥¼ ì—´ì–´ì£¼ì„¸ìš”. ğŸš€\n\n\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_6.png\" /\u003e\n\n# Connect With Me\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ ë¸”ë¡œê·¸ë¥¼ ìœ ìµí•˜ê²Œ ì°¾ìœ¼ì…¨ê³  AWS, í´ë¼ìš°ë“œ ì „ëµ, Kubernetes ë˜ëŠ” ê´€ë ¨ëœ ëª¨ë“  ì£¼ì œì— ëŒ€í•´ ë” ê¹Šì´ ì•Œê³  ì‹¶ë‹¤ë©´, LinkedInì—ì„œ ì—°ê²°í•  ê¸°íšŒë¥¼ ê°–ê²Œ ë˜ì–´ ê¸°ì©ë‹ˆë‹¤. ì˜ë¯¸ ìˆëŠ” ëŒ€í™”ë¥¼ ë‚˜ëˆ„ê³  í†µì°°ì„ ê³µìœ í•˜ë©° í•¨ê»˜ í´ë¼ìš°ë“œ ì»´í“¨íŒ…ì˜ ê´‘í™œí•œ ì˜ì—­ì„ íƒìƒ‰í•´ ë´…ì‹œë‹¤.\n\nì–¸ì œë“ ì§€ ì—°ë½ ì£¼ì‹œê±°ë‚˜ ìƒê°ì„ ê³µìœ í•˜ê±°ë‚˜ ì§ˆë¬¸ì„ í•  ììœ ê°€ ìˆìŠµë‹ˆë‹¤. ë™ì ì¸ ë¶„ì•¼ì—ì„œ ì—°ê²°í•˜ê³  í•¨ê»˜ ì„±ì¥í•˜ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤!\n\ní–‰ë³µí•œ ë°°í¬ ë˜ì„¸ìš”! ğŸš€\n\ní–‰ë³µí•œ ì¿ ë²„ë„¤íŒ… ë˜ì„¸ìš”! âˆ\n","ogImage":{"url":"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_0.png"},"coverImage":"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_0.png","tag":["Tech"],"readingTime":18},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch2\u003eâ‡¢ ì‹¤ìš©ì ì¸ ì˜ˆì œë¡œ HashiCorp Vaultë¥¼ ì‚¬ìš©í•˜ì—¬ k8s Secrets ê´€ë¦¬í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_0.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eì¿ ë²„ë„¤í‹°ìŠ¤ ì„¸ê³„ì—ì„œ API í‚¤, ë¹„ë°€ë²ˆí˜¸ ë° ê¸°íƒ€ ì¤‘ìš” ì •ë³´ì™€ ê°™ì€ ë³´ì•ˆ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì¤‘ìš”í•œ ì‘ì—…ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ëŠ” ë‚´ì¥ëœ ë³´ì•ˆ ì •ë³´ ê´€ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì´ ìˆì§€ë§Œ, ëª¨ë“  ì¡°ì§ì˜ ë³´ì•ˆ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¤ì§€ ëª»í•  ìˆ˜ë„ ìˆëŠ” íŠ¹ì • ì œí•œ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¿ ë²„ë„¤í‹°ìŠ¤ ë³´ì•ˆ ì •ë³´ëŠ” etcdì— ì €ì¥ë˜ë©°, ì´ëŠ” íœ´ì‹ ì¤‘ ì•”í˜¸í™”ë˜ì–´ ìˆì§€ë§Œ, ë§¤ìš° ì¤‘ìš”í•œ ì •ë³´ì— í•„ìš”í•œ ë³´ì•ˆ ìˆ˜ì¤€ê³¼ ì ‘ê·¼ ì œì–´ë¥¼ ì œê³µí•˜ì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ë•Œ HashiCorp Vaultê°€ ë“±ì¥í•©ë‹ˆë‹¤. VaultëŠ” ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì„¤ê³„ëœ ë„êµ¬ì…ë‹ˆë‹¤. ë™ì  ë³´ì•ˆ ì •ë³´, ì„œë¹„ìŠ¤ë¡œì˜ ì•”í˜¸í™” ë° ì ‘ê·¼ ì œì–´ë¥¼ ìœ„í•œ ê²¬ê³ í•œ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•˜ì—¬, ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ë³´ì•ˆ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸°ì— ì´ìƒì ì¸ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Helmì„ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— Vaultë¥¼ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í•˜ëŠ” ë‹¨ê³„ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Podë¥¼ ë°°í¬í•˜ì—¬ Vaultì—ì„œ ë¹„ë°€ì„ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤. ì´ ì•ˆë‚´ì„œë¥¼ ë§ˆì¹˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì‘ë™í•˜ëŠ” Vault ì„¤ì •ì´ ì™„ë£Œë˜ì–´ ì‘ìš© í”„ë¡œê·¸ë¨ ë¹„ë°€ì„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì „ì œ ì¡°ê±´\u003c/h1\u003e\n\u003cp\u003eì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eì‹¤í–‰ ì¤‘ì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eí´ëŸ¬ìŠ¤í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ë„ë¡ êµ¬ì„±ëœ kubectlì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eë¡œì»¬ ë¨¸ì‹ ì— Helmì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1400/1*jmt8bsoEGeVHv5ZUP7XY_Q.gif\"\u003e\n\u003ch1\u003eë³´ë¥´íŠ¸(Namespace) ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eìš°ì„ , ë³´ë¥´íŠ¸(Vault)ë¥¼ ìœ„í•œ ë³„ë„ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë³´ë¥´íŠ¸ì— íŠ¹í™”ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ kubectl create ns vault\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eVault ì„¤ì¹˜\u003c/h1\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” HashiCorpê°€ ì œê³µí•˜ëŠ” Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultì˜ ìµœì‹  ë²„ì „ì„ ì„¤ì¹˜í•  ê²ƒì…ë‹ˆë‹¤. ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤: 1. HashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ Helm ì„¤ì¹˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ 2. Helm ì°¨íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ë¡œì»¬ë¡œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e1. HashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ ì¶”ê°€\u003c/h2\u003e\n\u003cp\u003eHashiCorp Helm ë¦¬í¬ì§€í† ë¦¬ë¥¼ Helm êµ¬ì„±ì— ì¶”ê°€í•´ë³´ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ehelm repo add hashicorp \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//helm.releases.hashicorp.com\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e2. ì„¤ì¹˜ ë°©ë²•\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eì§ì ‘ Helm ì„¤ì¹˜ ì‹¤í–‰í•˜ê¸°\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ HashiCorp ì €ì¥ì†Œì—ì„œ Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultë¥¼ ì§ì ‘ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ehelm install vault hashicorp/vault \\\n       --set=\u003cspan class=\"hljs-string\"\u003e'server.dev.enabled=true'\u003c/span\u003e \\\n       --set=\u003cspan class=\"hljs-string\"\u003e'ui.enabled=true'\u003c/span\u003e \\\n       --set=\u003cspan class=\"hljs-string\"\u003e'ui.serviceType=LoadBalancer'\u003c/span\u003e \\\n       --namespace vault\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eHelm ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eëŒ€ì•ˆìœ¼ë¡œ Helm ì°¨íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ë¡œì»¬ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-title class_\"\u003eHelm\u003c/span\u003e ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ\nhelm pull hashicorp/vault --untar\n\n# ë‹¤ìš´ë¡œë“œí•œ ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ \u003cspan class=\"hljs-title class_\"\u003eVault\u003c/span\u003e ì„¤ì¹˜\nhelm install vault \\\n       --set=\u003cspan class=\"hljs-string\"\u003e'server.dev.enabled=true'\u003c/span\u003e \\\n       --set=\u003cspan class=\"hljs-string\"\u003e'ui.enabled=true'\u003c/span\u003e \\\n       --set=\u003cspan class=\"hljs-string\"\u003e'ui.serviceType=LoadBalancer'\u003c/span\u003e \\\n       --namespace vault \\\n       ./vault-chart\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ UIê°€ í™œì„±í™”ëœ Vaultë¥¼ ê°œë°œ ëª¨ë“œë¡œ ì„¤ì¹˜í•˜ê³  ì™¸ë¶€ì—ì„œ ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ LoadBalancer ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ë…¸ì¶œí•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ í…ŒìŠ¤íŠ¸ ë° ê°œë°œ ëª©ì ìœ¼ë¡œ ì´ìƒì ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê²°ê³¼:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ kubectl get all -n vault\n\u003cspan class=\"hljs-variable constant_\"\u003eNAME\u003c/span\u003e                                        \u003cspan class=\"hljs-variable constant_\"\u003eREADY\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eSTATUS\u003c/span\u003e    \u003cspan class=\"hljs-variable constant_\"\u003eRESTARTS\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eAGE\u003c/span\u003e\npod/vault-\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e                                 \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e     \u003cspan class=\"hljs-title class_\"\u003eRunning\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e          2m39s\npod/vault-agent-injector-8497dd4457-8jgcm   \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e     \u003cspan class=\"hljs-title class_\"\u003eRunning\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e          2m39s\n\n\u003cspan class=\"hljs-variable constant_\"\u003eNAME\u003c/span\u003e                               \u003cspan class=\"hljs-variable constant_\"\u003eTYPE\u003c/span\u003e           \u003cspan class=\"hljs-variable constant_\"\u003eCLUSTER\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eIP\u003c/span\u003e       \u003cspan class=\"hljs-variable constant_\"\u003eEXTERNAL\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eIP\u003c/span\u003e    \u003cspan class=\"hljs-title function_\"\u003ePORT\u003c/span\u003e(S)             \u003cspan class=\"hljs-variable constant_\"\u003eAGE\u003c/span\u003e\nservice/vault                      \u003cspan class=\"hljs-title class_\"\u003eClusterIP\u003c/span\u003e      \u003cspan class=\"hljs-number\"\u003e10.245\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.225\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e   \u0026#x3C;none\u003e         \u003cspan class=\"hljs-number\"\u003e8200\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e8201\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e   2m40s\nservice/vault-agent-injector-svc   \u003cspan class=\"hljs-title class_\"\u003eClusterIP\u003c/span\u003e      \u003cspan class=\"hljs-number\"\u003e10.245\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.32\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e     \u0026#x3C;none\u003e         \u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e             2m40s\nservice/vault-internal             \u003cspan class=\"hljs-title class_\"\u003eClusterIP\u003c/span\u003e      \u003cspan class=\"hljs-title class_\"\u003eNone\u003c/span\u003e             \u0026#x3C;none\u003e         \u003cspan class=\"hljs-number\"\u003e8200\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e8201\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e   2m40s\nservice/vault-ui                   \u003cspan class=\"hljs-title class_\"\u003eLoadBalancer\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e10.245\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.103\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.246\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e24.132\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.59\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.59\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e8200\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31764\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e      2m40s\n\n\u003cspan class=\"hljs-variable constant_\"\u003eNAME\u003c/span\u003e                                   \u003cspan class=\"hljs-variable constant_\"\u003eREADY\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eUP\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eTO\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eDATE\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eAVAILABLE\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eAGE\u003c/span\u003e\ndeployment.\u003cspan class=\"hljs-property\"\u003eapps\u003c/span\u003e/vault-agent-injector   \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e            \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e           2m40s\n\n\u003cspan class=\"hljs-variable constant_\"\u003eNAME\u003c/span\u003e                                              \u003cspan class=\"hljs-variable constant_\"\u003eDESIRED\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eCURRENT\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eREADY\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eAGE\u003c/span\u003e\nreplicaset.\u003cspan class=\"hljs-property\"\u003eapps\u003c/span\u003e/vault-agent-injector-8497dd4457   \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e       2m40s\n\n\u003cspan class=\"hljs-variable constant_\"\u003eNAME\u003c/span\u003e                     \u003cspan class=\"hljs-variable constant_\"\u003eREADY\u003c/span\u003e   \u003cspan class=\"hljs-variable constant_\"\u003eAGE\u003c/span\u003e\nstatefulset.\u003cspan class=\"hljs-property\"\u003eapps\u003c/span\u003e/vault   \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e     2m40s\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eVault êµ¬ì„±\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì•ˆì „í•˜ê²Œ ë¹„ë°€ì„ ê´€ë¦¬í•˜ê³  ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ Vault ì •ì±…ê³¼ ì¸ì¦ ë°©ë²•ì„ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤. ì´ êµ¬ì„±ì€ ì¸ì¦ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ë§Œ Vaultì—ì„œ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e1. Vault Podì— ì—°ê²°í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eì„¤ì¹˜ê°€ ì™„ë£Œëœ í›„ Vault podì— ì—°ê²°í•˜ì—¬ ì´ˆê¸° êµ¬ì„±ì„ ìˆ˜í–‰í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekubectl exec -it vault-\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e -- \u003cspan class=\"hljs-regexp\"\u003e/bin/\u003c/span\u003esh\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e2. ì •ì±… ìƒì„± ë° ì ìš©í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eì´ì œ ë¹„ë°€ì„ ì½ì„ ìˆ˜ ìˆëŠ” ì •ì±…ì„ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤. ì´ ì •ì±…ì€ ì—­í• ì— ì²¨ë¶€ë˜ì–´ íŠ¹ì • Kubernetes ì„œë¹„ìŠ¤ ê³„ì •ì— ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì •ì±… íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecat \u0026#x3C;\u0026#x3C;\u003cspan class=\"hljs-variable constant_\"\u003eEOF\u003c/span\u003e \u003e \u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003evault/read-policy.\u003cspan class=\"hljs-property\"\u003ehcl\u003c/span\u003e\npath \u003cspan class=\"hljs-string\"\u003e\"secret*\"\u003c/span\u003e {\n  capabilities = [\u003cspan class=\"hljs-string\"\u003e\"read\"\u003c/span\u003e]\n}\n\u003cspan class=\"hljs-variable constant_\"\u003eEOF\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì•„ë˜ì™€ ê°™ì´ ì •ì±…ì„ ì ìš©í•´ì£¼ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# ë¬¸ë²•\n$ vault policy write \u0026#x3C;ì •ì±…ëª…\u003e \u003cspan class=\"hljs-regexp\"\u003e/ì •ì±…/\u003c/span\u003eê²½ë¡œ/ì—¬ê¸°ì—.\u003cspan class=\"hljs-property\"\u003ehcl\u003c/span\u003e\n\n# ì˜ˆì‹œ\n$ vault policy write read-policy /home/vault/read-policy.\u003cspan class=\"hljs-property\"\u003ehcl\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e3. Kubernetes ì¸ì¦ í™œì„±í™”\u003c/h2\u003e\n\u003cp\u003eVaultì—ì„œ Kubernetes ì¸ì¦ ë°©ë²•ì„ í™œì„±í™”í•˜ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003evault auth enable kubernetes\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e4. Kubernetes ì¸ì¦ ì„¤ì •\u003c/h2\u003e\n\u003cp\u003eVaultê°€ Kubernetes API ì„œë²„ì™€ í†µì‹ í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003evault write auth/kubernetes/config \\\n   token_reviewer_jwt=\u003cspan class=\"hljs-string\"\u003e\"$(cat /var/run/secrets/kubernetes.io/serviceaccount/token)\"\u003c/span\u003e \\\n   kubernetes_host=\u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//${KUBERNETES_PORT_443_TCP_ADDR}:443 \\\u003c/span\u003e\n   kubernetes_ca_cert=@/\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/run/secrets/kubernetes.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e/serviceaccount/ca.\u003cspan class=\"hljs-property\"\u003ecrt\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e5. ì—­í•  ìƒì„±\u003c/h2\u003e\n\u003cp\u003eíŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ ê³„ì •(vault-serviceaccount)ì— ìœ„ì—ì„œ ë§Œë“  ì •ì±…ì„ ë°”ì¸ë”©í•˜ëŠ” ì—­í• (vault-role)ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ê³„ì •ì´ Vaultì— ì €ì¥ëœ ì‹œí¬ë¦¿ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003evault write auth/kubernetes/role/vault-role \\\n   bound_service_account_names=vault-serviceaccount \\\n   bound_service_account_namespaces=vault \\\n   policies=read-policy \\\n   ttl=1h\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì—¬ê¸°ì„œ ì—¬ëŸ¬ ê°œì˜ ì„œë¹„ìŠ¤ ê³„ì •ê³¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003evault write auth/kubernetes/role/\u0026#x3C;my-role\u003e \\\n   bound_service_account_names=sa1, sa2 \\\n   bound_service_account_namespaces=namespace1, namespace2 \\\n   policies=\u0026#x3C;policy-name\u003e \\\n   ttl=1h\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë³´ì•ˆ ì •ë³´ ë§Œë“¤ê¸°\u003c/h1\u003e\n\u003cp\u003eì´ì œ Vaultì— ì¼ë¶€ ë³´ì•ˆ ì •ë³´ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë³´ì•ˆ ì •ë³´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eVault CLIë¥¼ ì‚¬ìš©í•˜ê¸°\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e1. Vault CLI ì‚¬ìš©í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ìƒì„±í•˜ì„¸ìš”\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ vault kv put secret/login pattoken=ytbuytbytbf765rb65u56rv\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ë‚˜ì—´í•˜ì—¬ ë¹„ë°€ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ vault kv list secret\n\u003cspan class=\"hljs-title class_\"\u003eKeys\u003c/span\u003e\n----\nlogin\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e2. Vault UI ì‚¬ìš© ë°©ë²•\u003c/h2\u003e\n\u003cp\u003eVault ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ë‚˜ì—´í•˜ì—¬ ë¡œë“œ ë°¸ëŸ°ì„œì˜ ì™¸ë¶€ IPë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ kubectl get svc -n vault\n\u003cspan class=\"hljs-variable constant_\"\u003eNAME\u003c/span\u003e                       \u003cspan class=\"hljs-variable constant_\"\u003eTYPE\u003c/span\u003e           \u003cspan class=\"hljs-variable constant_\"\u003eCLUSTER\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eIP\u003c/span\u003e       \u003cspan class=\"hljs-variable constant_\"\u003eEXTERNAL\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eIP\u003c/span\u003e    \u003cspan class=\"hljs-title function_\"\u003ePORT\u003c/span\u003e(S)             \u003cspan class=\"hljs-variable constant_\"\u003eAGE\u003c/span\u003e\nvault                      \u003cspan class=\"hljs-title class_\"\u003eClusterIP\u003c/span\u003e      \u003cspan class=\"hljs-number\"\u003e10.245\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.139\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.117\u003c/span\u003e   \u0026#x3C;none\u003e         \u003cspan class=\"hljs-number\"\u003e8200\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e8201\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e   28h\nvault-agent-injector-svc   \u003cspan class=\"hljs-title class_\"\u003eClusterIP\u003c/span\u003e      \u003cspan class=\"hljs-number\"\u003e10.245\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.58\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.140\u003c/span\u003e    \u0026#x3C;none\u003e         \u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e             28h\nvault-internal             \u003cspan class=\"hljs-title class_\"\u003eClusterIP\u003c/span\u003e      \u003cspan class=\"hljs-title class_\"\u003eNone\u003c/span\u003e             \u0026#x3C;none\u003e         \u003cspan class=\"hljs-number\"\u003e8200\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e8201\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e   28h\nvault-ui                   \u003cspan class=\"hljs-title class_\"\u003eLoadBalancer\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e10.245\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.13\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e24.123\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.49\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.59\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e8200\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e32273\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e      26h\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ì˜ ë¡œë“œë°¸ëŸ°ì„œì˜ ì™¸ë¶€ IPë¥¼ ì‚¬ìš©í•˜ì—¬ Vault UIì— ì•¡ì„¸ìŠ¤í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì˜ˆ: \u003ccode\u003eexternal-ip\u003c/code\u003e:8200\u003c/p\u003e\n\u003cp\u003eì œ ê²½ìš°: 24.123.49.59:8200\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_1.png\"\u003e\n\u003cp\u003eì´ì œ í† í° ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ Vaultì— ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” Token=rootë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸í•˜ì‹­ì‹œì˜¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ Vault UIì—ì„œ ì‹œí¬ë¦¿ ëŒ€ì‹œë³´ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì‹œí¬ë¦¿ ì—”ì§„ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš” '\u003ccode\u003e ì‹œí¬ë¦¿\u003c/code\u003e\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_2.png\"\u003e\n\u003cp\u003eê·¸ëŸ° ë‹¤ìŒ ì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ \"ë¹„ë°€ ìƒì„±(Create Secret)\"ì„ í´ë¦­í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_3.png\"\u003e\n\u003cp\u003eì´ì œ ë¹„ë°€ì„ ë§Œë“¤ê¸° ìœ„í•´ ì›í•˜ëŠ” í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Vault CLIì—ì„œ ìœ„ì˜ ë¹„ë°€ì„ ì•¡ì„¸ìŠ¤í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ vault kv list secret\n\u003cspan class=\"hljs-title class_\"\u003eKeys\u003c/span\u003e\n----\nlogin\nmy-first-secret\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— Vaultë¥¼ ì„±ê³µì ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ì´ì œ Vaultë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë¹„ë°€ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì¿ ë²„ë„¤í‹°ìŠ¤ Podì—ì„œ ë¹„ë°€ ì•¡ì„¸ìŠ¤\u003c/h1\u003e\n\u003cp\u003eìœ„ ë‹¨ê³„ë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultë¥¼ ì„¤ì¹˜í•˜ê³  Vault ì—­í• (vault-role)ì„ êµ¬ì„±í•˜ì—¬ ì„œë¹„ìŠ¤ ê³„ì •(vault-serviceaccount)ì´ Vaultì— ì €ì¥ëœ ë¹„ë°€ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë˜í•œ, loginê³¼ my-first-secretì´ë¼ëŠ” í‚¤-ê°’ ìŒì„ ê°€ì§„ ë‘ ê°œì˜ ì‹œí¬ë¦¿ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤. ì´ì œ ê°„ë‹¨í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë°°í¬ë¥¼ ìƒì„±í•˜ê³  ì´ëŸ¬í•œ ì‹œí¬ë¦¿ì— ì•¡ì„¸ìŠ¤í•´ ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë¨¼ì €, vault ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— vault-serviceaccountë¼ëŠ” ì„œë¹„ìŠ¤ ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ ê³„ì •ì€ ìœ„ì—ì„œ ì •ì˜í•œ \"Role ìƒì„±\" ë‹¨ê³„ì—ì„œ ì •ì˜ëœ Vault ì—­í• ì— ëŒ€í•œ ê¶Œí•œì´ ë¶€ì—¬ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì•„ë˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì„ vault-sa.yamlë¡œ ì €ì¥í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ev1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eServiceAccount\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003evault-serviceaccount\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003elabels:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eapp:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eread-vault-secret\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eìœ„ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ìœ„ì— ì œê³µëœ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì ìš©í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekubectl apply -f vault-sa.\u003cspan class=\"hljs-property\"\u003eyaml\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ì•„ë˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ ë°°í¬(vault-secret-test-deploy.yaml)ë¥¼ ìƒì„±í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ë°°í¬ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” Vaultì—ì„œ ì‹œí¬ë¦¿ì„ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜¤ë„ë¡ êµ¬ì„±ëœ Nginx íŒŒë“œì˜ ë‹¨ì¼ ë ˆí”Œë¦¬ì¹´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Vault ì—ì´ì „íŠ¸ëŠ” ì§€ì •ëœ í…œí”Œë¦¿ì— ë”°ë¼ ì‹œí¬ë¦¿ì¸ login ë° my-first-secretì„ íŒŒë“œì— ì£¼ì…í•©ë‹ˆë‹¤. ì‹œí¬ë¦¿ì€ íŒŒë“œ íŒŒì¼ ì‹œìŠ¤í…œì— ì €ì¥ë˜ì–´ ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Vaultì™€ ì¸ì¦í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê¶Œí•œì„ ê°–ê³  ìˆëŠ” vault-serviceaccount ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì–´ë…¸í…Œì´ì…˜ ì„¹ì…˜ì„ ìì„¸íˆ ì‚´í´ë³´ë©´ ê·¸ ëª©ì ê³¼ ê¸°ëŠ¥ì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003eannotations\u003c/span\u003e:\n        vault.\u003cspan class=\"hljs-property\"\u003ehashicorp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecom\u003c/span\u003e/agent-\u003cspan class=\"hljs-attr\"\u003einject\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"true\"\u003c/span\u003e\n        vault.\u003cspan class=\"hljs-property\"\u003ehashicorp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecom\u003c/span\u003e/agent-inject-\u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"update\"\u003c/span\u003e\n        vault.\u003cspan class=\"hljs-property\"\u003ehashicorp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecom\u003c/span\u003e/agent-inject-secret-\u003cspan class=\"hljs-attr\"\u003elogin\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"secret/login\"\u003c/span\u003e\n        vault.\u003cspan class=\"hljs-property\"\u003ehashicorp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecom\u003c/span\u003e/agent-inject-template-\u003cspan class=\"hljs-attr\"\u003elogin\u003c/span\u003e: |\n          {- \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e secret \u003cspan class=\"hljs-string\"\u003e\"secret/login\"\u003c/span\u003e -}\n          pattoken={ .\u003cspan class=\"hljs-property\"\u003eData\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003epattoken\u003c/span\u003e }\n          {- end }\n        vault.\u003cspan class=\"hljs-property\"\u003ehashicorp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecom\u003c/span\u003e/agent-inject-secret-my-first-\u003cspan class=\"hljs-attr\"\u003esecret\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"secret/my-first-secret\"\u003c/span\u003e\n        vault.\u003cspan class=\"hljs-property\"\u003ehashicorp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecom\u003c/span\u003e/agent-inject-template-my-first-\u003cspan class=\"hljs-attr\"\u003esecret\u003c/span\u003e: |\n          {- \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e secret \u003cspan class=\"hljs-string\"\u003e\"secret/my-first-secret\"\u003c/span\u003e -}\n          username={ .\u003cspan class=\"hljs-property\"\u003eData\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eusername\u003c/span\u003e }\n          password={ .\u003cspan class=\"hljs-property\"\u003eData\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003epassword\u003c/span\u003e }\n          {- end }\n        vault.\u003cspan class=\"hljs-property\"\u003ehashicorp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecom\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"vault-role\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ëŸ¬í•œ ì–´ë…¸í…Œì´ì…˜ì€ Vault ì—ì´ì „íŠ¸ë¥¼ êµ¬ì„±í•˜ì—¬ ì‹œí¬ë¦¿ì„ íŒŒë“œ ë³¼ë¥¨ì— ì£¼ì…í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003evault.hashicorp.com/agent-inject: â€œtrueâ€: ì´ íŒŒë“œì— ëŒ€í•œ Vault ì—ì´ì „íŠ¸ ì£¼ì…ì„ í™œì„±í™”í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003evault.hashicorp.com/agent-inject-status: â€œupdateâ€: ì‹œí¬ë¦¿ ì£¼ì… ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003evault.hashicorp.com/agent-inject-secret-login: â€œsecret/loginâ€: Vaultì— ì €ì¥ëœ secret/loginì˜ ì‹œí¬ë¦¿ì„ ì£¼ì…í•´ì•¼ í•¨ì„ ì§€ì •í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003evault.hashicorp.com/agent-inject-template-login: ì£¼ì…ëœ ë¡œê·¸ì¸ ì‹œí¬ë¦¿ì˜ í…œí”Œë¦¿ì„ ì •ì˜í•˜ì—¬ ì‹œí¬ë¦¿ì´ ê¸°ë¡ë  í˜•ì‹ì„ ì§€ì •í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003evault.hashicorp.com/agent-inject-secret-my-first-secret: â€œsecret/my-first-secretâ€: Vaultì— ì €ì¥ëœ secret/my-first-secretì˜ ì‹œí¬ë¦¿ì„ ì£¼ì…í•´ì•¼ í•¨ì„ ì§€ì •í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003evault.hashicorp.com/agent-inject-template-my-first-secret: ì£¼ì…ëœ my-first-secretì— ëŒ€í•œ í…œí”Œë¦¿ì„ ì •ì˜í•˜ì—¬ ì‹œí¬ë¦¿ì´ ê¸°ë¡ë  í˜•ì‹ì„ ì§€ì •í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003evault.hashicorp.com/role: â€œvault-roleâ€: ì¸ì¦ì— ì‚¬ìš©ë  Vault ì—­í• ì„ ì§€ì •í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ pod ë³¼ë¥¨ì—ì„œ Vault ì‹œí¬ë¦¿ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ kubectl exec -it vault-test-84d9dc9986-gcxfv -- sh -c \u003cspan class=\"hljs-string\"\u003e\"cat /vault/secrets/login \u0026#x26;\u0026#x26; cat /vault/secrets/my-first-secret\"\u003c/span\u003e -n vault\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ kubectl exec -it vault-test-84d9dc9986-gcxfv -- sh -c \u003cspan class=\"hljs-string\"\u003e\"cat /vault/secrets/login \u0026#x26;\u0026#x26; cat /vault/secrets/my-first-secret\"\u003c/span\u003e -n vault\n\n\u003cspan class=\"hljs-title class_\"\u003eDefaulted\u003c/span\u003e container \u003cspan class=\"hljs-string\"\u003e\"nginx\"\u003c/span\u003e out \u003cspan class=\"hljs-attr\"\u003eof\u003c/span\u003e: nginx, vault-agent, vault-agent-init (init)\npattoken=ytbuytbytbf765rb65u56rv\nusername=anvesh\npassword=anveshpassword\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! Vaultì— ì‹œí¬ë¦¿ì„ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í•˜ê³  í•´ë‹¹ ì‹œí¬ë¦¿ì„ íŒŸ ë‚´ì—ì„œ í™œìš©í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì†ŒìŠ¤ ì½”ë“œ\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eìœ„ì˜ í…ìŠ¤íŠ¸ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ì˜€ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì¹œêµ¬ì•¼! ë‹¹ì‹ ì„ ìš°ë¦¬ì˜ GitHub ì €ì¥ì†Œë¡œ ì´ˆëŒ€í•©ë‹ˆë‹¤. ê±°ê¸°ì—ëŠ” Kubernetesìš© ì†ŒìŠ¤ ì½”ë“œì˜ í¬ê´„ì ì¸ ì»¬ë ‰ì…˜ì´ ì €ì¥ë˜ì–´ ìˆì–´ìš”.\u003c/p\u003e\n\u003cp\u003eë˜í•œ, ì—¬ëŸ¬ë¶„ì˜ í”¼ë“œë°±ê³¼ ì œì•ˆì„ í™˜ì˜í•©ë‹ˆë‹¤! ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê°œì„  ì•„ì´ë””ì–´ê°€ ìˆë‹¤ë©´, ì €í¬ì˜ GitHub ì €ì¥ì†Œì—ì„œ issueë¥¼ ì—´ì–´ì£¼ì„¸ìš”. ğŸš€\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-23-AHand-OnGuidetoVaultinKubernetes_6.png\"\u003e\n\u003ch1\u003eConnect With Me\u003c/h1\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ ë¸”ë¡œê·¸ë¥¼ ìœ ìµí•˜ê²Œ ì°¾ìœ¼ì…¨ê³  AWS, í´ë¼ìš°ë“œ ì „ëµ, Kubernetes ë˜ëŠ” ê´€ë ¨ëœ ëª¨ë“  ì£¼ì œì— ëŒ€í•´ ë” ê¹Šì´ ì•Œê³  ì‹¶ë‹¤ë©´, LinkedInì—ì„œ ì—°ê²°í•  ê¸°íšŒë¥¼ ê°–ê²Œ ë˜ì–´ ê¸°ì©ë‹ˆë‹¤. ì˜ë¯¸ ìˆëŠ” ëŒ€í™”ë¥¼ ë‚˜ëˆ„ê³  í†µì°°ì„ ê³µìœ í•˜ë©° í•¨ê»˜ í´ë¼ìš°ë“œ ì»´í“¨íŒ…ì˜ ê´‘í™œí•œ ì˜ì—­ì„ íƒìƒ‰í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cp\u003eì–¸ì œë“ ì§€ ì—°ë½ ì£¼ì‹œê±°ë‚˜ ìƒê°ì„ ê³µìœ í•˜ê±°ë‚˜ ì§ˆë¬¸ì„ í•  ììœ ê°€ ìˆìŠµë‹ˆë‹¤. ë™ì ì¸ ë¶„ì•¼ì—ì„œ ì—°ê²°í•˜ê³  í•¨ê»˜ ì„±ì¥í•˜ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003eí–‰ë³µí•œ ë°°í¬ ë˜ì„¸ìš”! ğŸš€\u003c/p\u003e\n\u003cp\u003eí–‰ë³µí•œ ì¿ ë²„ë„¤íŒ… ë˜ì„¸ìš”! âˆ\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-23-AHand-OnGuidetoVaultinKubernetes"},"buildId":"T_Nz0g9U1yttYMSEma95P","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>