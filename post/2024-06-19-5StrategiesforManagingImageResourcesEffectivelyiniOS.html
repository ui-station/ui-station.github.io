<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>iOS에서 이미지 자원을 효율적으로 관리하는 5가지 전략 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="iOS에서 이미지 자원을 효율적으로 관리하는 5가지 전략 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="iOS에서 이미지 자원을 효율적으로 관리하는 5가지 전략 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS" data-gatsby-head="true"/><meta name="twitter:title" content="iOS에서 이미지 자원을 효율적으로 관리하는 5가지 전략 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 11:19" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-4f7b40c1114f0d09.js" defer=""></script><script src="/_next/static/YUMR4jSyk_WlOHHc7UfOk/_buildManifest.js" defer=""></script><script src="/_next/static/YUMR4jSyk_WlOHHc7UfOk/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">iOS에서 이미지 자원을 효율적으로 관리하는 5가지 전략</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="iOS에서 이미지 자원을 효율적으로 관리하는 5가지 전략" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">10<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_0.png" alt="Image"></p>
<p>이미지 리소스 관리는 엔지니어들이 종종 간과하는 측면입니다. 충분한 주의를 기울이지 않으면 앱의 성능 뿐만 아니라 생산성에도 영향을 미칠 수 있습니다.</p>
<p>이 기사에서는 이미지 리소스를 관리하는 데 우리 엔지니어링 팀이 사용하는 몇 가지 효과적인 전략을 소개하겠습니다. 이러한 전략을 프로젝트에 적용하면 앱 크기를 줄이고 메모리 사용량을 줄이며 응용 프로그램의 성능을 향상시킬 수 있습니다.</p>
<p>시작해 보겠습니다!</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>목차</h1>
<ul>
<li>PDF 또는 PNG?</li>
<li>자산 압축하기</li>
<li>이미지 다운샘플링</li>
<li>중복 자산 제거</li>
<li>사용되지 않는 자산 제거</li>
</ul>
<h1>1. PDF 또는 PNG?</h1>
<p>이전 프로젝트에서 팀은 모든 이미지에 PDF 형식을 사용했습니다. 주된 이유는:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>유지 관리가 쉽습니다: 3 개의 PNG 이미지(1x, 2x, 3x) 대신 1 개의 PDF 이미지만 유지 관리하면 됩니다.</li>
<li>Xcode는 PDF 형식에 대한 벡터 데이터 보존을 지원합니다.</li>
</ul>
<p>하지만, PDF 이미지는 PNG 이미지보다 더 무겁습니다.</p>
<p>Xcode 15 이전에는 아카이브할 때 Xcode가 PDF 이미지를 3개의 PNG 이미지로 변환했습니다. Xcode 15부터는 PDF 이미지를 아카이브할 때 3개의 PDF 이미지로 변환하고, 불필요한 리소스를 제거하기 위해 App thinning을 사용합니다.</p>
<p>다음 이미지는 예제 프로젝트를 아카이브한 후의 "Assets.car" 파일입니다. 각 PDF 이미지가 3개의 PDF 이미지로 생성됨을 확인할 수 있습니다:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_1.png" alt="image1"></p>
<p>Now, let’s compare the “Asset.car” file size between using PNG images vs using PDF images:</p>
<p><img src="/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_2.png" alt="image2"></p>
<p>The “Assets.car” size in the project that uses PNG images is much smaller than using PDF images.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>권장 사항:</h2>
<ul>
<li>이미지의 애플리케이션 크기와 성능을 향상시키기 위해 PNG 형식을 사용해주세요.</li>
<li>다양한 뷰 프레임에서 확대/축소를 지원하기 위해 벡터 데이터를 보존해야 하는 이미지에는 PDF 형식을 사용해주세요.</li>
</ul>
<h1>2. 이미지 압축</h1>
<p>앱 크기를 줄이는 두 번째 방법은 이미지를 프로젝트에 추가하기 전에 압축하는 것입니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>다음 이미지를 살펴봅시다. 이미지를 몇 번 압축한 후 이미지 크기가 83% 감소했지만 품질 차이를 거의 느끼지 못할 수 있어요(특히 iPhone 화면에서). 이미지가 사용되는 용도를 고려하면 앱에 최적의 압축 설정을 결정하는 데 도움이 될 거에요.</p>
<p><img src="/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_3.png" alt="Image"></p>
<h2>제안:</h2>
<ul>
<li>TinyImage Compressor를 사용하세요 — Figma 플러그인 도구로 Figma에서 직접 압축된 이미지를 내보내는 데 도움이 됩니다.</li>
<li>저희 대규모 엔지니어링 팀에서는 수백 개의 아이콘이 있어요. 크기를 관리하기 위해 사전 커밋 후크 워크플로에 스크립트를 추가합니다. 최근에 추가된 아이콘의 크기가 100 KB를 초과하는지 확인해요. 그렇다면, 엔지니어에게 압축할 것을 요청합니다.</li>
</ul>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>3. 이미지 다운샘플링</h1>
<h2>문제</h2>
<p>이미지의 크기를 고려하지 않고 그냥 사용하지 마세요. WWDC 2018에서의 알림:</p>
<p>이미지를 표시하는 데 필요한 메모리 푸트프린트를 계산하는 공식은 다음과 같습니다:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>만약 5MB 크기의 이미지(6000x4000px)가 있다면, 해당 이미지를 디코딩하고 표시하는 데 필요한 메모리 공간은 96MB에 달할 거예요.</p>
<p>300x200 크기의 UIImageView에 6000x4000 px 이미지를 표시하는 것은 메모리를 엄청나게 낭비하는 일이에요. Apple은 WWDC 2018에서 Downsampling 기술을 소개하여 이미지를 화면에 표시하기 전에 크기를 조정하는 방법을 소개했는데, 이를 통해 메모리 소비를 크게 줄일 수 있어요.</p>
<p>이곳에는 swiftsenpai와 Kseniia Zozulia님이 Downsampling을 적용하는 방법에 대해 작성한 좋은 기사들이 있어요 👍</p>
<h2>자동화하세요!</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>대형 이미지를 표시함으로써 불필요한 메모리를 낭비하고 있는지 어떻게 알 수 있을까요? 수동 접근 방식은 이미지 크기와 이미지 뷰의 프레임을 비교해야 합니다.</p>
<p>네, 우리 모두는 수동으로 귀찮은 일을 하는 것을 싫어합니다 🥵</p>
<p>간단하게 자동화된 접근 방식은 UIImageView의 하위 클래스를 만드는 것입니다. UIImageView의 프레임보다 큰 이미지를 사용할 때마다, 이미지 뷰에 경고 이미지를 표시할 수 있습니다.</p>
<p>다음은 접근 방식의 예시 버전입니다:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-swift"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomImageView</span>: <span class="hljs-title class_">UIImageView</span> {

    <span class="hljs-keyword">var</span> warning: <span class="hljs-type">UIImageView</span>?
    <span class="hljs-keyword">var</span> blurBackground: <span class="hljs-type">UIVisualEffectView</span>?

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> image: <span class="hljs-type">UIImage</span>? {
        <span class="hljs-keyword">didSet</span> {
            <span class="hljs-keyword">super</span>.image <span class="hljs-operator">=</span> image

<span class="hljs-comment">// Debug 모드에서 이미지가 너무 커서 이미지 뷰 위에 경고가 표시됩니다.</span>
<span class="hljs-keyword">#if</span> <span class="hljs-type">DEBUG</span>
            <span class="hljs-keyword">if</span> isImageTooLarge {
                <span class="hljs-keyword">if</span> warning <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> { <span class="hljs-keyword">return</span> }
                <span class="hljs-keyword">let</span> blurBackground <span class="hljs-operator">=</span> <span class="hljs-type">UIVisualEffectView</span>(effect: <span class="hljs-type">UIBlurEffect</span>(style: .systemUltraThinMaterial))
                addSubview(blurBackground)
                blurBackground.frame <span class="hljs-operator">=</span> bounds
                blurBackground.alpha <span class="hljs-operator">=</span> <span class="hljs-number">0.7</span>
                <span class="hljs-keyword">self</span>.blurBackground <span class="hljs-operator">=</span> blurBackground

                <span class="hljs-keyword">let</span> warning <span class="hljs-operator">=</span> <span class="hljs-type">UIImageView</span>(image: <span class="hljs-type">UIImage</span>(systemName: <span class="hljs-string">"exclamationmark.triangle"</span>))
                warning.tintColor <span class="hljs-operator">=</span> .red
                warning.translatesAutoresizingMaskIntoConstraints <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
                addSubview(warning)
                <span class="hljs-type">NSLayoutConstraint</span>.activate([
                    warning.centerXAnchor.constraint(equalTo: centerXAnchor),
                    warning.centerYAnchor.constraint(equalTo: centerYAnchor)
                ])
                <span class="hljs-keyword">self</span>.warning <span class="hljs-operator">=</span> warning
            } <span class="hljs-keyword">else</span> {
                warning<span class="hljs-operator">?</span>.removeFromSuperview()
                warning <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>
            }
        }
<span class="hljs-keyword">#endif</span>
    }

<span class="hljs-comment">// 이미지가 이미지 뷰의 프레임보다 큰지 확인</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isImageTooLarge: <span class="hljs-type">Bool</span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> image <span class="hljs-operator">=</span> image <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> }
        <span class="hljs-keyword">return</span> image.size.height <span class="hljs-operator">*</span> image.size.width <span class="hljs-operator">></span> <span class="hljs-keyword">self</span>.frame.height <span class="hljs-operator">*</span> <span class="hljs-keyword">self</span>.frame.width
    }
}
</code></pre>
<p>아래는 적절하지 않은 이미지 크기를 사용할 때의 예시입니다. 엔지니어는 바로 알아차릴 수 있습니다. 그 후 이미지를 조절하기 위해 다운샘플링 기술을 적용할 수 있습니다. 👏</p>
<p><img src="/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_4.png" alt="이미지"></p>
<h2>제안:</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>특정 크기로 이미지를 가져오는 fetch 지원, 예: https://'PATH_TO_IMAGE'/'IMAGE_ID'/'size'.jpg</li>
<li>이미지 크기를 조정하기 위해 다운샘플링 기술 사용</li>
</ul>
<h1>4. 중복 이미지 제거</h1>
<p>큰 프로젝트에서 여러 엔지니어들이 다양한 팀에서 작업하고 있습니다. 그들이 자주 마주치는 시나리오는 프로젝트 전반에 중복된 이미지가 있는 것입니다. 이는 앱 크기를 증가시키며, 이미지를 수동으로 유지하는 것은 지루하고 시간이 많이 소요되는 작업입니다.</p>
<p>우리 팀은 중복 이미지를 확인하는 프로세스를 자동화했습니다. 프로젝트의 모든 이미지를 스캔하고 중복을 비교하기 위한 Python 스크립트를 작성했습니다. 더 나아가, 이 스크립트를 우리의 CI 워크플로에 통합하여 때때로 확인하고, 그런 다음 팀에 보고서를 보내게 했습니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>제안:</p>
<p>GitHub에서는 중복 이미지를 감지하는 오픈 소스 Python 프로젝트가 있어요. 예를 들어 이 프로젝트가 있어요. 이를 다운로드하여 프로젝트에 심술 없이 통합할 수 있어요.</p>
<h1>5. 사용되지 않는 이미지 제거</h1>
<p>중복 이미지와 유사하게 사용되지 않는 이미지는 앱 크기를 불필요하게 증가시키기 때문에 제거해야 해요.
FengNiao는 사용되지 않는 이미지를 감지하고 제거하는 데 도움이 되는 오픈 소스 도구에요:</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_5.png" alt="image"></p>
<h2>제안:</h2>
<ul>
<li>이 도구를 CI 워크플로우에 통합하여 사용하지 않는 이미지가 있을 때 팀에 Slack 알림을 보낼 수 있습니다. 팀은 필요에 따라 이미지를 확인하고 수동으로 제거할 수 있습니다.</li>
</ul>
<h1>결론</h1>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이미지 리소스를 관리하는 데 조금 더 노력하면 앱의 성능을 효과적으로 개선할 수 있어요.</p>
<p>자산을 관리하기 위한 다른 팁이 있다면 주저하지 마시고 댓글을 남겨주세요 :D</p>
<p>이 글이 도움이 되었다면 좋아요 버튼을 누르고 댓글을 남겨주세요. 그러면 Medium이 다른 사람들에게 이 글을 추천할 거에요.</p>
<p>읽어 주셔서 감사합니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="https://miro.medium.com/v2/resize:fit:1200/0*CN-R8hHdtZlcJFoV.gif" alt="image"></p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"iOS에서 이미지 자원을 효율적으로 관리하는 5가지 전략","description":"","date":"2024-06-19 11:19","slug":"2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS","content":"\n![Image](/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_0.png)\n\n이미지 리소스 관리는 엔지니어들이 종종 간과하는 측면입니다. 충분한 주의를 기울이지 않으면 앱의 성능 뿐만 아니라 생산성에도 영향을 미칠 수 있습니다.\n\n이 기사에서는 이미지 리소스를 관리하는 데 우리 엔지니어링 팀이 사용하는 몇 가지 효과적인 전략을 소개하겠습니다. 이러한 전략을 프로젝트에 적용하면 앱 크기를 줄이고 메모리 사용량을 줄이며 응용 프로그램의 성능을 향상시킬 수 있습니다.\n\n시작해 보겠습니다!\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 목차\n\n- PDF 또는 PNG?\n- 자산 압축하기\n- 이미지 다운샘플링\n- 중복 자산 제거\n- 사용되지 않는 자산 제거\n\n# 1. PDF 또는 PNG?\n\n이전 프로젝트에서 팀은 모든 이미지에 PDF 형식을 사용했습니다. 주된 이유는:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 유지 관리가 쉽습니다: 3 개의 PNG 이미지(1x, 2x, 3x) 대신 1 개의 PDF 이미지만 유지 관리하면 됩니다.\n- Xcode는 PDF 형식에 대한 벡터 데이터 보존을 지원합니다.\n\n하지만, PDF 이미지는 PNG 이미지보다 더 무겁습니다.\n\nXcode 15 이전에는 아카이브할 때 Xcode가 PDF 이미지를 3개의 PNG 이미지로 변환했습니다. Xcode 15부터는 PDF 이미지를 아카이브할 때 3개의 PDF 이미지로 변환하고, 불필요한 리소스를 제거하기 위해 App thinning을 사용합니다.\n\n다음 이미지는 예제 프로젝트를 아카이브한 후의 \"Assets.car\" 파일입니다. 각 PDF 이미지가 3개의 PDF 이미지로 생성됨을 확인할 수 있습니다:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![image1](/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_1.png)\n\nNow, let’s compare the “Asset.car” file size between using PNG images vs using PDF images:\n\n![image2](/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_2.png)\n\nThe “Assets.car” size in the project that uses PNG images is much smaller than using PDF images.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 권장 사항:\n\n- 이미지의 애플리케이션 크기와 성능을 향상시키기 위해 PNG 형식을 사용해주세요.\n- 다양한 뷰 프레임에서 확대/축소를 지원하기 위해 벡터 데이터를 보존해야 하는 이미지에는 PDF 형식을 사용해주세요.\n\n# 2. 이미지 압축\n\n앱 크기를 줄이는 두 번째 방법은 이미지를 프로젝트에 추가하기 전에 압축하는 것입니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n다음 이미지를 살펴봅시다. 이미지를 몇 번 압축한 후 이미지 크기가 83% 감소했지만 품질 차이를 거의 느끼지 못할 수 있어요(특히 iPhone 화면에서). 이미지가 사용되는 용도를 고려하면 앱에 최적의 압축 설정을 결정하는 데 도움이 될 거에요.\n\n![Image](/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_3.png)\n\n## 제안:\n\n- TinyImage Compressor를 사용하세요 — Figma 플러그인 도구로 Figma에서 직접 압축된 이미지를 내보내는 데 도움이 됩니다.\n- 저희 대규모 엔지니어링 팀에서는 수백 개의 아이콘이 있어요. 크기를 관리하기 위해 사전 커밋 후크 워크플로에 스크립트를 추가합니다. 최근에 추가된 아이콘의 크기가 100 KB를 초과하는지 확인해요. 그렇다면, 엔지니어에게 압축할 것을 요청합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 3. 이미지 다운샘플링\n\n## 문제\n\n이미지의 크기를 고려하지 않고 그냥 사용하지 마세요. WWDC 2018에서의 알림:\n\n이미지를 표시하는 데 필요한 메모리 푸트프린트를 계산하는 공식은 다음과 같습니다:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n만약 5MB 크기의 이미지(6000x4000px)가 있다면, 해당 이미지를 디코딩하고 표시하는 데 필요한 메모리 공간은 96MB에 달할 거예요.\n\n300x200 크기의 UIImageView에 6000x4000 px 이미지를 표시하는 것은 메모리를 엄청나게 낭비하는 일이에요. Apple은 WWDC 2018에서 Downsampling 기술을 소개하여 이미지를 화면에 표시하기 전에 크기를 조정하는 방법을 소개했는데, 이를 통해 메모리 소비를 크게 줄일 수 있어요.\n\n이곳에는 swiftsenpai와 Kseniia Zozulia님이 Downsampling을 적용하는 방법에 대해 작성한 좋은 기사들이 있어요 👍\n\n## 자동화하세요!\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n대형 이미지를 표시함으로써 불필요한 메모리를 낭비하고 있는지 어떻게 알 수 있을까요? 수동 접근 방식은 이미지 크기와 이미지 뷰의 프레임을 비교해야 합니다.\n\n네, 우리 모두는 수동으로 귀찮은 일을 하는 것을 싫어합니다 🥵\n\n간단하게 자동화된 접근 방식은 UIImageView의 하위 클래스를 만드는 것입니다. UIImageView의 프레임보다 큰 이미지를 사용할 때마다, 이미지 뷰에 경고 이미지를 표시할 수 있습니다.\n\n다음은 접근 방식의 예시 버전입니다:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```swift\nfinal class CustomImageView: UIImageView {\n\n    var warning: UIImageView?\n    var blurBackground: UIVisualEffectView?\n\n    override var image: UIImage? {\n        didSet {\n            super.image = image\n\n// Debug 모드에서 이미지가 너무 커서 이미지 뷰 위에 경고가 표시됩니다.\n#if DEBUG\n            if isImageTooLarge {\n                if warning != nil { return }\n                let blurBackground = UIVisualEffectView(effect: UIBlurEffect(style: .systemUltraThinMaterial))\n                addSubview(blurBackground)\n                blurBackground.frame = bounds\n                blurBackground.alpha = 0.7\n                self.blurBackground = blurBackground\n\n                let warning = UIImageView(image: UIImage(systemName: \"exclamationmark.triangle\"))\n                warning.tintColor = .red\n                warning.translatesAutoresizingMaskIntoConstraints = false\n                addSubview(warning)\n                NSLayoutConstraint.activate([\n                    warning.centerXAnchor.constraint(equalTo: centerXAnchor),\n                    warning.centerYAnchor.constraint(equalTo: centerYAnchor)\n                ])\n                self.warning = warning\n            } else {\n                warning?.removeFromSuperview()\n                warning = nil\n            }\n        }\n#endif\n    }\n\n// 이미지가 이미지 뷰의 프레임보다 큰지 확인\n    private var isImageTooLarge: Bool {\n        guard let image = image else { return false }\n        return image.size.height * image.size.width \u003e self.frame.height * self.frame.width\n    }\n}\n```\n\n아래는 적절하지 않은 이미지 크기를 사용할 때의 예시입니다. 엔지니어는 바로 알아차릴 수 있습니다. 그 후 이미지를 조절하기 위해 다운샘플링 기술을 적용할 수 있습니다. 👏\n\n![이미지](/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_4.png)\n\n## 제안:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 특정 크기로 이미지를 가져오는 fetch 지원, 예: https://'PATH_TO_IMAGE'/'IMAGE_ID'/'size'.jpg\n- 이미지 크기를 조정하기 위해 다운샘플링 기술 사용\n\n# 4. 중복 이미지 제거\n\n큰 프로젝트에서 여러 엔지니어들이 다양한 팀에서 작업하고 있습니다. 그들이 자주 마주치는 시나리오는 프로젝트 전반에 중복된 이미지가 있는 것입니다. 이는 앱 크기를 증가시키며, 이미지를 수동으로 유지하는 것은 지루하고 시간이 많이 소요되는 작업입니다.\n\n우리 팀은 중복 이미지를 확인하는 프로세스를 자동화했습니다. 프로젝트의 모든 이미지를 스캔하고 중복을 비교하기 위한 Python 스크립트를 작성했습니다. 더 나아가, 이 스크립트를 우리의 CI 워크플로에 통합하여 때때로 확인하고, 그런 다음 팀에 보고서를 보내게 했습니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n제안:\n\nGitHub에서는 중복 이미지를 감지하는 오픈 소스 Python 프로젝트가 있어요. 예를 들어 이 프로젝트가 있어요. 이를 다운로드하여 프로젝트에 심술 없이 통합할 수 있어요.\n\n# 5. 사용되지 않는 이미지 제거\n\n중복 이미지와 유사하게 사용되지 않는 이미지는 앱 크기를 불필요하게 증가시키기 때문에 제거해야 해요.\nFengNiao는 사용되지 않는 이미지를 감지하고 제거하는 데 도움이 되는 오픈 소스 도구에요:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![image](/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_5.png)\n\n## 제안:\n\n- 이 도구를 CI 워크플로우에 통합하여 사용하지 않는 이미지가 있을 때 팀에 Slack 알림을 보낼 수 있습니다. 팀은 필요에 따라 이미지를 확인하고 수동으로 제거할 수 있습니다.\n\n# 결론\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이미지 리소스를 관리하는 데 조금 더 노력하면 앱의 성능을 효과적으로 개선할 수 있어요.\n\n자산을 관리하기 위한 다른 팁이 있다면 주저하지 마시고 댓글을 남겨주세요 :D\n\n이 글이 도움이 되었다면 좋아요 버튼을 누르고 댓글을 남겨주세요. 그러면 Medium이 다른 사람들에게 이 글을 추천할 거에요.\n\n읽어 주셔서 감사합니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![image](https://miro.medium.com/v2/resize:fit:1200/0*CN-R8hHdtZlcJFoV.gif)\n","ogImage":{"url":"/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_0.png"},"coverImage":"/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_0.png","tag":["Tech"],"readingTime":10},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_0.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cp\u003e이미지 리소스 관리는 엔지니어들이 종종 간과하는 측면입니다. 충분한 주의를 기울이지 않으면 앱의 성능 뿐만 아니라 생산성에도 영향을 미칠 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이 기사에서는 이미지 리소스를 관리하는 데 우리 엔지니어링 팀이 사용하는 몇 가지 효과적인 전략을 소개하겠습니다. 이러한 전략을 프로젝트에 적용하면 앱 크기를 줄이고 메모리 사용량을 줄이며 응용 프로그램의 성능을 향상시킬 수 있습니다.\u003c/p\u003e\n\u003cp\u003e시작해 보겠습니다!\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003e목차\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003ePDF 또는 PNG?\u003c/li\u003e\n\u003cli\u003e자산 압축하기\u003c/li\u003e\n\u003cli\u003e이미지 다운샘플링\u003c/li\u003e\n\u003cli\u003e중복 자산 제거\u003c/li\u003e\n\u003cli\u003e사용되지 않는 자산 제거\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e1. PDF 또는 PNG?\u003c/h1\u003e\n\u003cp\u003e이전 프로젝트에서 팀은 모든 이미지에 PDF 형식을 사용했습니다. 주된 이유는:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e유지 관리가 쉽습니다: 3 개의 PNG 이미지(1x, 2x, 3x) 대신 1 개의 PDF 이미지만 유지 관리하면 됩니다.\u003c/li\u003e\n\u003cli\u003eXcode는 PDF 형식에 대한 벡터 데이터 보존을 지원합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e하지만, PDF 이미지는 PNG 이미지보다 더 무겁습니다.\u003c/p\u003e\n\u003cp\u003eXcode 15 이전에는 아카이브할 때 Xcode가 PDF 이미지를 3개의 PNG 이미지로 변환했습니다. Xcode 15부터는 PDF 이미지를 아카이브할 때 3개의 PDF 이미지로 변환하고, 불필요한 리소스를 제거하기 위해 App thinning을 사용합니다.\u003c/p\u003e\n\u003cp\u003e다음 이미지는 예제 프로젝트를 아카이브한 후의 \"Assets.car\" 파일입니다. 각 PDF 이미지가 3개의 PDF 이미지로 생성됨을 확인할 수 있습니다:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_1.png\" alt=\"image1\"\u003e\u003c/p\u003e\n\u003cp\u003eNow, let’s compare the “Asset.car” file size between using PNG images vs using PDF images:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_2.png\" alt=\"image2\"\u003e\u003c/p\u003e\n\u003cp\u003eThe “Assets.car” size in the project that uses PNG images is much smaller than using PDF images.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e권장 사항:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e이미지의 애플리케이션 크기와 성능을 향상시키기 위해 PNG 형식을 사용해주세요.\u003c/li\u003e\n\u003cli\u003e다양한 뷰 프레임에서 확대/축소를 지원하기 위해 벡터 데이터를 보존해야 하는 이미지에는 PDF 형식을 사용해주세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e2. 이미지 압축\u003c/h1\u003e\n\u003cp\u003e앱 크기를 줄이는 두 번째 방법은 이미지를 프로젝트에 추가하기 전에 압축하는 것입니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e다음 이미지를 살펴봅시다. 이미지를 몇 번 압축한 후 이미지 크기가 83% 감소했지만 품질 차이를 거의 느끼지 못할 수 있어요(특히 iPhone 화면에서). 이미지가 사용되는 용도를 고려하면 앱에 최적의 압축 설정을 결정하는 데 도움이 될 거에요.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_3.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003ch2\u003e제안:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTinyImage Compressor를 사용하세요 — Figma 플러그인 도구로 Figma에서 직접 압축된 이미지를 내보내는 데 도움이 됩니다.\u003c/li\u003e\n\u003cli\u003e저희 대규모 엔지니어링 팀에서는 수백 개의 아이콘이 있어요. 크기를 관리하기 위해 사전 커밋 후크 워크플로에 스크립트를 추가합니다. 최근에 추가된 아이콘의 크기가 100 KB를 초과하는지 확인해요. 그렇다면, 엔지니어에게 압축할 것을 요청합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003e3. 이미지 다운샘플링\u003c/h1\u003e\n\u003ch2\u003e문제\u003c/h2\u003e\n\u003cp\u003e이미지의 크기를 고려하지 않고 그냥 사용하지 마세요. WWDC 2018에서의 알림:\u003c/p\u003e\n\u003cp\u003e이미지를 표시하는 데 필요한 메모리 푸트프린트를 계산하는 공식은 다음과 같습니다:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e만약 5MB 크기의 이미지(6000x4000px)가 있다면, 해당 이미지를 디코딩하고 표시하는 데 필요한 메모리 공간은 96MB에 달할 거예요.\u003c/p\u003e\n\u003cp\u003e300x200 크기의 UIImageView에 6000x4000 px 이미지를 표시하는 것은 메모리를 엄청나게 낭비하는 일이에요. Apple은 WWDC 2018에서 Downsampling 기술을 소개하여 이미지를 화면에 표시하기 전에 크기를 조정하는 방법을 소개했는데, 이를 통해 메모리 소비를 크게 줄일 수 있어요.\u003c/p\u003e\n\u003cp\u003e이곳에는 swiftsenpai와 Kseniia Zozulia님이 Downsampling을 적용하는 방법에 대해 작성한 좋은 기사들이 있어요 👍\u003c/p\u003e\n\u003ch2\u003e자동화하세요!\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e대형 이미지를 표시함으로써 불필요한 메모리를 낭비하고 있는지 어떻게 알 수 있을까요? 수동 접근 방식은 이미지 크기와 이미지 뷰의 프레임을 비교해야 합니다.\u003c/p\u003e\n\u003cp\u003e네, 우리 모두는 수동으로 귀찮은 일을 하는 것을 싫어합니다 🥵\u003c/p\u003e\n\u003cp\u003e간단하게 자동화된 접근 방식은 UIImageView의 하위 클래스를 만드는 것입니다. UIImageView의 프레임보다 큰 이미지를 사용할 때마다, 이미지 뷰에 경고 이미지를 표시할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e다음은 접근 방식의 예시 버전입니다:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-swift\"\u003e\u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCustomImageView\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUIImageView\u003c/span\u003e {\n\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e warning: \u003cspan class=\"hljs-type\"\u003eUIImageView\u003c/span\u003e?\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e blurBackground: \u003cspan class=\"hljs-type\"\u003eUIVisualEffectView\u003c/span\u003e?\n\n    \u003cspan class=\"hljs-keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e image: \u003cspan class=\"hljs-type\"\u003eUIImage\u003c/span\u003e? {\n        \u003cspan class=\"hljs-keyword\"\u003edidSet\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003esuper\u003c/span\u003e.image \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e image\n\n\u003cspan class=\"hljs-comment\"\u003e// Debug 모드에서 이미지가 너무 커서 이미지 뷰 위에 경고가 표시됩니다.\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003e#if\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eDEBUG\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e isImageTooLarge {\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e warning \u003cspan class=\"hljs-operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e }\n                \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e blurBackground \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eUIVisualEffectView\u003c/span\u003e(effect: \u003cspan class=\"hljs-type\"\u003eUIBlurEffect\u003c/span\u003e(style: .systemUltraThinMaterial))\n                addSubview(blurBackground)\n                blurBackground.frame \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e bounds\n                blurBackground.alpha \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e\n                \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.blurBackground \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e blurBackground\n\n                \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e warning \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eUIImageView\u003c/span\u003e(image: \u003cspan class=\"hljs-type\"\u003eUIImage\u003c/span\u003e(systemName: \u003cspan class=\"hljs-string\"\u003e\"exclamationmark.triangle\"\u003c/span\u003e))\n                warning.tintColor \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e .red\n                warning.translatesAutoresizingMaskIntoConstraints \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n                addSubview(warning)\n                \u003cspan class=\"hljs-type\"\u003eNSLayoutConstraint\u003c/span\u003e.activate([\n                    warning.centerXAnchor.constraint(equalTo: centerXAnchor),\n                    warning.centerYAnchor.constraint(equalTo: centerYAnchor)\n                ])\n                \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.warning \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e warning\n            } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                warning\u003cspan class=\"hljs-operator\"\u003e?\u003c/span\u003e.removeFromSuperview()\n                warning \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e\n            }\n        }\n\u003cspan class=\"hljs-keyword\"\u003e#endif\u003c/span\u003e\n    }\n\n\u003cspan class=\"hljs-comment\"\u003e// 이미지가 이미지 뷰의 프레임보다 큰지 확인\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e isImageTooLarge: \u003cspan class=\"hljs-type\"\u003eBool\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003eguard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e image \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e image \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e { \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e }\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e image.size.height \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e image.size.width \u003cspan class=\"hljs-operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.frame.height \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e.frame.width\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e아래는 적절하지 않은 이미지 크기를 사용할 때의 예시입니다. 엔지니어는 바로 알아차릴 수 있습니다. 그 후 이미지를 조절하기 위해 다운샘플링 기술을 적용할 수 있습니다. 👏\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_4.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003ch2\u003e제안:\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e특정 크기로 이미지를 가져오는 fetch 지원, 예: https://'PATH_TO_IMAGE'/'IMAGE_ID'/'size'.jpg\u003c/li\u003e\n\u003cli\u003e이미지 크기를 조정하기 위해 다운샘플링 기술 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e4. 중복 이미지 제거\u003c/h1\u003e\n\u003cp\u003e큰 프로젝트에서 여러 엔지니어들이 다양한 팀에서 작업하고 있습니다. 그들이 자주 마주치는 시나리오는 프로젝트 전반에 중복된 이미지가 있는 것입니다. 이는 앱 크기를 증가시키며, 이미지를 수동으로 유지하는 것은 지루하고 시간이 많이 소요되는 작업입니다.\u003c/p\u003e\n\u003cp\u003e우리 팀은 중복 이미지를 확인하는 프로세스를 자동화했습니다. 프로젝트의 모든 이미지를 스캔하고 중복을 비교하기 위한 Python 스크립트를 작성했습니다. 더 나아가, 이 스크립트를 우리의 CI 워크플로에 통합하여 때때로 확인하고, 그런 다음 팀에 보고서를 보내게 했습니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e제안:\u003c/p\u003e\n\u003cp\u003eGitHub에서는 중복 이미지를 감지하는 오픈 소스 Python 프로젝트가 있어요. 예를 들어 이 프로젝트가 있어요. 이를 다운로드하여 프로젝트에 심술 없이 통합할 수 있어요.\u003c/p\u003e\n\u003ch1\u003e5. 사용되지 않는 이미지 제거\u003c/h1\u003e\n\u003cp\u003e중복 이미지와 유사하게 사용되지 않는 이미지는 앱 크기를 불필요하게 증가시키기 때문에 제거해야 해요.\nFengNiao는 사용되지 않는 이미지를 감지하고 제거하는 데 도움이 되는 오픈 소스 도구에요:\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS_5.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003ch2\u003e제안:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e이 도구를 CI 워크플로우에 통합하여 사용하지 않는 이미지가 있을 때 팀에 Slack 알림을 보낼 수 있습니다. 팀은 필요에 따라 이미지를 확인하고 수동으로 제거할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이미지 리소스를 관리하는 데 조금 더 노력하면 앱의 성능을 효과적으로 개선할 수 있어요.\u003c/p\u003e\n\u003cp\u003e자산을 관리하기 위한 다른 팁이 있다면 주저하지 마시고 댓글을 남겨주세요 :D\u003c/p\u003e\n\u003cp\u003e이 글이 도움이 되었다면 좋아요 버튼을 누르고 댓글을 남겨주세요. 그러면 Medium이 다른 사람들에게 이 글을 추천할 거에요.\u003c/p\u003e\n\u003cp\u003e읽어 주셔서 감사합니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1200/0*CN-R8hHdtZlcJFoV.gif\" alt=\"image\"\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-5StrategiesforManagingImageResourcesEffectivelyiniOS"},"buildId":"YUMR4jSyk_WlOHHc7UfOk","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>