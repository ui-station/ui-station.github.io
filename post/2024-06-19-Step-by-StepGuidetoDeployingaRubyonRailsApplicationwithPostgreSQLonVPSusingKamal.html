<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Ruby on Rails ì‘ìš© í”„ë¡œê·¸ë¨ì„ PostgreSQLì„ ì‚¬ìš©í•˜ì—¬ VPSì— Kamalì„ ì´ìš©í•˜ì—¬ ë°°í¬í•˜ëŠ” ë‹¨ê³„ë³„ ì•ˆë‚´ | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Ruby on Rails ì‘ìš© í”„ë¡œê·¸ë¨ì„ PostgreSQLì„ ì‚¬ìš©í•˜ì—¬ VPSì— Kamalì„ ì´ìš©í•˜ì—¬ ë°°í¬í•˜ëŠ” ë‹¨ê³„ë³„ ì•ˆë‚´ | ui-station" data-gatsby-head="true"/><meta property="og:title" content="Ruby on Rails ì‘ìš© í”„ë¡œê·¸ë¨ì„ PostgreSQLì„ ì‚¬ìš©í•˜ì—¬ VPSì— Kamalì„ ì´ìš©í•˜ì—¬ ë°°í¬í•˜ëŠ” ë‹¨ê³„ë³„ ì•ˆë‚´ | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal" data-gatsby-head="true"/><meta name="twitter:title" content="Ruby on Rails ì‘ìš© í”„ë¡œê·¸ë¨ì„ PostgreSQLì„ ì‚¬ìš©í•˜ì—¬ VPSì— Kamalì„ ì´ìš©í•˜ì—¬ ë°°í¬í•˜ëŠ” ë‹¨ê³„ë³„ ì•ˆë‚´ | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 22:12" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-70e5ce89f3d962ac.js" defer=""></script><script src="/_next/static/GsgRekSb--BvxYwv9FPn6/_buildManifest.js" defer=""></script><script src="/_next/static/GsgRekSb--BvxYwv9FPn6/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Ruby on Rails ì‘ìš© í”„ë¡œê·¸ë¨ì„ PostgreSQLì„ ì‚¬ìš©í•˜ì—¬ VPSì— Kamalì„ ì´ìš©í•˜ì—¬ ë°°í¬í•˜ëŠ” ë‹¨ê³„ë³„ ì•ˆë‚´</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Ruby on Rails ì‘ìš© í”„ë¡œê·¸ë¨ì„ PostgreSQLì„ ì‚¬ìš©í•˜ì—¬ VPSì— Kamalì„ ì´ìš©í•˜ì—¬ ë°°í¬í•˜ëŠ” ë‹¨ê³„ë³„ ì•ˆë‚´" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">16<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal_0.png" alt="image"></p>
<p>ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” DigitalOceanì—ì„œ ì œê³µí•˜ëŠ” Virtual Private Server (VPS)ì— Ruby on Rails ì• í”Œë¦¬ì¼€ì´ì…˜ì„ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì™€ í•¨ê»˜ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ì•ˆë‚´í•˜ê² ìŠµë‹ˆë‹¤. Docker ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìë™í™”í•˜ëŠ” ë°°í¬ ë„êµ¬ ì¸ Kamalì„ í™œìš©í•˜ì—¬ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•  ê²ƒì…ë‹ˆë‹¤.</p>
<h1>ì „ì œ ì¡°ê±´</h1>
<p>ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‚¬í•­ì„ ê°–ì¶”ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>PostgreSQLì´ êµ¬ì„±ëœ Ruby on Rails ì• í”Œë¦¬ì¼€ì´ì…˜.</li>
<li>VPS (droplet)ê°€ í”„ë¡œë¹„ì €ë‹ë˜ì–´ SSH ì•¡ì„¸ìŠ¤ê°€ ì„¤ì •ëœ DigitalOcean ê³„ì •. ì›í•˜ëŠ” ì œê³µì—…ì²´ë¥¼ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤.</li>
</ul>
<h1>ë‹¨ê³„ 1: Kamal ì„¤ì¹˜</h1>
<p>ë¡œì»¬ ë¨¸ì‹ ì— Kamalì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. RubyGemsë¥¼ í†µí•´ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">gem install kamal
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>ë‹¨ê³„ 2: ë°°í¬ ì„¤ì • êµ¬ì„±</h1>
<p>í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œ ë‹¤ìŒ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">kamal init
</code></pre>
<p>ì´ ëª…ë ¹ì€ deploy.yml ì„¤ì • íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ë¥¸ ëª‡ ê°€ì§€ íŒŒì¼ì„ í•¨ê»˜ ìƒì„±í•©ë‹ˆë‹¤. deploy.yml êµ¬ì„± íŒŒì¼ì˜ ì—¬ëŸ¬ ì„¹ì…˜ì„ ì´í•´í•´ ë´…ì‹œë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„. ê³ ìœ í•˜ê²Œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
<span class="hljs-attr">service</span>: mynewapp
</code></pre>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê´€ë ¨ëœ ì»¨í…Œì´ë„ˆë¥¼ ê³ ìœ í•˜ê²Œ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"># ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„.
<span class="hljs-attr">image</span>: talha/mynewapp
</code></pre>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ Docker ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. talha/mynewappë¥¼ Docker Hub ì €ì¥ì†Œì˜ ì´ë¦„ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># ì´ëŸ¬í•œ ì„œë²„ì— ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì„œë²„:
  ì›¹:
    í˜¸ìŠ¤íŠ¸:
      - <span class="hljs-number">123.123</span><span class="hljs-number">.45</span><span class="hljs-number">.678</span>
    ë¼ë²¨:
      traefik.<span class="hljs-property">http</span>.<span class="hljs-property">routers</span>.<span class="hljs-property">mynewapp</span>.<span class="hljs-property">rule</span>: <span class="hljs-title class_">Host</span>(<span class="hljs-string">`mynewapp.com`</span>)
      traefik.<span class="hljs-property">http</span>.<span class="hljs-property">routers</span>.<span class="hljs-property">mynewapp</span>.<span class="hljs-property">entrypoints</span>: websecure
      traefik.<span class="hljs-property">http</span>.<span class="hljs-property">routers</span>.<span class="hljs-property">mynewapp_secure</span>.<span class="hljs-property">rule</span>: <span class="hljs-title class_">Host</span>(<span class="hljs-string">`mynewapp.com`</span>)
      traefik.<span class="hljs-property">http</span>.<span class="hljs-property">routers</span>.<span class="hljs-property">mynewapp_secure</span>.<span class="hljs-property">tls</span>: <span class="hljs-literal">true</span>
      traefik.<span class="hljs-property">http</span>.<span class="hljs-property">routers</span>.<span class="hljs-property">mynewapp_secure</span>.<span class="hljs-property">tls</span>.<span class="hljs-property">certresolver</span>: letsencrypt
    ì˜µì…˜:
      ë„¤íŠ¸ì›Œí¬: <span class="hljs-string">"private"</span>
</code></pre>
<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë°°í¬ë  ì„œë²„ë¥¼ ì •ì˜í•˜ê³ , HTTP ìš”ì²­ì„ ì•±ì— ë¼ìš°íŒ…í•˜ê³  TLS/SSL ì•”í˜¸í™”ë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•œ Traefik ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"># ì´ë¯¸ì§€ í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ìê²© ì¦ëª….
ë ˆì§€ìŠ¤íŠ¸ë¦¬:
  ì‚¬ìš©ì ì´ë¦„:
    - <span class="hljs-variable constant_">KAMAL_REGISTRY_USERNAME</span>
  ë¹„ë°€ë²ˆí˜¸:
    - <span class="hljs-variable constant_">KAMAL_REGISTRY_PASSWORD</span>
</code></pre>
<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ ì´ë¯¸ì§€ê°€ í˜¸ìŠ¤íŒ…ëœ Docker ì´ë¯¸ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ìê²© ì¦ëª…ì„ ì§€ì •í•©ë‹ˆë‹¤. KAMAL_REGISTRY_USERNAME ë° KAMAL_REGISTRY_PASSWORDë¥¼ Docker í—ˆë¸Œ ìê²© ì¦ëª…ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># ì»¨í…Œì´ë„ˆì— í™˜ê²½ ë³€ìˆ˜ ì£¼ì… (ì‹œí¬ë¦¿ì€ .envì—ì„œ ì˜¨ë‹¤).</span>
<span class="hljs-comment"># ë³€ê²½ í›„ `kamal env push`ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”!</span>
<span class="hljs-attr">env:</span>
  <span class="hljs-attr">clear:</span>
    <span class="hljs-attr">RAILS_ENV:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">RACK_ENV:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">RAILS_LOG_TO_STDOUT:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">RAILS_SERVE_STATIC_FILES:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">secret:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">RAILS_MASTER_KEY</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">SMTP_PASSWORD</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">SMTP_SERVER</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">SMTP_LOGIN</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">DB_HOST</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD</span>
</code></pre>
<p>ì»¨í…Œì´ë„ˆì˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. clear ë³€ìˆ˜ëŠ” ê³µê°œì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë©°, ì‹œí¬ë¦¿ ë³€ìˆ˜ëŠ” ë¹„ê³µê°œë¡œ ìœ ì§€ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€ìˆ˜ëŠ” .env íŒŒì¼ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.</p>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># rootê°€ ì•„ë‹Œ ë‹¤ë¥¸ ssh ì‚¬ìš©ì ì‚¬ìš©</span>
<span class="hljs-attr">ssh:</span>
  <span class="hljs-attr">user:</span> <span class="hljs-string">deploy</span>
</code></pre>
<ul>
<li>ì„œë²„ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ë° ì‚¬ìš©í•  SSH ì‚¬ìš©ìë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì‚¬ìš©ìëŠ” deployì…ë‹ˆë‹¤.</li>
</ul>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># ë¹Œë” ì„¤ì • êµ¬ì„±.</span>
<span class="hljs-string">ë¹Œë”:</span>
  <span class="hljs-string">ì›ê²©:</span>
    <span class="hljs-string">ì•„í‚¤í…ì²˜:</span> <span class="hljs-string">amd64</span>
</code></pre>
<p>ë¹Œë” ì„¤ì •ì„ êµ¬ì„±í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ë¹Œë“œí•  ì›ê²© ì„œë²„ì˜ ì•„í‚¤í…ì²˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ìœ„ì˜ êµ¬ì„±ì€ Apple Siliconì—ì„œ ê°œë°œí•˜ê³  ìˆì§€ë§Œ amd64 ë„ì»¤ ì´ë¯¸ì§€ë§Œ ë¹Œë“œí•˜ë ¤ëŠ” ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># ë¶€ê°€ ì„œë¹„ìŠ¤ ì‚¬ìš© (ë¹„ë°€ì€ .envì—ì„œ ì œê³µë¨).</span>
<span class="hljs-string">ë¶€ê°€ì„œë¹„ìŠ¤:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-string">ì´ë¯¸ì§€:</span> <span class="hljs-string">postgres:16.0</span>
    <span class="hljs-string">í˜¸ìŠ¤íŠ¸:</span> <span class="hljs-number">123.123</span><span class="hljs-number">.45</span><span class="hljs-number">.678</span>
    <span class="hljs-string">í™˜ê²½:</span>
      <span class="hljs-string">í´ë¦¬ì–´:</span>
        <span class="hljs-attr">POSTGRES_USER:</span> <span class="hljs-string">"mynewapp"</span>
        <span class="hljs-attr">POSTGRES_DB:</span> <span class="hljs-string">"mynewapp_production"</span>
      <span class="hljs-string">ì‹œí¬ë¦¿:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER</span>
    <span class="hljs-string">íŒŒì¼:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">config/init.sql:/docker-entrypoint-initdb.d/setup.sql</span>
    <span class="hljs-string">ë””ë ‰í† ë¦¬:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">data:/var/lib/postgresql/data</span>
    <span class="hljs-string">ì˜µì…˜:</span>
      <span class="hljs-string">ë„¤íŠ¸ì›Œí¬:</span> <span class="hljs-string">"private"</span>
</code></pre>
<p>ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ í•„ìš”í•œ ì¶”ê°€ ì„œë¹„ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì§€ì •ëœ ë²„ì „ê³¼ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°–ëŠ” PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. íŒŒì¼ ì§€ì‹œë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ìì²´ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. config/init.sqlì€ config/database.yml êµ¬ì„±ì—ì„œ ì˜ˆìƒí•œëŒ€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">DATABASE</span> mynewapp_production;
</code></pre>
<p>ìœ„ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ íŒŒì¼ config/init.sqlì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-attr">production</span>:
  &#x3C;&#x3C;: *<span class="hljs-keyword">default</span>
  <span class="hljs-attr">database</span>: mynewapp_production
  <span class="hljs-attr">username</span>: &#x3C;%= <span class="hljs-variable constant_">ENV</span>[<span class="hljs-string">"POSTGRES_USER"</span>] %>
  <span class="hljs-attr">password</span>: &#x3C;%= <span class="hljs-variable constant_">ENV</span>[<span class="hljs-string">"POSTGRES_PASSWORD"</span>] %>
  <span class="hljs-attr">host</span>: &#x3C;%= <span class="hljs-variable constant_">ENV</span>[<span class="hljs-string">"DB_HOST"</span>] %>
</code></pre>
<p>ë˜í•œ, ìœ„ì™€ ê°™ì´ database.yml íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ í”„ë¡œë•ì…˜ DB êµ¬ì„±ì„ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-yaml"><span class="hljs-attr">traefik:</span>
  <span class="hljs-attr">options:</span>
    <span class="hljs-attr">publish:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"443:443"</span>
    <span class="hljs-attr">volume:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"/letsencrypt/acme.json:/letsencrypt/acme.json"</span>
    <span class="hljs-attr">network:</span> <span class="hljs-string">"private"</span>
  <span class="hljs-attr">args:</span>
    <span class="hljs-attr">entryPoints.web.address:</span> <span class="hljs-string">":80"</span>
    <span class="hljs-attr">entryPoints.websecure.address:</span> <span class="hljs-string">":443"</span>
    <span class="hljs-attr">entryPoints.web.http.redirections.entryPoint.to:</span> <span class="hljs-string">websecure</span>
    <span class="hljs-attr">entryPoints.web.http.redirections.entryPoint.scheme:</span> <span class="hljs-string">https</span>
    <span class="hljs-attr">entryPoints.web.http.redirections.entrypoint.permanent:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">certificatesResolvers.letsencrypt.acme.email:</span> <span class="hljs-string">"info@mynewapp.com"</span>
    <span class="hljs-attr">certificatesResolvers.letsencrypt.acme.storage:</span> <span class="hljs-string">"/letsencrypt/acme.json"</span>
    <span class="hljs-attr">certificatesResolvers.letsencrypt.acme.httpchallenge:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">certificatesResolvers.letsencrypt.acme.httpchallenge.entrypoint:</span> <span class="hljs-string">web</span>
</code></pre>
<p>Traefikì„ ì„¤ì •í•˜ì—¬ HTTPS ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  Let's Encryptë¥¼ ì‚¬ìš©í•˜ì—¬ SSL ì¸ì¦ì„œë¥¼ ìë™ìœ¼ë¡œ ê´€ë¦¬í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
<p>ì•„ë˜ì— ì™„ì „í•œ deploy.yml íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš”:</p>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„. ì»¨í…Œì´ë„ˆë¥¼ ê³ ìœ í•˜ê²Œ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</span>
<span class="hljs-attr">service:</span> <span class="hljs-string">mynewapp</span>

<span class="hljs-comment"># ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„ì…ë‹ˆë‹¤.</span>
<span class="hljs-attr">image:</span> <span class="hljs-string">talha/mynewapp</span>

<span class="hljs-comment"># ì´ ì„œë²„ë¡œ ë°°í¬í•©ë‹ˆë‹¤.</span>
<span class="hljs-attr">servers:</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">hosts:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">123.123</span><span class="hljs-number">.45</span><span class="hljs-number">.678</span>
    <span class="hljs-attr">labels:</span>
      <span class="hljs-attr">traefik.http.routers.mynewapp.rule:</span> <span class="hljs-string">Host(`mynewapp.com`)</span>
      <span class="hljs-attr">traefik.http.routers.mynewapp.entrypoints:</span> <span class="hljs-string">websecure</span>
      <span class="hljs-attr">traefik.http.routers.mynewapp_secure.rule:</span> <span class="hljs-string">Host(`mynewapp.com`)</span>
      <span class="hljs-attr">traefik.http.routers.mynewapp_secure.tls:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">traefik.http.routers.mynewapp_secure.tls.certresolver:</span> <span class="hljs-string">letsencrypt</span>
    <span class="hljs-attr">options:</span>
      <span class="hljs-attr">network:</span> <span class="hljs-string">"private"</span>

<span class="hljs-comment"># ì´ë¯¸ì§€ í˜¸ìŠ¤íŠ¸ì˜ ìê²© ì¦ëª…ì…ë‹ˆë‹¤.</span>
<span class="hljs-attr">registry:</span>
  <span class="hljs-attr">username:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">KAMAL_REGISTRY_USERNAME</span>
  <span class="hljs-attr">password:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">KAMAL_REGISTRY_PASSWORD</span>

<span class="hljs-comment"># ì»¨í…Œì´ë„ˆë¡œ ENV ë³€ìˆ˜ë¥¼ ì£¼ì…í•©ë‹ˆë‹¤(ë¹„ë°€ì€ .envì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤).</span>
<span class="hljs-comment"># ë³€ê²½ í›„ `kamal env push`ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”!</span>
<span class="hljs-attr">env:</span>
  <span class="hljs-attr">clear:</span>
    <span class="hljs-attr">RAILS_ENV:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">RACK_ENV:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">RAILS_LOG_TO_STDOUT:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">RAILS_SERVE_STATIC_FILES:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">secret:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">RAILS_MASTER_KEY</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">SMTP_PASSWORD</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">SMTP_SERVER</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">SMTP_LOGIN</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">DB_HOST</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD</span>

<span class="hljs-comment"># rootê°€ ì•„ë‹Œ ë‹¤ë¥¸ ssh ì‚¬ìš©ìë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</span>
<span class="hljs-attr">ssh:</span>
  <span class="hljs-attr">user:</span> <span class="hljs-string">deploy</span>

<span class="hljs-comment"># ë¹Œë” ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.</span>
<span class="hljs-attr">builder:</span>
  <span class="hljs-attr">remote:</span>
    <span class="hljs-attr">arch:</span> <span class="hljs-string">amd64</span>

<span class="hljs-comment"># ë³´ì¡° ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤(ë¹„ë°€ì€ .envì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤).</span>
<span class="hljs-attr">accessories:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">postgres:16.0</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">123.123</span><span class="hljs-number">.45</span><span class="hljs-number">.678</span>
    <span class="hljs-attr">env:</span>
      <span class="hljs-attr">clear:</span>
        <span class="hljs-attr">POSTGRES_USER:</span> <span class="hljs-string">"mynewapp"</span>
        <span class="hljs-attr">POSTGRES_DB:</span> <span class="hljs-string">"mynewapp_production"</span>
      <span class="hljs-attr">secret:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER</span>
    <span class="hljs-attr">files:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">config/init.sql:/docker-entrypoint-initdb.d/setup.sql</span>
    <span class="hljs-attr">directories:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">data:/var/lib/postgresql/data</span>
    <span class="hljs-attr">options:</span>
      <span class="hljs-attr">network:</span> <span class="hljs-string">"private"</span>

<span class="hljs-attr">traefik:</span>
  <span class="hljs-attr">options:</span>
    <span class="hljs-attr">publish:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"443:443"</span>
    <span class="hljs-attr">volume:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"/letsencrypt/acme.json:/letsencrypt/acme.json"</span>
    <span class="hljs-attr">network:</span> <span class="hljs-string">"private"</span>
  <span class="hljs-attr">args:</span>
    <span class="hljs-attr">entryPoints.web.address:</span> <span class="hljs-string">":80"</span>
    <span class="hljs-attr">entryPoints.websecure.address:</span> <span class="hljs-string">":443"</span>
    <span class="hljs-attr">entryPoints.web.http.redirections.entryPoint.to:</span> <span class="hljs-string">websecure</span>
    <span class="hljs-attr">entryPoints.web.http.redirections.entryPoint.scheme:</span> <span class="hljs-string">https</span>
    <span class="hljs-attr">entryPoints.web.http.redirections.entrypoint.permanent:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">certificatesResolvers.letsencrypt.acme.email:</span> <span class="hljs-string">"info@mynewapp.com"</span>
    <span class="hljs-attr">certificatesResolvers.letsencrypt.acme.storage:</span> <span class="hljs-string">"/letsencrypt/acme.json"</span>
    <span class="hljs-attr">certificatesResolvers.letsencrypt.acme.httpchallenge:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">certificatesResolvers.letsencrypt.acme.httpchallenge.entrypoint:</span> <span class="hljs-string">web</span>

<span class="hljs-attr">asset_path:</span> <span class="hljs-string">/rails/public/assets</span>
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ìœ„ì˜ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ì—¬ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„, ë„ë©”ì¸ ë° ì„œë²„ IP ì£¼ì†Œë¡œ mynewapp, mynewapp.com ë° 123.123.45.678ì™€ ê°™ì€ ìë¦¬ í‘œì‹œìë¥¼ êµì²´í•´ì£¼ì„¸ìš”.</p>
<h1>ë‹¨ê³„ 3: ë°°í¬ ì‚¬ìš©ì ìƒì„±</h1>
<p>VPSì— SSHë¡œ ì ‘ì†í•˜ê³  ìƒˆë¡œìš´ ì‚¬ìš©ì deployë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.</p>
<p>ë¡œì»¬ ë¨¸ì‹ ì—ì„œ í„°ë¯¸ë„ì„ ì—´ê³  SSHë¥¼ ì‚¬ìš©í•˜ì—¬ VPSì— ì—°ê²°í•©ë‹ˆë‹¤. ì‹¤ì œ VPSì˜ IP ì£¼ì†Œë¡œ your_server_ipë¥¼ êµì²´í•´ì£¼ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-sh">ssh root@your_server_ip
</code></pre>
<p>ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒˆë¡œìš´ ì‚¬ìš©ì deployë¥¼ ìƒì„±í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-sh">adduser deploy
</code></pre>
<p>ìƒˆ ì‚¬ìš©ìì— ëŒ€í•œ ì•”í˜¸ë¥¼ ì„¤ì •í•˜ê³  ì¶”ê°€ ì •ë³´ë¥¼ ì…ë ¥í•˜ë¼ëŠ” í”„ë¡¬í”„íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤. ì„ íƒ ì‚¬í•­ì„ ê±´ë„ˆë›°ë ¤ë©´ Enter í‚¤ë¥¼ ëˆ„ë¥´ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>(ì„ íƒì‚¬í•­) ë°°í¬ ì‚¬ìš©ìì—ê²Œ sudo ê¶Œí•œì„ ë¶€ì—¬í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ sudo ê·¸ë£¹ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">usermod -aG sudo deploy
</code></pre>
<h1>ë‹¨ê³„ 4: VPSì— Docker ì„¤ì¹˜í•˜ê¸°:</h1>
<p>Dockerë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— íŒ¨í‚¤ì§€ ì¸ë±ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ì‹¤ì²œë²•ì…ë‹ˆë‹¤:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">apt update
</code></pre>
<p>HTTPSë¥¼ í†µí•´ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  Dockerì— í•„ìš”í•œ ëª‡ ê°€ì§€ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">apt install -y apt-transport-https ca-certificates curl software-properties-common
</code></pre>
<p>ì‹œìŠ¤í…œì— Dockerì˜ ê³µì‹ GPG í‚¤ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">curl -fsSL <span class="hljs-attr">https</span>:<span class="hljs-comment">//download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span>
</code></pre>
<p>Docker ë¦¬í¬ì§€í† ë¦¬ë¥¼ APT ì›ë³¸ì— ì¶”ê°€í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">add-apt-repository <span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"</span>
</code></pre>
<p>í•œë²ˆ ë” íŒ¨í‚¤ì§€ ì¸ë±ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-bash">apt update
</code></pre>
<p>ìµœì‹  ë²„ì „ì˜ Docker CE (Community Edition)ì™€ containerdë¥¼ í•¨ê»˜ ì„¤ì¹˜í•˜ë ¤ë©´:</p>
<pre><code class="hljs language-bash">apt install -y docker-ce docker-ce-cli containerd.io
</code></pre>
<p>Docker ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ê³  ë¶€íŒ… ì‹œ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ë„ë¡ ì„¤ì •í•˜ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">systemctl start docker
systemctl enable docker
</code></pre>
<p>ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ Dockerê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì´ ëª…ë ¹ì€ Docker ë²„ì „ ì •ë³´ë¥¼ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">docker --version
</code></pre>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, í”„ë¼ì´ë¹— Docker ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•˜ì„¸ìš”.</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">ë„ì»¤ ë„¤íŠ¸ì›Œí¬ ìƒì„± -d bridge private
</code></pre>
<h1>ë‹¨ê³„ 5: LetsEncrypt ì„¤ì¹˜í•˜ê¸°:</h1>
<p>ë¡œì»¬ ë¨¸ì‹ ì—ì„œ í„°ë¯¸ë„ì„ ì—´ê³  SSHë¥¼ ì‚¬ìš©í•˜ì—¬ VPSì— ì—°ê²°í•©ë‹ˆë‹¤. ì‹¤ì œ VPSì˜ IP ì£¼ì†Œë¡œ your_server_ipë¥¼ ëŒ€ì²´í•˜ì‹­ì‹œì˜¤.</p>
<pre><code class="hljs language-js">ssh root@your_server_ip
</code></pre>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ Let's Encrypt ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">mkdir -p /letsencrypt &#x26;&#x26; touch /letsencrypt/acme.<span class="hljs-property">json</span> &#x26;&#x26; chmod <span class="hljs-number">600</span> /letsencrypt/acme.<span class="hljs-property">json</span>
</code></pre>
<h1>ë‹¨ê³„ 6: ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬</h1>
<p>ì²˜ìŒë¶€í„° ëª¨ë“  ë‹¨ê³„ë¥¼ ê±°ì³ config/deploy.yml íŒŒì¼ì„ ì‘ì„±í–ˆê³  ë°°í¬í•  ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ë©´, ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">kamal setup
</code></pre>
<h1>Step 7: ì¼ì¼ ì—…ë¬´ íë¦„</h1>
<p>ì¹´ë§ì˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§¤ì¼ ë°°í¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì„¸ìš”:</p>
<p>ì•±ì˜ ìƒˆ ë²„ì „ì„ ë°°í¬í•˜ë ¤ë©´:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">kamal deploy
</code></pre>
<p>í™˜ê²½ ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´:</p>
<pre><code class="hljs language-js">kamal env push
</code></pre>
<p>ìƒˆ ì»¨í…Œì´ë„ˆì—ì„œ bash ì„¸ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">kamal app exec -i bash
</code></pre>
<p>ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆì—ì„œ Rails ì½˜ì†”ì„ ì‹œì‘í•˜ë ¤ë©´:</p>
<pre><code class="hljs language-js">kamal app exec -i â€˜bin/rails <span class="hljs-variable language_">console</span>â€™
</code></pre>
<p>ë¡œê·¸ ë³´ê¸°:</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">kamal ì•± ë¡œê·¸
</code></pre>
<h1>ê²°ë¡ </h1>
<p>ì¶•í•˜í•©ë‹ˆë‹¤! ì¹´ë§(Kamal)ì„ ì‚¬ìš©í•˜ì—¬ ë””ì§€í„ˆì˜¤ì…˜(DigitalOcean) VPSì—ì„œ PostgreSQLê³¼ í•¨ê»˜ ë£¨ë¹„ ì˜¨ ë ˆì¼ì¦ˆ(Ruby on Rails) ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ë°°í¬í–ˆìŠµë‹ˆë‹¤. ì´ì œ êµ¬ì„±ëœ ë„ë©”ì¸ ì´ë¦„ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸš€</p>
<p>ì´ í¬ìŠ¤íŠ¸ê°€ ë§ˆìŒì— ë“¤ì—ˆë‹¤ë©´ ì¢‹ì•„ìš”ë¥¼ ëˆŒëŸ¬ ì£¼ì‹œê³  ë¯¸ë””ì—„(Medium)ê³¼ íŠ¸ìœ„í„°(Twitter)ì—ì„œë„ ì €ë¥¼ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”(<a href="https://twitter.com/royalty568" rel="nofollow" target="_blank">https://twitter.com/royalty568</a>).</p>
<!-- ui-station ì‚¬ê°í˜• -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì‹œê°„ì„ ì ˆì•½í•˜ê³  ì•±ì„ ì¦‰ì‹œ êµ¬ì¶•í•˜ê³ ì í•œë‹¤ë©´ Rails ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ë¥¼ ì°¾ê³  ê³„ì‹  ê²ƒ ê°™ë„¤ìš”. <a href="https://talha345.gumroad.com/l/rails7-bootstrap5-devise-fa-psql-boldo-boilerplate" rel="nofollow" target="_blank">https://talha345.gumroad.com/l/rails7-bootstrap5-devise-fa-psql-boldo-boilerplate</a> ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Ruby on Rails ì‘ìš© í”„ë¡œê·¸ë¨ì„ PostgreSQLì„ ì‚¬ìš©í•˜ì—¬ VPSì— Kamalì„ ì´ìš©í•˜ì—¬ ë°°í¬í•˜ëŠ” ë‹¨ê³„ë³„ ì•ˆë‚´","description":"","date":"2024-06-19 22:12","slug":"2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal","content":"\n![image](/assets/img/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal_0.png)\n\nì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” DigitalOceanì—ì„œ ì œê³µí•˜ëŠ” Virtual Private Server (VPS)ì— Ruby on Rails ì• í”Œë¦¬ì¼€ì´ì…˜ì„ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì™€ í•¨ê»˜ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ì•ˆë‚´í•˜ê² ìŠµë‹ˆë‹¤. Docker ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìë™í™”í•˜ëŠ” ë°°í¬ ë„êµ¬ ì¸ Kamalì„ í™œìš©í•˜ì—¬ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•  ê²ƒì…ë‹ˆë‹¤.\n\n# ì „ì œ ì¡°ê±´\n\nì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‚¬í•­ì„ ê°–ì¶”ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- PostgreSQLì´ êµ¬ì„±ëœ Ruby on Rails ì• í”Œë¦¬ì¼€ì´ì…˜.\n- VPS (droplet)ê°€ í”„ë¡œë¹„ì €ë‹ë˜ì–´ SSH ì•¡ì„¸ìŠ¤ê°€ ì„¤ì •ëœ DigitalOcean ê³„ì •. ì›í•˜ëŠ” ì œê³µì—…ì²´ë¥¼ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤.\n\n# ë‹¨ê³„ 1: Kamal ì„¤ì¹˜\n\në¡œì»¬ ë¨¸ì‹ ì— Kamalì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. RubyGemsë¥¼ í†µí•´ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\ngem install kamal\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ë‹¨ê³„ 2: ë°°í¬ ì„¤ì • êµ¬ì„±\n\ní”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œ ë‹¤ìŒ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:\n\n```js\nkamal init\n```\n\nì´ ëª…ë ¹ì€ deploy.yml ì„¤ì • íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ë¥¸ ëª‡ ê°€ì§€ íŒŒì¼ì„ í•¨ê»˜ ìƒì„±í•©ë‹ˆë‹¤. deploy.yml êµ¬ì„± íŒŒì¼ì˜ ì—¬ëŸ¬ ì„¹ì…˜ì„ ì´í•´í•´ ë´…ì‹œë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„. ê³ ìœ í•˜ê²Œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\nservice: mynewapp\n```\n\nì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê´€ë ¨ëœ ì»¨í…Œì´ë„ˆë¥¼ ê³ ìœ í•˜ê²Œ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n```js\n# ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„.\nimage: talha/mynewapp\n```\n\nì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ Docker ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. talha/mynewappë¥¼ Docker Hub ì €ì¥ì†Œì˜ ì´ë¦„ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# ì´ëŸ¬í•œ ì„œë²„ì— ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì„œë²„:\n  ì›¹:\n    í˜¸ìŠ¤íŠ¸:\n      - 123.123.45.678\n    ë¼ë²¨:\n      traefik.http.routers.mynewapp.rule: Host(`mynewapp.com`)\n      traefik.http.routers.mynewapp.entrypoints: websecure\n      traefik.http.routers.mynewapp_secure.rule: Host(`mynewapp.com`)\n      traefik.http.routers.mynewapp_secure.tls: true\n      traefik.http.routers.mynewapp_secure.tls.certresolver: letsencrypt\n    ì˜µì…˜:\n      ë„¤íŠ¸ì›Œí¬: \"private\"\n```\n\nì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë°°í¬ë  ì„œë²„ë¥¼ ì •ì˜í•˜ê³ , HTTP ìš”ì²­ì„ ì•±ì— ë¼ìš°íŒ…í•˜ê³  TLS/SSL ì•”í˜¸í™”ë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•œ Traefik ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.\n\n```js\n# ì´ë¯¸ì§€ í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ìê²© ì¦ëª….\në ˆì§€ìŠ¤íŠ¸ë¦¬:\n  ì‚¬ìš©ì ì´ë¦„:\n    - KAMAL_REGISTRY_USERNAME\n  ë¹„ë°€ë²ˆí˜¸:\n    - KAMAL_REGISTRY_PASSWORD\n```\n\nì–´í”Œë¦¬ì¼€ì´ì…˜ ì´ë¯¸ì§€ê°€ í˜¸ìŠ¤íŒ…ëœ Docker ì´ë¯¸ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ìê²© ì¦ëª…ì„ ì§€ì •í•©ë‹ˆë‹¤. KAMAL_REGISTRY_USERNAME ë° KAMAL_REGISTRY_PASSWORDë¥¼ Docker í—ˆë¸Œ ìê²© ì¦ëª…ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```yaml\n# ì»¨í…Œì´ë„ˆì— í™˜ê²½ ë³€ìˆ˜ ì£¼ì… (ì‹œí¬ë¦¿ì€ .envì—ì„œ ì˜¨ë‹¤).\n# ë³€ê²½ í›„ `kamal env push`ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”!\nenv:\n  clear:\n    RAILS_ENV: production\n    RACK_ENV: production\n    RAILS_LOG_TO_STDOUT: true\n    RAILS_SERVE_STATIC_FILES: true\n  secret:\n    - RAILS_MASTER_KEY\n    - SMTP_PASSWORD\n    - SMTP_SERVER\n    - SMTP_LOGIN\n    - DB_HOST\n    - POSTGRES_USER\n    - POSTGRES_PASSWORD\n```\n\nì»¨í…Œì´ë„ˆì˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. clear ë³€ìˆ˜ëŠ” ê³µê°œì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë©°, ì‹œí¬ë¦¿ ë³€ìˆ˜ëŠ” ë¹„ê³µê°œë¡œ ìœ ì§€ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€ìˆ˜ëŠ” .env íŒŒì¼ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\n\n```yaml\n# rootê°€ ì•„ë‹Œ ë‹¤ë¥¸ ssh ì‚¬ìš©ì ì‚¬ìš©\nssh:\n  user: deploy\n```\n\n- ì„œë²„ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ë° ì‚¬ìš©í•  SSH ì‚¬ìš©ìë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì‚¬ìš©ìëŠ” deployì…ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```yaml\n# ë¹Œë” ì„¤ì • êµ¬ì„±.\në¹Œë”:\n  ì›ê²©:\n    ì•„í‚¤í…ì²˜: amd64\n```\n\në¹Œë” ì„¤ì •ì„ êµ¬ì„±í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ë¹Œë“œí•  ì›ê²© ì„œë²„ì˜ ì•„í‚¤í…ì²˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ìœ„ì˜ êµ¬ì„±ì€ Apple Siliconì—ì„œ ê°œë°œí•˜ê³  ìˆì§€ë§Œ amd64 ë„ì»¤ ì´ë¯¸ì§€ë§Œ ë¹Œë“œí•˜ë ¤ëŠ” ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤.\n\n```yaml\n# ë¶€ê°€ ì„œë¹„ìŠ¤ ì‚¬ìš© (ë¹„ë°€ì€ .envì—ì„œ ì œê³µë¨).\në¶€ê°€ì„œë¹„ìŠ¤:\n  db:\n    ì´ë¯¸ì§€: postgres:16.0\n    í˜¸ìŠ¤íŠ¸: 123.123.45.678\n    í™˜ê²½:\n      í´ë¦¬ì–´:\n        POSTGRES_USER: \"mynewapp\"\n        POSTGRES_DB: \"mynewapp_production\"\n      ì‹œí¬ë¦¿:\n        - POSTGRES_PASSWORD\n        - POSTGRES_USER\n    íŒŒì¼:\n      - config/init.sql:/docker-entrypoint-initdb.d/setup.sql\n    ë””ë ‰í† ë¦¬:\n      - data:/var/lib/postgresql/data\n    ì˜µì…˜:\n      ë„¤íŠ¸ì›Œí¬: \"private\"\n```\n\nì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ í•„ìš”í•œ ì¶”ê°€ ì„œë¹„ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì§€ì •ëœ ë²„ì „ê³¼ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°–ëŠ” PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. íŒŒì¼ ì§€ì‹œë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ìì²´ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. config/init.sqlì€ config/database.yml êµ¬ì„±ì—ì„œ ì˜ˆìƒí•œëŒ€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nCREATE DATABASE mynewapp_production;\n```\n\nìœ„ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ íŒŒì¼ config/init.sqlì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.\n\n```js\nproduction:\n  \u003c\u003c: *default\n  database: mynewapp_production\n  username: \u003c%= ENV[\"POSTGRES_USER\"] %\u003e\n  password: \u003c%= ENV[\"POSTGRES_PASSWORD\"] %\u003e\n  host: \u003c%= ENV[\"DB_HOST\"] %\u003e\n```\n\në˜í•œ, ìœ„ì™€ ê°™ì´ database.yml íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ í”„ë¡œë•ì…˜ DB êµ¬ì„±ì„ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```yaml\ntraefik:\n  options:\n    publish:\n      - \"443:443\"\n    volume:\n      - \"/letsencrypt/acme.json:/letsencrypt/acme.json\"\n    network: \"private\"\n  args:\n    entryPoints.web.address: \":80\"\n    entryPoints.websecure.address: \":443\"\n    entryPoints.web.http.redirections.entryPoint.to: websecure\n    entryPoints.web.http.redirections.entryPoint.scheme: https\n    entryPoints.web.http.redirections.entrypoint.permanent: true\n    certificatesResolvers.letsencrypt.acme.email: \"info@mynewapp.com\"\n    certificatesResolvers.letsencrypt.acme.storage: \"/letsencrypt/acme.json\"\n    certificatesResolvers.letsencrypt.acme.httpchallenge: true\n    certificatesResolvers.letsencrypt.acme.httpchallenge.entrypoint: web\n```\n\nTraefikì„ ì„¤ì •í•˜ì—¬ HTTPS ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  Let's Encryptë¥¼ ì‚¬ìš©í•˜ì—¬ SSL ì¸ì¦ì„œë¥¼ ìë™ìœ¼ë¡œ ê´€ë¦¬í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.\n\nì•„ë˜ì— ì™„ì „í•œ deploy.yml íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš”:\n\n```yaml\n# ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„. ì»¨í…Œì´ë„ˆë¥¼ ê³ ìœ í•˜ê²Œ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\nservice: mynewapp\n\n# ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„ì…ë‹ˆë‹¤.\nimage: talha/mynewapp\n\n# ì´ ì„œë²„ë¡œ ë°°í¬í•©ë‹ˆë‹¤.\nservers:\n  web:\n    hosts:\n      - 123.123.45.678\n    labels:\n      traefik.http.routers.mynewapp.rule: Host(`mynewapp.com`)\n      traefik.http.routers.mynewapp.entrypoints: websecure\n      traefik.http.routers.mynewapp_secure.rule: Host(`mynewapp.com`)\n      traefik.http.routers.mynewapp_secure.tls: true\n      traefik.http.routers.mynewapp_secure.tls.certresolver: letsencrypt\n    options:\n      network: \"private\"\n\n# ì´ë¯¸ì§€ í˜¸ìŠ¤íŠ¸ì˜ ìê²© ì¦ëª…ì…ë‹ˆë‹¤.\nregistry:\n  username:\n    - KAMAL_REGISTRY_USERNAME\n  password:\n    - KAMAL_REGISTRY_PASSWORD\n\n# ì»¨í…Œì´ë„ˆë¡œ ENV ë³€ìˆ˜ë¥¼ ì£¼ì…í•©ë‹ˆë‹¤(ë¹„ë°€ì€ .envì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤).\n# ë³€ê²½ í›„ `kamal env push`ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”!\nenv:\n  clear:\n    RAILS_ENV: production\n    RACK_ENV: production\n    RAILS_LOG_TO_STDOUT: true\n    RAILS_SERVE_STATIC_FILES: true\n  secret:\n    - RAILS_MASTER_KEY\n    - SMTP_PASSWORD\n    - SMTP_SERVER\n    - SMTP_LOGIN\n    - DB_HOST\n    - POSTGRES_USER\n    - POSTGRES_PASSWORD\n\n# rootê°€ ì•„ë‹Œ ë‹¤ë¥¸ ssh ì‚¬ìš©ìë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\nssh:\n  user: deploy\n\n# ë¹Œë” ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.\nbuilder:\n  remote:\n    arch: amd64\n\n# ë³´ì¡° ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤(ë¹„ë°€ì€ .envì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤).\naccessories:\n  db:\n    image: postgres:16.0\n    host: 123.123.45.678\n    env:\n      clear:\n        POSTGRES_USER: \"mynewapp\"\n        POSTGRES_DB: \"mynewapp_production\"\n      secret:\n        - POSTGRES_PASSWORD\n        - POSTGRES_USER\n    files:\n      - config/init.sql:/docker-entrypoint-initdb.d/setup.sql\n    directories:\n      - data:/var/lib/postgresql/data\n    options:\n      network: \"private\"\n\ntraefik:\n  options:\n    publish:\n      - \"443:443\"\n    volume:\n      - \"/letsencrypt/acme.json:/letsencrypt/acme.json\"\n    network: \"private\"\n  args:\n    entryPoints.web.address: \":80\"\n    entryPoints.websecure.address: \":443\"\n    entryPoints.web.http.redirections.entryPoint.to: websecure\n    entryPoints.web.http.redirections.entryPoint.scheme: https\n    entryPoints.web.http.redirections.entrypoint.permanent: true\n    certificatesResolvers.letsencrypt.acme.email: \"info@mynewapp.com\"\n    certificatesResolvers.letsencrypt.acme.storage: \"/letsencrypt/acme.json\"\n    certificatesResolvers.letsencrypt.acme.httpchallenge: true\n    certificatesResolvers.letsencrypt.acme.httpchallenge.entrypoint: web\n\nasset_path: /rails/public/assets\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nìœ„ì˜ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ì—¬ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„, ë„ë©”ì¸ ë° ì„œë²„ IP ì£¼ì†Œë¡œ mynewapp, mynewapp.com ë° 123.123.45.678ì™€ ê°™ì€ ìë¦¬ í‘œì‹œìë¥¼ êµì²´í•´ì£¼ì„¸ìš”.\n\n# ë‹¨ê³„ 3: ë°°í¬ ì‚¬ìš©ì ìƒì„±\n\nVPSì— SSHë¡œ ì ‘ì†í•˜ê³  ìƒˆë¡œìš´ ì‚¬ìš©ì deployë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.\n\në¡œì»¬ ë¨¸ì‹ ì—ì„œ í„°ë¯¸ë„ì„ ì—´ê³  SSHë¥¼ ì‚¬ìš©í•˜ì—¬ VPSì— ì—°ê²°í•©ë‹ˆë‹¤. ì‹¤ì œ VPSì˜ IP ì£¼ì†Œë¡œ your_server_ipë¥¼ êµì²´í•´ì£¼ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```sh\nssh root@your_server_ip\n```\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒˆë¡œìš´ ì‚¬ìš©ì deployë¥¼ ìƒì„±í•˜ì„¸ìš”:\n\n```sh\nadduser deploy\n```\n\nìƒˆ ì‚¬ìš©ìì— ëŒ€í•œ ì•”í˜¸ë¥¼ ì„¤ì •í•˜ê³  ì¶”ê°€ ì •ë³´ë¥¼ ì…ë ¥í•˜ë¼ëŠ” í”„ë¡¬í”„íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤. ì„ íƒ ì‚¬í•­ì„ ê±´ë„ˆë›°ë ¤ë©´ Enter í‚¤ë¥¼ ëˆ„ë¥´ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n(ì„ íƒì‚¬í•­) ë°°í¬ ì‚¬ìš©ìì—ê²Œ sudo ê¶Œí•œì„ ë¶€ì—¬í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ sudo ê·¸ë£¹ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\nusermod -aG sudo deploy\n```\n\n# ë‹¨ê³„ 4: VPSì— Docker ì„¤ì¹˜í•˜ê¸°:\n\nDockerë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— íŒ¨í‚¤ì§€ ì¸ë±ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ì‹¤ì²œë²•ì…ë‹ˆë‹¤:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\napt update\n```\n\nHTTPSë¥¼ í†µí•´ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  Dockerì— í•„ìš”í•œ ëª‡ ê°€ì§€ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”:\n\n```js\napt install -y apt-transport-https ca-certificates curl software-properties-common\n```\n\nì‹œìŠ¤í…œì— Dockerì˜ ê³µì‹ GPG í‚¤ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\nDocker ë¦¬í¬ì§€í† ë¦¬ë¥¼ APT ì›ë³¸ì— ì¶”ê°€í•˜ì„¸ìš”:\n\n```js\nadd-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\n```\n\ní•œë²ˆ ë” íŒ¨í‚¤ì§€ ì¸ë±ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```bash\napt update\n```\n\nìµœì‹  ë²„ì „ì˜ Docker CE (Community Edition)ì™€ containerdë¥¼ í•¨ê»˜ ì„¤ì¹˜í•˜ë ¤ë©´:\n\n```bash\napt install -y docker-ce docker-ce-cli containerd.io\n```\n\nDocker ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ê³  ë¶€íŒ… ì‹œ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ë„ë¡ ì„¤ì •í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nsystemctl start docker\nsystemctl enable docker\n```\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ Dockerê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì´ ëª…ë ¹ì€ Docker ë²„ì „ ì •ë³´ë¥¼ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤:\n\n```js\ndocker --version\n```\n\në§ˆì§€ë§‰ìœ¼ë¡œ, í”„ë¼ì´ë¹— Docker ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•˜ì„¸ìš”.\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\në„ì»¤ ë„¤íŠ¸ì›Œí¬ ìƒì„± -d bridge private\n```\n\n# ë‹¨ê³„ 5: LetsEncrypt ì„¤ì¹˜í•˜ê¸°:\n\në¡œì»¬ ë¨¸ì‹ ì—ì„œ í„°ë¯¸ë„ì„ ì—´ê³  SSHë¥¼ ì‚¬ìš©í•˜ì—¬ VPSì— ì—°ê²°í•©ë‹ˆë‹¤. ì‹¤ì œ VPSì˜ IP ì£¼ì†Œë¡œ your_server_ipë¥¼ ëŒ€ì²´í•˜ì‹­ì‹œì˜¤.\n\n```js\nssh root@your_server_ip\n```\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ Let's Encrypt ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\n\n```js\nmkdir -p /letsencrypt \u0026\u0026 touch /letsencrypt/acme.json \u0026\u0026 chmod 600 /letsencrypt/acme.json\n```\n\n# ë‹¨ê³„ 6: ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬\n\nì²˜ìŒë¶€í„° ëª¨ë“  ë‹¨ê³„ë¥¼ ê±°ì³ config/deploy.yml íŒŒì¼ì„ ì‘ì„±í–ˆê³  ë°°í¬í•  ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ë©´, ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nkamal setup\n```\n\n# Step 7: ì¼ì¼ ì—…ë¬´ íë¦„\n\nì¹´ë§ì˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§¤ì¼ ë°°í¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì„¸ìš”:\n\nì•±ì˜ ìƒˆ ë²„ì „ì„ ë°°í¬í•˜ë ¤ë©´:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nkamal deploy\n```\n\ní™˜ê²½ ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´:\n\n```js\nkamal env push\n```\n\nìƒˆ ì»¨í…Œì´ë„ˆì—ì„œ bash ì„¸ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nkamal app exec -i bash\n```\n\nìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆì—ì„œ Rails ì½˜ì†”ì„ ì‹œì‘í•˜ë ¤ë©´:\n\n```js\nkamal app exec -i â€˜bin/rails consoleâ€™\n```\n\në¡œê·¸ ë³´ê¸°:\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nkamal ì•± ë¡œê·¸\n```\n\n# ê²°ë¡ \n\nì¶•í•˜í•©ë‹ˆë‹¤! ì¹´ë§(Kamal)ì„ ì‚¬ìš©í•˜ì—¬ ë””ì§€í„ˆì˜¤ì…˜(DigitalOcean) VPSì—ì„œ PostgreSQLê³¼ í•¨ê»˜ ë£¨ë¹„ ì˜¨ ë ˆì¼ì¦ˆ(Ruby on Rails) ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ë°°í¬í–ˆìŠµë‹ˆë‹¤. ì´ì œ êµ¬ì„±ëœ ë„ë©”ì¸ ì´ë¦„ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸš€\n\nì´ í¬ìŠ¤íŠ¸ê°€ ë§ˆìŒì— ë“¤ì—ˆë‹¤ë©´ ì¢‹ì•„ìš”ë¥¼ ëˆŒëŸ¬ ì£¼ì‹œê³  ë¯¸ë””ì—„(Medium)ê³¼ íŠ¸ìœ„í„°(Twitter)ì—ì„œë„ ì €ë¥¼ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”(https://twitter.com/royalty568).\n\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì‹œê°„ì„ ì ˆì•½í•˜ê³  ì•±ì„ ì¦‰ì‹œ êµ¬ì¶•í•˜ê³ ì í•œë‹¤ë©´ Rails ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ë¥¼ ì°¾ê³  ê³„ì‹  ê²ƒ ê°™ë„¤ìš”. https://talha345.gumroad.com/l/rails7-bootstrap5-devise-fa-psql-boldo-boilerplate ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!\n","ogImage":{"url":"/assets/img/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal_0.png"},"coverImage":"/assets/img/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal_0.png","tag":["Tech"],"readingTime":16},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal_0.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” DigitalOceanì—ì„œ ì œê³µí•˜ëŠ” Virtual Private Server (VPS)ì— Ruby on Rails ì• í”Œë¦¬ì¼€ì´ì…˜ì„ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì™€ í•¨ê»˜ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ì•ˆë‚´í•˜ê² ìŠµë‹ˆë‹¤. Docker ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìë™í™”í•˜ëŠ” ë°°í¬ ë„êµ¬ ì¸ Kamalì„ í™œìš©í•˜ì—¬ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì „ì œ ì¡°ê±´\u003c/h1\u003e\n\u003cp\u003eì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‚¬í•­ì„ ê°–ì¶”ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003ePostgreSQLì´ êµ¬ì„±ëœ Ruby on Rails ì• í”Œë¦¬ì¼€ì´ì…˜.\u003c/li\u003e\n\u003cli\u003eVPS (droplet)ê°€ í”„ë¡œë¹„ì €ë‹ë˜ì–´ SSH ì•¡ì„¸ìŠ¤ê°€ ì„¤ì •ëœ DigitalOcean ê³„ì •. ì›í•˜ëŠ” ì œê³µì—…ì²´ë¥¼ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eë‹¨ê³„ 1: Kamal ì„¤ì¹˜\u003c/h1\u003e\n\u003cp\u003eë¡œì»¬ ë¨¸ì‹ ì— Kamalì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. RubyGemsë¥¼ í†µí•´ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003egem install kamal\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eë‹¨ê³„ 2: ë°°í¬ ì„¤ì • êµ¬ì„±\u003c/h1\u003e\n\u003cp\u003eí”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œ ë‹¤ìŒ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekamal init\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ëª…ë ¹ì€ deploy.yml ì„¤ì • íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ë¥¸ ëª‡ ê°€ì§€ íŒŒì¼ì„ í•¨ê»˜ ìƒì„±í•©ë‹ˆë‹¤. deploy.yml êµ¬ì„± íŒŒì¼ì˜ ì—¬ëŸ¬ ì„¹ì…˜ì„ ì´í•´í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„. ê³ ìœ í•˜ê²Œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\u003cspan class=\"hljs-attr\"\u003eservice\u003c/span\u003e: mynewapp\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê´€ë ¨ëœ ì»¨í…Œì´ë„ˆë¥¼ ê³ ìœ í•˜ê²Œ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„.\n\u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: talha/mynewapp\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ Docker ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. talha/mynewappë¥¼ Docker Hub ì €ì¥ì†Œì˜ ì´ë¦„ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# ì´ëŸ¬í•œ ì„œë²„ì— ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì„œë²„:\n  ì›¹:\n    í˜¸ìŠ¤íŠ¸:\n      - \u003cspan class=\"hljs-number\"\u003e123.123\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.45\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.678\u003c/span\u003e\n    ë¼ë²¨:\n      traefik.\u003cspan class=\"hljs-property\"\u003ehttp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erouters\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emynewapp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erule\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eHost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`mynewapp.com`\u003c/span\u003e)\n      traefik.\u003cspan class=\"hljs-property\"\u003ehttp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erouters\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emynewapp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eentrypoints\u003c/span\u003e: websecure\n      traefik.\u003cspan class=\"hljs-property\"\u003ehttp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erouters\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emynewapp_secure\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erule\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eHost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`mynewapp.com`\u003c/span\u003e)\n      traefik.\u003cspan class=\"hljs-property\"\u003ehttp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erouters\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emynewapp_secure\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etls\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n      traefik.\u003cspan class=\"hljs-property\"\u003ehttp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erouters\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emynewapp_secure\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etls\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecertresolver\u003c/span\u003e: letsencrypt\n    ì˜µì…˜:\n      ë„¤íŠ¸ì›Œí¬: \u003cspan class=\"hljs-string\"\u003e\"private\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë°°í¬ë  ì„œë²„ë¥¼ ì •ì˜í•˜ê³ , HTTP ìš”ì²­ì„ ì•±ì— ë¼ìš°íŒ…í•˜ê³  TLS/SSL ì•”í˜¸í™”ë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•œ Traefik ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# ì´ë¯¸ì§€ í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ìê²© ì¦ëª….\në ˆì§€ìŠ¤íŠ¸ë¦¬:\n  ì‚¬ìš©ì ì´ë¦„:\n    - \u003cspan class=\"hljs-variable constant_\"\u003eKAMAL_REGISTRY_USERNAME\u003c/span\u003e\n  ë¹„ë°€ë²ˆí˜¸:\n    - \u003cspan class=\"hljs-variable constant_\"\u003eKAMAL_REGISTRY_PASSWORD\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì–´í”Œë¦¬ì¼€ì´ì…˜ ì´ë¯¸ì§€ê°€ í˜¸ìŠ¤íŒ…ëœ Docker ì´ë¯¸ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ìê²© ì¦ëª…ì„ ì§€ì •í•©ë‹ˆë‹¤. KAMAL_REGISTRY_USERNAME ë° KAMAL_REGISTRY_PASSWORDë¥¼ Docker í—ˆë¸Œ ìê²© ì¦ëª…ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-comment\"\u003e# ì»¨í…Œì´ë„ˆì— í™˜ê²½ ë³€ìˆ˜ ì£¼ì… (ì‹œí¬ë¦¿ì€ .envì—ì„œ ì˜¨ë‹¤).\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# ë³€ê²½ í›„ `kamal env push`ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”!\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eenv:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eclear:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eRAILS_ENV:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eproduction\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eRACK_ENV:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eproduction\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eRAILS_LOG_TO_STDOUT:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eRAILS_SERVE_STATIC_FILES:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003esecret:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eRAILS_MASTER_KEY\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eSMTP_PASSWORD\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eSMTP_SERVER\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eSMTP_LOGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eDB_HOST\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_USER\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì»¨í…Œì´ë„ˆì˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. clear ë³€ìˆ˜ëŠ” ê³µê°œì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë©°, ì‹œí¬ë¦¿ ë³€ìˆ˜ëŠ” ë¹„ê³µê°œë¡œ ìœ ì§€ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€ìˆ˜ëŠ” .env íŒŒì¼ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-comment\"\u003e# rootê°€ ì•„ë‹Œ ë‹¤ë¥¸ ssh ì‚¬ìš©ì ì‚¬ìš©\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003essh:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003euser:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edeploy\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eì„œë²„ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ë° ì‚¬ìš©í•  SSH ì‚¬ìš©ìë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì‚¬ìš©ìëŠ” deployì…ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-comment\"\u003e# ë¹Œë” ì„¤ì • êµ¬ì„±.\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003eë¹Œë”:\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003eì›ê²©:\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003eì•„í‚¤í…ì²˜:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eamd64\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë¹Œë” ì„¤ì •ì„ êµ¬ì„±í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ë¹Œë“œí•  ì›ê²© ì„œë²„ì˜ ì•„í‚¤í…ì²˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ìœ„ì˜ êµ¬ì„±ì€ Apple Siliconì—ì„œ ê°œë°œí•˜ê³  ìˆì§€ë§Œ amd64 ë„ì»¤ ì´ë¯¸ì§€ë§Œ ë¹Œë“œí•˜ë ¤ëŠ” ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-comment\"\u003e# ë¶€ê°€ ì„œë¹„ìŠ¤ ì‚¬ìš© (ë¹„ë°€ì€ .envì—ì„œ ì œê³µë¨).\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003eë¶€ê°€ì„œë¹„ìŠ¤:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003edb:\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003eì´ë¯¸ì§€:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003epostgres:16.0\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003eí˜¸ìŠ¤íŠ¸:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e123.123\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.45\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.678\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003eí™˜ê²½:\u003c/span\u003e\n      \u003cspan class=\"hljs-string\"\u003eí´ë¦¬ì–´:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_USER:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"mynewapp\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_DB:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"mynewapp_production\"\u003c/span\u003e\n      \u003cspan class=\"hljs-string\"\u003eì‹œí¬ë¦¿:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_USER\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003eíŒŒì¼:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003econfig/init.sql:/docker-entrypoint-initdb.d/setup.sql\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003eë””ë ‰í† ë¦¬:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edata:/var/lib/postgresql/data\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003eì˜µì…˜:\u003c/span\u003e\n      \u003cspan class=\"hljs-string\"\u003eë„¤íŠ¸ì›Œí¬:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"private\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ í•„ìš”í•œ ì¶”ê°€ ì„œë¹„ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì§€ì •ëœ ë²„ì „ê³¼ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°–ëŠ” PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. íŒŒì¼ ì§€ì‹œë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ìì²´ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. config/init.sqlì€ config/database.yml êµ¬ì„±ì—ì„œ ì˜ˆìƒí•œëŒ€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDATABASE\u003c/span\u003e mynewapp_production;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ íŒŒì¼ config/init.sqlì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003eproduction\u003c/span\u003e:\n  \u0026#x3C;\u0026#x3C;: *\u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003edatabase\u003c/span\u003e: mynewapp_production\n  \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: \u0026#x3C;%= \u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"POSTGRES_USER\"\u003c/span\u003e] %\u003e\n  \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: \u0026#x3C;%= \u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"POSTGRES_PASSWORD\"\u003c/span\u003e] %\u003e\n  \u003cspan class=\"hljs-attr\"\u003ehost\u003c/span\u003e: \u0026#x3C;%= \u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"DB_HOST\"\u003c/span\u003e] %\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë˜í•œ, ìœ„ì™€ ê°™ì´ database.yml íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ í”„ë¡œë•ì…˜ DB êµ¬ì„±ì„ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003etraefik:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eoptions:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003epublish:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"443:443\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolume:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"/letsencrypt/acme.json:/letsencrypt/acme.json\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enetwork:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"private\"\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eargs:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.web.address:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\":80\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.websecure.address:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\":443\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.web.http.redirections.entryPoint.to:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ewebsecure\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.web.http.redirections.entryPoint.scheme:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehttps\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.web.http.redirections.entrypoint.permanent:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecertificatesResolvers.letsencrypt.acme.email:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"info@mynewapp.com\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecertificatesResolvers.letsencrypt.acme.storage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"/letsencrypt/acme.json\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecertificatesResolvers.letsencrypt.acme.httpchallenge:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecertificatesResolvers.letsencrypt.acme.httpchallenge.entrypoint:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eweb\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTraefikì„ ì„¤ì •í•˜ì—¬ HTTPS ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  Let's Encryptë¥¼ ì‚¬ìš©í•˜ì—¬ SSL ì¸ì¦ì„œë¥¼ ìë™ìœ¼ë¡œ ê´€ë¦¬í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì•„ë˜ì— ì™„ì „í•œ deploy.yml íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-comment\"\u003e# ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ë¦„. ì»¨í…Œì´ë„ˆë¥¼ ê³ ìœ í•˜ê²Œ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eservice:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emynewapp\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì´ë¦„ì…ë‹ˆë‹¤.\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etalha/mynewapp\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# ì´ ì„œë²„ë¡œ ë°°í¬í•©ë‹ˆë‹¤.\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eservers:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eweb:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ehosts:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e123.123\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.45\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.678\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003elabels:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etraefik.http.routers.mynewapp.rule:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eHost(`mynewapp.com`)\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etraefik.http.routers.mynewapp.entrypoints:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ewebsecure\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etraefik.http.routers.mynewapp_secure.rule:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eHost(`mynewapp.com`)\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etraefik.http.routers.mynewapp_secure.tls:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etraefik.http.routers.mynewapp_secure.tls.certresolver:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eletsencrypt\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eoptions:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003enetwork:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"private\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# ì´ë¯¸ì§€ í˜¸ìŠ¤íŠ¸ì˜ ìê²© ì¦ëª…ì…ë‹ˆë‹¤.\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eregistry:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eusername:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eKAMAL_REGISTRY_USERNAME\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epassword:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eKAMAL_REGISTRY_PASSWORD\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# ì»¨í…Œì´ë„ˆë¡œ ENV ë³€ìˆ˜ë¥¼ ì£¼ì…í•©ë‹ˆë‹¤(ë¹„ë°€ì€ .envì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤).\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# ë³€ê²½ í›„ `kamal env push`ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”!\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eenv:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eclear:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eRAILS_ENV:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eproduction\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eRACK_ENV:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eproduction\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eRAILS_LOG_TO_STDOUT:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eRAILS_SERVE_STATIC_FILES:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003esecret:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eRAILS_MASTER_KEY\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eSMTP_PASSWORD\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eSMTP_SERVER\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eSMTP_LOGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eDB_HOST\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_USER\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# rootê°€ ì•„ë‹Œ ë‹¤ë¥¸ ssh ì‚¬ìš©ìë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003essh:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003euser:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edeploy\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# ë¹Œë” ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ebuilder:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eremote:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003earch:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eamd64\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# ë³´ì¡° ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤(ë¹„ë°€ì€ .envì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤).\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eaccessories:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003edb:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003epostgres:16.0\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ehost:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e123.123\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.45\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.678\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenv:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eclear:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_USER:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"mynewapp\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_DB:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"mynewapp_production\"\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003esecret:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_USER\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003efiles:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003econfig/init.sql:/docker-entrypoint-initdb.d/setup.sql\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003edirectories:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edata:/var/lib/postgresql/data\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eoptions:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003enetwork:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"private\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003etraefik:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eoptions:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003epublish:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"443:443\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolume:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"/letsencrypt/acme.json:/letsencrypt/acme.json\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enetwork:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"private\"\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eargs:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.web.address:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\":80\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.websecure.address:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\":443\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.web.http.redirections.entryPoint.to:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ewebsecure\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.web.http.redirections.entryPoint.scheme:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehttps\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eentryPoints.web.http.redirections.entrypoint.permanent:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecertificatesResolvers.letsencrypt.acme.email:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"info@mynewapp.com\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecertificatesResolvers.letsencrypt.acme.storage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"/letsencrypt/acme.json\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecertificatesResolvers.letsencrypt.acme.httpchallenge:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecertificatesResolvers.letsencrypt.acme.httpchallenge.entrypoint:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eweb\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003easset_path:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e/rails/public/assets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eìœ„ì˜ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ì—¬ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„, ë„ë©”ì¸ ë° ì„œë²„ IP ì£¼ì†Œë¡œ mynewapp, mynewapp.com ë° 123.123.45.678ì™€ ê°™ì€ ìë¦¬ í‘œì‹œìë¥¼ êµì²´í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003ch1\u003eë‹¨ê³„ 3: ë°°í¬ ì‚¬ìš©ì ìƒì„±\u003c/h1\u003e\n\u003cp\u003eVPSì— SSHë¡œ ì ‘ì†í•˜ê³  ìƒˆë¡œìš´ ì‚¬ìš©ì deployë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003eë¡œì»¬ ë¨¸ì‹ ì—ì„œ í„°ë¯¸ë„ì„ ì—´ê³  SSHë¥¼ ì‚¬ìš©í•˜ì—¬ VPSì— ì—°ê²°í•©ë‹ˆë‹¤. ì‹¤ì œ VPSì˜ IP ì£¼ì†Œë¡œ your_server_ipë¥¼ êµì²´í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003essh root@your_server_ip\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒˆë¡œìš´ ì‚¬ìš©ì deployë¥¼ ìƒì„±í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003eadduser deploy\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìƒˆ ì‚¬ìš©ìì— ëŒ€í•œ ì•”í˜¸ë¥¼ ì„¤ì •í•˜ê³  ì¶”ê°€ ì •ë³´ë¥¼ ì…ë ¥í•˜ë¼ëŠ” í”„ë¡¬í”„íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤. ì„ íƒ ì‚¬í•­ì„ ê±´ë„ˆë›°ë ¤ë©´ Enter í‚¤ë¥¼ ëˆ„ë¥´ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e(ì„ íƒì‚¬í•­) ë°°í¬ ì‚¬ìš©ìì—ê²Œ sudo ê¶Œí•œì„ ë¶€ì—¬í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ sudo ê·¸ë£¹ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eusermod -aG sudo deploy\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 4: VPSì— Docker ì„¤ì¹˜í•˜ê¸°:\u003c/h1\u003e\n\u003cp\u003eDockerë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— íŒ¨í‚¤ì§€ ì¸ë±ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ì‹¤ì²œë²•ì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eapt update\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHTTPSë¥¼ í†µí•´ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  Dockerì— í•„ìš”í•œ ëª‡ ê°€ì§€ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eapt install -y apt-transport-https ca-certificates curl software-properties-common\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì‹œìŠ¤í…œì— Dockerì˜ ê³µì‹ GPG í‚¤ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecurl -fsSL \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDocker ë¦¬í¬ì§€í† ë¦¬ë¥¼ APT ì›ë³¸ì— ì¶”ê°€í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eadd-apt-repository \u003cspan class=\"hljs-string\"\u003e\"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eí•œë²ˆ ë” íŒ¨í‚¤ì§€ ì¸ë±ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eapt update\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìµœì‹  ë²„ì „ì˜ Docker CE (Community Edition)ì™€ containerdë¥¼ í•¨ê»˜ ì„¤ì¹˜í•˜ë ¤ë©´:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eapt install -y docker-ce docker-ce-cli containerd.io\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDocker ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ê³  ë¶€íŒ… ì‹œ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ë„ë¡ ì„¤ì •í•˜ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esystemctl start docker\nsystemctl enable docker\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ Dockerê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì´ ëª…ë ¹ì€ Docker ë²„ì „ ì •ë³´ë¥¼ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edocker --version\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ, í”„ë¼ì´ë¹— Docker ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•˜ì„¸ìš”.\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eë„ì»¤ ë„¤íŠ¸ì›Œí¬ ìƒì„± -d bridge private\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 5: LetsEncrypt ì„¤ì¹˜í•˜ê¸°:\u003c/h1\u003e\n\u003cp\u003eë¡œì»¬ ë¨¸ì‹ ì—ì„œ í„°ë¯¸ë„ì„ ì—´ê³  SSHë¥¼ ì‚¬ìš©í•˜ì—¬ VPSì— ì—°ê²°í•©ë‹ˆë‹¤. ì‹¤ì œ VPSì˜ IP ì£¼ì†Œë¡œ your_server_ipë¥¼ ëŒ€ì²´í•˜ì‹­ì‹œì˜¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003essh root@your_server_ip\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ Let's Encrypt ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emkdir -p /letsencrypt \u0026#x26;\u0026#x26; touch /letsencrypt/acme.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e \u0026#x26;\u0026#x26; chmod \u003cspan class=\"hljs-number\"\u003e600\u003c/span\u003e /letsencrypt/acme.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 6: ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬\u003c/h1\u003e\n\u003cp\u003eì²˜ìŒë¶€í„° ëª¨ë“  ë‹¨ê³„ë¥¼ ê±°ì³ config/deploy.yml íŒŒì¼ì„ ì‘ì„±í–ˆê³  ë°°í¬í•  ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ë©´, ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekamal setup\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eStep 7: ì¼ì¼ ì—…ë¬´ íë¦„\u003c/h1\u003e\n\u003cp\u003eì¹´ë§ì˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§¤ì¼ ë°°í¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cp\u003eì•±ì˜ ìƒˆ ë²„ì „ì„ ë°°í¬í•˜ë ¤ë©´:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekamal deploy\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eí™˜ê²½ ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekamal env push\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìƒˆ ì»¨í…Œì´ë„ˆì—ì„œ bash ì„¸ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekamal app exec -i bash\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆì—ì„œ Rails ì½˜ì†”ì„ ì‹œì‘í•˜ë ¤ë©´:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekamal app exec -i â€˜bin/rails \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003eâ€™\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë¡œê·¸ ë³´ê¸°:\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ekamal ì•± ë¡œê·¸\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eê²°ë¡ \u003c/h1\u003e\n\u003cp\u003eì¶•í•˜í•©ë‹ˆë‹¤! ì¹´ë§(Kamal)ì„ ì‚¬ìš©í•˜ì—¬ ë””ì§€í„ˆì˜¤ì…˜(DigitalOcean) VPSì—ì„œ PostgreSQLê³¼ í•¨ê»˜ ë£¨ë¹„ ì˜¨ ë ˆì¼ì¦ˆ(Ruby on Rails) ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ë°°í¬í–ˆìŠµë‹ˆë‹¤. ì´ì œ êµ¬ì„±ëœ ë„ë©”ì¸ ì´ë¦„ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸš€\u003c/p\u003e\n\u003cp\u003eì´ í¬ìŠ¤íŠ¸ê°€ ë§ˆìŒì— ë“¤ì—ˆë‹¤ë©´ ì¢‹ì•„ìš”ë¥¼ ëˆŒëŸ¬ ì£¼ì‹œê³  ë¯¸ë””ì—„(Medium)ê³¼ íŠ¸ìœ„í„°(Twitter)ì—ì„œë„ ì €ë¥¼ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”(\u003ca href=\"https://twitter.com/royalty568\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://twitter.com/royalty568\u003c/a\u003e).\u003c/p\u003e\n\u003c!-- ui-station ì‚¬ê°í˜• --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì‹œê°„ì„ ì ˆì•½í•˜ê³  ì•±ì„ ì¦‰ì‹œ êµ¬ì¶•í•˜ê³ ì í•œë‹¤ë©´ Rails ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ë¥¼ ì°¾ê³  ê³„ì‹  ê²ƒ ê°™ë„¤ìš”. \u003ca href=\"https://talha345.gumroad.com/l/rails7-bootstrap5-devise-fa-psql-boldo-boilerplate\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://talha345.gumroad.com/l/rails7-bootstrap5-devise-fa-psql-boldo-boilerplate\u003c/a\u003e ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-Step-by-StepGuidetoDeployingaRubyonRailsApplicationwithPostgreSQLonVPSusingKamal"},"buildId":"GsgRekSb--BvxYwv9FPn6","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>