<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Docker로 NestJS 애플리케이션 배포하는 방법 | ui-station</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://ui-station.github.io///post/2024-06-22-DeployingNestJSApplicationswithDocker" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Docker로 NestJS 애플리케이션 배포하는 방법 | ui-station" data-gatsby-head="true"/><meta property="og:title" content="Docker로 NestJS 애플리케이션 배포하는 방법 | ui-station" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-DeployingNestJSApplicationswithDocker_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://ui-station.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://ui-station.github.io///post/2024-06-22-DeployingNestJSApplicationswithDocker" data-gatsby-head="true"/><meta name="twitter:title" content="Docker로 NestJS 애플리케이션 배포하는 방법 | ui-station" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-DeployingNestJSApplicationswithDocker_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | ui-station" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 22:54" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-4f7b40c1114f0d09.js" defer=""></script><script src="/_next/static/YUMR4jSyk_WlOHHc7UfOk/_buildManifest.js" defer=""></script><script src="/_next/static/YUMR4jSyk_WlOHHc7UfOk/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UI STATION</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Docker로 NestJS 애플리케이션 배포하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Docker로 NestJS 애플리케이션 배포하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UI STATION</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-DeployingNestJSApplicationswithDocker&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-22-DeployingNestJSApplicationswithDocker_0.png" alt="이미지"></p>
<p>안녕하세요 여러분 👋, 여러분들이 잘 지내고 있기를 바라요! 오늘은 도커의 세계로 빠져보고, 응용 프로그램 개발과 배포에 미치는 변화를 이해해보려 합니다. 도커는 응용 프로그램과 종속성을 단일 컨테이너로 패키징하여 빌드, 배포 및 실행하는 방식을 혁신적으로 변화시켰습니다. 이는 다양한 환경 간에 일관성을 보장합니다. 이 블로그 포스트에서는 NestJS 응용 프로그램을 도커를 사용해 컨테이너화하고 원활하게 배포하는 과정을 이해해보겠습니다. 시작해봅시다!</p>
<h2>NestJS 프로젝트 설정 🛠️:</h2>
<p>먼저 간단한 NestJS 애플리케이션을 만들어봅시다. NestJS CLI가 설치되어 있지 않다면 다음 명령어로 설치할 수 있습니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">npm install -g @nestjs/cli
<span class="hljs-comment">// 새로운 nestjs 앱 생성하기</span>
nest <span class="hljs-keyword">new</span> my-nest-app
</code></pre>
<h2>Dockerfile 작성:</h2>
<p>Dockerfile을 만들기 전에 Docker 이미지와 컨테이너에 대한 단단한 기초적인 이해가 필요합니다. 다음과 같이 설명해보겠습니다:</p>
<p>Docker 이미지: Docker 이미지는 코드, 런타임, 라이브러리 및 환경 변수를 포함하여 소프트웨어 조각을 실행하는 데 필요한 모든 것이 포함된 가벼운 실행 가능한 것입니다.</p>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>도커 컨테이너: 도커 컨테이너는 코드와 모든 종속성을 포장하여 응용 프로그램이 다양한 컴퓨팅 환경에서 빠르고 신뢰성 있게 실행될 수 있도록 하는 경량, 휴대용, 자체 완비형 환경입니다.</p>
<p>이 컨테이너를 어디로든 이동하고 어떤 컴퓨터에서든 실행할 수 있으므로 소프트웨어 작업 여부를 걱정할 필요가 없습니다. 필요한 모든 것이 이미 안에 들어 있기 때문이죠.</p>
<p>도커 파일: Dockerfile은 응용 프로그램을 위한 도커 이미지를 구축하는 방법에 대한 일련의 명령을 포함하는 스크립트입니다. 프로젝트의 루트에 Dockerfile이라는 파일을 만들고 다음 내용을 추가하세요.</p>
<pre><code class="hljs language-js"># 공식 <span class="hljs-title class_">Node</span>.<span class="hljs-property">js</span> <span class="hljs-number">16</span> 이미지를 기본 이미지로 사용합니다
<span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">node</span>:<span class="hljs-number">16</span>-alpine

# 작업 디렉토리 설정
<span class="hljs-variable constant_">WORKDIR</span> /app

# package.<span class="hljs-property">json</span> 및 package-lock.<span class="hljs-property">json</span> 파일 복사
<span class="hljs-variable constant_">COPY</span> package*.<span class="hljs-property">json</span> ./

# 종속성 설치
<span class="hljs-variable constant_">RUN</span> npm install

# 나머지 응용 프로그램 코드 복사
<span class="hljs-variable constant_">COPY</span> . .

# <span class="hljs-title class_">NestJS</span> 응용 프로그램 빌드
<span class="hljs-variable constant_">RUN</span> npm run build

# 응용 프로그램 포트 노출
<span class="hljs-variable constant_">EXPOSE</span> <span class="hljs-number">3000</span>

# 응용 프로그램 시작
<span class="hljs-variable constant_">CMD</span> [<span class="hljs-string">"node"</span>, <span class="hljs-string">"dist/main"</span>]
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>.dockerignore 파일 만들기:</h2>
<p>.dockerignore 파일은 .gitignore 파일과 비슷하게 작동합니다. 이미지를 빌드할 때 Docker에게 무시해야 할 파일과 디렉토리를 알려줍니다. 프로젝트의 루트에 .dockerignore 파일을 만들고 다음 내용을 추가해주세요.</p>
<pre><code class="hljs language-js">node_modules;
dist.<span class="hljs-property">git</span>.<span class="hljs-property">gitignore</span>;
<span class="hljs-title class_">Dockerfile</span>;
</code></pre>
<h2>Docker 이미지 빌드 및 실행하기:</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이제 도커파일과 .dockerignore 파일이 있으니 도커 이미지를 빌드하고 실행해 봅시다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">//도커에서 이미지를 빌드하는 명령어</span>
docker build -t &#x3C;이미지-이름>:태그

<span class="hljs-comment">//예시: my-nest-app 이미지를 빌드하는 방법</span>
docker build -t my-nest-<span class="hljs-attr">app</span>:latest .
</code></pre>
<p>태그(Tag): 태그는 Docker 이미지의 특정 버전을 식별하는 라벨입니다. 동일한 이미지의 여러 버전을 관리하고 구분하는 데 사용됩니다.</p>
<h2>도커에서 이미지가 제대로 빌드되었는지 확인하는 방법:</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-comment">//도커 이미지 목록을 제공합니다.</span>
도커 이미지 목록 확인

<span class="hljs-variable constant_">REPOSITORY</span>          <span class="hljs-variable constant_">TAG</span>                 <span class="hljs-variable constant_">IMAGE</span> <span class="hljs-variable constant_">ID</span>            <span class="hljs-variable constant_">CREATED</span>             <span class="hljs-variable constant_">SIZE</span>
my-nest-app         latest              1d4f1e3f5b7e        <span class="hljs-number">2</span> hours ago         540MB
another-app         v1<span class="hljs-number">.0</span>                3e23f1c3e6a4        <span class="hljs-number">3</span> days ago          350MB
</code></pre>
<h2>도커 컨테이너 실행하기 :</h2>
<p>아래는 도커 컨테이너를 실행하는 명령어입니다. host_port는 사용하려는 기기의 포트를 나타내고, container_port는 컨테이너 내부에서 애플리케이션이 수신 대기하는 포트를 나타냅니다.</p>
<pre><code class="hljs language-js">docker run -p [host_port]:[container_port] [image_name]:[tag]
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>도커에 있는 컨테이너 목록 :</h2>
<pre><code class="hljs language-js"><span class="hljs-comment">// 모든 실행 중인 컨테이너 목록 표시</span>
docker ps

<span class="hljs-variable constant_">CONTAINER</span> <span class="hljs-variable constant_">ID</span>        <span class="hljs-variable constant_">IMAGE</span>               <span class="hljs-variable constant_">COMMAND</span>                  <span class="hljs-variable constant_">CREATED</span>             <span class="hljs-variable constant_">STATUS</span>              <span class="hljs-variable constant_">PORTS</span>                    <span class="hljs-variable constant_">NAMES</span>
f3b1c25a3ac8        my-nest-<span class="hljs-attr">app</span>:latest  <span class="hljs-string">"docker-entrypoint.s…"</span>   <span class="hljs-number">2</span> hours ago         <span class="hljs-title class_">Up</span> <span class="hljs-number">2</span> hours          <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">3000</span>-><span class="hljs-number">3000</span>/tcp   my-nest-app
a4d5f2b5c7a3        another-<span class="hljs-attr">app</span>:v1<span class="hljs-number">.0</span>    <span class="hljs-string">"python app.py"</span>          <span class="hljs-number">3</span> days ago          <span class="hljs-title class_">Up</span> <span class="hljs-number">3</span> days           <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">5000</span>-><span class="hljs-number">5000</span>/tcp   another-app
</code></pre>
<p>이제 <a href="http://localhost:3000" rel="nofollow" target="_blank">http://localhost:3000</a> 에서 접속할 수 있어요 🚀.</p>
<h1>도커 컴포즈 :</h1>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>도커 컴포즈는 여러 개의 컨테이너로 구성되는 도커 응용 프로그램을 정의하고 실행하는 도구입니다. NestJS 애플리케이션을 여러 개 실행하는 데 사용할 수 있습니다. 예를 들어, 마이크로서비스 또는 다른 서비스를 함께 실행하는 것이 가능합니다.</p>
<h2>NestJS 애플리케이션 설정:</h2>
<p>app1 및 app2라는 두 개의 애플리케이션을 생성할 것이며, NestJS 프로젝트를 만드는 방법은 동일합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// 첫 번째 애플리케이션 생성</span>
nest <span class="hljs-keyword">new</span> app1

<span class="hljs-comment">// 두 번째 애플리케이션 생성</span>
nest <span class="hljs-keyword">new</span> app2
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>각 응용 프로그램을 위한 도커 파일 작성:</h2>
<p>각 애플리케이션은 이미지를 빌드하기 위한 도커 파일이 필요합니다. 아래는 두 개의 NestJS 응용 프로그램에 동일한 도커 파일이 될 것입니다.</p>
<pre><code class="hljs language-js"># 공식 <span class="hljs-title class_">Node</span>.<span class="hljs-property">js</span> 이미지 사용
<span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">node</span>:<span class="hljs-number">16</span>-alpine

# 작업 디렉토리 생성 및 변경
<span class="hljs-variable constant_">WORKDIR</span> /app

# 응용 프로그램 종속성 파일을 이미지에 복사
<span class="hljs-variable constant_">COPY</span> package*.<span class="hljs-property">json</span> ./

# 종속성 설치
<span class="hljs-variable constant_">RUN</span> npm install

# 로컬 코드를 이미지에 복사
<span class="hljs-variable constant_">COPY</span> . .

# 응용 프로그램 빌드
<span class="hljs-variable constant_">RUN</span> npm run build

# 응용 프로그램 시작
<span class="hljs-variable constant_">CMD</span> [ <span class="hljs-string">"node"</span>, <span class="hljs-string">"dist/main.js"</span> ]
</code></pre>
<h2>도커 컴포즈 파일 작성:</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>루트 디렉토리에 docker-compose.yml 파일을 만들어서 두 애플리케이션을 위한 서비스를 정의해야 해요.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">//도커  compose 파일의 버전 컨트롤러를 지정.</span>
<span class="hljs-attr">version</span>: <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services</span>:
  <span class="hljs-attr">app1</span>:
    <span class="hljs-attr">build</span>:
      <span class="hljs-attr">context</span>: ./app1
      <span class="hljs-attr">dockerfile</span>: <span class="hljs-title class_">Dockerfile</span>
    <span class="hljs-comment">//컨테이너 내부의 포트 3000을 호스트 머신의 포트 3001로 매핑합니다.</span>
    <span class="hljs-attr">ports</span>:
      - <span class="hljs-string">"3001:3000"</span>
    <span class="hljs-attr">volumes</span>:
      - ./<span class="hljs-attr">app1</span>:/app
    <span class="hljs-attr">command</span>: [<span class="hljs-string">"npm"</span>, <span class="hljs-string">"run"</span>, <span class="hljs-string">"start:prod"</span>]

  <span class="hljs-attr">app2</span>:
    <span class="hljs-attr">build</span>:
      <span class="hljs-attr">context</span>: ./app2
      <span class="hljs-attr">dockerfile</span>: <span class="hljs-title class_">Dockerfile</span>
    <span class="hljs-comment">//컨테이너 내부의 포트 3000을 호스트 머신의 포트 3002로 매핑합니다.</span>
    <span class="hljs-attr">ports</span>:
      - <span class="hljs-string">"3002:3000"</span>
    <span class="hljs-attr">volumes</span>:
      - ./<span class="hljs-attr">app2</span>:/app
    <span class="hljs-attr">command</span>: [<span class="hljs-string">"npm"</span>, <span class="hljs-string">"run"</span>, <span class="hljs-string">"start:prod"</span>]
</code></pre>
<h2>파일 디렉토리 구조 :</h2>
<pre><code class="hljs language-js">root/
├── app1/
│   ├── <span class="hljs-title class_">Dockerfile</span>
│   ├── package.<span class="hljs-property">json</span>
│   ├── ...
├── app2/
│   ├── <span class="hljs-title class_">Dockerfile</span>
│   ├── package.<span class="hljs-property">json</span>
│   ├── ...
└── docker-compose.<span class="hljs-property">yml</span>
</code></pre>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>Docker Compose를 사용하여 응용 프로그램 빌드 및 실행하기:</h2>
<p>docker-compose build 명령어는 docker-compose.yml에 지정된 도커 이미지를 빌드하는 데 사용됩니다.</p>
<p>docker-compose up 명령어는 서비스를 실행하는 데 사용됩니다.</p>
<h2>컨테이너 중지 또는 제거하기:</h2>
<!-- ui-station 사각형 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="7249294152" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이 명령어는 docker-compose up 에 의해 생성된 네트워크를 포함하여 컨테이너 실행을 중지하고 그것들을 제거할 것입니다.</p>
<pre><code class="hljs language-js">docker-compose down

<span class="hljs-comment">// 컨테이너를 중지하지만 제거하지 않고 싶은 경우</span>
docker-compose stop
</code></pre>
<h2>결론 :</h2>
<p>이 블로그 포스트에서는 Docker를 사용하여 NestJS 애플리케이션을 컨테이너화하는 기본 사항을 다뤘습니다. Dockerfile을 작성하고 .dockerignore 파일을 만들고 Docker Compose를 사용하여 컨테이너 실행을 간소화했습니다. Docker를 사용하면 응용 프로그램이 다른 환경에서 일관되게 실행되도록 보장할 수 있어 배포 및 확장을 쉽게 할 수 있습니다.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Docker로 NestJS 애플리케이션 배포하는 방법","description":"","date":"2024-06-22 22:54","slug":"2024-06-22-DeployingNestJSApplicationswithDocker","content":"\n![이미지](/assets/img/2024-06-22-DeployingNestJSApplicationswithDocker_0.png)\n\n안녕하세요 여러분 👋, 여러분들이 잘 지내고 있기를 바라요! 오늘은 도커의 세계로 빠져보고, 응용 프로그램 개발과 배포에 미치는 변화를 이해해보려 합니다. 도커는 응용 프로그램과 종속성을 단일 컨테이너로 패키징하여 빌드, 배포 및 실행하는 방식을 혁신적으로 변화시켰습니다. 이는 다양한 환경 간에 일관성을 보장합니다. 이 블로그 포스트에서는 NestJS 응용 프로그램을 도커를 사용해 컨테이너화하고 원활하게 배포하는 과정을 이해해보겠습니다. 시작해봅시다!\n\n## NestJS 프로젝트 설정 🛠️:\n\n먼저 간단한 NestJS 애플리케이션을 만들어봅시다. NestJS CLI가 설치되어 있지 않다면 다음 명령어로 설치할 수 있습니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nnpm install -g @nestjs/cli\n// 새로운 nestjs 앱 생성하기\nnest new my-nest-app\n```\n\n## Dockerfile 작성:\n\nDockerfile을 만들기 전에 Docker 이미지와 컨테이너에 대한 단단한 기초적인 이해가 필요합니다. 다음과 같이 설명해보겠습니다:\n\nDocker 이미지: Docker 이미지는 코드, 런타임, 라이브러리 및 환경 변수를 포함하여 소프트웨어 조각을 실행하는 데 필요한 모든 것이 포함된 가벼운 실행 가능한 것입니다.\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n도커 컨테이너: 도커 컨테이너는 코드와 모든 종속성을 포장하여 응용 프로그램이 다양한 컴퓨팅 환경에서 빠르고 신뢰성 있게 실행될 수 있도록 하는 경량, 휴대용, 자체 완비형 환경입니다.\n\n이 컨테이너를 어디로든 이동하고 어떤 컴퓨터에서든 실행할 수 있으므로 소프트웨어 작업 여부를 걱정할 필요가 없습니다. 필요한 모든 것이 이미 안에 들어 있기 때문이죠.\n\n도커 파일: Dockerfile은 응용 프로그램을 위한 도커 이미지를 구축하는 방법에 대한 일련의 명령을 포함하는 스크립트입니다. 프로젝트의 루트에 Dockerfile이라는 파일을 만들고 다음 내용을 추가하세요.\n\n```js\n# 공식 Node.js 16 이미지를 기본 이미지로 사용합니다\nFROM node:16-alpine\n\n# 작업 디렉토리 설정\nWORKDIR /app\n\n# package.json 및 package-lock.json 파일 복사\nCOPY package*.json ./\n\n# 종속성 설치\nRUN npm install\n\n# 나머지 응용 프로그램 코드 복사\nCOPY . .\n\n# NestJS 응용 프로그램 빌드\nRUN npm run build\n\n# 응용 프로그램 포트 노출\nEXPOSE 3000\n\n# 응용 프로그램 시작\nCMD [\"node\", \"dist/main\"]\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## .dockerignore 파일 만들기:\n\n.dockerignore 파일은 .gitignore 파일과 비슷하게 작동합니다. 이미지를 빌드할 때 Docker에게 무시해야 할 파일과 디렉토리를 알려줍니다. 프로젝트의 루트에 .dockerignore 파일을 만들고 다음 내용을 추가해주세요.\n\n```js\nnode_modules;\ndist.git.gitignore;\nDockerfile;\n```\n\n## Docker 이미지 빌드 및 실행하기:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이제 도커파일과 .dockerignore 파일이 있으니 도커 이미지를 빌드하고 실행해 봅시다.\n\n```js\n//도커에서 이미지를 빌드하는 명령어\ndocker build -t \u003c이미지-이름\u003e:태그\n\n//예시: my-nest-app 이미지를 빌드하는 방법\ndocker build -t my-nest-app:latest .\n```\n\n태그(Tag): 태그는 Docker 이미지의 특정 버전을 식별하는 라벨입니다. 동일한 이미지의 여러 버전을 관리하고 구분하는 데 사용됩니다.\n\n## 도커에서 이미지가 제대로 빌드되었는지 확인하는 방법:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n//도커 이미지 목록을 제공합니다.\n도커 이미지 목록 확인\n\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nmy-nest-app         latest              1d4f1e3f5b7e        2 hours ago         540MB\nanother-app         v1.0                3e23f1c3e6a4        3 days ago          350MB\n```\n\n## 도커 컨테이너 실행하기 :\n\n아래는 도커 컨테이너를 실행하는 명령어입니다. host_port는 사용하려는 기기의 포트를 나타내고, container_port는 컨테이너 내부에서 애플리케이션이 수신 대기하는 포트를 나타냅니다.\n\n```js\ndocker run -p [host_port]:[container_port] [image_name]:[tag]\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 도커에 있는 컨테이너 목록 :\n\n```js\n// 모든 실행 중인 컨테이너 목록 표시\ndocker ps\n\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES\nf3b1c25a3ac8        my-nest-app:latest  \"docker-entrypoint.s…\"   2 hours ago         Up 2 hours          0.0.0.0:3000-\u003e3000/tcp   my-nest-app\na4d5f2b5c7a3        another-app:v1.0    \"python app.py\"          3 days ago          Up 3 days           0.0.0.0:5000-\u003e5000/tcp   another-app\n```\n\n이제 http://localhost:3000 에서 접속할 수 있어요 🚀.\n\n# 도커 컴포즈 :\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n도커 컴포즈는 여러 개의 컨테이너로 구성되는 도커 응용 프로그램을 정의하고 실행하는 도구입니다. NestJS 애플리케이션을 여러 개 실행하는 데 사용할 수 있습니다. 예를 들어, 마이크로서비스 또는 다른 서비스를 함께 실행하는 것이 가능합니다.\n\n## NestJS 애플리케이션 설정:\n\napp1 및 app2라는 두 개의 애플리케이션을 생성할 것이며, NestJS 프로젝트를 만드는 방법은 동일합니다.\n\n```js\n// 첫 번째 애플리케이션 생성\nnest new app1\n\n// 두 번째 애플리케이션 생성\nnest new app2\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 각 응용 프로그램을 위한 도커 파일 작성:\n\n각 애플리케이션은 이미지를 빌드하기 위한 도커 파일이 필요합니다. 아래는 두 개의 NestJS 응용 프로그램에 동일한 도커 파일이 될 것입니다.\n\n```js\n# 공식 Node.js 이미지 사용\nFROM node:16-alpine\n\n# 작업 디렉토리 생성 및 변경\nWORKDIR /app\n\n# 응용 프로그램 종속성 파일을 이미지에 복사\nCOPY package*.json ./\n\n# 종속성 설치\nRUN npm install\n\n# 로컬 코드를 이미지에 복사\nCOPY . .\n\n# 응용 프로그램 빌드\nRUN npm run build\n\n# 응용 프로그램 시작\nCMD [ \"node\", \"dist/main.js\" ]\n```\n\n## 도커 컴포즈 파일 작성:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n루트 디렉토리에 docker-compose.yml 파일을 만들어서 두 애플리케이션을 위한 서비스를 정의해야 해요.\n\n```js\n//도커  compose 파일의 버전 컨트롤러를 지정.\nversion: '3.8'\nservices:\n  app1:\n    build:\n      context: ./app1\n      dockerfile: Dockerfile\n    //컨테이너 내부의 포트 3000을 호스트 머신의 포트 3001로 매핑합니다.\n    ports:\n      - \"3001:3000\"\n    volumes:\n      - ./app1:/app\n    command: [\"npm\", \"run\", \"start:prod\"]\n\n  app2:\n    build:\n      context: ./app2\n      dockerfile: Dockerfile\n    //컨테이너 내부의 포트 3000을 호스트 머신의 포트 3002로 매핑합니다.\n    ports:\n      - \"3002:3000\"\n    volumes:\n      - ./app2:/app\n    command: [\"npm\", \"run\", \"start:prod\"]\n```\n\n## 파일 디렉토리 구조 :\n\n```js\nroot/\n├── app1/\n│   ├── Dockerfile\n│   ├── package.json\n│   ├── ...\n├── app2/\n│   ├── Dockerfile\n│   ├── package.json\n│   ├── ...\n└── docker-compose.yml\n```\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## Docker Compose를 사용하여 응용 프로그램 빌드 및 실행하기:\n\ndocker-compose build 명령어는 docker-compose.yml에 지정된 도커 이미지를 빌드하는 데 사용됩니다.\n\ndocker-compose up 명령어는 서비스를 실행하는 데 사용됩니다.\n\n## 컨테이너 중지 또는 제거하기:\n\n\u003c!-- ui-station 사각형 --\u003e\n\n\u003cins class=\"adsbygoogle\"\nstyle=\"display:block\"\ndata-ad-client=\"ca-pub-4877378276818686\"\ndata-ad-slot=\"7249294152\"\ndata-ad-format=\"auto\"\ndata-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이 명령어는 docker-compose up 에 의해 생성된 네트워크를 포함하여 컨테이너 실행을 중지하고 그것들을 제거할 것입니다.\n\n```js\ndocker-compose down\n\n// 컨테이너를 중지하지만 제거하지 않고 싶은 경우\ndocker-compose stop\n```\n\n## 결론 :\n\n이 블로그 포스트에서는 Docker를 사용하여 NestJS 애플리케이션을 컨테이너화하는 기본 사항을 다뤘습니다. Dockerfile을 작성하고 .dockerignore 파일을 만들고 Docker Compose를 사용하여 컨테이너 실행을 간소화했습니다. Docker를 사용하면 응용 프로그램이 다른 환경에서 일관되게 실행되도록 보장할 수 있어 배포 및 확장을 쉽게 할 수 있습니다.\n","ogImage":{"url":"/assets/img/2024-06-22-DeployingNestJSApplicationswithDocker_0.png"},"coverImage":"/assets/img/2024-06-22-DeployingNestJSApplicationswithDocker_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DeployingNestJSApplicationswithDocker_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e안녕하세요 여러분 👋, 여러분들이 잘 지내고 있기를 바라요! 오늘은 도커의 세계로 빠져보고, 응용 프로그램 개발과 배포에 미치는 변화를 이해해보려 합니다. 도커는 응용 프로그램과 종속성을 단일 컨테이너로 패키징하여 빌드, 배포 및 실행하는 방식을 혁신적으로 변화시켰습니다. 이는 다양한 환경 간에 일관성을 보장합니다. 이 블로그 포스트에서는 NestJS 응용 프로그램을 도커를 사용해 컨테이너화하고 원활하게 배포하는 과정을 이해해보겠습니다. 시작해봅시다!\u003c/p\u003e\n\u003ch2\u003eNestJS 프로젝트 설정 🛠️:\u003c/h2\u003e\n\u003cp\u003e먼저 간단한 NestJS 애플리케이션을 만들어봅시다. NestJS CLI가 설치되어 있지 않다면 다음 명령어로 설치할 수 있습니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install -g @nestjs/cli\n\u003cspan class=\"hljs-comment\"\u003e// 새로운 nestjs 앱 생성하기\u003c/span\u003e\nnest \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e my-nest-app\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eDockerfile 작성:\u003c/h2\u003e\n\u003cp\u003eDockerfile을 만들기 전에 Docker 이미지와 컨테이너에 대한 단단한 기초적인 이해가 필요합니다. 다음과 같이 설명해보겠습니다:\u003c/p\u003e\n\u003cp\u003eDocker 이미지: Docker 이미지는 코드, 런타임, 라이브러리 및 환경 변수를 포함하여 소프트웨어 조각을 실행하는 데 필요한 모든 것이 포함된 가벼운 실행 가능한 것입니다.\u003c/p\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e도커 컨테이너: 도커 컨테이너는 코드와 모든 종속성을 포장하여 응용 프로그램이 다양한 컴퓨팅 환경에서 빠르고 신뢰성 있게 실행될 수 있도록 하는 경량, 휴대용, 자체 완비형 환경입니다.\u003c/p\u003e\n\u003cp\u003e이 컨테이너를 어디로든 이동하고 어떤 컴퓨터에서든 실행할 수 있으므로 소프트웨어 작업 여부를 걱정할 필요가 없습니다. 필요한 모든 것이 이미 안에 들어 있기 때문이죠.\u003c/p\u003e\n\u003cp\u003e도커 파일: Dockerfile은 응용 프로그램을 위한 도커 이미지를 구축하는 방법에 대한 일련의 명령을 포함하는 스크립트입니다. 프로젝트의 루트에 Dockerfile이라는 파일을 만들고 다음 내용을 추가하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 공식 \u003cspan class=\"hljs-title class_\"\u003eNode\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e 이미지를 기본 이미지로 사용합니다\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003enode\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e-alpine\n\n# 작업 디렉토리 설정\n\u003cspan class=\"hljs-variable constant_\"\u003eWORKDIR\u003c/span\u003e /app\n\n# package.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e 및 package-lock.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e 파일 복사\n\u003cspan class=\"hljs-variable constant_\"\u003eCOPY\u003c/span\u003e package*.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e ./\n\n# 종속성 설치\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN\u003c/span\u003e npm install\n\n# 나머지 응용 프로그램 코드 복사\n\u003cspan class=\"hljs-variable constant_\"\u003eCOPY\u003c/span\u003e . .\n\n# \u003cspan class=\"hljs-title class_\"\u003eNestJS\u003c/span\u003e 응용 프로그램 빌드\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN\u003c/span\u003e npm run build\n\n# 응용 프로그램 포트 노출\n\u003cspan class=\"hljs-variable constant_\"\u003eEXPOSE\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e\n\n# 응용 프로그램 시작\n\u003cspan class=\"hljs-variable constant_\"\u003eCMD\u003c/span\u003e [\u003cspan class=\"hljs-string\"\u003e\"node\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"dist/main\"\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e.dockerignore 파일 만들기:\u003c/h2\u003e\n\u003cp\u003e.dockerignore 파일은 .gitignore 파일과 비슷하게 작동합니다. 이미지를 빌드할 때 Docker에게 무시해야 할 파일과 디렉토리를 알려줍니다. 프로젝트의 루트에 .dockerignore 파일을 만들고 다음 내용을 추가해주세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enode_modules;\ndist.\u003cspan class=\"hljs-property\"\u003egit\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egitignore\u003c/span\u003e;\n\u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eDocker 이미지 빌드 및 실행하기:\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이제 도커파일과 .dockerignore 파일이 있으니 도커 이미지를 빌드하고 실행해 봅시다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e//도커에서 이미지를 빌드하는 명령어\u003c/span\u003e\ndocker build -t \u0026#x3C;이미지-이름\u003e:태그\n\n\u003cspan class=\"hljs-comment\"\u003e//예시: my-nest-app 이미지를 빌드하는 방법\u003c/span\u003e\ndocker build -t my-nest-\u003cspan class=\"hljs-attr\"\u003eapp\u003c/span\u003e:latest .\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e태그(Tag): 태그는 Docker 이미지의 특정 버전을 식별하는 라벨입니다. 동일한 이미지의 여러 버전을 관리하고 구분하는 데 사용됩니다.\u003c/p\u003e\n\u003ch2\u003e도커에서 이미지가 제대로 빌드되었는지 확인하는 방법:\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e//도커 이미지 목록을 제공합니다.\u003c/span\u003e\n도커 이미지 목록 확인\n\n\u003cspan class=\"hljs-variable constant_\"\u003eREPOSITORY\u003c/span\u003e          \u003cspan class=\"hljs-variable constant_\"\u003eTAG\u003c/span\u003e                 \u003cspan class=\"hljs-variable constant_\"\u003eIMAGE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eID\u003c/span\u003e            \u003cspan class=\"hljs-variable constant_\"\u003eCREATED\u003c/span\u003e             \u003cspan class=\"hljs-variable constant_\"\u003eSIZE\u003c/span\u003e\nmy-nest-app         latest              1d4f1e3f5b7e        \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e hours ago         540MB\nanother-app         v1\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e                3e23f1c3e6a4        \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e days ago          350MB\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e도커 컨테이너 실행하기 :\u003c/h2\u003e\n\u003cp\u003e아래는 도커 컨테이너를 실행하는 명령어입니다. host_port는 사용하려는 기기의 포트를 나타내고, container_port는 컨테이너 내부에서 애플리케이션이 수신 대기하는 포트를 나타냅니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edocker run -p [host_port]:[container_port] [image_name]:[tag]\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e도커에 있는 컨테이너 목록 :\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 모든 실행 중인 컨테이너 목록 표시\u003c/span\u003e\ndocker ps\n\n\u003cspan class=\"hljs-variable constant_\"\u003eCONTAINER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eID\u003c/span\u003e        \u003cspan class=\"hljs-variable constant_\"\u003eIMAGE\u003c/span\u003e               \u003cspan class=\"hljs-variable constant_\"\u003eCOMMAND\u003c/span\u003e                  \u003cspan class=\"hljs-variable constant_\"\u003eCREATED\u003c/span\u003e             \u003cspan class=\"hljs-variable constant_\"\u003eSTATUS\u003c/span\u003e              \u003cspan class=\"hljs-variable constant_\"\u003ePORTS\u003c/span\u003e                    \u003cspan class=\"hljs-variable constant_\"\u003eNAMES\u003c/span\u003e\nf3b1c25a3ac8        my-nest-\u003cspan class=\"hljs-attr\"\u003eapp\u003c/span\u003e:latest  \u003cspan class=\"hljs-string\"\u003e\"docker-entrypoint.s…\"\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e hours ago         \u003cspan class=\"hljs-title class_\"\u003eUp\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e hours          \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e-\u003e\u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e/tcp   my-nest-app\na4d5f2b5c7a3        another-\u003cspan class=\"hljs-attr\"\u003eapp\u003c/span\u003e:v1\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e    \u003cspan class=\"hljs-string\"\u003e\"python app.py\"\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e days ago          \u003cspan class=\"hljs-title class_\"\u003eUp\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e days           \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e5000\u003c/span\u003e-\u003e\u003cspan class=\"hljs-number\"\u003e5000\u003c/span\u003e/tcp   another-app\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 \u003ca href=\"http://localhost:3000\" rel=\"nofollow\" target=\"_blank\"\u003ehttp://localhost:3000\u003c/a\u003e 에서 접속할 수 있어요 🚀.\u003c/p\u003e\n\u003ch1\u003e도커 컴포즈 :\u003c/h1\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e도커 컴포즈는 여러 개의 컨테이너로 구성되는 도커 응용 프로그램을 정의하고 실행하는 도구입니다. NestJS 애플리케이션을 여러 개 실행하는 데 사용할 수 있습니다. 예를 들어, 마이크로서비스 또는 다른 서비스를 함께 실행하는 것이 가능합니다.\u003c/p\u003e\n\u003ch2\u003eNestJS 애플리케이션 설정:\u003c/h2\u003e\n\u003cp\u003eapp1 및 app2라는 두 개의 애플리케이션을 생성할 것이며, NestJS 프로젝트를 만드는 방법은 동일합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 첫 번째 애플리케이션 생성\u003c/span\u003e\nnest \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e app1\n\n\u003cspan class=\"hljs-comment\"\u003e// 두 번째 애플리케이션 생성\u003c/span\u003e\nnest \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e app2\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e각 응용 프로그램을 위한 도커 파일 작성:\u003c/h2\u003e\n\u003cp\u003e각 애플리케이션은 이미지를 빌드하기 위한 도커 파일이 필요합니다. 아래는 두 개의 NestJS 응용 프로그램에 동일한 도커 파일이 될 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 공식 \u003cspan class=\"hljs-title class_\"\u003eNode\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e 이미지 사용\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003enode\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e-alpine\n\n# 작업 디렉토리 생성 및 변경\n\u003cspan class=\"hljs-variable constant_\"\u003eWORKDIR\u003c/span\u003e /app\n\n# 응용 프로그램 종속성 파일을 이미지에 복사\n\u003cspan class=\"hljs-variable constant_\"\u003eCOPY\u003c/span\u003e package*.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e ./\n\n# 종속성 설치\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN\u003c/span\u003e npm install\n\n# 로컬 코드를 이미지에 복사\n\u003cspan class=\"hljs-variable constant_\"\u003eCOPY\u003c/span\u003e . .\n\n# 응용 프로그램 빌드\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN\u003c/span\u003e npm run build\n\n# 응용 프로그램 시작\n\u003cspan class=\"hljs-variable constant_\"\u003eCMD\u003c/span\u003e [ \u003cspan class=\"hljs-string\"\u003e\"node\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"dist/main.js\"\u003c/span\u003e ]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e도커 컴포즈 파일 작성:\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e루트 디렉토리에 docker-compose.yml 파일을 만들어서 두 애플리케이션을 위한 서비스를 정의해야 해요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e//도커  compose 파일의 버전 컨트롤러를 지정.\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'3.8'\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eservices\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003eapp1\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ebuild\u003c/span\u003e:\n      \u003cspan class=\"hljs-attr\"\u003econtext\u003c/span\u003e: ./app1\n      \u003cspan class=\"hljs-attr\"\u003edockerfile\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e//컨테이너 내부의 포트 3000을 호스트 머신의 포트 3001로 매핑합니다.\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports\u003c/span\u003e:\n      - \u003cspan class=\"hljs-string\"\u003e\"3001:3000\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e:\n      - ./\u003cspan class=\"hljs-attr\"\u003eapp1\u003c/span\u003e:/app\n    \u003cspan class=\"hljs-attr\"\u003ecommand\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\"npm\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"run\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"start:prod\"\u003c/span\u003e]\n\n  \u003cspan class=\"hljs-attr\"\u003eapp2\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ebuild\u003c/span\u003e:\n      \u003cspan class=\"hljs-attr\"\u003econtext\u003c/span\u003e: ./app2\n      \u003cspan class=\"hljs-attr\"\u003edockerfile\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e//컨테이너 내부의 포트 3000을 호스트 머신의 포트 3002로 매핑합니다.\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports\u003c/span\u003e:\n      - \u003cspan class=\"hljs-string\"\u003e\"3002:3000\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e:\n      - ./\u003cspan class=\"hljs-attr\"\u003eapp2\u003c/span\u003e:/app\n    \u003cspan class=\"hljs-attr\"\u003ecommand\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\"npm\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"run\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"start:prod\"\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e파일 디렉토리 구조 :\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eroot/\n├── app1/\n│   ├── \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e\n│   ├── package.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n│   ├── ...\n├── app2/\n│   ├── \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e\n│   ├── package.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n│   ├── ...\n└── docker-compose.\u003cspan class=\"hljs-property\"\u003eyml\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003eDocker Compose를 사용하여 응용 프로그램 빌드 및 실행하기:\u003c/h2\u003e\n\u003cp\u003edocker-compose build 명령어는 docker-compose.yml에 지정된 도커 이미지를 빌드하는 데 사용됩니다.\u003c/p\u003e\n\u003cp\u003edocker-compose up 명령어는 서비스를 실행하는 데 사용됩니다.\u003c/p\u003e\n\u003ch2\u003e컨테이너 중지 또는 제거하기:\u003c/h2\u003e\n\u003c!-- ui-station 사각형 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"7249294152\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이 명령어는 docker-compose up 에 의해 생성된 네트워크를 포함하여 컨테이너 실행을 중지하고 그것들을 제거할 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edocker-compose down\n\n\u003cspan class=\"hljs-comment\"\u003e// 컨테이너를 중지하지만 제거하지 않고 싶은 경우\u003c/span\u003e\ndocker-compose stop\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e결론 :\u003c/h2\u003e\n\u003cp\u003e이 블로그 포스트에서는 Docker를 사용하여 NestJS 애플리케이션을 컨테이너화하는 기본 사항을 다뤘습니다. Dockerfile을 작성하고 .dockerignore 파일을 만들고 Docker Compose를 사용하여 컨테이너 실행을 간소화했습니다. Docker를 사용하면 응용 프로그램이 다른 환경에서 일관되게 실행되도록 보장할 수 있어 배포 및 확장을 쉽게 할 수 있습니다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-DeployingNestJSApplicationswithDocker"},"buildId":"YUMR4jSyk_WlOHHc7UfOk","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>